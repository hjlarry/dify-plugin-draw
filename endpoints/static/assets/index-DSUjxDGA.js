const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-C1aaqocj.js","./index.dom-C3-224fz.js"])))=>i.map(i=>d[i]);
function EM(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C5={exports:{}},eg={},x5={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function PM(){if(Py)return Zt;Py=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function v(X){return X===null||typeof X!="object"?null:(X=p&&X[p]||X["@@iterator"],typeof X=="function"?X:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,y={};function S(X,Pe,ut){this.props=X,this.context=Pe,this.refs=y,this.updater=ut||w}S.prototype.isReactComponent={},S.prototype.setState=function(X,Pe){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,Pe,"setState")},S.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function A(){}A.prototype=S.prototype;function B(X,Pe,ut){this.props=X,this.context=Pe,this.refs=y,this.updater=ut||w}var R=B.prototype=new A;R.constructor=B,E(R,S.prototype),R.isPureReactComponent=!0;var _=Array.isArray,F=Object.prototype.hasOwnProperty,j={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function Q(X,Pe,ut){var Me,K={},fe=null,we=null;if(Pe!=null)for(Me in Pe.ref!==void 0&&(we=Pe.ref),Pe.key!==void 0&&(fe=""+Pe.key),Pe)F.call(Pe,Me)&&!z.hasOwnProperty(Me)&&(K[Me]=Pe[Me]);var De=arguments.length-2;if(De===1)K.children=ut;else if(1<De){for(var Ke=Array(De),Ue=0;Ue<De;Ue++)Ke[Ue]=arguments[Ue+2];K.children=Ke}if(X&&X.defaultProps)for(Me in De=X.defaultProps,De)K[Me]===void 0&&(K[Me]=De[Me]);return{$$typeof:e,type:X,key:fe,ref:we,props:K,_owner:j.current}}function se(X,Pe){return{$$typeof:e,type:X.type,key:Pe,ref:X.ref,props:X.props,_owner:X._owner}}function te(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function Ee(X){var Pe={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ut){return Pe[ut]})}var ie=/\/+/g;function ce(X,Pe){return typeof X=="object"&&X!==null&&X.key!=null?Ee(""+X.key):Pe.toString(36)}function me(X,Pe,ut,Me,K){var fe=typeof X;(fe==="undefined"||fe==="boolean")&&(X=null);var we=!1;if(X===null)we=!0;else switch(fe){case"string":case"number":we=!0;break;case"object":switch(X.$$typeof){case e:case t:we=!0}}if(we)return we=X,K=K(we),X=Me===""?"."+ce(we,0):Me,_(K)?(ut="",X!=null&&(ut=X.replace(ie,"$&/")+"/"),me(K,Pe,ut,"",function(Ue){return Ue})):K!=null&&(te(K)&&(K=se(K,ut+(!K.key||we&&we.key===K.key?"":(""+K.key).replace(ie,"$&/")+"/")+X)),Pe.push(K)),1;if(we=0,Me=Me===""?".":Me+":",_(X))for(var De=0;De<X.length;De++){fe=X[De];var Ke=Me+ce(fe,De);we+=me(fe,Pe,ut,Ke,K)}else if(Ke=v(X),typeof Ke=="function")for(X=Ke.call(X),De=0;!(fe=X.next()).done;)fe=fe.value,Ke=Me+ce(fe,De++),we+=me(fe,Pe,ut,Ke,K);else if(fe==="object")throw Pe=String(X),Error("Objects are not valid as a React child (found: "+(Pe==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":Pe)+"). If you meant to render a collection of children, use an array instead.");return we}function Ce(X,Pe,ut){if(X==null)return X;var Me=[],K=0;return me(X,Me,"","",function(fe){return Pe.call(ut,fe,K++)}),Me}function Fe(X){if(X._status===-1){var Pe=X._result;Pe=Pe(),Pe.then(function(ut){(X._status===0||X._status===-1)&&(X._status=1,X._result=ut)},function(ut){(X._status===0||X._status===-1)&&(X._status=2,X._result=ut)}),X._status===-1&&(X._status=0,X._result=Pe)}if(X._status===1)return X._result.default;throw X._result}var Ae={current:null},pe={transition:null},ue={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:pe,ReactCurrentOwner:j};function ye(){throw Error("act(...) is not supported in production builds of React.")}return Zt.Children={map:Ce,forEach:function(X,Pe,ut){Ce(X,function(){Pe.apply(this,arguments)},ut)},count:function(X){var Pe=0;return Ce(X,function(){Pe++}),Pe},toArray:function(X){return Ce(X,function(Pe){return Pe})||[]},only:function(X){if(!te(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Zt.Component=S,Zt.Fragment=n,Zt.Profiler=i,Zt.PureComponent=B,Zt.StrictMode=r,Zt.Suspense=f,Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Zt.act=ye,Zt.cloneElement=function(X,Pe,ut){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var Me=E({},X.props),K=X.key,fe=X.ref,we=X._owner;if(Pe!=null){if(Pe.ref!==void 0&&(fe=Pe.ref,we=j.current),Pe.key!==void 0&&(K=""+Pe.key),X.type&&X.type.defaultProps)var De=X.type.defaultProps;for(Ke in Pe)F.call(Pe,Ke)&&!z.hasOwnProperty(Ke)&&(Me[Ke]=Pe[Ke]===void 0&&De!==void 0?De[Ke]:Pe[Ke])}var Ke=arguments.length-2;if(Ke===1)Me.children=ut;else if(1<Ke){De=Array(Ke);for(var Ue=0;Ue<Ke;Ue++)De[Ue]=arguments[Ue+2];Me.children=De}return{$$typeof:e,type:X.type,key:K,ref:fe,props:Me,_owner:we}},Zt.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:o,_context:X},X.Consumer=X},Zt.createElement=Q,Zt.createFactory=function(X){var Pe=Q.bind(null,X);return Pe.type=X,Pe},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(X){return{$$typeof:a,render:X}},Zt.isValidElement=te,Zt.lazy=function(X){return{$$typeof:d,_payload:{_status:-1,_result:X},_init:Fe}},Zt.memo=function(X,Pe){return{$$typeof:h,type:X,compare:Pe===void 0?null:Pe}},Zt.startTransition=function(X){var Pe=pe.transition;pe.transition={};try{X()}finally{pe.transition=Pe}},Zt.unstable_act=ye,Zt.useCallback=function(X,Pe){return Ae.current.useCallback(X,Pe)},Zt.useContext=function(X){return Ae.current.useContext(X)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(X){return Ae.current.useDeferredValue(X)},Zt.useEffect=function(X,Pe){return Ae.current.useEffect(X,Pe)},Zt.useId=function(){return Ae.current.useId()},Zt.useImperativeHandle=function(X,Pe,ut){return Ae.current.useImperativeHandle(X,Pe,ut)},Zt.useInsertionEffect=function(X,Pe){return Ae.current.useInsertionEffect(X,Pe)},Zt.useLayoutEffect=function(X,Pe){return Ae.current.useLayoutEffect(X,Pe)},Zt.useMemo=function(X,Pe){return Ae.current.useMemo(X,Pe)},Zt.useReducer=function(X,Pe,ut){return Ae.current.useReducer(X,Pe,ut)},Zt.useRef=function(X){return Ae.current.useRef(X)},Zt.useState=function(X){return Ae.current.useState(X)},Zt.useSyncExternalStore=function(X,Pe,ut){return Ae.current.useSyncExternalStore(X,Pe,ut)},Zt.useTransition=function(){return Ae.current.useTransition()},Zt.version="18.3.1",Zt}var Sy;function i4(){return Sy||(Sy=1,x5.exports=PM()),x5.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function SM(){if(Dy)return eg;Dy=1;var e=i4(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,f,h){var d,p={},v=null,w=null;h!==void 0&&(v=""+h),f.key!==void 0&&(v=""+f.key),f.ref!==void 0&&(w=f.ref);for(d in f)r.call(f,d)&&!o.hasOwnProperty(d)&&(p[d]=f[d]);if(a&&a.defaultProps)for(d in f=a.defaultProps,f)p[d]===void 0&&(p[d]=f[d]);return{$$typeof:t,type:a,key:v,ref:w,props:p,_owner:i.current}}return eg.Fragment=n,eg.jsx=s,eg.jsxs=s,eg}var Ty;function DM(){return Ty||(Ty=1,C5.exports=SM()),C5.exports}var b=DM(),$=i4();const Pt=uc($),TM=EM({__proto__:null,default:Pt},[$]);var $2={},E5={exports:{}},ao={},P5={exports:{}},S5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function AM(){return Ay||(Ay=1,function(e){function t(pe,ue){var ye=pe.length;pe.push(ue);e:for(;0<ye;){var X=ye-1>>>1,Pe=pe[X];if(0<i(Pe,ue))pe[X]=ue,pe[ye]=Pe,ye=X;else break e}}function n(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var ue=pe[0],ye=pe.pop();if(ye!==ue){pe[0]=ye;e:for(var X=0,Pe=pe.length,ut=Pe>>>1;X<ut;){var Me=2*(X+1)-1,K=pe[Me],fe=Me+1,we=pe[fe];if(0>i(K,ye))fe<Pe&&0>i(we,K)?(pe[X]=we,pe[fe]=ye,X=fe):(pe[X]=K,pe[Me]=ye,X=Me);else if(fe<Pe&&0>i(we,ye))pe[X]=we,pe[fe]=ye,X=fe;else break e}}return ue}function i(pe,ue){var ye=pe.sortIndex-ue.sortIndex;return ye!==0?ye:pe.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var f=[],h=[],d=1,p=null,v=3,w=!1,E=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(pe){for(var ue=n(h);ue!==null;){if(ue.callback===null)r(h);else if(ue.startTime<=pe)r(h),ue.sortIndex=ue.expirationTime,t(f,ue);else break;ue=n(h)}}function _(pe){if(y=!1,R(pe),!E)if(n(f)!==null)E=!0,Fe(F);else{var ue=n(h);ue!==null&&Ae(_,ue.startTime-pe)}}function F(pe,ue){E=!1,y&&(y=!1,A(Q),Q=-1),w=!0;var ye=v;try{for(R(ue),p=n(f);p!==null&&(!(p.expirationTime>ue)||pe&&!Ee());){var X=p.callback;if(typeof X=="function"){p.callback=null,v=p.priorityLevel;var Pe=X(p.expirationTime<=ue);ue=e.unstable_now(),typeof Pe=="function"?p.callback=Pe:p===n(f)&&r(f),R(ue)}else r(f);p=n(f)}if(p!==null)var ut=!0;else{var Me=n(h);Me!==null&&Ae(_,Me.startTime-ue),ut=!1}return ut}finally{p=null,v=ye,w=!1}}var j=!1,z=null,Q=-1,se=5,te=-1;function Ee(){return!(e.unstable_now()-te<se)}function ie(){if(z!==null){var pe=e.unstable_now();te=pe;var ue=!0;try{ue=z(!0,pe)}finally{ue?ce():(j=!1,z=null)}}else j=!1}var ce;if(typeof B=="function")ce=function(){B(ie)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ce=me.port2;me.port1.onmessage=ie,ce=function(){Ce.postMessage(null)}}else ce=function(){S(ie,0)};function Fe(pe){z=pe,j||(j=!0,ce())}function Ae(pe,ue){Q=S(function(){pe(e.unstable_now())},ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){E||w||(E=!0,Fe(F))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(pe){switch(v){case 1:case 2:case 3:var ue=3;break;default:ue=v}var ye=v;v=ue;try{return pe()}finally{v=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,ue){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var ye=v;v=pe;try{return ue()}finally{v=ye}},e.unstable_scheduleCallback=function(pe,ue,ye){var X=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?X+ye:X):ye=X,pe){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ye+Pe,pe={id:d++,callback:ue,priorityLevel:pe,startTime:ye,expirationTime:Pe,sortIndex:-1},ye>X?(pe.sortIndex=ye,t(h,pe),n(f)===null&&pe===n(h)&&(y?(A(Q),Q=-1):y=!0,Ae(_,ye-X))):(pe.sortIndex=Pe,t(f,pe),E||w||(E=!0,Fe(F))),pe},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(pe){var ue=v;return function(){var ye=v;v=ue;try{return pe.apply(this,arguments)}finally{v=ye}}}}(S5)),S5}var By;function BM(){return By||(By=1,P5.exports=AM()),P5.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function RM(){if(Ry)return ao;Ry=1;var e=i4(),t=BM();function n(u){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+u,m=1;m<arguments.length;m++)l+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+u+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(u,l){s(u,l),s(u+"Capture",l)}function s(u,l){for(i[u]=l,u=0;u<l.length;u++)r.add(l[u])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(u){return f.call(p,u)?!0:f.call(d,u)?!1:h.test(u)?p[u]=!0:(d[u]=!0,!1)}function w(u,l,m,C){if(m!==null&&m.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return C?!1:m!==null?!m.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function E(u,l,m,C){if(l===null||typeof l>"u"||w(u,l,m,C))return!0;if(C)return!1;if(m!==null)switch(m.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function y(u,l,m,C,P,D,L){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=C,this.attributeNamespace=P,this.mustUseProperty=m,this.propertyName=u,this.type=l,this.sanitizeURL=D,this.removeEmptyString=L}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){S[u]=new y(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var l=u[0];S[l]=new y(l,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){S[u]=new y(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){S[u]=new y(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){S[u]=new y(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){S[u]=new y(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){S[u]=new y(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){S[u]=new y(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){S[u]=new y(u,5,!1,u.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function B(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var l=u.replace(A,B);S[l]=new y(l,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var l=u.replace(A,B);S[l]=new y(l,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var l=u.replace(A,B);S[l]=new y(l,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){S[u]=new y(u,1,!1,u.toLowerCase(),null,!1,!1)}),S.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){S[u]=new y(u,1,!1,u.toLowerCase(),null,!0,!0)});function R(u,l,m,C){var P=S.hasOwnProperty(l)?S[l]:null;(P!==null?P.type!==0:C||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,m,P,C)&&(m=null),C||P===null?v(l)&&(m===null?u.removeAttribute(l):u.setAttribute(l,""+m)):P.mustUseProperty?u[P.propertyName]=m===null?P.type===3?!1:"":m:(l=P.attributeName,C=P.attributeNamespace,m===null?u.removeAttribute(l):(P=P.type,m=P===3||P===4&&m===!0?"":""+m,C?u.setAttributeNS(C,l,m):u.setAttribute(l,m))))}var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),j=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),pe=Symbol.iterator;function ue(u){return u===null||typeof u!="object"?null:(u=pe&&u[pe]||u["@@iterator"],typeof u=="function"?u:null)}var ye=Object.assign,X;function Pe(u){if(X===void 0)try{throw Error()}catch(m){var l=m.stack.trim().match(/\n( *(at )?)/);X=l&&l[1]||""}return`
`+X+u}var ut=!1;function Me(u,l){if(!u||ut)return"";ut=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(xe){var C=xe}Reflect.construct(u,[],l)}else{try{l.call()}catch(xe){C=xe}u.call(l.prototype)}else{try{throw Error()}catch(xe){C=xe}u()}}catch(xe){if(xe&&C&&typeof xe.stack=="string"){for(var P=xe.stack.split(`
`),D=C.stack.split(`
`),L=P.length-1,V=D.length-1;1<=L&&0<=V&&P[L]!==D[V];)V--;for(;1<=L&&0<=V;L--,V--)if(P[L]!==D[V]){if(L!==1||V!==1)do if(L--,V--,0>V||P[L]!==D[V]){var Z=`
`+P[L].replace(" at new "," at ");return u.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",u.displayName)),Z}while(1<=L&&0<=V);break}}}finally{ut=!1,Error.prepareStackTrace=m}return(u=u?u.displayName||u.name:"")?Pe(u):""}function K(u){switch(u.tag){case 5:return Pe(u.type);case 16:return Pe("Lazy");case 13:return Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 2:case 15:return u=Me(u.type,!1),u;case 11:return u=Me(u.type.render,!1),u;case 1:return u=Me(u.type,!0),u;default:return""}}function fe(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case z:return"Fragment";case j:return"Portal";case se:return"Profiler";case Q:return"StrictMode";case ce:return"Suspense";case me:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case Ee:return(u.displayName||"Context")+".Consumer";case te:return(u._context.displayName||"Context")+".Provider";case ie:var l=u.render;return u=u.displayName,u||(u=l.displayName||l.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Ce:return l=u.displayName||null,l!==null?l:fe(u.type)||"Memo";case Fe:l=u._payload,u=u._init;try{return fe(u(l))}catch{}}return null}function we(u){var l=u.type;switch(u.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=l.render,u=u.displayName||u.name||"",l.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(l);case 8:return l===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function De(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Ke(u){var l=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ue(u){var l=Ke(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,l),C=""+u[l];if(!u.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var P=m.get,D=m.set;return Object.defineProperty(u,l,{configurable:!0,get:function(){return P.call(this)},set:function(L){C=""+L,D.call(this,L)}}),Object.defineProperty(u,l,{enumerable:m.enumerable}),{getValue:function(){return C},setValue:function(L){C=""+L},stopTracking:function(){u._valueTracker=null,delete u[l]}}}}function Rt(u){u._valueTracker||(u._valueTracker=Ue(u))}function It(u){if(!u)return!1;var l=u._valueTracker;if(!l)return!0;var m=l.getValue(),C="";return u&&(C=Ke(u)?u.checked?"true":"false":u.value),u=C,u!==m?(l.setValue(u),!0):!1}function St(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function lt(u,l){var m=l.checked;return ye({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??u._wrapperState.initialChecked})}function yt(u,l){var m=l.defaultValue==null?"":l.defaultValue,C=l.checked!=null?l.checked:l.defaultChecked;m=De(l.value!=null?l.value:m),u._wrapperState={initialChecked:C,initialValue:m,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function wn(u,l){l=l.checked,l!=null&&R(u,"checked",l,!1)}function Mt(u,l){wn(u,l);var m=De(l.value),C=l.type;if(m!=null)C==="number"?(m===0&&u.value===""||u.value!=m)&&(u.value=""+m):u.value!==""+m&&(u.value=""+m);else if(C==="submit"||C==="reset"){u.removeAttribute("value");return}l.hasOwnProperty("value")?ir(u,l.type,m):l.hasOwnProperty("defaultValue")&&ir(u,l.type,De(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(u.defaultChecked=!!l.defaultChecked)}function _n(u,l,m){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var C=l.type;if(!(C!=="submit"&&C!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+u._wrapperState.initialValue,m||l===u.value||(u.value=l),u.defaultValue=l}m=u.name,m!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,m!==""&&(u.name=m)}function ir(u,l,m){(l!=="number"||St(u.ownerDocument)!==u)&&(m==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+m&&(u.defaultValue=""+m))}var Tn=Array.isArray;function tn(u,l,m,C){if(u=u.options,l){l={};for(var P=0;P<m.length;P++)l["$"+m[P]]=!0;for(m=0;m<u.length;m++)P=l.hasOwnProperty("$"+u[m].value),u[m].selected!==P&&(u[m].selected=P),P&&C&&(u[m].defaultSelected=!0)}else{for(m=""+De(m),l=null,P=0;P<u.length;P++){if(u[P].value===m){u[P].selected=!0,C&&(u[P].defaultSelected=!0);return}l!==null||u[P].disabled||(l=u[P])}l!==null&&(l.selected=!0)}}function nn(u,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return ye({},l,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function Yn(u,l){var m=l.value;if(m==null){if(m=l.children,l=l.defaultValue,m!=null){if(l!=null)throw Error(n(92));if(Tn(m)){if(1<m.length)throw Error(n(93));m=m[0]}l=m}l==null&&(l=""),m=l}u._wrapperState={initialValue:De(m)}}function Nn(u,l){var m=De(l.value),C=De(l.defaultValue);m!=null&&(m=""+m,m!==u.value&&(u.value=m),l.defaultValue==null&&u.defaultValue!==m&&(u.defaultValue=m)),C!=null&&(u.defaultValue=""+C)}function $t(u){var l=u.textContent;l===u._wrapperState.initialValue&&l!==""&&l!==null&&(u.value=l)}function Dr(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vr(u,l){return u==null||u==="http://www.w3.org/1999/xhtml"?Dr(l):u==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var An,yr=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,m,C,P){MSApp.execUnsafeLocalFunction(function(){return u(l,m,C,P)})}:u}(function(u,l){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=l;else{for(An=An||document.createElement("div"),An.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=An.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;l.firstChild;)u.appendChild(l.firstChild)}});function wr(u,l){if(l){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=l;return}}u.textContent=l}var or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zi=["Webkit","ms","Moz","O"];Object.keys(or).forEach(function(u){zi.forEach(function(l){l=l+u.charAt(0).toUpperCase()+u.substring(1),or[l]=or[u]})});function Vi(u,l,m){return l==null||typeof l=="boolean"||l===""?"":m||typeof l!="number"||l===0||or.hasOwnProperty(u)&&or[u]?(""+l).trim():l+"px"}function Ui(u,l){u=u.style;for(var m in l)if(l.hasOwnProperty(m)){var C=m.indexOf("--")===0,P=Vi(m,l[m],C);m==="float"&&(m="cssFloat"),C?u.setProperty(m,P):u[m]=P}}var Zu=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bs(u,l){if(l){if(Zu[u]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,u));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Eo(u,l){if(u.indexOf("-")===-1)return typeof l.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uu=null;function Qu(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var pi=null,Rs=null,Ms=null;function yc(u){if(u=Nr(u)){if(typeof pi!="function")throw Error(n(280));var l=u.stateNode;l&&(l=Fh(l),pi(u.stateNode,u.type,l))}}function th(u){Rs?Ms?Ms.push(u):Ms=[u]:Rs=u}function nh(){if(Rs){var u=Rs,l=Ms;if(Ms=Rs=null,yc(u),l)for(u=0;u<l.length;u++)yc(l[u])}}function rh(u,l){return u(l)}function wc(){}var Cc=!1;function ih(u,l,m){if(Cc)return u(l,m);Cc=!0;try{return rh(u,l,m)}finally{Cc=!1,(Rs!==null||Ms!==null)&&(wc(),nh())}}function Ju(u,l){var m=u.stateNode;if(m===null)return null;var C=Fh(m);if(C===null)return null;m=C[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(u=u.type,C=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!C;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(n(231,l,typeof m));return m}var ea=!1;if(a)try{var ta={};Object.defineProperty(ta,"passive",{get:function(){ea=!0}}),window.addEventListener("test",ta,ta),window.removeEventListener("test",ta,ta)}catch{ea=!1}function xc(u,l,m,C,P,D,L,V,Z){var xe=Array.prototype.slice.call(arguments,3);try{l.apply(m,xe)}catch(_e){this.onError(_e)}}var au=!1,Ja=null,el=!1,Ec=null,F0={onError:function(u){au=!0,Ja=u}};function L0(u,l,m,C,P,D,L,V,Z){au=!1,Ja=null,xc.apply(F0,arguments)}function _0(u,l,m,C,P,D,L,V,Z){if(L0.apply(this,arguments),au){if(au){var xe=Ja;au=!1,Ja=null}else throw Error(n(198));el||(el=!0,Ec=xe)}}function bs(u){var l=u,m=u;if(u.alternate)for(;l.return;)l=l.return;else{u=l;do l=u,(l.flags&4098)!==0&&(m=l.return),u=l.return;while(u)}return l.tag===3?m:null}function Pc(u){if(u.tag===13){var l=u.memoizedState;if(l===null&&(u=u.alternate,u!==null&&(l=u.memoizedState)),l!==null)return l.dehydrated}return null}function oh(u){if(bs(u)!==u)throw Error(n(188))}function N0(u){var l=u.alternate;if(!l){if(l=bs(u),l===null)throw Error(n(188));return l!==u?null:u}for(var m=u,C=l;;){var P=m.return;if(P===null)break;var D=P.alternate;if(D===null){if(C=P.return,C!==null){m=C;continue}break}if(P.child===D.child){for(D=P.child;D;){if(D===m)return oh(P),u;if(D===C)return oh(P),l;D=D.sibling}throw Error(n(188))}if(m.return!==C.return)m=P,C=D;else{for(var L=!1,V=P.child;V;){if(V===m){L=!0,m=P,C=D;break}if(V===C){L=!0,C=P,m=D;break}V=V.sibling}if(!L){for(V=D.child;V;){if(V===m){L=!0,m=D,C=P;break}if(V===C){L=!0,C=D,m=P;break}V=V.sibling}if(!L)throw Error(n(189))}}if(m.alternate!==C)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?u:l}function sh(u){return u=N0(u),u!==null?uh(u):null}function uh(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var l=uh(u);if(l!==null)return l;u=u.sibling}return null}var ah=t.unstable_scheduleCallback,lh=t.unstable_cancelCallback,tl=t.unstable_shouldYield,ch=t.unstable_requestPaint,mn=t.unstable_now,fh=t.unstable_getCurrentPriorityLevel,Ko=t.unstable_ImmediatePriority,hh=t.unstable_UserBlockingPriority,Yo=t.unstable_NormalPriority,nl=t.unstable_LowPriority,Sc=t.unstable_IdlePriority,rl=null,mi=null;function H0(u){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(rl,u,void 0,(u.current.flags&128)===128)}catch{}}var Bi=Math.clz32?Math.clz32:W,H=Math.log,Y=Math.LN2;function W(u){return u>>>=0,u===0?32:31-(H(u)/Y|0)|0}var re=64,ae=4194304;function ee(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Be(u,l){var m=u.pendingLanes;if(m===0)return 0;var C=0,P=u.suspendedLanes,D=u.pingedLanes,L=m&268435455;if(L!==0){var V=L&~P;V!==0?C=ee(V):(D&=L,D!==0&&(C=ee(D)))}else L=m&~P,L!==0?C=ee(L):D!==0&&(C=ee(D));if(C===0)return 0;if(l!==0&&l!==C&&(l&P)===0&&(P=C&-C,D=l&-l,P>=D||P===16&&(D&4194240)!==0))return l;if((C&4)!==0&&(C|=m&16),l=u.entangledLanes,l!==0)for(u=u.entanglements,l&=C;0<l;)m=31-Bi(l),P=1<<m,C|=u[m],l&=~P;return C}function Ne(u,l){switch(u){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function je(u,l){for(var m=u.suspendedLanes,C=u.pingedLanes,P=u.expirationTimes,D=u.pendingLanes;0<D;){var L=31-Bi(D),V=1<<L,Z=P[L];Z===-1?((V&m)===0||(V&C)!==0)&&(P[L]=Ne(V,l)):Z<=l&&(u.expiredLanes|=V),D&=~V}}function $e(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Xe(){var u=re;return re<<=1,(re&4194240)===0&&(re=64),u}function tt(u){for(var l=[],m=0;31>m;m++)l.push(u);return l}function Ft(u,l,m){u.pendingLanes|=l,l!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,l=31-Bi(l),u[l]=m}function un(u,l){var m=u.pendingLanes&~l;u.pendingLanes=l,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=l,u.mutableReadLanes&=l,u.entangledLanes&=l,l=u.entanglements;var C=u.eventTimes;for(u=u.expirationTimes;0<m;){var P=31-Bi(m),D=1<<P;l[P]=0,C[P]=-1,u[P]=-1,m&=~D}}function Qt(u,l){var m=u.entangledLanes|=l;for(u=u.entanglements;m;){var C=31-Bi(m),P=1<<C;P&l|u[C]&l&&(u[C]|=l),m&=~P}}var wt=0;function Cn(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var Fr,qo,il,Dc,na,Tc=!1,ra=[],Zo=null,Po=null,lu=null,ol=new Map,Ac=new Map,cu=[],S7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tp(u,l){switch(u){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":lu=null;break;case"pointerover":case"pointerout":ol.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(l.pointerId)}}function ia(u,l,m,C,P,D){return u===null||u.nativeEvent!==D?(u={blockedOn:l,domEventName:m,eventSystemFlags:C,nativeEvent:D,targetContainers:[P]},l!==null&&(l=Nr(l),l!==null&&qo(l)),u):(u.eventSystemFlags|=C,l=u.targetContainers,P!==null&&l.indexOf(P)===-1&&l.push(P),u)}function D7(u,l,m,C,P){switch(l){case"focusin":return Zo=ia(Zo,u,l,m,C,P),!0;case"dragenter":return Po=ia(Po,u,l,m,C,P),!0;case"mouseover":return lu=ia(lu,u,l,m,C,P),!0;case"pointerover":var D=P.pointerId;return ol.set(D,ia(ol.get(D)||null,u,l,m,C,P)),!0;case"gotpointercapture":return D=P.pointerId,Ac.set(D,ia(Ac.get(D)||null,u,l,m,C,P)),!0}return!1}function Ap(u){var l=ts(u.target);if(l!==null){var m=bs(l);if(m!==null){if(l=m.tag,l===13){if(l=Pc(m),l!==null){u.blockedOn=l,na(u.priority,function(){il(m)});return}}else if(l===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function dh(u){if(u.blockedOn!==null)return!1;for(var l=u.targetContainers;0<l.length;){var m=mh(u.domEventName,u.eventSystemFlags,l[0],u.nativeEvent);if(m===null){m=u.nativeEvent;var C=new m.constructor(m.type,m);uu=C,m.target.dispatchEvent(C),uu=null}else return l=Nr(m),l!==null&&qo(l),u.blockedOn=m,!1;l.shift()}return!0}function Bp(u,l,m){dh(u)&&m.delete(l)}function T7(){Tc=!1,Zo!==null&&dh(Zo)&&(Zo=null),Po!==null&&dh(Po)&&(Po=null),lu!==null&&dh(lu)&&(lu=null),ol.forEach(Bp),Ac.forEach(Bp)}function xn(u,l){u.blockedOn===l&&(u.blockedOn=null,Tc||(Tc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,T7)))}function vn(u){function l(P){return xn(P,u)}if(0<ra.length){xn(ra[0],u);for(var m=1;m<ra.length;m++){var C=ra[m];C.blockedOn===u&&(C.blockedOn=null)}}for(Zo!==null&&xn(Zo,u),Po!==null&&xn(Po,u),lu!==null&&xn(lu,u),ol.forEach(l),Ac.forEach(l),m=0;m<cu.length;m++)C=cu[m],C.blockedOn===u&&(C.blockedOn=null);for(;0<cu.length&&(m=cu[0],m.blockedOn===null);)Ap(m),m.blockedOn===null&&cu.shift()}var sl=_.ReactCurrentBatchConfig,gh=!0;function A7(u,l,m,C){var P=wt,D=sl.transition;sl.transition=null;try{wt=1,G0(u,l,m,C)}finally{wt=P,sl.transition=D}}function B7(u,l,m,C){var P=wt,D=sl.transition;sl.transition=null;try{wt=4,G0(u,l,m,C)}finally{wt=P,sl.transition=D}}function G0(u,l,m,C){if(gh){var P=mh(u,l,m,C);if(P===null)r1(u,l,C,ph,m),Tp(u,C);else if(D7(P,u,l,m,C))C.stopPropagation();else if(Tp(u,C),l&4&&-1<S7.indexOf(u)){for(;P!==null;){var D=Nr(P);if(D!==null&&Fr(D),D=mh(u,l,m,C),D===null&&r1(u,l,C,ph,m),D===P)break;P=D}P!==null&&C.stopPropagation()}else r1(u,l,C,null,m)}}var ph=null;function mh(u,l,m,C){if(ph=null,u=Qu(C),u=ts(u),u!==null)if(l=bs(u),l===null)u=null;else if(m=l.tag,m===13){if(u=Pc(l),u!==null)return u;u=null}else if(m===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;u=null}else l!==u&&(u=null);return ph=u,null}function Rp(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fh()){case Ko:return 1;case hh:return 4;case Yo:case nl:return 16;case Sc:return 536870912;default:return 16}default:return 16}}var Hn=null,Bc=null,Qo=null;function $0(){if(Qo)return Qo;var u,l=Bc,m=l.length,C,P="value"in Hn?Hn.value:Hn.textContent,D=P.length;for(u=0;u<m&&l[u]===P[u];u++);var L=m-u;for(C=1;C<=L&&l[m-C]===P[D-C];C++);return Qo=P.slice(u,1<C?1-C:void 0)}function ul(u){var l=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&l===13&&(u=13)):u=l,u===10&&(u=13),32<=u||u===13?u:0}function Jr(){return!0}function W0(){return!1}function vi(u){function l(m,C,P,D,L){this._reactName=m,this._targetInst=P,this.type=C,this.nativeEvent=D,this.target=L,this.currentTarget=null;for(var V in u)u.hasOwnProperty(V)&&(m=u[V],this[V]=m?m(D):D[V]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Jr:W0,this.isPropagationStopped=W0,this}return ye(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),l}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vh=vi(oa),al=ye({},oa,{view:0,detail:0}),Mp=vi(al),ei,j0,Lr,yh=ye({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K0,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Lr&&(Lr&&u.type==="mousemove"?(ei=u.screenX-Lr.screenX,j0=u.screenY-Lr.screenY):j0=ei=0,Lr=u),ei)},movementY:function(u){return"movementY"in u?u.movementY:j0}}),z0=vi(yh),fu=ye({},yh,{dataTransfer:0}),wh=vi(fu),V0=ye({},al,{relatedTarget:0}),Rn=vi(V0),hu=ye({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),U0=vi(hu),R7=ye({},oa,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),X0=vi(R7),M7=ye({},oa,{data:0}),bp=vi(M7),b7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Op={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ll(u){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(u):(u=Ch[u])?!!l[u]:!1}function K0(){return ll}var Ip=ye({},al,{key:function(u){if(u.key){var l=b7[u.key]||u.key;if(l!=="Unidentified")return l}return u.type==="keypress"?(u=ul(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Op[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K0,charCode:function(u){return u.type==="keypress"?ul(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?ul(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),kp=vi(Ip),Y0=ye({},yh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xh=vi(Y0),Fp=ye({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K0}),O7=vi(Fp),q0=ye({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z0=vi(q0),I7=ye({},yh,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Lp=vi(I7),Ri=[9,13,27,32],Rc=a&&"CompositionEvent"in window,Os=null;a&&"documentMode"in document&&(Os=document.documentMode);var _p=a&&"TextEvent"in window&&!Os,Q0=a&&(!Rc||Os&&8<Os&&11>=Os),Np=" ",Hp=!1;function Gp(u,l){switch(u){case"keyup":return Ri.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $p(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var cl=!1;function fl(u,l){switch(u){case"compositionend":return $p(l);case"keypress":return l.which!==32?null:(Hp=!0,Np);case"textInput":return u=l.data,u===Np&&Hp?null:u;default:return null}}function k7(u,l){if(cl)return u==="compositionend"||!Rc&&Gp(u,l)?(u=$0(),Qo=Bc=Hn=null,cl=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Q0&&l.locale!=="ko"?null:l.data;default:return null}}var F7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eh(u){var l=u&&u.nodeName&&u.nodeName.toLowerCase();return l==="input"?!!F7[u.type]:l==="textarea"}function J0(u,l,m,C){th(C),l=bh(l,"onChange"),0<l.length&&(m=new vh("onChange","change",null,m,C),u.push({event:m,listeners:l}))}var Xi=null,du=null;function L7(u){Kp(u,0)}function Ph(u){var l=Nt(u);if(It(l))return u}function _7(u,l){if(u==="change")return l}var sa=!1;if(a){var Mi;if(a){var Sh="oninput"in document;if(!Sh){var Wp=document.createElement("div");Wp.setAttribute("oninput","return;"),Sh=typeof Wp.oninput=="function"}Mi=Sh}else Mi=!1;sa=Mi&&(!document.documentMode||9<document.documentMode)}function jp(){Xi&&(Xi.detachEvent("onpropertychange",zp),du=Xi=null)}function zp(u){if(u.propertyName==="value"&&Ph(du)){var l=[];J0(l,du,u,Qu(u)),ih(L7,l)}}function N7(u,l,m){u==="focusin"?(jp(),Xi=l,du=m,Xi.attachEvent("onpropertychange",zp)):u==="focusout"&&jp()}function H7(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Ph(du)}function hl(u,l){if(u==="click")return Ph(l)}function oe(u,l){if(u==="input"||u==="change")return Ph(l)}function Re(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var ve=typeof Object.is=="function"?Object.is:Re;function Qe(u,l){if(ve(u,l))return!0;if(typeof u!="object"||u===null||typeof l!="object"||l===null)return!1;var m=Object.keys(u),C=Object.keys(l);if(m.length!==C.length)return!1;for(C=0;C<m.length;C++){var P=m[C];if(!f.call(l,P)||!ve(u[P],l[P]))return!1}return!0}function kt(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function fn(u,l){var m=kt(u);u=0;for(var C;m;){if(m.nodeType===3){if(C=u+m.textContent.length,u<=l&&C>=l)return{node:m,offset:l-u};u=C}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=kt(m)}}function sr(u,l){return u&&l?u===l?!0:u&&u.nodeType===3?!1:l&&l.nodeType===3?sr(u,l.parentNode):"contains"in u?u.contains(l):u.compareDocumentPosition?!!(u.compareDocumentPosition(l)&16):!1:!1}function En(){for(var u=window,l=St();l instanceof u.HTMLIFrameElement;){try{var m=typeof l.contentWindow.location.href=="string"}catch{m=!1}if(m)u=l.contentWindow;else break;l=St(u.document)}return l}function Mc(u){var l=u&&u.nodeName&&u.nodeName.toLowerCase();return l&&(l==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||l==="textarea"||u.contentEditable==="true")}function G7(u){var l=En(),m=u.focusedElem,C=u.selectionRange;if(l!==m&&m&&m.ownerDocument&&sr(m.ownerDocument.documentElement,m)){if(C!==null&&Mc(m)){if(l=C.start,u=C.end,u===void 0&&(u=l),"selectionStart"in m)m.selectionStart=l,m.selectionEnd=Math.min(u,m.value.length);else if(u=(l=m.ownerDocument||document)&&l.defaultView||window,u.getSelection){u=u.getSelection();var P=m.textContent.length,D=Math.min(C.start,P);C=C.end===void 0?D:Math.min(C.end,P),!u.extend&&D>C&&(P=C,C=D,D=P),P=fn(m,D);var L=fn(m,C);P&&L&&(u.rangeCount!==1||u.anchorNode!==P.node||u.anchorOffset!==P.offset||u.focusNode!==L.node||u.focusOffset!==L.offset)&&(l=l.createRange(),l.setStart(P.node,P.offset),u.removeAllRanges(),D>C?(u.addRange(l),u.extend(L.node,L.offset)):(l.setEnd(L.node,L.offset),u.addRange(l)))}}for(l=[],u=m;u=u.parentNode;)u.nodeType===1&&l.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<l.length;m++)u=l[m],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var Ki=a&&"documentMode"in document&&11>=document.documentMode,Is=null,e1=null,Jo=null,dl=!1;function bc(u,l,m){var C=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;dl||Is==null||Is!==St(C)||(C=Is,"selectionStart"in C&&Mc(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Jo&&Qe(Jo,C)||(Jo=C,C=bh(e1,"onSelect"),0<C.length&&(l=new vh("onSelect","select",null,l,m),u.push({event:l,listeners:C}),l.target=Is)))}function hn(u,l){var m={};return m[u.toLowerCase()]=l.toLowerCase(),m["Webkit"+u]="webkit"+l,m["Moz"+u]="moz"+l,m}var gl={animationend:hn("Animation","AnimationEnd"),animationiteration:hn("Animation","AnimationIteration"),animationstart:hn("Animation","AnimationStart"),transitionend:hn("Transition","TransitionEnd")},Dh={},Oc={};a&&(Oc=document.createElement("div").style,"AnimationEvent"in window||(delete gl.animationend.animation,delete gl.animationiteration.animation,delete gl.animationstart.animation),"TransitionEvent"in window||delete gl.transitionend.transition);function Th(u){if(Dh[u])return Dh[u];if(!gl[u])return u;var l=gl[u],m;for(m in l)if(l.hasOwnProperty(m)&&m in Oc)return Dh[u]=l[m];return u}var Vp=Th("animationend"),Up=Th("animationiteration"),Ic=Th("animationstart"),ks=Th("transitionend"),kc=new Map,t1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(u,l){kc.set(u,l),o(l,[u])}for(var Ah=0;Ah<t1.length;Ah++){var Bh=t1[Ah],Rh=Bh.toLowerCase(),Xp=Bh[0].toUpperCase()+Bh.slice(1);So(Rh,"on"+Xp)}So(Vp,"onAnimationEnd"),So(Up,"onAnimationIteration"),So(Ic,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(ks,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ua=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fs));function Fc(u,l,m){var C=u.type||"unknown-event";u.currentTarget=m,_0(C,l,void 0,u),u.currentTarget=null}function Kp(u,l){l=(l&4)!==0;for(var m=0;m<u.length;m++){var C=u[m],P=C.event;C=C.listeners;e:{var D=void 0;if(l)for(var L=C.length-1;0<=L;L--){var V=C[L],Z=V.instance,xe=V.currentTarget;if(V=V.listener,Z!==D&&P.isPropagationStopped())break e;Fc(P,V,xe),D=Z}else for(L=0;L<C.length;L++){if(V=C[L],Z=V.instance,xe=V.currentTarget,V=V.listener,Z!==D&&P.isPropagationStopped())break e;Fc(P,V,xe),D=Z}}}if(el)throw u=Ec,el=!1,Ec=null,u}function In(u,l){var m=l[kh];m===void 0&&(m=l[kh]=new Set);var C=u+"__bubble";m.has(C)||(Mh(l,u,2,!1),m.add(C))}function n1(u,l,m){var C=0;l&&(C|=4),Mh(m,u,C,l)}var aa="_reactListening"+Math.random().toString(36).slice(2);function gu(u){if(!u[aa]){u[aa]=!0,r.forEach(function(m){m!=="selectionchange"&&(ua.has(m)||n1(m,!1,u),n1(m,!0,u))});var l=u.nodeType===9?u:u.ownerDocument;l===null||l[aa]||(l[aa]=!0,n1("selectionchange",!1,l))}}function Mh(u,l,m,C){switch(Rp(l)){case 1:var P=A7;break;case 4:P=B7;break;default:P=G0}m=P.bind(null,l,m,u),P=void 0,!ea||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(P=!0),C?P!==void 0?u.addEventListener(l,m,{capture:!0,passive:P}):u.addEventListener(l,m,!0):P!==void 0?u.addEventListener(l,m,{passive:P}):u.addEventListener(l,m,!1)}function r1(u,l,m,C,P){var D=C;if((l&1)===0&&(l&2)===0&&C!==null)e:for(;;){if(C===null)return;var L=C.tag;if(L===3||L===4){var V=C.stateNode.containerInfo;if(V===P||V.nodeType===8&&V.parentNode===P)break;if(L===4)for(L=C.return;L!==null;){var Z=L.tag;if((Z===3||Z===4)&&(Z=L.stateNode.containerInfo,Z===P||Z.nodeType===8&&Z.parentNode===P))return;L=L.return}for(;V!==null;){if(L=ts(V),L===null)return;if(Z=L.tag,Z===5||Z===6){C=D=L;continue e}V=V.parentNode}}C=C.return}ih(function(){var xe=D,_e=Qu(m),Ge=[];e:{var Le=kc.get(u);if(Le!==void 0){var Je=vh,nt=u;switch(u){case"keypress":if(ul(m)===0)break e;case"keydown":case"keyup":Je=kp;break;case"focusin":nt="focus",Je=Rn;break;case"focusout":nt="blur",Je=Rn;break;case"beforeblur":case"afterblur":Je=Rn;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Je=z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Je=wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Je=O7;break;case Vp:case Up:case Ic:Je=U0;break;case ks:Je=Z0;break;case"scroll":Je=Mp;break;case"wheel":Je=Lp;break;case"copy":case"cut":case"paste":Je=X0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Je=xh}var ot=(l&4)!==0,tr=!ot&&u==="scroll",de=ot?Le!==null?Le+"Capture":null:Le;ot=[];for(var ne=xe,ge;ne!==null;){ge=ne;var ze=ge.stateNode;if(ge.tag===5&&ze!==null&&(ge=ze,de!==null&&(ze=Ju(ne,de),ze!=null&&ot.push(pl(ne,ze,ge)))),tr)break;ne=ne.return}0<ot.length&&(Le=new Je(Le,nt,null,m,_e),Ge.push({event:Le,listeners:ot}))}}if((l&7)===0){e:{if(Le=u==="mouseover"||u==="pointerover",Je=u==="mouseout"||u==="pointerout",Le&&m!==uu&&(nt=m.relatedTarget||m.fromElement)&&(ts(nt)||nt[bi]))break e;if((Je||Le)&&(Le=_e.window===_e?_e:(Le=_e.ownerDocument)?Le.defaultView||Le.parentWindow:window,Je?(nt=m.relatedTarget||m.toElement,Je=xe,nt=nt?ts(nt):null,nt!==null&&(tr=bs(nt),nt!==tr||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(Je=null,nt=xe),Je!==nt)){if(ot=z0,ze="onMouseLeave",de="onMouseEnter",ne="mouse",(u==="pointerout"||u==="pointerover")&&(ot=xh,ze="onPointerLeave",de="onPointerEnter",ne="pointer"),tr=Je==null?Le:Nt(Je),ge=nt==null?Le:Nt(nt),Le=new ot(ze,ne+"leave",Je,m,_e),Le.target=tr,Le.relatedTarget=ge,ze=null,ts(_e)===xe&&(ot=new ot(de,ne+"enter",nt,m,_e),ot.target=ge,ot.relatedTarget=tr,ze=ot),tr=ze,Je&&nt)t:{for(ot=Je,de=nt,ne=0,ge=ot;ge;ge=ml(ge))ne++;for(ge=0,ze=de;ze;ze=ml(ze))ge++;for(;0<ne-ge;)ot=ml(ot),ne--;for(;0<ge-ne;)de=ml(de),ge--;for(;ne--;){if(ot===de||de!==null&&ot===de.alternate)break t;ot=ml(ot),de=ml(de)}ot=null}else ot=null;Je!==null&&ur(Ge,Le,Je,ot,!1),nt!==null&&tr!==null&&ur(Ge,tr,nt,ot,!0)}}e:{if(Le=xe?Nt(xe):window,Je=Le.nodeName&&Le.nodeName.toLowerCase(),Je==="select"||Je==="input"&&Le.type==="file")var ct=_7;else if(Eh(Le))if(sa)ct=oe;else{ct=H7;var Ct=N7}else(Je=Le.nodeName)&&Je.toLowerCase()==="input"&&(Le.type==="checkbox"||Le.type==="radio")&&(ct=hl);if(ct&&(ct=ct(u,xe))){J0(Ge,ct,m,_e);break e}Ct&&Ct(u,Le,xe),u==="focusout"&&(Ct=Le._wrapperState)&&Ct.controlled&&Le.type==="number"&&ir(Le,"number",Le.value)}switch(Ct=xe?Nt(xe):window,u){case"focusin":(Eh(Ct)||Ct.contentEditable==="true")&&(Is=Ct,e1=xe,Jo=null);break;case"focusout":Jo=e1=Is=null;break;case"mousedown":dl=!0;break;case"contextmenu":case"mouseup":case"dragend":dl=!1,bc(Ge,m,_e);break;case"selectionchange":if(Ki)break;case"keydown":case"keyup":bc(Ge,m,_e)}var mt;if(Rc)e:{switch(u){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else cl?Gp(u,m)&&(Dt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Dt="onCompositionStart");Dt&&(Q0&&m.locale!=="ko"&&(cl||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&cl&&(mt=$0()):(Hn=_e,Bc="value"in Hn?Hn.value:Hn.textContent,cl=!0)),Ct=bh(xe,Dt),0<Ct.length&&(Dt=new bp(Dt,u,null,m,_e),Ge.push({event:Dt,listeners:Ct}),mt?Dt.data=mt:(mt=$p(m),mt!==null&&(Dt.data=mt)))),(mt=_p?fl(u,m):k7(u,m))&&(xe=bh(xe,"onBeforeInput"),0<xe.length&&(_e=new bp("onBeforeInput","beforeinput",null,m,_e),Ge.push({event:_e,listeners:xe}),_e.data=mt))}Kp(Ge,l)})}function pl(u,l,m){return{instance:u,listener:l,currentTarget:m}}function bh(u,l){for(var m=l+"Capture",C=[];u!==null;){var P=u,D=P.stateNode;P.tag===5&&D!==null&&(P=D,D=Ju(u,m),D!=null&&C.unshift(pl(u,D,P)),D=Ju(u,l),D!=null&&C.push(pl(u,D,P))),u=u.return}return C}function ml(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function ur(u,l,m,C,P){for(var D=l._reactName,L=[];m!==null&&m!==C;){var V=m,Z=V.alternate,xe=V.stateNode;if(Z!==null&&Z===C)break;V.tag===5&&xe!==null&&(V=xe,P?(Z=Ju(m,D),Z!=null&&L.unshift(pl(m,Z,V))):P||(Z=Ju(m,D),Z!=null&&L.push(pl(m,Z,V)))),m=m.return}L.length!==0&&u.push({event:l,listeners:L})}var _r=/\r\n?/g,$7=/\u0000|\uFFFD/g;function Yp(u){return(typeof u=="string"?u:""+u).replace(_r,`
`).replace($7,"")}function Lc(u,l,m){if(l=Yp(l),Yp(u)!==l&&m)throw Error(n(425))}function Oh(){}var _c=null,la=null;function Nc(u,l){return u==="textarea"||u==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var pu=typeof setTimeout=="function"?setTimeout:void 0,Hc=typeof clearTimeout=="function"?clearTimeout:void 0,vl=typeof Promise=="function"?Promise:void 0,Ih=typeof queueMicrotask=="function"?queueMicrotask:typeof vl<"u"?function(u){return vl.resolve(null).then(u).catch(yl)}:pu;function yl(u){setTimeout(function(){throw u})}function i1(u,l){var m=l,C=0;do{var P=m.nextSibling;if(u.removeChild(m),P&&P.nodeType===8)if(m=P.data,m==="/$"){if(C===0){u.removeChild(P),vn(l);return}C--}else m!=="$"&&m!=="$?"&&m!=="$!"||C++;m=P}while(m);vn(l)}function mu(u){for(;u!=null;u=u.nextSibling){var l=u.nodeType;if(l===1||l===3)break;if(l===8){if(l=u.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return u}function qp(u){u=u.previousSibling;for(var l=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(l===0)return u;l--}else m==="/$"&&l++}u=u.previousSibling}return null}var wl=Math.random().toString(36).slice(2),es="__reactFiber$"+wl,vu="__reactProps$"+wl,bi="__reactContainer$"+wl,kh="__reactEvents$"+wl,N="__reactListeners$"+wl,Cl="__reactHandles$"+wl;function ts(u){var l=u[es];if(l)return l;for(var m=u.parentNode;m;){if(l=m[bi]||m[es]){if(m=l.alternate,l.child!==null||m!==null&&m.child!==null)for(u=qp(u);u!==null;){if(m=u[es])return m;u=qp(u)}return l}u=m,m=u.parentNode}return null}function Nr(u){return u=u[es]||u[bi],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Nt(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(n(33))}function Fh(u){return u[vu]||null}var o1=[],xl=-1;function yi(u){return{current:u}}function kn(u){0>xl||(u.current=o1[xl],o1[xl]=null,xl--)}function Mn(u,l){xl++,o1[xl]=u.current,u.current=l}var yu={},Hr=yi(yu),wi=yi(!1),ti=yu;function El(u,l){var m=u.type.contextTypes;if(!m)return yu;var C=u.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===l)return C.__reactInternalMemoizedMaskedChildContext;var P={},D;for(D in m)P[D]=l[D];return C&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=l,u.__reactInternalMemoizedMaskedChildContext=P),P}function Ci(u){return u=u.childContextTypes,u!=null}function Lh(){kn(wi),kn(Hr)}function Zp(u,l,m){if(Hr.current!==yu)throw Error(n(168));Mn(Hr,l),Mn(wi,m)}function Qp(u,l,m){var C=u.stateNode;if(l=l.childContextTypes,typeof C.getChildContext!="function")return m;C=C.getChildContext();for(var P in C)if(!(P in l))throw Error(n(108,we(u)||"Unknown",P));return ye({},m,C)}function Yi(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||yu,ti=Hr.current,Mn(Hr,u),Mn(wi,wi.current),!0}function Jp(u,l,m){var C=u.stateNode;if(!C)throw Error(n(169));m?(u=Qp(u,l,ti),C.__reactInternalMemoizedMergedChildContext=u,kn(wi),kn(Hr),Mn(Hr,u)):kn(wi),Mn(wi,m)}var Ls=null,_h=!1,s1=!1;function e2(u){Ls===null?Ls=[u]:Ls.push(u)}function ca(u){_h=!0,e2(u)}function wu(){if(!s1&&Ls!==null){s1=!0;var u=0,l=wt;try{var m=Ls;for(wt=1;u<m.length;u++){var C=m[u];do C=C(!0);while(C!==null)}Ls=null,_h=!1}catch(P){throw Ls!==null&&(Ls=Ls.slice(u+1)),ah(Ko,wu),P}finally{wt=l,s1=!1}}return null}var Pl=[],Gr=0,Nh=null,Hh=0,qi=[],Zi=0,fa=null,ns=1,rs="";function ha(u,l){Pl[Gr++]=Hh,Pl[Gr++]=Nh,Nh=u,Hh=l}function t2(u,l,m){qi[Zi++]=ns,qi[Zi++]=rs,qi[Zi++]=fa,fa=u;var C=ns;u=rs;var P=32-Bi(C)-1;C&=~(1<<P),m+=1;var D=32-Bi(l)+P;if(30<D){var L=P-P%5;D=(C&(1<<L)-1).toString(32),C>>=L,P-=L,ns=1<<32-Bi(l)+P|m<<P|C,rs=D+u}else ns=1<<D|m<<P|C,rs=u}function Gc(u){u.return!==null&&(ha(u,1),t2(u,1,0))}function da(u){for(;u===Nh;)Nh=Pl[--Gr],Pl[Gr]=null,Hh=Pl[--Gr],Pl[Gr]=null;for(;u===fa;)fa=qi[--Zi],qi[Zi]=null,rs=qi[--Zi],qi[Zi]=null,ns=qi[--Zi],qi[Zi]=null}var $r=null,Oi=null,Fn=!1,Do=null;function is(u,l){var m=io(5,null,null,0);m.elementType="DELETED",m.stateNode=l,m.return=u,l=u.deletions,l===null?(u.deletions=[m],u.flags|=16):l.push(m)}function Gh(u,l){switch(u.tag){case 5:var m=u.type;return l=l.nodeType!==1||m.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(u.stateNode=l,$r=u,Oi=mu(l.firstChild),!0):!1;case 6:return l=u.pendingProps===""||l.nodeType!==3?null:l,l!==null?(u.stateNode=l,$r=u,Oi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(m=fa!==null?{id:ns,overflow:rs}:null,u.memoizedState={dehydrated:l,treeContext:m,retryLane:1073741824},m=io(18,null,null,0),m.stateNode=l,m.return=u,u.child=m,$r=u,Oi=null,!0):!1;default:return!1}}function _s(u){return(u.mode&1)!==0&&(u.flags&128)===0}function xi(u){if(Fn){var l=Oi;if(l){var m=l;if(!Gh(u,l)){if(_s(u))throw Error(n(418));l=mu(m.nextSibling);var C=$r;l&&Gh(u,l)?is(C,m):(u.flags=u.flags&-4097|2,Fn=!1,$r=u)}}else{if(_s(u))throw Error(n(418));u.flags=u.flags&-4097|2,Fn=!1,$r=u}}}function n2(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;$r=u}function $c(u){if(u!==$r)return!1;if(!Fn)return n2(u),Fn=!0,!1;var l;if((l=u.tag!==3)&&!(l=u.tag!==5)&&(l=u.type,l=l!=="head"&&l!=="body"&&!Nc(u.type,u.memoizedProps)),l&&(l=Oi)){if(_s(u))throw u1(),Error(n(418));for(;l;)is(u,l),l=mu(l.nextSibling)}if(n2(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,l=0;u;){if(u.nodeType===8){var m=u.data;if(m==="/$"){if(l===0){Oi=mu(u.nextSibling);break e}l--}else m!=="$"&&m!=="$!"&&m!=="$?"||l++}u=u.nextSibling}Oi=null}}else Oi=$r?mu(u.stateNode.nextSibling):null;return!0}function u1(){for(var u=Oi;u;)u=mu(u.nextSibling)}function os(){Oi=$r=null,Fn=!1}function ss(u){Do===null?Do=[u]:Do.push(u)}var r2=_.ReactCurrentBatchConfig;function Wc(u,l,m){if(u=m.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var C=m.stateNode}if(!C)throw Error(n(147,u));var P=C,D=""+u;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===D?l.ref:(l=function(L){var V=P.refs;L===null?delete V[D]:V[D]=L},l._stringRef=D,l)}if(typeof u!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,u))}return u}function ga(u,l){throw u=Object.prototype.toString.call(l),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":u))}function i2(u){var l=u._init;return l(u._payload)}function a1(u){function l(de,ne){if(u){var ge=de.deletions;ge===null?(de.deletions=[ne],de.flags|=16):ge.push(ne)}}function m(de,ne){if(!u)return null;for(;ne!==null;)l(de,ne),ne=ne.sibling;return null}function C(de,ne){for(de=new Map;ne!==null;)ne.key!==null?de.set(ne.key,ne):de.set(ne.index,ne),ne=ne.sibling;return de}function P(de,ne){return de=Oo(de,ne),de.index=0,de.sibling=null,de}function D(de,ne,ge){return de.index=ge,u?(ge=de.alternate,ge!==null?(ge=ge.index,ge<ne?(de.flags|=2,ne):ge):(de.flags|=2,ne)):(de.flags|=1048576,ne)}function L(de){return u&&de.alternate===null&&(de.flags|=2),de}function V(de,ne,ge,ze){return ne===null||ne.tag!==6?(ne=K1(ge,de.mode,ze),ne.return=de,ne):(ne=P(ne,ge),ne.return=de,ne)}function Z(de,ne,ge,ze){var ct=ge.type;return ct===z?_e(de,ne,ge.props.children,ze,ge.key):ne!==null&&(ne.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===Fe&&i2(ct)===ne.type)?(ze=P(ne,ge.props),ze.ref=Wc(de,ne,ge),ze.return=de,ze):(ze=xd(ge.type,ge.key,ge.props,null,de.mode,ze),ze.ref=Wc(de,ne,ge),ze.return=de,ze)}function xe(de,ne,ge,ze){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ge.containerInfo||ne.stateNode.implementation!==ge.implementation?(ne=Y1(ge,de.mode,ze),ne.return=de,ne):(ne=P(ne,ge.children||[]),ne.return=de,ne)}function _e(de,ne,ge,ze,ct){return ne===null||ne.tag!==7?(ne=Da(ge,de.mode,ze,ct),ne.return=de,ne):(ne=P(ne,ge),ne.return=de,ne)}function Ge(de,ne,ge){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=K1(""+ne,de.mode,ge),ne.return=de,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case F:return ge=xd(ne.type,ne.key,ne.props,null,de.mode,ge),ge.ref=Wc(de,null,ne),ge.return=de,ge;case j:return ne=Y1(ne,de.mode,ge),ne.return=de,ne;case Fe:var ze=ne._init;return Ge(de,ze(ne._payload),ge)}if(Tn(ne)||ue(ne))return ne=Da(ne,de.mode,ge,null),ne.return=de,ne;ga(de,ne)}return null}function Le(de,ne,ge,ze){var ct=ne!==null?ne.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ct!==null?null:V(de,ne,""+ge,ze);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case F:return ge.key===ct?Z(de,ne,ge,ze):null;case j:return ge.key===ct?xe(de,ne,ge,ze):null;case Fe:return ct=ge._init,Le(de,ne,ct(ge._payload),ze)}if(Tn(ge)||ue(ge))return ct!==null?null:_e(de,ne,ge,ze,null);ga(de,ge)}return null}function Je(de,ne,ge,ze,ct){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return de=de.get(ge)||null,V(ne,de,""+ze,ct);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case F:return de=de.get(ze.key===null?ge:ze.key)||null,Z(ne,de,ze,ct);case j:return de=de.get(ze.key===null?ge:ze.key)||null,xe(ne,de,ze,ct);case Fe:var Ct=ze._init;return Je(de,ne,ge,Ct(ze._payload),ct)}if(Tn(ze)||ue(ze))return de=de.get(ge)||null,_e(ne,de,ze,ct,null);ga(ne,ze)}return null}function nt(de,ne,ge,ze){for(var ct=null,Ct=null,mt=ne,Dt=ne=0,Er=null;mt!==null&&Dt<ge.length;Dt++){mt.index>Dt?(Er=mt,mt=null):Er=mt.sibling;var dn=Le(de,mt,ge[Dt],ze);if(dn===null){mt===null&&(mt=Er);break}u&&mt&&dn.alternate===null&&l(de,mt),ne=D(dn,ne,Dt),Ct===null?ct=dn:Ct.sibling=dn,Ct=dn,mt=Er}if(Dt===ge.length)return m(de,mt),Fn&&ha(de,Dt),ct;if(mt===null){for(;Dt<ge.length;Dt++)mt=Ge(de,ge[Dt],ze),mt!==null&&(ne=D(mt,ne,Dt),Ct===null?ct=mt:Ct.sibling=mt,Ct=mt);return Fn&&ha(de,Dt),ct}for(mt=C(de,mt);Dt<ge.length;Dt++)Er=Je(mt,de,Dt,ge[Dt],ze),Er!==null&&(u&&Er.alternate!==null&&mt.delete(Er.key===null?Dt:Er.key),ne=D(Er,ne,Dt),Ct===null?ct=Er:Ct.sibling=Er,Ct=Er);return u&&mt.forEach(function(bu){return l(de,bu)}),Fn&&ha(de,Dt),ct}function ot(de,ne,ge,ze){var ct=ue(ge);if(typeof ct!="function")throw Error(n(150));if(ge=ct.call(ge),ge==null)throw Error(n(151));for(var Ct=ct=null,mt=ne,Dt=ne=0,Er=null,dn=ge.next();mt!==null&&!dn.done;Dt++,dn=ge.next()){mt.index>Dt?(Er=mt,mt=null):Er=mt.sibling;var bu=Le(de,mt,dn.value,ze);if(bu===null){mt===null&&(mt=Er);break}u&&mt&&bu.alternate===null&&l(de,mt),ne=D(bu,ne,Dt),Ct===null?ct=bu:Ct.sibling=bu,Ct=bu,mt=Er}if(dn.done)return m(de,mt),Fn&&ha(de,Dt),ct;if(mt===null){for(;!dn.done;Dt++,dn=ge.next())dn=Ge(de,dn.value,ze),dn!==null&&(ne=D(dn,ne,Dt),Ct===null?ct=dn:Ct.sibling=dn,Ct=dn);return Fn&&ha(de,Dt),ct}for(mt=C(de,mt);!dn.done;Dt++,dn=ge.next())dn=Je(mt,de,Dt,dn.value,ze),dn!==null&&(u&&dn.alternate!==null&&mt.delete(dn.key===null?Dt:dn.key),ne=D(dn,ne,Dt),Ct===null?ct=dn:Ct.sibling=dn,Ct=dn);return u&&mt.forEach(function(a5){return l(de,a5)}),Fn&&ha(de,Dt),ct}function tr(de,ne,ge,ze){if(typeof ge=="object"&&ge!==null&&ge.type===z&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case F:e:{for(var ct=ge.key,Ct=ne;Ct!==null;){if(Ct.key===ct){if(ct=ge.type,ct===z){if(Ct.tag===7){m(de,Ct.sibling),ne=P(Ct,ge.props.children),ne.return=de,de=ne;break e}}else if(Ct.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===Fe&&i2(ct)===Ct.type){m(de,Ct.sibling),ne=P(Ct,ge.props),ne.ref=Wc(de,Ct,ge),ne.return=de,de=ne;break e}m(de,Ct);break}else l(de,Ct);Ct=Ct.sibling}ge.type===z?(ne=Da(ge.props.children,de.mode,ze,ge.key),ne.return=de,de=ne):(ze=xd(ge.type,ge.key,ge.props,null,de.mode,ze),ze.ref=Wc(de,ne,ge),ze.return=de,de=ze)}return L(de);case j:e:{for(Ct=ge.key;ne!==null;){if(ne.key===Ct)if(ne.tag===4&&ne.stateNode.containerInfo===ge.containerInfo&&ne.stateNode.implementation===ge.implementation){m(de,ne.sibling),ne=P(ne,ge.children||[]),ne.return=de,de=ne;break e}else{m(de,ne);break}else l(de,ne);ne=ne.sibling}ne=Y1(ge,de.mode,ze),ne.return=de,de=ne}return L(de);case Fe:return Ct=ge._init,tr(de,ne,Ct(ge._payload),ze)}if(Tn(ge))return nt(de,ne,ge,ze);if(ue(ge))return ot(de,ne,ge,ze);ga(de,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ne!==null&&ne.tag===6?(m(de,ne.sibling),ne=P(ne,ge),ne.return=de,de=ne):(m(de,ne),ne=K1(ge,de.mode,ze),ne.return=de,de=ne),L(de)):m(de,ne)}return tr}var qn=a1(!0),$h=a1(!1),jc=yi(null),Ii=null,Cu=null,Sl=null;function Ns(){Sl=Cu=Ii=null}function Wh(u){var l=jc.current;kn(jc),u._currentValue=l}function Tr(u,l,m){for(;u!==null;){var C=u.alternate;if((u.childLanes&l)!==l?(u.childLanes|=l,C!==null&&(C.childLanes|=l)):C!==null&&(C.childLanes&l)!==l&&(C.childLanes|=l),u===m)break;u=u.return}}function xu(u,l){Ii=u,Sl=Cu=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&l)!==0&&(ri=!0),u.firstContext=null)}function Qi(u){var l=u._currentValue;if(Sl!==u)if(u={context:u,memoizedValue:l,next:null},Cu===null){if(Ii===null)throw Error(n(308));Cu=u,Ii.dependencies={lanes:0,firstContext:u}}else Cu=Cu.next=u;return l}var pa=null;function l1(u){pa===null?pa=[u]:pa.push(u)}function jh(u,l,m,C){var P=l.interleaved;return P===null?(m.next=m,l1(l)):(m.next=P.next,P.next=m),l.interleaved=m,Hs(u,C)}function Hs(u,l){u.lanes|=l;var m=u.alternate;for(m!==null&&(m.lanes|=l),m=u,u=u.return;u!==null;)u.childLanes|=l,m=u.alternate,m!==null&&(m.childLanes|=l),m=u,u=u.return;return m.tag===3?m.stateNode:null}var Ji=!1;function zh(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function o2(u,l){u=u.updateQueue,l.updateQueue===u&&(l.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Gs(u,l){return{eventTime:u,lane:l,tag:0,payload:null,callback:null,next:null}}function eo(u,l,m){var C=u.updateQueue;if(C===null)return null;if(C=C.shared,(an&2)!==0){var P=C.pending;return P===null?l.next=l:(l.next=P.next,P.next=l),C.pending=l,Hs(u,m)}return P=C.interleaved,P===null?(l.next=l,l1(C)):(l.next=P.next,P.next=l),C.interleaved=l,Hs(u,m)}function Vh(u,l,m){if(l=l.updateQueue,l!==null&&(l=l.shared,(m&4194240)!==0)){var C=l.lanes;C&=u.pendingLanes,m|=C,l.lanes=m,Qt(u,m)}}function s2(u,l){var m=u.updateQueue,C=u.alternate;if(C!==null&&(C=C.updateQueue,m===C)){var P=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var L={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};D===null?P=D=L:D=D.next=L,m=m.next}while(m!==null);D===null?P=D=l:D=D.next=l}else P=D=l;m={baseState:C.baseState,firstBaseUpdate:P,lastBaseUpdate:D,shared:C.shared,effects:C.effects},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=l:u.next=l,m.lastBaseUpdate=l}function Dl(u,l,m,C){var P=u.updateQueue;Ji=!1;var D=P.firstBaseUpdate,L=P.lastBaseUpdate,V=P.shared.pending;if(V!==null){P.shared.pending=null;var Z=V,xe=Z.next;Z.next=null,L===null?D=xe:L.next=xe,L=Z;var _e=u.alternate;_e!==null&&(_e=_e.updateQueue,V=_e.lastBaseUpdate,V!==L&&(V===null?_e.firstBaseUpdate=xe:V.next=xe,_e.lastBaseUpdate=Z))}if(D!==null){var Ge=P.baseState;L=0,_e=xe=Z=null,V=D;do{var Le=V.lane,Je=V.eventTime;if((C&Le)===Le){_e!==null&&(_e=_e.next={eventTime:Je,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var nt=u,ot=V;switch(Le=l,Je=m,ot.tag){case 1:if(nt=ot.payload,typeof nt=="function"){Ge=nt.call(Je,Ge,Le);break e}Ge=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=ot.payload,Le=typeof nt=="function"?nt.call(Je,Ge,Le):nt,Le==null)break e;Ge=ye({},Ge,Le);break e;case 2:Ji=!0}}V.callback!==null&&V.lane!==0&&(u.flags|=64,Le=P.effects,Le===null?P.effects=[V]:Le.push(V))}else Je={eventTime:Je,lane:Le,tag:V.tag,payload:V.payload,callback:V.callback,next:null},_e===null?(xe=_e=Je,Z=Ge):_e=_e.next=Je,L|=Le;if(V=V.next,V===null){if(V=P.shared.pending,V===null)break;Le=V,V=Le.next,Le.next=null,P.lastBaseUpdate=Le,P.shared.pending=null}}while(!0);if(_e===null&&(Z=Ge),P.baseState=Z,P.firstBaseUpdate=xe,P.lastBaseUpdate=_e,l=P.shared.interleaved,l!==null){P=l;do L|=P.lane,P=P.next;while(P!==l)}else D===null&&(P.shared.lanes=0);Tu|=L,u.lanes=L,u.memoizedState=Ge}}function c1(u,l,m){if(u=l.effects,l.effects=null,u!==null)for(l=0;l<u.length;l++){var C=u[l],P=C.callback;if(P!==null){if(C.callback=null,C=m,typeof P!="function")throw Error(n(191,P));P.call(C)}}}var zc={},us=yi(zc),Vc=yi(zc),Tl=yi(zc);function $s(u){if(u===zc)throw Error(n(174));return u}function f1(u,l){switch(Mn(Tl,l),Mn(Vc,u),Mn(us,zc),u=l.nodeType,u){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:vr(null,"");break;default:u=u===8?l.parentNode:l,l=u.namespaceURI||null,u=u.tagName,l=vr(l,u)}kn(us),Mn(us,l)}function Eu(){kn(us),kn(Vc),kn(Tl)}function h1(u){$s(Tl.current);var l=$s(us.current),m=vr(l,u.type);l!==m&&(Mn(Vc,u),Mn(us,m))}function Uh(u){Vc.current===u&&(kn(us),kn(Vc))}var Gn=yi(0);function ma(u){for(var l=u;l!==null;){if(l.tag===13){var m=l.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break;for(;l.sibling===null;){if(l.return===null||l.return===u)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var d1=[];function Xh(){for(var u=0;u<d1.length;u++)d1[u]._workInProgressVersionPrimary=null;d1.length=0}var Uc=_.ReactCurrentDispatcher,g1=_.ReactCurrentBatchConfig,Pu=0,Wn=null,er=null,dr=null,Al=!1,Xc=!1,va=0,jt=0;function Wr(){throw Error(n(321))}function p1(u,l){if(l===null)return!1;for(var m=0;m<l.length&&m<u.length;m++)if(!ve(u[m],l[m]))return!1;return!0}function ya(u,l,m,C,P,D){if(Pu=D,Wn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Uc.current=u===null||u.memoizedState===null?j7:ed,u=m(C,P),Xc){D=0;do{if(Xc=!1,va=0,25<=D)throw Error(n(301));D+=1,dr=er=null,l.updateQueue=null,Uc.current=bl,u=m(C,P)}while(Xc)}if(Uc.current=Jh,l=er!==null&&er.next!==null,Pu=0,dr=er=Wn=null,Al=!1,l)throw Error(n(300));return u}function Kh(){var u=va!==0;return va=0,u}function as(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Wn.memoizedState=dr=u:dr=dr.next=u,dr}function to(){if(er===null){var u=Wn.alternate;u=u!==null?u.memoizedState:null}else u=er.next;var l=dr===null?Wn.memoizedState:dr.next;if(l!==null)dr=l,er=u;else{if(u===null)throw Error(n(310));er=u,u={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},dr===null?Wn.memoizedState=dr=u:dr=dr.next=u}return dr}function jr(u,l){return typeof l=="function"?l(u):l}function m1(u){var l=to(),m=l.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var C=er,P=C.baseQueue,D=m.pending;if(D!==null){if(P!==null){var L=P.next;P.next=D.next,D.next=L}C.baseQueue=P=D,m.pending=null}if(P!==null){D=P.next,C=C.baseState;var V=L=null,Z=null,xe=D;do{var _e=xe.lane;if((Pu&_e)===_e)Z!==null&&(Z=Z.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),C=xe.hasEagerState?xe.eagerState:u(C,xe.action);else{var Ge={lane:_e,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};Z===null?(V=Z=Ge,L=C):Z=Z.next=Ge,Wn.lanes|=_e,Tu|=_e}xe=xe.next}while(xe!==null&&xe!==D);Z===null?L=C:Z.next=V,ve(C,l.memoizedState)||(ri=!0),l.memoizedState=C,l.baseState=L,l.baseQueue=Z,m.lastRenderedState=C}if(u=m.interleaved,u!==null){P=u;do D=P.lane,Wn.lanes|=D,Tu|=D,P=P.next;while(P!==u)}else P===null&&(m.lanes=0);return[l.memoizedState,m.dispatch]}function Bl(u){var l=to(),m=l.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var C=m.dispatch,P=m.pending,D=l.memoizedState;if(P!==null){m.pending=null;var L=P=P.next;do D=u(D,L.action),L=L.next;while(L!==P);ve(D,l.memoizedState)||(ri=!0),l.memoizedState=D,l.baseQueue===null&&(l.baseState=D),m.lastRenderedState=D}return[D,C]}function Yh(){}function v1(u,l){var m=Wn,C=to(),P=l(),D=!ve(C.memoizedState,P);if(D&&(C.memoizedState=P,ri=!0),C=C.queue,ls(Ws.bind(null,m,C,u),[u]),C.getSnapshot!==l||D||dr!==null&&dr.memoizedState.tag&1){if(m.flags|=2048,Rl(9,Ei.bind(null,m,C,P,l),void 0,null),xr===null)throw Error(n(349));(Pu&30)!==0||y1(m,l,P)}return P}function y1(u,l,m){u.flags|=16384,u={getSnapshot:l,value:m},l=Wn.updateQueue,l===null?(l={lastEffect:null,stores:null},Wn.updateQueue=l,l.stores=[u]):(m=l.stores,m===null?l.stores=[u]:m.push(u))}function Ei(u,l,m,C){l.value=m,l.getSnapshot=C,qh(l)&&w1(u)}function Ws(u,l,m){return m(function(){qh(l)&&w1(u)})}function qh(u){var l=u.getSnapshot;u=u.value;try{var m=l();return!ve(u,m)}catch{return!0}}function w1(u){var l=Hs(u,1);l!==null&&bo(l,u,1,-1)}function Kc(u){var l=as();return typeof u=="function"&&(u=u()),l.memoizedState=l.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:u},l.queue=u,u=u.dispatch=h2.bind(null,Wn,u),[l.memoizedState,u]}function Rl(u,l,m,C){return u={tag:u,create:l,destroy:m,deps:C,next:null},l=Wn.updateQueue,l===null?(l={lastEffect:null,stores:null},Wn.updateQueue=l,l.lastEffect=u.next=u):(m=l.lastEffect,m===null?l.lastEffect=u.next=u:(C=m.next,m.next=u,u.next=C,l.lastEffect=u)),u}function Zh(){return to().memoizedState}function Yc(u,l,m,C){var P=as();Wn.flags|=u,P.memoizedState=Rl(1|l,m,void 0,C===void 0?null:C)}function Ml(u,l,m,C){var P=to();C=C===void 0?null:C;var D=void 0;if(er!==null){var L=er.memoizedState;if(D=L.destroy,C!==null&&p1(C,L.deps)){P.memoizedState=Rl(l,m,D,C);return}}Wn.flags|=u,P.memoizedState=Rl(1|l,m,D,C)}function Qh(u,l){return Yc(8390656,8,u,l)}function ls(u,l){return Ml(2048,8,u,l)}function u2(u,l){return Ml(4,2,u,l)}function js(u,l){return Ml(4,4,u,l)}function C1(u,l){if(typeof l=="function")return u=u(),l(u),function(){l(null)};if(l!=null)return u=u(),l.current=u,function(){l.current=null}}function x1(u,l,m){return m=m!=null?m.concat([u]):null,Ml(4,4,C1.bind(null,l,u),m)}function qc(){}function a2(u,l){var m=to();l=l===void 0?null:l;var C=m.memoizedState;return C!==null&&l!==null&&p1(l,C[1])?C[0]:(m.memoizedState=[u,l],u)}function l2(u,l){var m=to();l=l===void 0?null:l;var C=m.memoizedState;return C!==null&&l!==null&&p1(l,C[1])?C[0]:(u=u(),m.memoizedState=[u,l],u)}function c2(u,l,m){return(Pu&21)===0?(u.baseState&&(u.baseState=!1,ri=!0),u.memoizedState=m):(ve(m,l)||(m=Xe(),Wn.lanes|=m,Tu|=m,u.baseState=!0),l)}function f2(u,l){var m=wt;wt=m!==0&&4>m?m:4,u(!0);var C=g1.transition;g1.transition={};try{u(!1),l()}finally{wt=m,g1.transition=C}}function E1(){return to().memoizedState}function W7(u,l,m){var C=Ru(u);if(m={lane:C,action:m,hasEagerState:!1,eagerState:null,next:null},P1(u))ni(l,m);else if(m=jh(u,l,m,C),m!==null){var P=si();bo(m,u,C,P),To(m,l,C)}}function h2(u,l,m){var C=Ru(u),P={lane:C,action:m,hasEagerState:!1,eagerState:null,next:null};if(P1(u))ni(l,P);else{var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=l.lastRenderedReducer,D!==null))try{var L=l.lastRenderedState,V=D(L,m);if(P.hasEagerState=!0,P.eagerState=V,ve(V,L)){var Z=l.interleaved;Z===null?(P.next=P,l1(l)):(P.next=Z.next,Z.next=P),l.interleaved=P;return}}catch{}finally{}m=jh(u,l,P,C),m!==null&&(P=si(),bo(m,u,C,P),To(m,l,C))}}function P1(u){var l=u.alternate;return u===Wn||l!==null&&l===Wn}function ni(u,l){Xc=Al=!0;var m=u.pending;m===null?l.next=l:(l.next=m.next,m.next=l),u.pending=l}function To(u,l,m){if((m&4194240)!==0){var C=l.lanes;C&=u.pendingLanes,m|=C,l.lanes=m,Qt(u,m)}}var Jh={readContext:Qi,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useInsertionEffect:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useSyncExternalStore:Wr,useId:Wr,unstable_isNewReconciler:!1},j7={readContext:Qi,useCallback:function(u,l){return as().memoizedState=[u,l===void 0?null:l],u},useContext:Qi,useEffect:Qh,useImperativeHandle:function(u,l,m){return m=m!=null?m.concat([u]):null,Yc(4194308,4,C1.bind(null,l,u),m)},useLayoutEffect:function(u,l){return Yc(4194308,4,u,l)},useInsertionEffect:function(u,l){return Yc(4,2,u,l)},useMemo:function(u,l){var m=as();return l=l===void 0?null:l,u=u(),m.memoizedState=[u,l],u},useReducer:function(u,l,m){var C=as();return l=m!==void 0?m(l):l,C.memoizedState=C.baseState=l,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:l},C.queue=u,u=u.dispatch=W7.bind(null,Wn,u),[C.memoizedState,u]},useRef:function(u){var l=as();return u={current:u},l.memoizedState=u},useState:Kc,useDebugValue:qc,useDeferredValue:function(u){return as().memoizedState=u},useTransition:function(){var u=Kc(!1),l=u[0];return u=f2.bind(null,u[1]),as().memoizedState=u,[l,u]},useMutableSource:function(){},useSyncExternalStore:function(u,l,m){var C=Wn,P=as();if(Fn){if(m===void 0)throw Error(n(407));m=m()}else{if(m=l(),xr===null)throw Error(n(349));(Pu&30)!==0||y1(C,l,m)}P.memoizedState=m;var D={value:m,getSnapshot:l};return P.queue=D,Qh(Ws.bind(null,C,D,u),[u]),C.flags|=2048,Rl(9,Ei.bind(null,C,D,m,l),void 0,null),m},useId:function(){var u=as(),l=xr.identifierPrefix;if(Fn){var m=rs,C=ns;m=(C&~(1<<32-Bi(C)-1)).toString(32)+m,l=":"+l+"R"+m,m=va++,0<m&&(l+="H"+m.toString(32)),l+=":"}else m=jt++,l=":"+l+"r"+m.toString(32)+":";return u.memoizedState=l},unstable_isNewReconciler:!1},ed={readContext:Qi,useCallback:a2,useContext:Qi,useEffect:ls,useImperativeHandle:x1,useInsertionEffect:u2,useLayoutEffect:js,useMemo:l2,useReducer:m1,useRef:Zh,useState:function(){return m1(jr)},useDebugValue:qc,useDeferredValue:function(u){var l=to();return c2(l,er.memoizedState,u)},useTransition:function(){var u=m1(jr)[0],l=to().memoizedState;return[u,l]},useMutableSource:Yh,useSyncExternalStore:v1,useId:E1,unstable_isNewReconciler:!1},bl={readContext:Qi,useCallback:a2,useContext:Qi,useEffect:ls,useImperativeHandle:x1,useInsertionEffect:u2,useLayoutEffect:js,useMemo:l2,useReducer:Bl,useRef:Zh,useState:function(){return Bl(jr)},useDebugValue:qc,useDeferredValue:function(u){var l=to();return er===null?l.memoizedState=u:c2(l,er.memoizedState,u)},useTransition:function(){var u=Bl(jr)[0],l=to().memoizedState;return[u,l]},useMutableSource:Yh,useSyncExternalStore:v1,useId:E1,unstable_isNewReconciler:!1};function no(u,l){if(u&&u.defaultProps){l=ye({},l),u=u.defaultProps;for(var m in u)l[m]===void 0&&(l[m]=u[m]);return l}return l}function td(u,l,m,C){l=u.memoizedState,m=m(C,l),m=m==null?l:ye({},l,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var nd={isMounted:function(u){return(u=u._reactInternals)?bs(u)===u:!1},enqueueSetState:function(u,l,m){u=u._reactInternals;var C=si(),P=Ru(u),D=Gs(C,P);D.payload=l,m!=null&&(D.callback=m),l=eo(u,D,P),l!==null&&(bo(l,u,P,C),Vh(l,u,P))},enqueueReplaceState:function(u,l,m){u=u._reactInternals;var C=si(),P=Ru(u),D=Gs(C,P);D.tag=1,D.payload=l,m!=null&&(D.callback=m),l=eo(u,D,P),l!==null&&(bo(l,u,P,C),Vh(l,u,P))},enqueueForceUpdate:function(u,l){u=u._reactInternals;var m=si(),C=Ru(u),P=Gs(m,C);P.tag=2,l!=null&&(P.callback=l),l=eo(u,P,C),l!==null&&(bo(l,u,C,m),Vh(l,u,C))}};function S1(u,l,m,C,P,D,L){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(C,D,L):l.prototype&&l.prototype.isPureReactComponent?!Qe(m,C)||!Qe(P,D):!0}function wa(u,l,m){var C=!1,P=yu,D=l.contextType;return typeof D=="object"&&D!==null?D=Qi(D):(P=Ci(l)?ti:Hr.current,C=l.contextTypes,D=(C=C!=null)?El(u,P):yu),l=new l(m,D),u.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=nd,u.stateNode=l,l._reactInternals=u,C&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=P,u.__reactInternalMemoizedMaskedChildContext=D),l}function Ol(u,l,m,C){u=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(m,C),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(m,C),l.state!==u&&nd.enqueueReplaceState(l,l.state,null)}function D1(u,l,m,C){var P=u.stateNode;P.props=m,P.state=u.memoizedState,P.refs={},zh(u);var D=l.contextType;typeof D=="object"&&D!==null?P.context=Qi(D):(D=Ci(l)?ti:Hr.current,P.context=El(u,D)),P.state=u.memoizedState,D=l.getDerivedStateFromProps,typeof D=="function"&&(td(u,l,D,m),P.state=u.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(l=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),l!==P.state&&nd.enqueueReplaceState(P,P.state,null),Dl(u,m,P,C),P.state=u.memoizedState),typeof P.componentDidMount=="function"&&(u.flags|=4194308)}function Ca(u,l){try{var m="",C=l;do m+=K(C),C=C.return;while(C);var P=m}catch(D){P=`
Error generating stack: `+D.message+`
`+D.stack}return{value:u,source:l,stack:P,digest:null}}function rd(u,l,m){return{value:u,source:null,stack:m??null,digest:l??null}}function Il(u,l){try{console.error(l.value)}catch(m){setTimeout(function(){throw m})}}var d2=typeof WeakMap=="function"?WeakMap:Map;function Zc(u,l,m){m=Gs(-1,m),m.tag=3,m.payload={element:null};var C=l.value;return m.callback=function(){gd||(gd=!0,$1=C),Il(u,l)},m}function id(u,l,m){m=Gs(-1,m),m.tag=3;var C=u.type.getDerivedStateFromError;if(typeof C=="function"){var P=l.value;m.payload=function(){return C(P)},m.callback=function(){Il(u,l)}}var D=u.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(m.callback=function(){Il(u,l),typeof C!="function"&&(Au===null?Au=new Set([this]):Au.add(this));var L=l.stack;this.componentDidCatch(l.value,{componentStack:L!==null?L:""})}),m}function Qc(u,l,m){var C=u.pingCache;if(C===null){C=u.pingCache=new d2;var P=new Set;C.set(l,P)}else P=C.get(l),P===void 0&&(P=new Set,C.set(l,P));P.has(m)||(P.add(m),u=Z7.bind(null,u,l,m),l.then(u,u))}function g2(u){do{var l;if((l=u.tag===13)&&(l=u.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return u;u=u.return}while(u!==null);return null}function T1(u,l,m,C,P){return(u.mode&1)===0?(u===l?u.flags|=65536:(u.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(l=Gs(-1,1),l.tag=2,eo(m,l,1))),m.lanes|=1),u):(u.flags|=65536,u.lanes=P,u)}var od=_.ReactCurrentOwner,ri=!1;function Ar(u,l,m,C){l.child=u===null?$h(l,null,m,C):qn(l,u.child,m,C)}function p2(u,l,m,C,P){m=m.render;var D=l.ref;return xu(l,P),C=ya(u,l,m,C,D,P),m=Kh(),u!==null&&!ri?(l.updateQueue=u.updateQueue,l.flags&=-2053,u.lanes&=~P,Ao(u,l,P)):(Fn&&m&&Gc(l),l.flags|=1,Ar(u,l,C,P),l.child)}function A1(u,l,m,C,P){if(u===null){var D=m.type;return typeof D=="function"&&!Cd(D)&&D.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(l.tag=15,l.type=D,cs(u,l,D,C,P)):(u=xd(m.type,null,C,l,l.mode,P),u.ref=l.ref,u.return=l,l.child=u)}if(D=u.child,(u.lanes&P)===0){var L=D.memoizedProps;if(m=m.compare,m=m!==null?m:Qe,m(L,C)&&u.ref===l.ref)return Ao(u,l,P)}return l.flags|=1,u=Oo(D,C),u.ref=l.ref,u.return=l,l.child=u}function cs(u,l,m,C,P){if(u!==null){var D=u.memoizedProps;if(Qe(D,C)&&u.ref===l.ref)if(ri=!1,l.pendingProps=C=D,(u.lanes&P)!==0)(u.flags&131072)!==0&&(ri=!0);else return l.lanes=u.lanes,Ao(u,l,P)}return M1(u,l,m,C,P)}function B1(u,l,m){var C=l.pendingProps,P=C.children,D=u!==null?u.memoizedState:null;if(C.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(_l,Fi),Fi|=m;else{if((m&1073741824)===0)return u=D!==null?D.baseLanes|m:m,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:u,cachePool:null,transitions:null},l.updateQueue=null,Mn(_l,Fi),Fi|=u,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=D!==null?D.baseLanes:m,Mn(_l,Fi),Fi|=C}else D!==null?(C=D.baseLanes|m,l.memoizedState=null):C=m,Mn(_l,Fi),Fi|=C;return Ar(u,l,P,m),l.child}function R1(u,l){var m=l.ref;(u===null&&m!==null||u!==null&&u.ref!==m)&&(l.flags|=512,l.flags|=2097152)}function M1(u,l,m,C,P){var D=Ci(m)?ti:Hr.current;return D=El(l,D),xu(l,P),m=ya(u,l,m,C,D,P),C=Kh(),u!==null&&!ri?(l.updateQueue=u.updateQueue,l.flags&=-2053,u.lanes&=~P,Ao(u,l,P)):(Fn&&C&&Gc(l),l.flags|=1,Ar(u,l,m,P),l.child)}function b1(u,l,m,C,P){if(Ci(m)){var D=!0;Yi(l)}else D=!1;if(xu(l,P),l.stateNode===null)ud(u,l),wa(l,m,C),D1(l,m,C,P),C=!0;else if(u===null){var L=l.stateNode,V=l.memoizedProps;L.props=V;var Z=L.context,xe=m.contextType;typeof xe=="object"&&xe!==null?xe=Qi(xe):(xe=Ci(m)?ti:Hr.current,xe=El(l,xe));var _e=m.getDerivedStateFromProps,Ge=typeof _e=="function"||typeof L.getSnapshotBeforeUpdate=="function";Ge||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(V!==C||Z!==xe)&&Ol(l,L,C,xe),Ji=!1;var Le=l.memoizedState;L.state=Le,Dl(l,C,L,P),Z=l.memoizedState,V!==C||Le!==Z||wi.current||Ji?(typeof _e=="function"&&(td(l,m,_e,C),Z=l.memoizedState),(V=Ji||S1(l,m,V,C,Le,Z,xe))?(Ge||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(l.flags|=4194308)):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=C,l.memoizedState=Z),L.props=C,L.state=Z,L.context=xe,C=V):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),C=!1)}else{L=l.stateNode,o2(u,l),V=l.memoizedProps,xe=l.type===l.elementType?V:no(l.type,V),L.props=xe,Ge=l.pendingProps,Le=L.context,Z=m.contextType,typeof Z=="object"&&Z!==null?Z=Qi(Z):(Z=Ci(m)?ti:Hr.current,Z=El(l,Z));var Je=m.getDerivedStateFromProps;(_e=typeof Je=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(V!==Ge||Le!==Z)&&Ol(l,L,C,Z),Ji=!1,Le=l.memoizedState,L.state=Le,Dl(l,C,L,P);var nt=l.memoizedState;V!==Ge||Le!==nt||wi.current||Ji?(typeof Je=="function"&&(td(l,m,Je,C),nt=l.memoizedState),(xe=Ji||S1(l,m,xe,C,Le,nt,Z)||!1)?(_e||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(C,nt,Z),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(C,nt,Z)),typeof L.componentDidUpdate=="function"&&(l.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof L.componentDidUpdate!="function"||V===u.memoizedProps&&Le===u.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||V===u.memoizedProps&&Le===u.memoizedState||(l.flags|=1024),l.memoizedProps=C,l.memoizedState=nt),L.props=C,L.state=nt,L.context=Z,C=xe):(typeof L.componentDidUpdate!="function"||V===u.memoizedProps&&Le===u.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||V===u.memoizedProps&&Le===u.memoizedState||(l.flags|=1024),C=!1)}return O1(u,l,m,C,D,P)}function O1(u,l,m,C,P,D){R1(u,l);var L=(l.flags&128)!==0;if(!C&&!L)return P&&Jp(l,m,!1),Ao(u,l,D);C=l.stateNode,od.current=l;var V=L&&typeof m.getDerivedStateFromError!="function"?null:C.render();return l.flags|=1,u!==null&&L?(l.child=qn(l,u.child,null,D),l.child=qn(l,null,V,D)):Ar(u,l,V,D),l.memoizedState=C.state,P&&Jp(l,m,!0),l.child}function m2(u){var l=u.stateNode;l.pendingContext?Zp(u,l.pendingContext,l.pendingContext!==l.context):l.context&&Zp(u,l.context,!1),f1(u,l.containerInfo)}function fs(u,l,m,C,P){return os(),ss(P),l.flags|=256,Ar(u,l,m,C),l.child}var Jc={dehydrated:null,treeContext:null,retryLane:0};function ef(u){return{baseLanes:u,cachePool:null,transitions:null}}function sd(u,l,m){var C=l.pendingProps,P=Gn.current,D=!1,L=(l.flags&128)!==0,V;if((V=L)||(V=u!==null&&u.memoizedState===null?!1:(P&2)!==0),V?(D=!0,l.flags&=-129):(u===null||u.memoizedState!==null)&&(P|=1),Mn(Gn,P&1),u===null)return xi(l),u=l.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((l.mode&1)===0?l.lanes=1:u.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(L=C.children,u=C.fallback,D?(C=l.mode,D=l.child,L={mode:"hidden",children:L},(C&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=L):D=Ed(L,C,0,null),u=Da(u,C,m,null),D.return=l,u.return=l,D.sibling=u,l.child=D,l.child.memoizedState=ef(m),l.memoizedState=Jc,u):kl(l,L));if(P=u.memoizedState,P!==null&&(V=P.dehydrated,V!==null))return xt(u,l,L,C,V,P,m);if(D){D=C.fallback,L=l.mode,P=u.child,V=P.sibling;var Z={mode:"hidden",children:C.children};return(L&1)===0&&l.child!==P?(C=l.child,C.childLanes=0,C.pendingProps=Z,l.deletions=null):(C=Oo(P,Z),C.subtreeFlags=P.subtreeFlags&14680064),V!==null?D=Oo(V,D):(D=Da(D,L,m,null),D.flags|=2),D.return=l,C.return=l,C.sibling=D,l.child=C,C=D,D=l.child,L=u.child.memoizedState,L=L===null?ef(m):{baseLanes:L.baseLanes|m,cachePool:null,transitions:L.transitions},D.memoizedState=L,D.childLanes=u.childLanes&~m,l.memoizedState=Jc,C}return D=u.child,u=D.sibling,C=Oo(D,{mode:"visible",children:C.children}),(l.mode&1)===0&&(C.lanes=m),C.return=l,C.sibling=null,u!==null&&(m=l.deletions,m===null?(l.deletions=[u],l.flags|=16):m.push(u)),l.child=C,l.memoizedState=null,C}function kl(u,l){return l=Ed({mode:"visible",children:l},u.mode,0,null),l.return=u,u.child=l}function zs(u,l,m,C){return C!==null&&ss(C),qn(l,u.child,null,m),u=kl(l,l.pendingProps.children),u.flags|=2,l.memoizedState=null,u}function xt(u,l,m,C,P,D,L){if(m)return l.flags&256?(l.flags&=-257,C=rd(Error(n(422))),zs(u,l,L,C)):l.memoizedState!==null?(l.child=u.child,l.flags|=128,null):(D=C.fallback,P=l.mode,C=Ed({mode:"visible",children:C.children},P,0,null),D=Da(D,P,L,null),D.flags|=2,C.return=l,D.return=l,C.sibling=D,l.child=C,(l.mode&1)!==0&&qn(l,u.child,null,L),l.child.memoizedState=ef(L),l.memoizedState=Jc,D);if((l.mode&1)===0)return zs(u,l,L,null);if(P.data==="$!"){if(C=P.nextSibling&&P.nextSibling.dataset,C)var V=C.dgst;return C=V,D=Error(n(419)),C=rd(D,C,void 0),zs(u,l,L,C)}if(V=(L&u.childLanes)!==0,ri||V){if(C=xr,C!==null){switch(L&-L){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=(P&(C.suspendedLanes|L))!==0?0:P,P!==0&&P!==D.retryLane&&(D.retryLane=P,Hs(u,P),bo(C,u,P,-1))}return X1(),C=rd(Error(n(421))),zs(u,l,L,C)}return P.data==="$?"?(l.flags|=128,l.child=u.child,l=Q7.bind(null,u),P._reactRetry=l,null):(u=D.treeContext,Oi=mu(P.nextSibling),$r=l,Fn=!0,Do=null,u!==null&&(qi[Zi++]=ns,qi[Zi++]=rs,qi[Zi++]=fa,ns=u.id,rs=u.overflow,fa=l),l=kl(l,C.children),l.flags|=4096,l)}function tf(u,l,m){u.lanes|=l;var C=u.alternate;C!==null&&(C.lanes|=l),Tr(u.return,l,m)}function nf(u,l,m,C,P){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:C,tail:m,tailMode:P}:(D.isBackwards=l,D.rendering=null,D.renderingStartTime=0,D.last=C,D.tail=m,D.tailMode=P)}function Su(u,l,m){var C=l.pendingProps,P=C.revealOrder,D=C.tail;if(Ar(u,l,C.children,m),C=Gn.current,(C&2)!==0)C=C&1|2,l.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=l.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&tf(u,m,l);else if(u.tag===19)tf(u,m,l);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}C&=1}if(Mn(Gn,C),(l.mode&1)===0)l.memoizedState=null;else switch(P){case"forwards":for(m=l.child,P=null;m!==null;)u=m.alternate,u!==null&&ma(u)===null&&(P=m),m=m.sibling;m=P,m===null?(P=l.child,l.child=null):(P=m.sibling,m.sibling=null),nf(l,!1,P,m,D);break;case"backwards":for(m=null,P=l.child,l.child=null;P!==null;){if(u=P.alternate,u!==null&&ma(u)===null){l.child=P;break}u=P.sibling,P.sibling=m,m=P,P=u}nf(l,!0,m,null,D);break;case"together":nf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ud(u,l){(l.mode&1)===0&&u!==null&&(u.alternate=null,l.alternate=null,l.flags|=2)}function Ao(u,l,m){if(u!==null&&(l.dependencies=u.dependencies),Tu|=l.lanes,(m&l.childLanes)===0)return null;if(u!==null&&l.child!==u.child)throw Error(n(153));if(l.child!==null){for(u=l.child,m=Oo(u,u.pendingProps),l.child=m,m.return=l;u.sibling!==null;)u=u.sibling,m=m.sibling=Oo(u,u.pendingProps),m.return=l;m.sibling=null}return l.child}function v2(u,l,m){switch(l.tag){case 3:m2(l),os();break;case 5:h1(l);break;case 1:Ci(l.type)&&Yi(l);break;case 4:f1(l,l.stateNode.containerInfo);break;case 10:var C=l.type._context,P=l.memoizedProps.value;Mn(jc,C._currentValue),C._currentValue=P;break;case 13:if(C=l.memoizedState,C!==null)return C.dehydrated!==null?(Mn(Gn,Gn.current&1),l.flags|=128,null):(m&l.child.childLanes)!==0?sd(u,l,m):(Mn(Gn,Gn.current&1),u=Ao(u,l,m),u!==null?u.sibling:null);Mn(Gn,Gn.current&1);break;case 19:if(C=(m&l.childLanes)!==0,(u.flags&128)!==0){if(C)return Su(u,l,m);l.flags|=128}if(P=l.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Mn(Gn,Gn.current),C)break;return null;case 22:case 23:return l.lanes=0,B1(u,l,m)}return Ao(u,l,m)}var Br,I1,y2,k1;Br=function(u,l){for(var m=l.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===l)break;for(;m.sibling===null;){if(m.return===null||m.return===l)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},I1=function(){},y2=function(u,l,m,C){var P=u.memoizedProps;if(P!==C){u=l.stateNode,$s(us.current);var D=null;switch(m){case"input":P=lt(u,P),C=lt(u,C),D=[];break;case"select":P=ye({},P,{value:void 0}),C=ye({},C,{value:void 0}),D=[];break;case"textarea":P=nn(u,P),C=nn(u,C),D=[];break;default:typeof P.onClick!="function"&&typeof C.onClick=="function"&&(u.onclick=Oh)}Bs(m,C);var L;m=null;for(xe in P)if(!C.hasOwnProperty(xe)&&P.hasOwnProperty(xe)&&P[xe]!=null)if(xe==="style"){var V=P[xe];for(L in V)V.hasOwnProperty(L)&&(m||(m={}),m[L]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(i.hasOwnProperty(xe)?D||(D=[]):(D=D||[]).push(xe,null));for(xe in C){var Z=C[xe];if(V=P!=null?P[xe]:void 0,C.hasOwnProperty(xe)&&Z!==V&&(Z!=null||V!=null))if(xe==="style")if(V){for(L in V)!V.hasOwnProperty(L)||Z&&Z.hasOwnProperty(L)||(m||(m={}),m[L]="");for(L in Z)Z.hasOwnProperty(L)&&V[L]!==Z[L]&&(m||(m={}),m[L]=Z[L])}else m||(D||(D=[]),D.push(xe,m)),m=Z;else xe==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,V=V?V.__html:void 0,Z!=null&&V!==Z&&(D=D||[]).push(xe,Z)):xe==="children"?typeof Z!="string"&&typeof Z!="number"||(D=D||[]).push(xe,""+Z):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(i.hasOwnProperty(xe)?(Z!=null&&xe==="onScroll"&&In("scroll",u),D||V===Z||(D=[])):(D=D||[]).push(xe,Z))}m&&(D=D||[]).push("style",m);var xe=D;(l.updateQueue=xe)&&(l.flags|=4)}},k1=function(u,l,m,C){m!==C&&(l.flags|=4)};function rf(u,l){if(!Fn)switch(u.tailMode){case"hidden":l=u.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var C=null;m!==null;)m.alternate!==null&&(C=m),m=m.sibling;C===null?l||u.tail===null?u.tail=null:u.tail.sibling=null:C.sibling=null}}function Rr(u){var l=u.alternate!==null&&u.alternate.child===u.child,m=0,C=0;if(l)for(var P=u.child;P!==null;)m|=P.lanes|P.childLanes,C|=P.subtreeFlags&14680064,C|=P.flags&14680064,P.return=u,P=P.sibling;else for(P=u.child;P!==null;)m|=P.lanes|P.childLanes,C|=P.subtreeFlags,C|=P.flags,P.return=u,P=P.sibling;return u.subtreeFlags|=C,u.childLanes=m,l}function z7(u,l,m){var C=l.pendingProps;switch(da(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rr(l),null;case 1:return Ci(l.type)&&Lh(),Rr(l),null;case 3:return C=l.stateNode,Eu(),kn(wi),kn(Hr),Xh(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(u===null||u.child===null)&&($c(l)?l.flags|=4:u===null||u.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Do!==null&&(z1(Do),Do=null))),I1(u,l),Rr(l),null;case 5:Uh(l);var P=$s(Tl.current);if(m=l.type,u!==null&&l.stateNode!=null)y2(u,l,m,C,P),u.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!C){if(l.stateNode===null)throw Error(n(166));return Rr(l),null}if(u=$s(us.current),$c(l)){C=l.stateNode,m=l.type;var D=l.memoizedProps;switch(C[es]=l,C[vu]=D,u=(l.mode&1)!==0,m){case"dialog":In("cancel",C),In("close",C);break;case"iframe":case"object":case"embed":In("load",C);break;case"video":case"audio":for(P=0;P<Fs.length;P++)In(Fs[P],C);break;case"source":In("error",C);break;case"img":case"image":case"link":In("error",C),In("load",C);break;case"details":In("toggle",C);break;case"input":yt(C,D),In("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!D.multiple},In("invalid",C);break;case"textarea":Yn(C,D),In("invalid",C)}Bs(m,D),P=null;for(var L in D)if(D.hasOwnProperty(L)){var V=D[L];L==="children"?typeof V=="string"?C.textContent!==V&&(D.suppressHydrationWarning!==!0&&Lc(C.textContent,V,u),P=["children",V]):typeof V=="number"&&C.textContent!==""+V&&(D.suppressHydrationWarning!==!0&&Lc(C.textContent,V,u),P=["children",""+V]):i.hasOwnProperty(L)&&V!=null&&L==="onScroll"&&In("scroll",C)}switch(m){case"input":Rt(C),_n(C,D,!0);break;case"textarea":Rt(C),$t(C);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(C.onclick=Oh)}C=P,l.updateQueue=C,C!==null&&(l.flags|=4)}else{L=P.nodeType===9?P:P.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Dr(m)),u==="http://www.w3.org/1999/xhtml"?m==="script"?(u=L.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof C.is=="string"?u=L.createElement(m,{is:C.is}):(u=L.createElement(m),m==="select"&&(L=u,C.multiple?L.multiple=!0:C.size&&(L.size=C.size))):u=L.createElementNS(u,m),u[es]=l,u[vu]=C,Br(u,l,!1,!1),l.stateNode=u;e:{switch(L=Eo(m,C),m){case"dialog":In("cancel",u),In("close",u),P=C;break;case"iframe":case"object":case"embed":In("load",u),P=C;break;case"video":case"audio":for(P=0;P<Fs.length;P++)In(Fs[P],u);P=C;break;case"source":In("error",u),P=C;break;case"img":case"image":case"link":In("error",u),In("load",u),P=C;break;case"details":In("toggle",u),P=C;break;case"input":yt(u,C),P=lt(u,C),In("invalid",u);break;case"option":P=C;break;case"select":u._wrapperState={wasMultiple:!!C.multiple},P=ye({},C,{value:void 0}),In("invalid",u);break;case"textarea":Yn(u,C),P=nn(u,C),In("invalid",u);break;default:P=C}Bs(m,P),V=P;for(D in V)if(V.hasOwnProperty(D)){var Z=V[D];D==="style"?Ui(u,Z):D==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&yr(u,Z)):D==="children"?typeof Z=="string"?(m!=="textarea"||Z!=="")&&wr(u,Z):typeof Z=="number"&&wr(u,""+Z):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?Z!=null&&D==="onScroll"&&In("scroll",u):Z!=null&&R(u,D,Z,L))}switch(m){case"input":Rt(u),_n(u,C,!1);break;case"textarea":Rt(u),$t(u);break;case"option":C.value!=null&&u.setAttribute("value",""+De(C.value));break;case"select":u.multiple=!!C.multiple,D=C.value,D!=null?tn(u,!!C.multiple,D,!1):C.defaultValue!=null&&tn(u,!!C.multiple,C.defaultValue,!0);break;default:typeof P.onClick=="function"&&(u.onclick=Oh)}switch(m){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Rr(l),null;case 6:if(u&&l.stateNode!=null)k1(u,l,u.memoizedProps,C);else{if(typeof C!="string"&&l.stateNode===null)throw Error(n(166));if(m=$s(Tl.current),$s(us.current),$c(l)){if(C=l.stateNode,m=l.memoizedProps,C[es]=l,(D=C.nodeValue!==m)&&(u=$r,u!==null))switch(u.tag){case 3:Lc(C.nodeValue,m,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&Lc(C.nodeValue,m,(u.mode&1)!==0)}D&&(l.flags|=4)}else C=(m.nodeType===9?m:m.ownerDocument).createTextNode(C),C[es]=l,l.stateNode=C}return Rr(l),null;case 13:if(kn(Gn),C=l.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Fn&&Oi!==null&&(l.mode&1)!==0&&(l.flags&128)===0)u1(),os(),l.flags|=98560,D=!1;else if(D=$c(l),C!==null&&C.dehydrated!==null){if(u===null){if(!D)throw Error(n(318));if(D=l.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[es]=l}else os(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Rr(l),D=!1}else Do!==null&&(z1(Do),Do=null),D=!0;if(!D)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=m,l):(C=C!==null,C!==(u!==null&&u.memoizedState!==null)&&C&&(l.child.flags|=8192,(l.mode&1)!==0&&(u===null||(Gn.current&1)!==0?gr===0&&(gr=3):X1())),l.updateQueue!==null&&(l.flags|=4),Rr(l),null);case 4:return Eu(),I1(u,l),u===null&&gu(l.stateNode.containerInfo),Rr(l),null;case 10:return Wh(l.type._context),Rr(l),null;case 17:return Ci(l.type)&&Lh(),Rr(l),null;case 19:if(kn(Gn),D=l.memoizedState,D===null)return Rr(l),null;if(C=(l.flags&128)!==0,L=D.rendering,L===null)if(C)rf(D,!1);else{if(gr!==0||u!==null&&(u.flags&128)!==0)for(u=l.child;u!==null;){if(L=ma(u),L!==null){for(l.flags|=128,rf(D,!1),C=L.updateQueue,C!==null&&(l.updateQueue=C,l.flags|=4),l.subtreeFlags=0,C=m,m=l.child;m!==null;)D=m,u=C,D.flags&=14680066,L=D.alternate,L===null?(D.childLanes=0,D.lanes=u,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=L.childLanes,D.lanes=L.lanes,D.child=L.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=L.memoizedProps,D.memoizedState=L.memoizedState,D.updateQueue=L.updateQueue,D.type=L.type,u=L.dependencies,D.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),m=m.sibling;return Mn(Gn,Gn.current&1|2),l.child}u=u.sibling}D.tail!==null&&mn()>xa&&(l.flags|=128,C=!0,rf(D,!1),l.lanes=4194304)}else{if(!C)if(u=ma(L),u!==null){if(l.flags|=128,C=!0,m=u.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),rf(D,!0),D.tail===null&&D.tailMode==="hidden"&&!L.alternate&&!Fn)return Rr(l),null}else 2*mn()-D.renderingStartTime>xa&&m!==1073741824&&(l.flags|=128,C=!0,rf(D,!1),l.lanes=4194304);D.isBackwards?(L.sibling=l.child,l.child=L):(m=D.last,m!==null?m.sibling=L:l.child=L,D.last=L)}return D.tail!==null?(l=D.tail,D.rendering=l,D.tail=l.sibling,D.renderingStartTime=mn(),l.sibling=null,m=Gn.current,Mn(Gn,C?m&1|2:m&1),l):(Rr(l),null);case 22:case 23:return U1(),C=l.memoizedState!==null,u!==null&&u.memoizedState!==null!==C&&(l.flags|=8192),C&&(l.mode&1)!==0?(Fi&1073741824)!==0&&(Rr(l),l.subtreeFlags&6&&(l.flags|=8192)):Rr(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function V7(u,l){switch(da(l),l.tag){case 1:return Ci(l.type)&&Lh(),u=l.flags,u&65536?(l.flags=u&-65537|128,l):null;case 3:return Eu(),kn(wi),kn(Hr),Xh(),u=l.flags,(u&65536)!==0&&(u&128)===0?(l.flags=u&-65537|128,l):null;case 5:return Uh(l),null;case 13:if(kn(Gn),u=l.memoizedState,u!==null&&u.dehydrated!==null){if(l.alternate===null)throw Error(n(340));os()}return u=l.flags,u&65536?(l.flags=u&-65537|128,l):null;case 19:return kn(Gn),null;case 4:return Eu(),null;case 10:return Wh(l.type._context),null;case 22:case 23:return U1(),null;case 24:return null;default:return null}}var ad=!1,$n=!1,ii=typeof WeakSet=="function"?WeakSet:Set,et=null;function Fl(u,l){var m=u.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(C){jn(u,l,C)}else m.current=null}function of(u,l,m){try{m()}catch(C){jn(u,l,C)}}var w2=!1;function U7(u,l){if(_c=gh,u=En(),Mc(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var C=m.getSelection&&m.getSelection();if(C&&C.rangeCount!==0){m=C.anchorNode;var P=C.anchorOffset,D=C.focusNode;C=C.focusOffset;try{m.nodeType,D.nodeType}catch{m=null;break e}var L=0,V=-1,Z=-1,xe=0,_e=0,Ge=u,Le=null;t:for(;;){for(var Je;Ge!==m||P!==0&&Ge.nodeType!==3||(V=L+P),Ge!==D||C!==0&&Ge.nodeType!==3||(Z=L+C),Ge.nodeType===3&&(L+=Ge.nodeValue.length),(Je=Ge.firstChild)!==null;)Le=Ge,Ge=Je;for(;;){if(Ge===u)break t;if(Le===m&&++xe===P&&(V=L),Le===D&&++_e===C&&(Z=L),(Je=Ge.nextSibling)!==null)break;Ge=Le,Le=Ge.parentNode}Ge=Je}m=V===-1||Z===-1?null:{start:V,end:Z}}else m=null}m=m||{start:0,end:0}}else m=null;for(la={focusedElem:u,selectionRange:m},gh=!1,et=l;et!==null;)if(l=et,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,et=u;else for(;et!==null;){l=et;try{var nt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var ot=nt.memoizedProps,tr=nt.memoizedState,de=l.stateNode,ne=de.getSnapshotBeforeUpdate(l.elementType===l.type?ot:no(l.type,ot),tr);de.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ge=l.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ze){jn(l,l.return,ze)}if(u=l.sibling,u!==null){u.return=l.return,et=u;break}et=l.return}return nt=w2,w2=!1,nt}function Vs(u,l,m){var C=l.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var P=C=C.next;do{if((P.tag&u)===u){var D=P.destroy;P.destroy=void 0,D!==void 0&&of(l,m,D)}P=P.next}while(P!==C)}}function sf(u,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var m=l=l.next;do{if((m.tag&u)===u){var C=m.create;m.destroy=C()}m=m.next}while(m!==l)}}function ld(u){var l=u.ref;if(l!==null){var m=u.stateNode;switch(u.tag){case 5:u=m;break;default:u=m}typeof l=="function"?l(u):l.current=u}}function C2(u){var l=u.alternate;l!==null&&(u.alternate=null,C2(l)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(l=u.stateNode,l!==null&&(delete l[es],delete l[vu],delete l[kh],delete l[N],delete l[Cl])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function x2(u){return u.tag===5||u.tag===3||u.tag===4}function E2(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||x2(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function F1(u,l,m){var C=u.tag;if(C===5||C===6)u=u.stateNode,l?m.nodeType===8?m.parentNode.insertBefore(u,l):m.insertBefore(u,l):(m.nodeType===8?(l=m.parentNode,l.insertBefore(u,m)):(l=m,l.appendChild(u)),m=m._reactRootContainer,m!=null||l.onclick!==null||(l.onclick=Oh));else if(C!==4&&(u=u.child,u!==null))for(F1(u,l,m),u=u.sibling;u!==null;)F1(u,l,m),u=u.sibling}function cd(u,l,m){var C=u.tag;if(C===5||C===6)u=u.stateNode,l?m.insertBefore(u,l):m.appendChild(u);else if(C!==4&&(u=u.child,u!==null))for(cd(u,l,m),u=u.sibling;u!==null;)cd(u,l,m),u=u.sibling}var Cr=null,Bo=!1;function hs(u,l,m){for(m=m.child;m!==null;)L1(u,l,m),m=m.sibling}function L1(u,l,m){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(rl,m)}catch{}switch(m.tag){case 5:$n||Fl(m,l);case 6:var C=Cr,P=Bo;Cr=null,hs(u,l,m),Cr=C,Bo=P,Cr!==null&&(Bo?(u=Cr,m=m.stateNode,u.nodeType===8?u.parentNode.removeChild(m):u.removeChild(m)):Cr.removeChild(m.stateNode));break;case 18:Cr!==null&&(Bo?(u=Cr,m=m.stateNode,u.nodeType===8?i1(u.parentNode,m):u.nodeType===1&&i1(u,m),vn(u)):i1(Cr,m.stateNode));break;case 4:C=Cr,P=Bo,Cr=m.stateNode.containerInfo,Bo=!0,hs(u,l,m),Cr=C,Bo=P;break;case 0:case 11:case 14:case 15:if(!$n&&(C=m.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){P=C=C.next;do{var D=P,L=D.destroy;D=D.tag,L!==void 0&&((D&2)!==0||(D&4)!==0)&&of(m,l,L),P=P.next}while(P!==C)}hs(u,l,m);break;case 1:if(!$n&&(Fl(m,l),C=m.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=m.memoizedProps,C.state=m.memoizedState,C.componentWillUnmount()}catch(V){jn(m,l,V)}hs(u,l,m);break;case 21:hs(u,l,m);break;case 22:m.mode&1?($n=(C=$n)||m.memoizedState!==null,hs(u,l,m),$n=C):hs(u,l,m);break;default:hs(u,l,m)}}function Ll(u){var l=u.updateQueue;if(l!==null){u.updateQueue=null;var m=u.stateNode;m===null&&(m=u.stateNode=new ii),l.forEach(function(C){var P=J7.bind(null,u,C);m.has(C)||(m.add(C),C.then(P,P))})}}function ki(u,l){var m=l.deletions;if(m!==null)for(var C=0;C<m.length;C++){var P=m[C];try{var D=u,L=l,V=L;e:for(;V!==null;){switch(V.tag){case 5:Cr=V.stateNode,Bo=!1;break e;case 3:Cr=V.stateNode.containerInfo,Bo=!0;break e;case 4:Cr=V.stateNode.containerInfo,Bo=!0;break e}V=V.return}if(Cr===null)throw Error(n(160));L1(D,L,P),Cr=null,Bo=!1;var Z=P.alternate;Z!==null&&(Z.return=null),P.return=null}catch(xe){jn(P,l,xe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)_1(l,u),l=l.sibling}function _1(u,l){var m=u.alternate,C=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(ki(l,u),Ro(u),C&4){try{Vs(3,u,u.return),sf(3,u)}catch(ot){jn(u,u.return,ot)}try{Vs(5,u,u.return)}catch(ot){jn(u,u.return,ot)}}break;case 1:ki(l,u),Ro(u),C&512&&m!==null&&Fl(m,m.return);break;case 5:if(ki(l,u),Ro(u),C&512&&m!==null&&Fl(m,m.return),u.flags&32){var P=u.stateNode;try{wr(P,"")}catch(ot){jn(u,u.return,ot)}}if(C&4&&(P=u.stateNode,P!=null)){var D=u.memoizedProps,L=m!==null?m.memoizedProps:D,V=u.type,Z=u.updateQueue;if(u.updateQueue=null,Z!==null)try{V==="input"&&D.type==="radio"&&D.name!=null&&wn(P,D),Eo(V,L);var xe=Eo(V,D);for(L=0;L<Z.length;L+=2){var _e=Z[L],Ge=Z[L+1];_e==="style"?Ui(P,Ge):_e==="dangerouslySetInnerHTML"?yr(P,Ge):_e==="children"?wr(P,Ge):R(P,_e,Ge,xe)}switch(V){case"input":Mt(P,D);break;case"textarea":Nn(P,D);break;case"select":var Le=P._wrapperState.wasMultiple;P._wrapperState.wasMultiple=!!D.multiple;var Je=D.value;Je!=null?tn(P,!!D.multiple,Je,!1):Le!==!!D.multiple&&(D.defaultValue!=null?tn(P,!!D.multiple,D.defaultValue,!0):tn(P,!!D.multiple,D.multiple?[]:"",!1))}P[vu]=D}catch(ot){jn(u,u.return,ot)}}break;case 6:if(ki(l,u),Ro(u),C&4){if(u.stateNode===null)throw Error(n(162));P=u.stateNode,D=u.memoizedProps;try{P.nodeValue=D}catch(ot){jn(u,u.return,ot)}}break;case 3:if(ki(l,u),Ro(u),C&4&&m!==null&&m.memoizedState.isDehydrated)try{vn(l.containerInfo)}catch(ot){jn(u,u.return,ot)}break;case 4:ki(l,u),Ro(u);break;case 13:ki(l,u),Ro(u),P=u.child,P.flags&8192&&(D=P.memoizedState!==null,P.stateNode.isHidden=D,!D||P.alternate!==null&&P.alternate.memoizedState!==null||(G1=mn())),C&4&&Ll(u);break;case 22:if(_e=m!==null&&m.memoizedState!==null,u.mode&1?($n=(xe=$n)||_e,ki(l,u),$n=xe):ki(l,u),Ro(u),C&8192){if(xe=u.memoizedState!==null,(u.stateNode.isHidden=xe)&&!_e&&(u.mode&1)!==0)for(et=u,_e=u.child;_e!==null;){for(Ge=et=_e;et!==null;){switch(Le=et,Je=Le.child,Le.tag){case 0:case 11:case 14:case 15:Vs(4,Le,Le.return);break;case 1:Fl(Le,Le.return);var nt=Le.stateNode;if(typeof nt.componentWillUnmount=="function"){C=Le,m=Le.return;try{l=C,nt.props=l.memoizedProps,nt.state=l.memoizedState,nt.componentWillUnmount()}catch(ot){jn(C,m,ot)}}break;case 5:Fl(Le,Le.return);break;case 22:if(Le.memoizedState!==null){Du(Ge);continue}}Je!==null?(Je.return=Le,et=Je):Du(Ge)}_e=_e.sibling}e:for(_e=null,Ge=u;;){if(Ge.tag===5){if(_e===null){_e=Ge;try{P=Ge.stateNode,xe?(D=P.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(V=Ge.stateNode,Z=Ge.memoizedProps.style,L=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,V.style.display=Vi("display",L))}catch(ot){jn(u,u.return,ot)}}}else if(Ge.tag===6){if(_e===null)try{Ge.stateNode.nodeValue=xe?"":Ge.memoizedProps}catch(ot){jn(u,u.return,ot)}}else if((Ge.tag!==22&&Ge.tag!==23||Ge.memoizedState===null||Ge===u)&&Ge.child!==null){Ge.child.return=Ge,Ge=Ge.child;continue}if(Ge===u)break e;for(;Ge.sibling===null;){if(Ge.return===null||Ge.return===u)break e;_e===Ge&&(_e=null),Ge=Ge.return}_e===Ge&&(_e=null),Ge.sibling.return=Ge.return,Ge=Ge.sibling}}break;case 19:ki(l,u),Ro(u),C&4&&Ll(u);break;case 21:break;default:ki(l,u),Ro(u)}}function Ro(u){var l=u.flags;if(l&2){try{e:{for(var m=u.return;m!==null;){if(x2(m)){var C=m;break e}m=m.return}throw Error(n(160))}switch(C.tag){case 5:var P=C.stateNode;C.flags&32&&(wr(P,""),C.flags&=-33);var D=E2(u);cd(u,D,P);break;case 3:case 4:var L=C.stateNode.containerInfo,V=E2(u);F1(u,V,L);break;default:throw Error(n(161))}}catch(Z){jn(u,u.return,Z)}u.flags&=-3}l&4096&&(u.flags&=-4097)}function fd(u,l,m){et=u,N1(u)}function N1(u,l,m){for(var C=(u.mode&1)!==0;et!==null;){var P=et,D=P.child;if(P.tag===22&&C){var L=P.memoizedState!==null||ad;if(!L){var V=P.alternate,Z=V!==null&&V.memoizedState!==null||$n;V=ad;var xe=$n;if(ad=L,($n=Z)&&!xe)for(et=P;et!==null;)L=et,Z=L.child,L.tag===22&&L.memoizedState!==null?P2(P):Z!==null?(Z.return=L,et=Z):P2(P);for(;D!==null;)et=D,N1(D),D=D.sibling;et=P,ad=V,$n=xe}Mo(u)}else(P.subtreeFlags&8772)!==0&&D!==null?(D.return=P,et=D):Mo(u)}}function Mo(u){for(;et!==null;){var l=et;if((l.flags&8772)!==0){var m=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:$n||sf(5,l);break;case 1:var C=l.stateNode;if(l.flags&4&&!$n)if(m===null)C.componentDidMount();else{var P=l.elementType===l.type?m.memoizedProps:no(l.type,m.memoizedProps);C.componentDidUpdate(P,m.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var D=l.updateQueue;D!==null&&c1(l,D,C);break;case 3:var L=l.updateQueue;if(L!==null){if(m=null,l.child!==null)switch(l.child.tag){case 5:m=l.child.stateNode;break;case 1:m=l.child.stateNode}c1(l,L,m)}break;case 5:var V=l.stateNode;if(m===null&&l.flags&4){m=V;var Z=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&m.focus();break;case"img":Z.src&&(m.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var xe=l.alternate;if(xe!==null){var _e=xe.memoizedState;if(_e!==null){var Ge=_e.dehydrated;Ge!==null&&vn(Ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}$n||l.flags&512&&ld(l)}catch(Le){jn(l,l.return,Le)}}if(l===u){et=null;break}if(m=l.sibling,m!==null){m.return=l.return,et=m;break}et=l.return}}function Du(u){for(;et!==null;){var l=et;if(l===u){et=null;break}var m=l.sibling;if(m!==null){m.return=l.return,et=m;break}et=l.return}}function P2(u){for(;et!==null;){var l=et;try{switch(l.tag){case 0:case 11:case 15:var m=l.return;try{sf(4,l)}catch(Z){jn(l,m,Z)}break;case 1:var C=l.stateNode;if(typeof C.componentDidMount=="function"){var P=l.return;try{C.componentDidMount()}catch(Z){jn(l,P,Z)}}var D=l.return;try{ld(l)}catch(Z){jn(l,D,Z)}break;case 5:var L=l.return;try{ld(l)}catch(Z){jn(l,L,Z)}}}catch(Z){jn(l,l.return,Z)}if(l===u){et=null;break}var V=l.sibling;if(V!==null){V.return=l.return,et=V;break}et=l.return}}var S2=Math.ceil,hd=_.ReactCurrentDispatcher,H1=_.ReactCurrentOwner,ro=_.ReactCurrentBatchConfig,an=0,xr=null,ar=null,Mr=0,Fi=0,_l=yi(0),gr=0,uf=null,Tu=0,af=0,dd=0,lf=null,Pi=null,G1=0,xa=1/0,Us=null,gd=!1,$1=null,Au=null,pd=!1,Bu=null,oi=0,cf=0,W1=null,md=-1,ff=0;function si(){return(an&6)!==0?mn():md!==-1?md:md=mn()}function Ru(u){return(u.mode&1)===0?1:(an&2)!==0&&Mr!==0?Mr&-Mr:r2.transition!==null?(ff===0&&(ff=Xe()),ff):(u=wt,u!==0||(u=window.event,u=u===void 0?16:Rp(u.type)),u)}function bo(u,l,m,C){if(50<cf)throw cf=0,W1=null,Error(n(185));Ft(u,m,C),((an&2)===0||u!==xr)&&(u===xr&&((an&2)===0&&(af|=m),gr===4&&Mu(u,Mr)),Si(u,C),m===1&&an===0&&(l.mode&1)===0&&(xa=mn()+500,_h&&wu()))}function Si(u,l){var m=u.callbackNode;je(u,l);var C=Be(u,u===xr?Mr:0);if(C===0)m!==null&&lh(m),u.callbackNode=null,u.callbackPriority=0;else if(l=C&-C,u.callbackPriority!==l){if(m!=null&&lh(m),l===1)u.tag===0?ca(D2.bind(null,u)):e2(D2.bind(null,u)),Ih(function(){(an&6)===0&&wu()}),m=null;else{switch(Cn(C)){case 1:m=Ko;break;case 4:m=hh;break;case 16:m=Yo;break;case 536870912:m=Sc;break;default:m=Yo}m=O2(m,vd.bind(null,u))}u.callbackPriority=l,u.callbackNode=m}}function vd(u,l){if(md=-1,ff=0,(an&6)!==0)throw Error(n(327));var m=u.callbackNode;if(Nl()&&u.callbackNode!==m)return null;var C=Be(u,u===xr?Mr:0);if(C===0)return null;if((C&30)!==0||(C&u.expiredLanes)!==0||l)l=yd(u,C);else{l=C;var P=an;an|=2;var D=A2();(xr!==u||Mr!==l)&&(Us=null,xa=mn()+500,Pa(u,l));do try{Y7();break}catch(V){T2(u,V)}while(!0);Ns(),hd.current=D,an=P,ar!==null?l=0:(xr=null,Mr=0,l=gr)}if(l!==0){if(l===2&&(P=$e(u),P!==0&&(C=P,l=j1(u,P))),l===1)throw m=uf,Pa(u,0),Mu(u,C),Si(u,mn()),m;if(l===6)Mu(u,C);else{if(P=u.current.alternate,(C&30)===0&&!X7(P)&&(l=yd(u,C),l===2&&(D=$e(u),D!==0&&(C=D,l=j1(u,D))),l===1))throw m=uf,Pa(u,0),Mu(u,C),Si(u,mn()),m;switch(u.finishedWork=P,u.finishedLanes=C,l){case 0:case 1:throw Error(n(345));case 2:Sa(u,Pi,Us);break;case 3:if(Mu(u,C),(C&130023424)===C&&(l=G1+500-mn(),10<l)){if(Be(u,0)!==0)break;if(P=u.suspendedLanes,(P&C)!==C){si(),u.pingedLanes|=u.suspendedLanes&P;break}u.timeoutHandle=pu(Sa.bind(null,u,Pi,Us),l);break}Sa(u,Pi,Us);break;case 4:if(Mu(u,C),(C&4194240)===C)break;for(l=u.eventTimes,P=-1;0<C;){var L=31-Bi(C);D=1<<L,L=l[L],L>P&&(P=L),C&=~D}if(C=P,C=mn()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*S2(C/1960))-C,10<C){u.timeoutHandle=pu(Sa.bind(null,u,Pi,Us),C);break}Sa(u,Pi,Us);break;case 5:Sa(u,Pi,Us);break;default:throw Error(n(329))}}}return Si(u,mn()),u.callbackNode===m?vd.bind(null,u):null}function j1(u,l){var m=lf;return u.current.memoizedState.isDehydrated&&(Pa(u,l).flags|=256),u=yd(u,l),u!==2&&(l=Pi,Pi=m,l!==null&&z1(l)),u}function z1(u){Pi===null?Pi=u:Pi.push.apply(Pi,u)}function X7(u){for(var l=u;;){if(l.flags&16384){var m=l.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var C=0;C<m.length;C++){var P=m[C],D=P.getSnapshot;P=P.value;try{if(!ve(D(),P))return!1}catch{return!1}}}if(m=l.child,l.subtreeFlags&16384&&m!==null)m.return=l,l=m;else{if(l===u)break;for(;l.sibling===null;){if(l.return===null||l.return===u)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Mu(u,l){for(l&=~dd,l&=~af,u.suspendedLanes|=l,u.pingedLanes&=~l,u=u.expirationTimes;0<l;){var m=31-Bi(l),C=1<<m;u[m]=-1,l&=~C}}function D2(u){if((an&6)!==0)throw Error(n(327));Nl();var l=Be(u,0);if((l&1)===0)return Si(u,mn()),null;var m=yd(u,l);if(u.tag!==0&&m===2){var C=$e(u);C!==0&&(l=C,m=j1(u,C))}if(m===1)throw m=uf,Pa(u,0),Mu(u,l),Si(u,mn()),m;if(m===6)throw Error(n(345));return u.finishedWork=u.current.alternate,u.finishedLanes=l,Sa(u,Pi,Us),Si(u,mn()),null}function V1(u,l){var m=an;an|=1;try{return u(l)}finally{an=m,an===0&&(xa=mn()+500,_h&&wu())}}function Ea(u){Bu!==null&&Bu.tag===0&&(an&6)===0&&Nl();var l=an;an|=1;var m=ro.transition,C=wt;try{if(ro.transition=null,wt=1,u)return u()}finally{wt=C,ro.transition=m,an=l,(an&6)===0&&wu()}}function U1(){Fi=_l.current,kn(_l)}function Pa(u,l){u.finishedWork=null,u.finishedLanes=0;var m=u.timeoutHandle;if(m!==-1&&(u.timeoutHandle=-1,Hc(m)),ar!==null)for(m=ar.return;m!==null;){var C=m;switch(da(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&Lh();break;case 3:Eu(),kn(wi),kn(Hr),Xh();break;case 5:Uh(C);break;case 4:Eu();break;case 13:kn(Gn);break;case 19:kn(Gn);break;case 10:Wh(C.type._context);break;case 22:case 23:U1()}m=m.return}if(xr=u,ar=u=Oo(u.current,null),Mr=Fi=l,gr=0,uf=null,dd=af=Tu=0,Pi=lf=null,pa!==null){for(l=0;l<pa.length;l++)if(m=pa[l],C=m.interleaved,C!==null){m.interleaved=null;var P=C.next,D=m.pending;if(D!==null){var L=D.next;D.next=P,C.next=L}m.pending=C}pa=null}return u}function T2(u,l){do{var m=ar;try{if(Ns(),Uc.current=Jh,Al){for(var C=Wn.memoizedState;C!==null;){var P=C.queue;P!==null&&(P.pending=null),C=C.next}Al=!1}if(Pu=0,dr=er=Wn=null,Xc=!1,va=0,H1.current=null,m===null||m.return===null){gr=1,uf=l,ar=null;break}e:{var D=u,L=m.return,V=m,Z=l;if(l=Mr,V.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var xe=Z,_e=V,Ge=_e.tag;if((_e.mode&1)===0&&(Ge===0||Ge===11||Ge===15)){var Le=_e.alternate;Le?(_e.updateQueue=Le.updateQueue,_e.memoizedState=Le.memoizedState,_e.lanes=Le.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var Je=g2(L);if(Je!==null){Je.flags&=-257,T1(Je,L,V,D,l),Je.mode&1&&Qc(D,xe,l),l=Je,Z=xe;var nt=l.updateQueue;if(nt===null){var ot=new Set;ot.add(Z),l.updateQueue=ot}else nt.add(Z);break e}else{if((l&1)===0){Qc(D,xe,l),X1();break e}Z=Error(n(426))}}else if(Fn&&V.mode&1){var tr=g2(L);if(tr!==null){(tr.flags&65536)===0&&(tr.flags|=256),T1(tr,L,V,D,l),ss(Ca(Z,V));break e}}D=Z=Ca(Z,V),gr!==4&&(gr=2),lf===null?lf=[D]:lf.push(D),D=L;do{switch(D.tag){case 3:D.flags|=65536,l&=-l,D.lanes|=l;var de=Zc(D,Z,l);s2(D,de);break e;case 1:V=Z;var ne=D.type,ge=D.stateNode;if((D.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Au===null||!Au.has(ge)))){D.flags|=65536,l&=-l,D.lanes|=l;var ze=id(D,V,l);s2(D,ze);break e}}D=D.return}while(D!==null)}R2(m)}catch(ct){l=ct,ar===m&&m!==null&&(ar=m=m.return);continue}break}while(!0)}function A2(){var u=hd.current;return hd.current=Jh,u===null?Jh:u}function X1(){(gr===0||gr===3||gr===2)&&(gr=4),xr===null||(Tu&268435455)===0&&(af&268435455)===0||Mu(xr,Mr)}function yd(u,l){var m=an;an|=2;var C=A2();(xr!==u||Mr!==l)&&(Us=null,Pa(u,l));do try{K7();break}catch(P){T2(u,P)}while(!0);if(Ns(),an=m,hd.current=C,ar!==null)throw Error(n(261));return xr=null,Mr=0,gr}function K7(){for(;ar!==null;)B2(ar)}function Y7(){for(;ar!==null&&!tl();)B2(ar)}function B2(u){var l=b2(u.alternate,u,Fi);u.memoizedProps=u.pendingProps,l===null?R2(u):ar=l,H1.current=null}function R2(u){var l=u;do{var m=l.alternate;if(u=l.return,(l.flags&32768)===0){if(m=z7(m,l,Fi),m!==null){ar=m;return}}else{if(m=V7(m,l),m!==null){m.flags&=32767,ar=m;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{gr=6,ar=null;return}}if(l=l.sibling,l!==null){ar=l;return}ar=l=u}while(l!==null);gr===0&&(gr=5)}function Sa(u,l,m){var C=wt,P=ro.transition;try{ro.transition=null,wt=1,q7(u,l,m,C)}finally{ro.transition=P,wt=C}return null}function q7(u,l,m,C){do Nl();while(Bu!==null);if((an&6)!==0)throw Error(n(327));m=u.finishedWork;var P=u.finishedLanes;if(m===null)return null;if(u.finishedWork=null,u.finishedLanes=0,m===u.current)throw Error(n(177));u.callbackNode=null,u.callbackPriority=0;var D=m.lanes|m.childLanes;if(un(u,D),u===xr&&(ar=xr=null,Mr=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||pd||(pd=!0,O2(Yo,function(){return Nl(),null})),D=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||D){D=ro.transition,ro.transition=null;var L=wt;wt=1;var V=an;an|=4,H1.current=null,U7(u,m),_1(m,u),G7(la),gh=!!_c,la=_c=null,u.current=m,fd(m),ch(),an=V,wt=L,ro.transition=D}else u.current=m;if(pd&&(pd=!1,Bu=u,oi=P),D=u.pendingLanes,D===0&&(Au=null),H0(m.stateNode),Si(u,mn()),l!==null)for(C=u.onRecoverableError,m=0;m<l.length;m++)P=l[m],C(P.value,{componentStack:P.stack,digest:P.digest});if(gd)throw gd=!1,u=$1,$1=null,u;return(oi&1)!==0&&u.tag!==0&&Nl(),D=u.pendingLanes,(D&1)!==0?u===W1?cf++:(cf=0,W1=u):cf=0,wu(),null}function Nl(){if(Bu!==null){var u=Cn(oi),l=ro.transition,m=wt;try{if(ro.transition=null,wt=16>u?16:u,Bu===null)var C=!1;else{if(u=Bu,Bu=null,oi=0,(an&6)!==0)throw Error(n(331));var P=an;for(an|=4,et=u.current;et!==null;){var D=et,L=D.child;if((et.flags&16)!==0){var V=D.deletions;if(V!==null){for(var Z=0;Z<V.length;Z++){var xe=V[Z];for(et=xe;et!==null;){var _e=et;switch(_e.tag){case 0:case 11:case 15:Vs(8,_e,D)}var Ge=_e.child;if(Ge!==null)Ge.return=_e,et=Ge;else for(;et!==null;){_e=et;var Le=_e.sibling,Je=_e.return;if(C2(_e),_e===xe){et=null;break}if(Le!==null){Le.return=Je,et=Le;break}et=Je}}}var nt=D.alternate;if(nt!==null){var ot=nt.child;if(ot!==null){nt.child=null;do{var tr=ot.sibling;ot.sibling=null,ot=tr}while(ot!==null)}}et=D}}if((D.subtreeFlags&2064)!==0&&L!==null)L.return=D,et=L;else e:for(;et!==null;){if(D=et,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Vs(9,D,D.return)}var de=D.sibling;if(de!==null){de.return=D.return,et=de;break e}et=D.return}}var ne=u.current;for(et=ne;et!==null;){L=et;var ge=L.child;if((L.subtreeFlags&2064)!==0&&ge!==null)ge.return=L,et=ge;else e:for(L=ne;et!==null;){if(V=et,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:sf(9,V)}}catch(ct){jn(V,V.return,ct)}if(V===L){et=null;break e}var ze=V.sibling;if(ze!==null){ze.return=V.return,et=ze;break e}et=V.return}}if(an=P,wu(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(rl,u)}catch{}C=!0}return C}finally{wt=m,ro.transition=l}}return!1}function wd(u,l,m){l=Ca(m,l),l=Zc(u,l,1),u=eo(u,l,1),l=si(),u!==null&&(Ft(u,1,l),Si(u,l))}function jn(u,l,m){if(u.tag===3)wd(u,u,m);else for(;l!==null;){if(l.tag===3){wd(l,u,m);break}else if(l.tag===1){var C=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Au===null||!Au.has(C))){u=Ca(m,u),u=id(l,u,1),l=eo(l,u,1),u=si(),l!==null&&(Ft(l,1,u),Si(l,u));break}}l=l.return}}function Z7(u,l,m){var C=u.pingCache;C!==null&&C.delete(l),l=si(),u.pingedLanes|=u.suspendedLanes&m,xr===u&&(Mr&m)===m&&(gr===4||gr===3&&(Mr&130023424)===Mr&&500>mn()-G1?Pa(u,0):dd|=m),Si(u,l)}function M2(u,l){l===0&&((u.mode&1)===0?l=1:(l=ae,ae<<=1,(ae&130023424)===0&&(ae=4194304)));var m=si();u=Hs(u,l),u!==null&&(Ft(u,l,m),Si(u,m))}function Q7(u){var l=u.memoizedState,m=0;l!==null&&(m=l.retryLane),M2(u,m)}function J7(u,l){var m=0;switch(u.tag){case 13:var C=u.stateNode,P=u.memoizedState;P!==null&&(m=P.retryLane);break;case 19:C=u.stateNode;break;default:throw Error(n(314))}C!==null&&C.delete(l),M2(u,m)}var b2;b2=function(u,l,m){if(u!==null)if(u.memoizedProps!==l.pendingProps||wi.current)ri=!0;else{if((u.lanes&m)===0&&(l.flags&128)===0)return ri=!1,v2(u,l,m);ri=(u.flags&131072)!==0}else ri=!1,Fn&&(l.flags&1048576)!==0&&t2(l,Hh,l.index);switch(l.lanes=0,l.tag){case 2:var C=l.type;ud(u,l),u=l.pendingProps;var P=El(l,Hr.current);xu(l,m),P=ya(null,l,C,u,P,m);var D=Kh();return l.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Ci(C)?(D=!0,Yi(l)):D=!1,l.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,zh(l),P.updater=nd,l.stateNode=P,P._reactInternals=l,D1(l,C,u,m),l=O1(null,l,C,!0,D,m)):(l.tag=0,Fn&&D&&Gc(l),Ar(null,l,P,m),l=l.child),l;case 16:C=l.elementType;e:{switch(ud(u,l),u=l.pendingProps,P=C._init,C=P(C._payload),l.type=C,P=l.tag=t5(C),u=no(C,u),P){case 0:l=M1(null,l,C,u,m);break e;case 1:l=b1(null,l,C,u,m);break e;case 11:l=p2(null,l,C,u,m);break e;case 14:l=A1(null,l,C,no(C.type,u),m);break e}throw Error(n(306,C,""))}return l;case 0:return C=l.type,P=l.pendingProps,P=l.elementType===C?P:no(C,P),M1(u,l,C,P,m);case 1:return C=l.type,P=l.pendingProps,P=l.elementType===C?P:no(C,P),b1(u,l,C,P,m);case 3:e:{if(m2(l),u===null)throw Error(n(387));C=l.pendingProps,D=l.memoizedState,P=D.element,o2(u,l),Dl(l,C,null,m);var L=l.memoizedState;if(C=L.element,D.isDehydrated)if(D={element:C,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},l.updateQueue.baseState=D,l.memoizedState=D,l.flags&256){P=Ca(Error(n(423)),l),l=fs(u,l,C,m,P);break e}else if(C!==P){P=Ca(Error(n(424)),l),l=fs(u,l,C,m,P);break e}else for(Oi=mu(l.stateNode.containerInfo.firstChild),$r=l,Fn=!0,Do=null,m=$h(l,null,C,m),l.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(os(),C===P){l=Ao(u,l,m);break e}Ar(u,l,C,m)}l=l.child}return l;case 5:return h1(l),u===null&&xi(l),C=l.type,P=l.pendingProps,D=u!==null?u.memoizedProps:null,L=P.children,Nc(C,P)?L=null:D!==null&&Nc(C,D)&&(l.flags|=32),R1(u,l),Ar(u,l,L,m),l.child;case 6:return u===null&&xi(l),null;case 13:return sd(u,l,m);case 4:return f1(l,l.stateNode.containerInfo),C=l.pendingProps,u===null?l.child=qn(l,null,C,m):Ar(u,l,C,m),l.child;case 11:return C=l.type,P=l.pendingProps,P=l.elementType===C?P:no(C,P),p2(u,l,C,P,m);case 7:return Ar(u,l,l.pendingProps,m),l.child;case 8:return Ar(u,l,l.pendingProps.children,m),l.child;case 12:return Ar(u,l,l.pendingProps.children,m),l.child;case 10:e:{if(C=l.type._context,P=l.pendingProps,D=l.memoizedProps,L=P.value,Mn(jc,C._currentValue),C._currentValue=L,D!==null)if(ve(D.value,L)){if(D.children===P.children&&!wi.current){l=Ao(u,l,m);break e}}else for(D=l.child,D!==null&&(D.return=l);D!==null;){var V=D.dependencies;if(V!==null){L=D.child;for(var Z=V.firstContext;Z!==null;){if(Z.context===C){if(D.tag===1){Z=Gs(-1,m&-m),Z.tag=2;var xe=D.updateQueue;if(xe!==null){xe=xe.shared;var _e=xe.pending;_e===null?Z.next=Z:(Z.next=_e.next,_e.next=Z),xe.pending=Z}}D.lanes|=m,Z=D.alternate,Z!==null&&(Z.lanes|=m),Tr(D.return,m,l),V.lanes|=m;break}Z=Z.next}}else if(D.tag===10)L=D.type===l.type?null:D.child;else if(D.tag===18){if(L=D.return,L===null)throw Error(n(341));L.lanes|=m,V=L.alternate,V!==null&&(V.lanes|=m),Tr(L,m,l),L=D.sibling}else L=D.child;if(L!==null)L.return=D;else for(L=D;L!==null;){if(L===l){L=null;break}if(D=L.sibling,D!==null){D.return=L.return,L=D;break}L=L.return}D=L}Ar(u,l,P.children,m),l=l.child}return l;case 9:return P=l.type,C=l.pendingProps.children,xu(l,m),P=Qi(P),C=C(P),l.flags|=1,Ar(u,l,C,m),l.child;case 14:return C=l.type,P=no(C,l.pendingProps),P=no(C.type,P),A1(u,l,C,P,m);case 15:return cs(u,l,l.type,l.pendingProps,m);case 17:return C=l.type,P=l.pendingProps,P=l.elementType===C?P:no(C,P),ud(u,l),l.tag=1,Ci(C)?(u=!0,Yi(l)):u=!1,xu(l,m),wa(l,C,P),D1(l,C,P,m),O1(null,l,C,!0,u,m);case 19:return Su(u,l,m);case 22:return B1(u,l,m)}throw Error(n(156,l.tag))};function O2(u,l){return ah(u,l)}function e5(u,l,m,C){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(u,l,m,C){return new e5(u,l,m,C)}function Cd(u){return u=u.prototype,!(!u||!u.isReactComponent)}function t5(u){if(typeof u=="function")return Cd(u)?1:0;if(u!=null){if(u=u.$$typeof,u===ie)return 11;if(u===Ce)return 14}return 2}function Oo(u,l){var m=u.alternate;return m===null?(m=io(u.tag,l,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=l,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&14680064,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,l=u.dependencies,m.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m}function xd(u,l,m,C,P,D){var L=2;if(C=u,typeof u=="function")Cd(u)&&(L=1);else if(typeof u=="string")L=5;else e:switch(u){case z:return Da(m.children,P,D,l);case Q:L=8,P|=8;break;case se:return u=io(12,m,l,P|2),u.elementType=se,u.lanes=D,u;case ce:return u=io(13,m,l,P),u.elementType=ce,u.lanes=D,u;case me:return u=io(19,m,l,P),u.elementType=me,u.lanes=D,u;case Ae:return Ed(m,P,D,l);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case te:L=10;break e;case Ee:L=9;break e;case ie:L=11;break e;case Ce:L=14;break e;case Fe:L=16,C=null;break e}throw Error(n(130,u==null?u:typeof u,""))}return l=io(L,m,l,P),l.elementType=u,l.type=C,l.lanes=D,l}function Da(u,l,m,C){return u=io(7,u,C,l),u.lanes=m,u}function Ed(u,l,m,C){return u=io(22,u,C,l),u.elementType=Ae,u.lanes=m,u.stateNode={isHidden:!1},u}function K1(u,l,m){return u=io(6,u,null,l),u.lanes=m,u}function Y1(u,l,m){return l=io(4,u.children!==null?u.children:[],u.key,l),l.lanes=m,l.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},l}function n5(u,l,m,C,P){this.tag=l,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tt(0),this.expirationTimes=tt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tt(0),this.identifierPrefix=C,this.onRecoverableError=P,this.mutableSourceEagerHydrationData=null}function q1(u,l,m,C,P,D,L,V,Z){return u=new n5(u,l,m,V,Z),l===1?(l=1,D===!0&&(l|=8)):l=0,D=io(3,null,null,l),u.current=D,D.stateNode=u,D.memoizedState={element:C,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},zh(D),u}function r5(u,l,m){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:C==null?null:""+C,children:u,containerInfo:l,implementation:m}}function I2(u){if(!u)return yu;u=u._reactInternals;e:{if(bs(u)!==u||u.tag!==1)throw Error(n(170));var l=u;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Ci(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(u.tag===1){var m=u.type;if(Ci(m))return Qp(u,m,l)}return l}function k2(u,l,m,C,P,D,L,V,Z){return u=q1(m,C,!0,u,P,D,L,V,Z),u.context=I2(null),m=u.current,C=si(),P=Ru(m),D=Gs(C,P),D.callback=l??null,eo(m,D,P),u.current.lanes=P,Ft(u,P,C),Si(u,C),u}function Pd(u,l,m,C){var P=l.current,D=si(),L=Ru(P);return m=I2(m),l.context===null?l.context=m:l.pendingContext=m,l=Gs(D,L),l.payload={element:u},C=C===void 0?null:C,C!==null&&(l.callback=C),u=eo(P,l,L),u!==null&&(bo(u,P,L,D),Vh(u,P,L)),L}function Sd(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function F2(u,l){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<l?m:l}}function Z1(u,l){F2(u,l),(u=u.alternate)&&F2(u,l)}function i5(){return null}var L2=typeof reportError=="function"?reportError:function(u){console.error(u)};function Dd(u){this._internalRoot=u}hf.prototype.render=Dd.prototype.render=function(u){var l=this._internalRoot;if(l===null)throw Error(n(409));Pd(u,l,null,null)},hf.prototype.unmount=Dd.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var l=u.containerInfo;Ea(function(){Pd(null,u,null,null)}),l[bi]=null}};function hf(u){this._internalRoot=u}hf.prototype.unstable_scheduleHydration=function(u){if(u){var l=Dc();u={blockedOn:null,target:u,priority:l};for(var m=0;m<cu.length&&l!==0&&l<cu[m].priority;m++);cu.splice(m,0,u),m===0&&Ap(u)}};function Q1(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Td(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function _2(){}function o5(u,l,m,C,P){if(P){if(typeof C=="function"){var D=C;C=function(){var xe=Sd(L);D.call(xe)}}var L=k2(l,C,u,0,null,!1,!1,"",_2);return u._reactRootContainer=L,u[bi]=L.current,gu(u.nodeType===8?u.parentNode:u),Ea(),L}for(;P=u.lastChild;)u.removeChild(P);if(typeof C=="function"){var V=C;C=function(){var xe=Sd(Z);V.call(xe)}}var Z=q1(u,0,!1,null,null,!1,!1,"",_2);return u._reactRootContainer=Z,u[bi]=Z.current,gu(u.nodeType===8?u.parentNode:u),Ea(function(){Pd(l,Z,m,C)}),Z}function Ta(u,l,m,C,P){var D=m._reactRootContainer;if(D){var L=D;if(typeof P=="function"){var V=P;P=function(){var Z=Sd(L);V.call(Z)}}Pd(l,L,u,P)}else L=o5(m,l,u,P,C);return Sd(L)}Fr=function(u){switch(u.tag){case 3:var l=u.stateNode;if(l.current.memoizedState.isDehydrated){var m=ee(l.pendingLanes);m!==0&&(Qt(l,m|1),Si(l,mn()),(an&6)===0&&(xa=mn()+500,wu()))}break;case 13:Ea(function(){var C=Hs(u,1);if(C!==null){var P=si();bo(C,u,1,P)}}),Z1(u,1)}},qo=function(u){if(u.tag===13){var l=Hs(u,134217728);if(l!==null){var m=si();bo(l,u,134217728,m)}Z1(u,134217728)}},il=function(u){if(u.tag===13){var l=Ru(u),m=Hs(u,l);if(m!==null){var C=si();bo(m,u,l,C)}Z1(u,l)}},Dc=function(){return wt},na=function(u,l){var m=wt;try{return wt=u,l()}finally{wt=m}},pi=function(u,l,m){switch(l){case"input":if(Mt(u,m),l=m.name,m.type==="radio"&&l!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<m.length;l++){var C=m[l];if(C!==u&&C.form===u.form){var P=Fh(C);if(!P)throw Error(n(90));It(C),Mt(C,P)}}}break;case"textarea":Nn(u,m);break;case"select":l=m.value,l!=null&&tn(u,!!m.multiple,l,!1)}},rh=V1,wc=Ea;var s5={usingClientEntryPoint:!1,Events:[Nr,Nt,Fh,th,nh,V1]},df={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u5={bundleType:df.bundleType,version:df.version,rendererPackageName:df.rendererPackageName,rendererConfig:df.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=sh(u),u===null?null:u.stateNode},findFiberByHostInstance:df.findFiberByHostInstance||i5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ad.isDisabled&&Ad.supportsFiber)try{rl=Ad.inject(u5),mi=Ad}catch{}}return ao.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s5,ao.createPortal=function(u,l){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q1(l))throw Error(n(200));return r5(u,l,null,m)},ao.createRoot=function(u,l){if(!Q1(u))throw Error(n(299));var m=!1,C="",P=L2;return l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(C=l.identifierPrefix),l.onRecoverableError!==void 0&&(P=l.onRecoverableError)),l=q1(u,1,!1,null,null,m,!1,C,P),u[bi]=l.current,gu(u.nodeType===8?u.parentNode:u),new Dd(l)},ao.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var l=u._reactInternals;if(l===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=sh(l),u=u===null?null:u.stateNode,u},ao.flushSync=function(u){return Ea(u)},ao.hydrate=function(u,l,m){if(!Td(l))throw Error(n(200));return Ta(null,u,l,!0,m)},ao.hydrateRoot=function(u,l,m){if(!Q1(u))throw Error(n(405));var C=m!=null&&m.hydratedSources||null,P=!1,D="",L=L2;if(m!=null&&(m.unstable_strictMode===!0&&(P=!0),m.identifierPrefix!==void 0&&(D=m.identifierPrefix),m.onRecoverableError!==void 0&&(L=m.onRecoverableError)),l=k2(l,null,u,1,m??null,P,!1,D,L),u[bi]=l.current,gu(u),C)for(u=0;u<C.length;u++)m=C[u],P=m._getVersion,P=P(m._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[m,P]:l.mutableSourceEagerHydrationData.push(m,P);return new hf(l)},ao.render=function(u,l,m){if(!Td(l))throw Error(n(200));return Ta(null,u,l,!1,m)},ao.unmountComponentAtNode=function(u){if(!Td(u))throw Error(n(40));return u._reactRootContainer?(Ea(function(){Ta(null,null,u,!1,function(){u._reactRootContainer=null,u[bi]=null})}),!0):!1},ao.unstable_batchedUpdates=V1,ao.unstable_renderSubtreeIntoContainer=function(u,l,m,C){if(!Td(m))throw Error(n(200));if(u==null||u._reactInternals===void 0)throw Error(n(38));return Ta(u,l,m,!1,C)},ao.version="18.3.1-next-f1338f8080-20240426",ao}var My;function qx(){if(My)return E5.exports;My=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),E5.exports=RM(),E5.exports}var by;function MM(){if(by)return $2;by=1;var e=qx();return $2.createRoot=e.createRoot,$2.hydrateRoot=e.hydrateRoot,$2}var Tm=MM();const bM=[{id:"Sfftf",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-276.50609579402317,624.50390625],[-156.50609579402317,684.50390625]],strokeWidth:2},{id:"aMJWD",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-71.50609579402317,464.50390625],[48.49390420597683,524.50390625]],strokeWidth:2},{id:"FHSxH",type:"geometry",shape:"decision",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-286.50609579402317,459.50390625],[-146.50609579402317,529.50390625]],strokeWidth:2},{id:"xnnhM",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-276.50609579402317,344.50390625],[-156.50609579402317,404.50390625]],strokeWidth:2},{id:"FAkXk",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-276.50609579402317,229.50390625],[-156.50609579402317,289.50390625]],strokeWidth:2},{id:"mrdfi",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"aMJWD"},texts:[],target:{marker:"arrow",connection:[1,.5],boundId:"Sfftf"},opacity:1,points:[[-11.506095794023167,524.50390625],[-156.50609579402317,654.50390625]],strokeWidth:2},{id:"bjjcw",type:"line",shape:"elbow",source:{marker:"none",connection:[1,.5],boundId:"FHSxH"},texts:[{text:{children:[{text:""}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[0,.5],boundId:"aMJWD"},opacity:1,points:[[-146.50609579402317,494.50390625],[-71.50609579402317,494.50390625]],strokeWidth:2},{id:"mnzKm",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FHSxH"},texts:[{text:{children:[{text:""}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[.5,0],boundId:"Sfftf"},opacity:1,points:[[-216.50609579402317,529.50390625],[-216.50609579402317,624.50390625]],strokeWidth:2},{id:"bJmWK",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"xnnhM"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"FHSxH"},opacity:1,points:[[-216.50609579402317,404.50390625],[-216.50609579402317,459.50390625]],strokeWidth:2},{id:"zZtTs",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FAkXk"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"xnnhM"},opacity:1,points:[[-216.50609579402317,289.50390625],[-216.50609579402317,344.50390625]],strokeWidth:2},{type:"mindmap",id:"rzdDJ",rightNodeCount:4,data:{topic:{children:[{text:""}]}},children:[{id:"WKQyj",data:{topic:{children:[{text:""}]}},children:[{id:"RYSRd",data:{topic:{children:[{text:""}]}},children:[{id:"nDBRj",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"PWzAD",data:{topic:{children:[{text:""}]}},children:[{id:"bTRmh",data:{topic:{children:[{text:""}]}},children:[{id:"bnZEJ",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"nJTYp",data:{topic:{children:[{text:""}]}},children:[{id:"GtyaH",data:{topic:{children:[{text:""}]}},children:[{id:"JsPEN",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"aCpyY",data:{topic:{children:[{text:""}]}},children:[{id:"iHynm",data:{topic:{children:[{text:""}]}},children:[{id:"TiZGR",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20}],width:72,height:25,isRoot:!0,points:[[248.24308817248368,470.83369157012714]]},{id:"KXysP",type:"freehand",shape:"feltTipPen",points:[[42.91255547331053,302.4106436724954],[42.91255547331053,302.4106436724954],[42.91255547331053,302.94303472562143],[42.91255547331053,303.6494630350447],[43.30577852049311,305.2479999310129],[43.56933178275932,307.7310582325393],[43.739438069128084,311.12389489834214],[43.855740766990095,315.8164264100736],[43.96492597868843,322.6297134163672],[44.04510428695181,331.4298388256405],[43.800067978237905,341.65545526338],[43.57330869752974,352.71036640029735],[43.07346103637457,363.90530146670363],[42.36826123801535,373.77911119731317],[41.80176985242798,382.6007917969476],[41.050101023702894,390.22783046821706],[40.13474095313774,396.15692679809973],[39.39258212224382,400.6820450814642],[38.54748622256426,403.7768437354819],[37.6139535260923,405.2185182175875],[36.92333546175661,405.2964726869589],[36.131425080979454,404.20079465502687],[35.50071089523186,401.899151188188],[34.73785580109626,398.6839479717576]],strokeWidth:2},{id:"ieFQi",type:"freehand",shape:"feltTipPen",points:[[25.61158363876399,370.9967488504811],[24.916797897797608,369.6071773685483],[24.67749697208211,368.6131714048036],[24.568808312533577,367.69766584799555],[24.885076423453768,366.7492749338374],[25.814401426806455,365.80719346179495],[27.472139546659776,364.8344983351174],[29.643691195005033,363.49568318743997],[32.693254384731574,361.9420582621281],[36.67141481223808,360.52686710208155],[41.460509155073225,358.7994936728549],[46.363154873429096,357.5239529722815],[51.357258169067165,356.2862923784672],[56.080029524996746,355.0491584530558],[60.609899785114806,353.4775345173878],[64.56194534795014,352.02103573276264],[68.11000361516409,350.60845154555255],[71.0432829003974,348.88126019241946]],strokeWidth:2},{id:"ZjTpX",type:"freehand",shape:"feltTipPen",points:[[68.86401322513058,312.91491483450346],[68.1735521778042,310.84353169252546],[67.41961422156675,309.6087095594078],[67.00428402343306,309.3536935515943],[66.81450089413721,310.0550514771515],[66.34038086399784,311.9321737730109],[65.99930516212868,314.9252733774777],[65.76493120773563,319.0075757836469],[65.50698001538291,324.8454447611596],[65.02776614620694,332.64203520547954],[64.67902100438306,341.6264849819357],[64.11463195585026,351.0762550531984],[63.657958293810964,360.48902188913536],[63.04473447686752,368.75232276852813],[62.55449492935492,375.95277981063674],[62.18436301867911,381.56388568202357],[61.893086608457736,386.0039779745096],[62.00383585376545,389.32395830976594],[62.44846840613474,390.88398031753724],[63.15060860052046,391.07489696871954],[64.34449034644518,390.5884944484836],[65.64211346916642,389.4261418477857],[67.25944277236914,387.782242059898],[69.23165633563673,385.76120575866327],[71.71743027002805,383.19494124915974],[74.20940897208703,380.6129718614996],[76.77953783638219,377.6509795241994],[79.34979535526082,374.4745011719527],[81.89429223163853,370.7737675988022],[84.10618191487475,367.04968089075675],[86.03563505299923,363.63088507493677],[87.46080352054906,360.399521388795],[88.1056750656117,357.6989220306362],[88.16828991777567,355.7236120330629],[87.48244052706974,355.00434990648984],[86.2333550765257,355.27069617696844],[84.51910378471422,356.9340997592056],[82.51573374887522,359.32984726594015],[80.27308198379643,362.24551851202096],[78.21667296709421,365.22803860275263],[76.35201341247313,368.5401097166253],[74.99308933654112,371.6932036120464],[74.35212759703364,374.70821482483126],[74.60967360095816,377.26474387207355],[75.8849959549687,379.3530494492573],[77.94172322119522,380.842715697145],[80.57299755293872,381.8430887164298],[83.95715202891785,382.2149938287469],[87.7255628157082,381.7306166114225],[91.40530995863634,380.2991663616734],[95.13913472270957,378.13128514703686],[98.92708765115646,375.7552142431162],[102.0579850561092,372.9253456761065],[104.97507141472926,369.44997213897597]],strokeWidth:2},{id:"BcwPw",type:"freehand",shape:"feltTipPen",points:[[107.17330800162682,315.3864822394383],[107.17330800162682,314.68788165725556],[107.68605557639017,312.90885394396474],[107.96149974513816,313.2362923673821],[108.10703733793963,315.0497318130668],[107.8487479673318,318.03523127197906],[107.32153980175809,322.12789466339774],[106.61305306052401,327.6496629440474],[105.74690506062763,335.00159663015376],[104.73739866196371,343.78755873208894],[103.94267964865736,352.97766303651343],[103.35592288485196,361.47102300039325],[102.91428825429313,368.76097715745465],[102.6058707992234,374.9056149852507],[102.71664913860292,379.9377566430242],[103.17859970557953,383.6504834901055],[103.92926148783505,386.2850629415473],[105.18518596763676,387.2232908455765],[106.47876774090406,386.58627383548384],[108.42878794523818,384.57530357161824],[110.29842036408337,381.5909146492971],[112.34070966123869,377.28716626469696]],strokeWidth:2},{id:"yMmdM",type:"freehand",shape:"feltTipPen",points:[[128.1816309435763,331.4516703715174],[129.51989239862593,327.43688600636807],[131.005085696143,323.4655010709533],[132.17321403650323,320.22803619761754],[133.24924577177063,317.90628029633746],[134.02975227964959,316.5798884844974],[134.14783424896297,316.54041718292166],[133.8926984321866,317.4977479623561],[133.22287144213902,318.7988827390612],[132.27887681412,321.3442647147925],[130.829808383076,324.8231649206603],[129.27178361773264,329.3964588424354],[127.78393542349028,334.4312208988461],[126.31888454196638,340.2327386833279],[125.22792882378127,346.5727097657512],[124.13664240037093,353.24911989309595],[123.36064559305925,359.88700063912194],[122.81705197935372,366.0875872230375],[122.79462123094964,371.3624312339792],[123.15298153689861,375.5286555827964],[123.81108128708121,378.64043637310743],[124.6839217725904,380.3996198544631],[125.97026539321524,380.7890049944302],[127.99056067292241,380.19213831837743],[130.21153900142696,378.88476388393275],[132.56469019269213,377.07184390433423],[134.71141990522602,374.91101506003025],[136.96790159302333,372.5508270030653],[138.9351434822873,370.14526674676773],[140.72162313101268,367.6906625775785],[142.03572860518085,365.5229081393748],[142.89232465753918,363.3325348487063],[143.47467228900274,361.3929185298751],[143.84497915370986,359.6507432215033],[144.08901675659746,358.05932667710414],[143.8855064656289,356.820346202075],[143.34705522373548,356.3725972874557],[142.5808927595545,356.7898143492387],[141.9800274132959,357.49246689183866],[141.20573421822047,358.75234451256193],[140.60413838294454,360.40611171229585],[140.11465596613886,362.41982095785744],[139.76488822540597,364.9797643765863],[139.54737858625236,367.56314059669813],[139.74002812916643,370.2232473322459],[140.26313308226082,372.78694339848727],[141.0063724813411,375.06357617497207],[142.27660832589373,376.7366991982256],[143.90287253970297,377.2456393097712],[145.77666987749132,376.86319717881844],[147.58367859613742,375.4638233638746],[149.25082847105915,373.33115185586604],[150.50962222932145,370.61436904767044],[151.43056032976693,367.46666561075864],[151.44918900033605,364.2979858863094],[150.68786139509513,361.64371212257294],[148.71372979842073,359.9930422568298],[146.43462336140402,359.1790375455451]],strokeWidth:2},{id:"mGnrA",type:"freehand",shape:"feltTipPen",points:[[177.499248662022,358.6389118258051],[178.19838756103655,357.240634027776],[178.44740448759654,357.73951734758367],[178.55074397484105,359.33715074880394],[178.61014442712673,361.4559598986337],[178.64812496426435,364.2721952687746],[178.67290254524488,367.2007471343571],[179.01405705257372,370.25629081582184],[179.32285897543971,373.5847859160079],[179.84516425618978,376.4537648810213],[180.89634486087044,378.84118449524004],[182.04776635223294,380.5504960546162],[183.59627761223265,381.1254591487498],[185.41297733632092,380.38858883018776],[187.4644196745192,378.70642262542907],[190.0164112387286,376.2831107782752],[192.61780039149068,373.0528249699667],[195.21903098900867,369.54518732001935],[197.46178243734954,366.1757458818859],[199.45547340950435,363.28229190347093],[201.02062392742647,361.29363533703264],[201.6806297994729,360.75294306951065],[201.77853184386782,361.7431025372819],[201.72497431135622,363.63138804040074],[201.29432857716762,366.2245554151353],[200.87616025463996,369.3207624083346],[200.50422730959127,372.52586028824345],[200.5296583169607,375.60774436001003],[200.89620266978778,378.2107264732288],[201.87814701245662,380.18178744391145],[203.3237210060252,381.1444162192723],[205.0952749780102,381.0964166703482],[207.12816635710493,380.2710789162705],[209.69166653409167,378.53143858393224],[212.3259393904696,376.11874256230595],[214.96944377406982,373.1964359099332],[217.6021329743906,369.60896619783244],[220.1777634274652,365.88642929980443],[222.37298449208703,362.7935994579123],[223.6327261608729,360.8606551033893],[224.5684389548988,359.7015188824592],[224.848266046967,358.9966931873808],[224.61214610266467,358.909744955666],[224.33578711229762,359.2864283518914],[224.33158681173774,359.7816923132753],[224.33524221214162,359.9371871220031],[224.5894090448324,360.01990397554465]],strokeWidth:2},{id:"zZrtc",type:"freehand",shape:"feltTipPen",points:[[235.5810826780001,358.6389118258051],[234.87964309260298,358.6389118258051],[234.61889445335038,358.1611628971107],[234.12449763453247,357.8656015196187],[233.46096624185958,357.7287023810416],[232.64446222875682,357.96746526656835],[231.76248040139313,358.80157625025123],[231.11962755143333,360.3701824969706],[230.17840909863168,362.6051131656107],[229.4605095880559,365.37953360092007],[228.64780049405414,368.46029452436534],[228.04048779767805,371.5130428011137],[227.9466860371993,374.48234753046864],[228.57108726883013,376.7707524845849],[229.75509474791085,378.03104531888886],[231.33021885632598,378.2125552146311],[233.2322381762786,377.24153734271596],[235.350270710728,375.3812154051514],[237.66842033402082,372.8432426035336],[239.49839693217888,369.784392518722],[241.1186238910853,366.75311790215375],[241.97995651143202,363.75648976309395],[242.20144532604337,361.4990092726251],[241.62986112851473,359.9686264420855],[240.7453803173824,359.4909918772258],[239.70060619713928,359.61493973409625],[238.46628906983943,359.86025588147396],[237.4495263714012,360.48134818521913],[237.32546352205378,361.03727631242265],[237.67287740498483,361.4655667580785],[238.6168285626605,361.8240157781095],[240.09541291123065,361.7730616971306],[241.94515372652637,361.6449551519184],[244.0967417348616,361.5205918740306],[246.47485211045438,361.7366995224559],[248.5281031434509,362.2144873500386],[250.0551312107114,363.24407262563483],[251.141761027491,365.0075690683382],[251.57281377925102,367.3754897553393],[251.47296243247825,369.8655611461757],[250.9934349814344,372.4362369970025],[250.53594587826825,374.7619348242309],[249.76259042304292,376.65352381560507],[249.13345875134888,377.59033921163],[249.01758827576901,377.5135455035091],[249.2624580703403,376.38359800758855],[250.12886115846942,374.1032174977402],[251.49417534682476,370.9500521532448],[253.27634649718476,367.34397132727764],[255.34885490762855,363.50176547657185],[257.57968519334173,360.0180973881018],[259.93922766570523,357.0787636938888],[262.0338021629971,354.5988338504333]],strokeWidth:2},{id:"yrTcA",type:"freehand",shape:"feltTipPen",points:[[278.8335122643667,328.9801029665826],[278.8335122643667,327.58830961444465],[278.8335122643667,326.5959858143718],[278.8335122643667,325.2256164828744],[279.2202967000033,324.008793202733],[279.4897740257475,322.8820472857736],[279.64959309551983,322.8548143681749],[279.76489652259744,323.81932610205087],[279.55136734276704,325.7282939759892],[279.0469836389587,328.9265161868364],[278.32282063931353,333.4341849751875],[277.10897753909836,338.967797349744],[275.80804316619884,345.12771157867274],[274.17889365103616,352.1356790585608],[272.6178913237164,358.64921406843797],[271.41762031628906,364.19170052087367],[270.54105291047614,368.60978897979686],[270.4934399784657,372.05877484991225],[271.21196242857883,373.64407770722056],[272.48962823800144,373.91799434599244],[274.1945640050822,372.91718788023474],[276.56099368131737,370.8606177518944],[279.05255793107864,368.16885395093806],[281.6954588460365,365.6147549907885],[284.3210051820004,363.0317168239456],[286.5745619365569,361.06681357824556],[287.8386683035131,359.701713408231],[288.41766561788614,358.71257258676934],[288.46219133030223,357.71887731353246],[288.3509886237719,356.74788405508053],[288.21574014326217,355.81649124761344],[287.6921519926746,355.04123324765834],[287.20458811748864,354.28059387569857],[286.5366712370856,353.67469994964114],[286.0639823531331,353.26353898266126],[285.4028205618868,353.2472010262457],[284.89198925774696,353.6075500359978],[284.1754186117499,354.5654800797532],[283.6143451968117,356.3366877408201],[282.89526099457754,358.744193285432],[282.0497432745652,361.5342572721623],[281.42469080018606,364.6708777838733],[280.94234835119533,368.111457274031],[280.6220914499307,370.98002970199497],[280.6919263435569,373.5788838303336],[281.13260414606276,375.42029417245186],[282.1178378200148,376.3341376652573],[283.570040972345,376.2527794576102],[285.391336049941,374.76440288736677],[287.75696108880953,372.1776960561668],[290.2704700021132,368.7432288511066],[292.8572238825105,364.40833820819563],[295.76403028033593,359.0734292865994],[298.614612813743,352.7127720393922],[301.33369432594924,345.64741876713407],[304.31571852994176,338.29865298186206],[306.85002528026104,331.5874947865453],[308.98008917265,325.9873090464628],[310.87505010500837,321.17110936169894],[312.64995449177974,317.471917041323],[313.94677557613323,314.55913036891735],[314.7208301206402,312.5081990010961],[315.2561778603836,310.8273470804464],[315.26904792981105,309.6496526322556],[315.17033200858265,309.2719821681497],[314.7824604408059,309.7235194802009],[314.10816358766994,310.78949256064817],[313.2312029081143,312.61697650816615],[312.22582977048097,315.36794383162606],[310.7534439208212,319.281782296823],[308.9489254373196,324.35597900703516],[306.9755744939469,330.12329863704446],[304.493667287492,337.11131793098076],[302.31011773607935,344.5789287650153],[300.3790682428367,351.50855019317197],[299.22926948805804,357.7435772931197],[298.740627570031,362.97524129361165],[299.09200346723725,367.2079571723273],[300.11060198752654,370.19497449338206],[301.95944004060544,371.9472792300979],[304.48750888277056,372.2649938952066],[307.4720288779993,371.2380847471798],[310.4153822205861,369.94518305581397]],strokeWidth:2},{id:"HbPrm",type:"freehand",shape:"feltTipPen",points:[[109.79648768166226,133.37994384765625],[109.79648768166226,133.37994384765625],[109.79648768166226,133.9123349007832],[109.35614145739532,135.0590592685703],[107.92467957992176,136.9081105477071],[105.54602400589988,139.89632636757142],[102.22437505814241,143.97527653826364],[98.2323240448261,148.82873858727453],[93.03957175123014,154.77254023719797],[87.82217952377141,160.22274567033946],[82.87207777257095,164.97604470290207],[78.43988043643094,168.89361830389134],[74.92514185628988,171.65364666951973],[73.16273355102089,172.8008668319053],[72.72678674637518,172.75799013834512],[73.56446149572434,171.5057982144417],[75.46011315061105,169.30611943401436],[78.06326495751387,166.83023687563946],[80.89177496218963,164.1492169154344],[83.74302232315267,161.77609084008327],[86.52786623520956,159.72121594618693],[88.92919005742374,157.88893596626713],[90.83737637182617,156.76316868521644],[91.96824066614568,156.499483152842],[92.74501288515603,157.05151147170636],[93.23631882298469,158.54590251763057],[93.21063268077478,161.10313759670316],[93.09991735976064,164.7555844442213],[92.61551771865675,170.06007640283133],[92.19777453728466,176.64557341439468],[91.57947742445594,184.88165725068666],[91.08734598566502,193.733023773686],[90.4100087041877,203.39437308513607],[89.56907229557487,212.84067133937333],[88.94170137486913,221.55993804135778],[88.46988974647365,228.69696750760158],[88.1386715665974,234.6720730365687],[88.18530703949568,238.60818260499582],[88.60912347798967,240.26579825107638],[89.27882089095988,239.9505076331161],[90.1680066995807,237.32672133212418],[91.21010746975185,233.36227246339604],[92.31854092168419,229.1926961149211]],strokeWidth:2},{id:"kMZAM",type:"freehand",shape:"feltTipPen",points:[[109.79648768166226,176.01455212283236],[110.47730304077572,173.97210604549218],[113.60359420488385,168.88895139502438],[116.55805167600397,165.32083242489352],[119.07015329460933,162.48903314530617],[121.08808758329019,160.60806238385976],[122.59399319206136,159.5449683533252],[123.4383540132701,159.63081944625537],[124.47644899613306,160.5056192368811],[124.68081080472007,162.58220980128863],[123.87039770098863,166.21483986701696],[122.14649040750373,170.43777706596939],[120.04625823383185,174.81654420157338],[117.44861914941498,179.3449239145848],[114.48392604556079,183.74285710743152],[111.55243060776866,187.37306490617084],[108.96531256464687,190.00587273526708],[106.89756953989877,191.67963897436857],[105.63239245311524,191.61777196173716],[105.69073445652862,190.41486647040438],[106.50334253691972,188.411643983638],[108.22396503161735,185.72552327618723],[110.65678013453339,182.88013718326783],[114.00310168570081,179.88153451767266],[117.81528899610657,177.09553020166823],[122.10298304415164,174.6241675184092],[126.67412525685359,172.54312507943268],[131.03259880876362,171.07496677106155],[135.63274730673675,169.740897555861],[139.6485547432594,168.84001753127814],[143.3010582388713,168.54362376587596],[146.24445645689957,168.73770189413426],[148.38372205561677,169.62494926835734],[149.48357508174172,171.32170048543685],[149.4985441387903,173.66066774159754],[148.40464690482418,176.45576577130305],[146.08596713506427,179.94211424173682],[142.90077150256775,183.28842837446882],[139.0435370732214,186.79938392325766],[134.78688485788848,189.73916435197953],[131.24274161566223,191.86461980618424]],strokeWidth:2},{id:"zRYyC",type:"freehand",shape:"feltTipPen",points:[[125.86167581374139,185.9008217425735],[125.86167581374139,185.20137187537875],[126.33634777264842,184.93865978775648],[127.01205571525793,184.8452152910486],[127.48372706680584,184.42526521858872],[128.0781427591328,184.10418497309274],[128.80083983394275,184.53177880910607],[129.32182407505888,185.19062012362065],[129.8404950950137,186.62539903127526],[130.20600353478062,188.74760676485766],[130.4730519524419,191.44528758157685],[130.64704728480933,194.91556697310352],[130.75964075113166,198.89369789348075],[130.48040536152484,203.2462307066753],[130.2145160211844,208.09953094585308],[129.6979902316143,213.06423902224196],[129.2881101043597,218.06172587877245],[128.6616968845758,222.41483867346687],[128.16900154264022,225.9684511247442],[127.45729599567244,228.72681328942326],[126.89238376667026,230.21359041232336],[126.55329688370807,230.4423000068282],[126.28838884215929,229.79279292528554],[126.11511349518992,228.49183102940333],[125.66272929726551,226.32730342068862],[124.9996570541291,223.86850546535698],[124.15557193372524,220.9112663852875],[122.89575666454198,218.08398566082815],[121.26827359280583,214.99563295945427],[120.02019183115067,212.38609744841233]],strokeWidth:2},{id:"iixpb",type:"freehand",shape:"feltTipPen",points:[[115.97540619400024,201.96600987465172],[115.97540619400024,201.96600987465172],[115.97540619400024,203.02985937583708],[115.54032758907783,204.0070671514286],[114.88800913723844,205.33321060054277],[113.74972834251412,206.90973225832658],[112.62888170390261,208.65340637972622],[111.52872781486985,210.5177311502839],[110.58280353034593,212.47644418757773]],strokeWidth:2},{id:"xaJii",type:"freehand",shape:"feltTipPen",points:[[139.455296540885,200.7302261721843],[140.15474640807975,200.7302261721843],[141.43569668226633,200.7302261721843],[142.95263655931922,200.7302261721843],[144.2463899393897,201.112900216227],[145.42172017496,201.3817113071973],[146.54306293509512,201.88117725575376],[147.9361619503029,202.55635001542396],[149.52934565224496,203.43187635623053],[151.03365414805467,204.425541391327],[152.53195236756756,205.2591203687398],[153.91735055263598,206.18576475125337],[155.25118970327185,206.87342478932715]],strokeWidth:2},{id:"nHaGM",type:"freehand",shape:"feltTipPen",points:[[195.06556315192802,184.66503804010517],[194.36577270567545,183.96524759385284],[194.11966243371353,183.2156912285518],[194.42839689931543,182.413391420685],[195.38255817085064,181.93059307953172],[196.71015574468674,181.64745291630243],[198.9836776168852,181.45047424326094],[202.24180015166553,181.31342301711902],[206.5531121045251,181.4341227980467],[211.55474336330417,181.5866082480352],[217.4207978979657,181.74723474440088],[223.32020948372315,181.8912387717337],[229.06086802732807,181.99931874442427],[234.37513761124728,182.08183961140458],[238.96182670526377,182.1454340663986],[242.6114125480285,182.19347063517034],[245.45635766125383,182.50532452339849]],strokeWidth:2},{id:"EDFJM",type:"freehand",shape:"feltTipPen",points:[[224.72437201115076,169.83563361049437],[224.72437201115076,169.13455663361037],[225.2079955920576,169.36076453227815],[225.89008018478512,170.3583013813186],[226.31165432393618,172.1067967876479],[226.57572496593116,174.66616349979358],[226.7538355421318,178.12330470745565],[226.87645078870196,182.52686844185246],[226.41127251909484,188.3322416368237],[225.0348371284283,194.60819591541895],[222.95133088796047,200.9662623094182],[220.33316719163213,207.03685764458442],[217.34622210823318,212.23298829259875],[214.0825521121924,216.69038015615297],[210.87450113748218,219.98009561713116],[208.14025566872465,222.2130275818863],[205.77022936942967,223.71135888882418],[203.9556967168569,224.0171503529582],[202.82487976095376,223.02012038579687]],strokeWidth:2},{id:"tPPjW",type:"freehand",shape:"feltTipPen",points:[[214.83810239140985,174.77876842036403],[215.53557379662493,174.77876842036403],[215.31310253187962,175.26021256012427],[215.14029082245952,176.34950917375045],[214.67482574322503,178.13835448118243],[214.01172808707815,180.72119891576767],[212.8818987570528,184.53974762699363],[211.42967488231852,188.87145114071245],[209.55013469246683,193.93392264882277],[207.4512400567005,198.69907022289226],[205.23306515042214,202.9184009216524],[203.1813185653882,206.10501297465999],[201.54427258160263,208.21386687290487],[200.50406876930015,208.82949491306226],[200.07467236854131,208.42414579901924],[200.48235915331747,207.2563553075879],[201.53793171604798,205.87624633142332],[203.41501919103302,204.36880053149162],[205.651966890802,202.75698331904277],[208.35284358660806,201.59237753626167],[211.10942180954476,201.38335532602196],[214.4799684297409,201.99610116851727],[217.70672589360743,203.85157615492972],[221.0369614966396,206.68130269487938],[224.486754623965,210.19983154970123],[227.3261063084026,213.56297067303785],[229.79142906059064,216.55482508601926],[231.84971094453863,219.10534193545482],[233.75743845898182,221.09207119329403],[235.06137802772287,221.85164764448928],[235.89807799547953,221.54480701567536],[236.4394236685862,220.17265552988738]],strokeWidth:2},{id:"XDkHb",type:"freehand",shape:"feltTipPen",points:[[243.26112754816495,179.7219032302346],[243.9553454502302,179.02768532816935],[245.73672549383127,177.75999517274977],[247.5136816472534,176.680809019128],[249.3223450780731,176.05208500486788],[251.19330404012317,176.0175285502355],[252.79138229464093,176.35245384896552],[254.2541983529636,177.5682024874468],[255.6123567509444,179.0794366765167],[256.6125158297839,181.2610535734575],[257.2758319461491,184.02050198639336],[257.3698832334496,186.84793701923445],[256.69694657784544,189.6541390298471],[255.43939762442483,192.38743898242137],[253.76668343730717,194.7846885095114],[252.12347143357056,196.798490382801],[250.56091296426553,198.57701124288815],[249.58067663030442,200.2417691450164],[249.5877017085238,201.33624500092628],[250.3188877290031,202.38617334846367],[251.93125810250763,203.4512825550837],[253.92814674970646,204.84919151460053],[256.1573646351769,206.53192054550072],[258.6631790176077,208.8338036803816],[260.5723064903159,211.21133565093805],[261.9397068152184,213.61976578067242],[262.89862021824933,216.1173477296261],[262.93442953438625,218.41333535572358],[262.147722023112,220.33481639801903],[260.79266282845697,221.7653773917973],[258.7018707536306,222.76865069811447],[256.0384345196378,223.4011301710807],[252.9966311789076,223.48582088860076],[249.62805325619365,222.81743646421182],[246.1436457459588,221.55825801419724],[243.16471868710937,219.55471773904628],[240.72762713587053,217.34651813267374],[238.9182240135217,215.30389314654803],[237.67665323034134,213.45473674811092],[236.83616348649457,211.70325416805554],[236.59105858497264,210.27018170077918],[237.20109361257528,209.07679116086365],[238.44405265699902,208.23692119782845],[240.42238456774317,207.3806517592593],[242.93733507957313,206.47994488699896],[246.19814135098704,205.48644301196146],[250.16646687275124,204.7140316132709],[255.08717034644496,203.8670772531559],[260.4572753294242,202.8944418535366],[266.1195053352783,202.1766410687669],[271.6412270226606,201.3269350051969],[276.726360314849,200.7030789180326],[281.4963040134933,200.26471123997908],[285.973613519139,199.64451363184253],[289.62570919265227,199.15668653786543]],strokeWidth:2},{id:"NicwR",type:"freehand",shape:"feltTipPen",points:[[342.01009336531547,146.35574326360893],[342.01009336531547,145.65399656252248],[342.01009336531547,144.8934740953964],[342.01009336531547,144.0775657119675],[342.01009336531547,144.41155598738715],[342.01009336531547,145.73307910776293],[341.66807622233637,148.37242924565817],[341.0859877072487,152.55639928089658],[339.98185339807173,158.4461032419722],[338.46454493618194,165.95401097693048],[336.34585554829846,174.63198105936408],[334.42287007583946,182.6932632759399],[332.29504882543915,190.20648056754817],[330.63104357555653,196.8598463814169],[329.07316436873043,202.48321008783387],[327.8980925404353,207.20483149622396],[327.08638402232964,210.8244265314197]],strokeWidth:2},{id:"sRRNe",type:"freehand",shape:"feltTipPen",points:[[325.94490523323634,229.1532513289394],[325.94490523323634,229.1532513289394],[324.3864443272455,230.1922252662671],[323.15511529456035,231.59301219439112]],strokeWidth:2},{id:"fDPmi",type:"freehand",shape:"feltTipPen",points:[[374.1194388638175,314.3101386264214],[374.1194388638175,312.90885394396474],[374.1194388638175,312.97706458911836],[373.68949949337656,313.44495624835037],[373.41768138077686,314.4947913296067],[372.55584973202275,315.89797343314586],[371.60093397098916,318.51904651078513],[370.2979754680743,322.01260799246376],[368.25803353264854,326.76344141777537],[365.65514993901587,332.8658419135343],[363.0286503468671,339.0943755060028],[360.41589638485283,345.10017410159327],[357.7660572894553,350.60803775120013],[355.4783138672312,355.3928104359887],[353.73843928786,359.24461585987393],[352.145855053867,362.38485242157304]],strokeWidth:2},{id:"PFTyp",type:"freehand",shape:"feltTipPen",points:[[344.2248463021271,379.692944476946],[343.5242524666848,378.9923506415037],[343.2941655804586,378.7622637552775]],strokeWidth:2},{id:"EeWSd",type:"freehand",shape:"feltTipPen",points:[[75.57564342783854,644.5415974683578],[75.57564342783854,643.8385579392179],[75.57564342783854,643.0796575063282],[75.57564342783854,642.2677210400775],[75.57564342783854,641.4019218420626],[75.92187667473496,640.7739867948403],[76.16339270042232,640.4548279256232],[76.33722823708473,640.5516967715471],[76.48720382086464,641.1756645455907],[76.60183769043493,642.3574088920172],[76.68840733065946,644.6293706552124],[76.766042817646,648.165255983994],[76.48957632156095,653.1765765295272],[75.9012288867703,660.2662940903779],[75.12093540804568,668.6402020184591],[74.20349433032817,677.5470422456829],[73.50007616539352,686.1183469659713],[72.97053661515503,693.9103119511383],[72.56140253640598,701.1168091231693],[72.24827008271842,707.1174623470365],[72.0410612067165,711.8584176597974],[72.23942893241093,715.5925951784202],[72.44120753341241,717.90124325235],[72.30939807170836,719.0310647714455],[72.19444383556475,719.0083390676632],[71.78945398767411,718.1506887918395],[71.46365766852142,716.3521167298923],[71.22265759186513,713.9049694119617],[71.0432829003974,711.0279308067707],[71.19726333307113,707.7876489654013],[71.3311867843816,703.9432269024292],[71.78736079772085,699.7587142406205],[72.79812225504458,695.3069314006079],[73.95450257060162,690.3670344007573],[75.48078749024995,685.3830771352232],[77.30436958766069,680.7187710430962],[79.36020088762149,676.2825370064916],[81.56615586488243,672.6448661018771],[83.89141064196298,669.7372465962353],[86.33203490054308,667.6169228234412],[88.40979459794318,666.2005641581095],[90.6710824253808,665.6091077763322],[92.61731004875134,665.6707495795363],[94.37219744736382,666.4917002862089],[95.93641683306015,668.2250799204767],[97.07897963098691,670.9282819438145],[98.17249855409005,674.3511361857209],[98.95099797590052,678.2994353770432],[99.49355174953467,682.6081693638394],[99.51166443935796,687.2097681583327],[98.82464199803604,691.9825938529038],[97.59319390291972,696.8526046861857],[95.94344326661104,701.795611232038],[94.02128205500986,706.4127425773727],[91.52891831023527,711.0984064742734],[88.62897918819255,715.2030995703008],[85.76861230191258,718.4784638926353],[82.93096546138514,720.8615223716733],[80.22692780560038,722.4751272502353],[77.89256512259777,723.5655931920651],[75.77664198546137,723.9401303227578],[74.26976340281664,723.7562186077826],[73.30918441983619,723.145838922595]],strokeWidth:2},{id:"Zhdzy",type:"freehand",shape:"feltTipPen",points:[[100.29131747719094,695.2087292695301],[100.29131747719094,694.5055751793593],[100.76966360387274,694.2453382857807],[101.44995130332501,694.5516872371127],[101.88006659063313,695.1294102296083],[102.48049533703085,696.5371374217834],[102.90193726861031,698.1937387632697],[103.19557285768593,700.3340639329072],[103.52708017741867,703.4869171366563],[103.75641186405397,706.9112632097472],[103.56373869815167,710.2191386566988],[103.03962837531691,712.9735101830584],[102.30819490270375,715.3400081560421],[101.65347929452747,716.5028074684824],[101.22139409427956,716.1848621701693],[101.20565884396257,714.8319811703609],[101.85324497798439,712.3179577173973],[103.0235506191487,709.2942712077629],[104.62955050710258,705.5929151359351],[106.9193778730417,701.6009741078246],[108.96267065634021,698.3970410314837]],strokeWidth:2},{id:"eiKfZ",type:"freehand",shape:"feltTipPen",points:[[123.7712078240757,706.3307825917386],[123.7712078240757,706.3307825917386],[123.7712078240757,705.2761926782796],[123.7712078240757,704.3145223805373],[123.7712078240757,703.361119801777],[123.7712078240757,702.3922299898618],[123.7712078240757,701.4002262617037],[123.7712078240757,700.3740223295949],[123.45256473406636,699.3645323308979],[122.87729243630889,698.7251925043042],[122.08142705286224,698.6052768440809],[121.18200880254454,698.9003467090674],[120.14043722958701,699.8221815883121],[119.02228785489962,700.9032457092344],[117.77059684842021,702.4695240391661],[116.87486624587615,703.9928042188853],[115.87562064722471,705.8621946948738],[115.17665876841585,707.8834494653688],[114.6905124299729,710.0338522647708],[114.35198111899768,712.3167261862536],[114.13209368364124,714.319799078909],[114.31833288032959,716.2337395784234],[114.8441827110376,717.5772521582967],[115.56389468362732,718.5009060395896],[116.51417361303749,718.825561403723],[117.85101736632947,718.3212065714847],[119.22681798206014,717.193379976316],[120.62346613025335,715.5916787188812],[122.02726211111218,713.6467621375518],[123.37268928277064,711.8002811976144],[124.42097911640127,709.6694634373398],[125.44228335184181,707.7763729324697],[126.20990054952819,706.0325815234605],[126.6777732997769,704.8590743700711],[126.68107075519134,704.0126922013733],[126.62382346323199,703.6891669665497],[126.56920378082356,703.9004700285918],[126.49179692669992,704.7609961278854],[126.42626489748619,706.1716801772659],[126.34705521319535,707.9482609896295],[126.28780600179522,709.9991347104256],[126.24277522901076,711.9867825757856],[126.24277522901076,713.749379837252],[126.55861886728991,715.1886852703674],[127.13054080643411,716.0617838414232],[128.23942704652205,716.0533200671603],[129.41415150286986,715.2888733173613],[130.96459251497714,713.6448630245213],[132.48552656240287,711.3250076702561],[134.38553768932167,708.4179884935511],[136.09588482548207,705.2591490379841],[137.70733913403757,702.4781889135452],[139.20678791887764,700.0808673095498],[140.38844815103613,698.4736917075488],[141.12685659108575,698.4806535436633],[141.61822218414665,699.2734454319093],[141.964634872114,700.9859742054023],[141.83606540321108,703.4316994171609],[141.68160482542618,706.0440142346438],[141.5248487535676,708.8581312435103],[141.3803651589638,711.2272921503754],[141.5713918019713,713.2027507927687],[142.06337546734704,714.3485894414634],[142.77393478656046,715.1845347937187],[143.69072449068204,715.10178087023],[144.7124835254918,714.5525525267899],[145.83016490294705,713.4074158119874],[147.3946291202613,711.7530728256056],[148.87311307890246,709.8298922747331],[150.32152114158504,708.297920693788],[151.68515346665305,707.1903964815419],[153.01652545307394,706.3640384710961],[154.08314721596145,706.4080548049992],[154.76694404962592,707.5081769011699],[155.25250359013245,709.0986836759794],[155.56409486911917,710.7432590701142],[155.74990229361634,712.7183970414626],[156.1770496959296,714.3318000114018],[156.8124886974611,715.2214242140808],[157.58198231593957,715.1341022023071],[158.82137270226605,714.0070550872638],[160.4359008269842,711.7139538964789],[162.3249274886462,708.8869239636847],[164.48413593667334,705.6287517110131],[166.4510487282194,702.4219371951322],[168.22662032946693,699.670893638618]],strokeWidth:2},{id:"cNdFJ",type:"freehand",shape:"feltTipPen",points:[[175.67412332771556,698.9160803769328],[175.67412332771556,698.2124853192436],[175.67412332771556,697.45203132511],[175.67412332771556,697.0864144078773],[175.67412332771556,697.2784546087973],[175.67412332771556,697.7723820321603],[175.67412332771556,698.4536754865471],[175.67412332771556,699.602972334973],[175.67412332771556,701.1357568406443],[175.67412332771556,703.0019128042481],[175.67412332771556,705.1179848171382],[175.34696232119455,707.105690608535],[175.07753086065082,709.2010686957301],[174.89158432702044,710.3622730380744],[174.7456465345793,710.5808576651134],[174.95867806103826,709.9992394342198],[175.13781713213558,709.1340835505812],[175.59582547094766,707.7372604208927],[176.28543820854298,706.2659507757471],[177.17850474939388,704.4651633095427],[178.18207167431416,702.705312341066],[179.3116231948041,701.3328972824474],[180.49591090668906,700.0747106136655],[181.67539354011234,699.191145705408],[182.861229449811,698.5925689170481],[184.07120417375592,698.2003113688393],[185.30882081421447,697.9321223728275],[186.5709324861744,697.796244635043],[187.60812035820192,698.0403123877936],[188.22663587018957,698.5724507716759],[188.64661417248823,699.6723755708531],[188.93302768940504,700.8492772485415],[189.1169743771489,702.4170480730345],[189.22245781712655,703.9406610800229],[189.2677440548594,705.8640488128972],[188.93956387798477,707.6280214296535],[188.68686388226303,708.8495533540672]],strokeWidth:2},{id:"hmmjc",type:"freehand",shape:"feltTipPen",points:[[200.38979737706796,697.6802966744654],[200.38979737706796,697.6802966744654],[200.38979737706796,698.2127217049133],[200.38979737706796,698.9191749464858],[200.38979737706796,700.126494837863],[200.38979737706796,701.2530669607504],[200.38979737706796,702.7082833439104],[200.38979737706796,704.7287249537499],[200.0611720047212,706.7655088549905],[199.7908527592445,708.9542978686154],[199.60495599109464,710.8302703945869],[199.46160557782497,711.9174850129948]],strokeWidth:2},{id:"DwBED",type:"freehand",shape:"feltTipPen",points:[[200.38979737706796,687.7940270547242],[200.38979737706796,687.7940270547242],[200.38979737706796,687.7940270547242]],strokeWidth:2},{id:"fESHQ",type:"freehand",shape:"feltTipPen",points:[[211.51185069927652,696.4445129719975],[211.51185069927652,695.7408492696472],[211.51185069927652,696.0430111300902],[211.94356769423808,696.631248017894],[212.59242452326345,697.3596160980187],[213.36955171369783,698.186128465637],[214.25164589492357,699.4427407832541],[215.19098614128785,700.6536521457447],[216.31312322507375,702.3124849862361],[217.51837500538323,703.9751224459233],[218.73086971323875,705.4870107873367],[219.97377706426988,707.2898758447864],[221.2361662320414,708.6833743007328],[222.4411979102013,709.6237118211743],[223.4345273460263,710.6394762180062],[224.02886743579262,710.9955408421006]],strokeWidth:2},{id:"NRyaM",type:"freehand",shape:"feltTipPen",points:[[225.10547142642037,695.2087292695301],[225.10547142642037,695.2087292695301],[224.57601989136793,695.2087292695301],[224.31960697719302,695.2087292695301],[223.77109816870126,695.2087292695301],[223.04278886415506,695.569422926334],[222.23224821092032,696.1614573792913],[221.32022611042754,697.2461158440669],[219.8956423877542,698.7672849938258],[218.47528716045014,700.5826083915404],[216.7761435770022,702.6313082677298],[215.1119546892881,704.8885346502848],[213.59173390328357,706.8939530772636],[212.13929261359345,708.7119430607377],[210.9525657393845,709.8861957043268]],strokeWidth:2},{id:"rExRd",type:"freehand",shape:"feltTipPen",points:[[233.75595734369364,711.2739174016092],[233.75595734369364,711.2739174016092]],strokeWidth:2},{id:"DkEDR",type:"freehand",shape:"feltTipPen",points:[[257.2358476905784,697.6802966744654],[257.2358476905784,696.9765692186488],[256.75181966316296,696.7196201950646],[256.4585099754036,696.2196345087668],[255.9580752004436,695.8734114456884],[255.3013204417967,695.6930926266905],[254.50570153748714,695.5646101490129],[253.60874299833432,695.4718188617626],[252.68670632137292,695.632365188028],[251.77532857777584,696.4514989393547],[250.77362453005145,697.7670939463092],[250.0300584423092,699.4752293716929],[249.1851690853162,701.4397319006457],[248.56305062982784,703.9122799425118],[248.10589353799202,706.5542782011194],[247.8133385114341,708.8282604387946],[248.22020914220462,710.6476112964392],[249.24745261635968,711.818773306853],[250.7665336376336,712.0245498827912],[252.88876486685314,711.0907082736644],[255.22413632198396,709.2895446194834],[257.9829703285532,707.1268850078486],[260.84875463165855,704.3683989684359],[263.2457364083787,701.973143937762],[265.11582754869943,699.7068603754838],[266.75836385329154,697.9521498657923],[267.62928373671986,697.0733963084485],[267.7666450311934,697.2282207827843],[267.16919894094195,698.1055403973269],[266.27296963279883,699.1785208012161],[265.14566085794655,700.8033174222292],[263.89597102610725,702.7927137523502],[262.8834622051125,704.748618602518],[262.16337466714987,706.453081513147],[261.9507255131235,708.1133896960473],[262.19072681814197,709.2759461532896],[263.09730044858253,710.3682679183585],[264.16817689879286,711.164317884557],[265.6881335797182,711.3945772234038],[267.5077078606267,711.1445370371953],[269.3128781726501,710.26103554677],[270.9874167183621,708.8797952501845],[272.5528789303708,707.4365481864288],[273.7433710608514,705.6502709152605],[274.517100190574,703.9787557954728],[274.7663367732969,702.3110958285952],[274.5312129826521,700.8110321573786],[273.6073319203272,699.6629161389606],[272.5499333524711,698.9061048116141],[271.0208945519476,698.3819383748905],[269.4511841788238,698.3530943371661],[267.90241153525886,698.425392058592],[266.7007660302514,698.8367032310325],[266.17286141487403,699.2278455650203],[266.21969376101043,699.501302464203],[266.6440558461441,699.7166495277602],[267.655805806131,699.8951017809977],[268.8913360686109,699.7135757645292],[270.55652301070046,699.5169653679104],[272.1769512292106,699.3653866410045],[273.7424130686164,698.8940396084972],[275.1965881429542,698.5150460502296],[276.5369897715644,698.2511837773582],[277.6807403458045,697.7111667430195],[278.7084177008831,697.2665550776564],[279.69573658754604,697.0160268534032],[280.7795642277677,697.107634521517],[281.5979574314097,697.5251634013739],[282.13408413205894,698.5114150478958],[282.5489242517745,699.9535098080969],[282.84098599868395,701.7743724611605],[283.02843058220066,703.824551042736],[282.81477093169957,706.1243719532199],[282.5932251731436,708.5354121674004],[282.40443780365973,709.9057029739824],[282.57959049244283,710.3036280965493],[283.0561392050798,709.8255664165581],[284.08719079904273,708.3820517353352],[285.2144216770599,706.538897036512],[286.74667183779053,704.370445668344],[288.5995133568345,702.3415936070719],[290.6747708704809,700.4052369256219],[292.60660986895465,698.9584806416424],[294.33204007114097,697.9635298042067],[295.7275892125079,697.8674370064332],[296.59204402039296,698.6214451825181],[297.22621987416784,700.2698855649223],[297.30632265946275,702.2917701375259],[297.2821331071837,704.5431543082382],[296.86734136627894,706.6349140197981],[296.48247909275693,708.6250717523121],[296.19332364402413,709.661928773693],[295.9687135065938,710.0674402872232],[296.43070848674466,709.6661556728818],[297.14617165450073,708.5721617999639],[298.3907899502945,706.9800446569302],[300.0154056144643,705.027825143301],[301.9425628813079,702.8602329312348],[304.07903225726096,700.8345918122459],[306.07538837299836,699.2960896957225],[308.2106723128043,698.2045825756773],[310.09784657780943,697.4534789743966],[311.89374000200274,697.2655471634303],[313.15064319795266,697.8736786678724],[314.32468855052895,699.0788096540709],[315.16125243832954,700.7403544566105],[316.02807712281884,702.700337825207],[316.6688935414484,704.8533911973636],[317.0877937625526,707.1699493962483],[317.3669109899077,709.2712320131618],[317.54367468099264,711.1655915202477]],strokeWidth:2}];function Iv(e,t,n){if(e&&e.length){const[r,i]=t,o=Math.PI/180*n,s=Math.cos(o),a=Math.sin(o);for(const f of e){const[h,d]=f;f[0]=(h-r)*s-(d-i)*a+r,f[1]=(h-r)*a+(d-i)*s+i}}}function OM(e,t,n){const r=[];e.forEach(i=>r.push(...i)),Iv(r,t,n)}function IM(e,t){return e[0]===t[0]&&e[1]===t[1]}function kM(e,t,n,r=1){const i=n,o=Math.max(t,.1),s=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(i)for(const h of s)Iv(h,a,i);const f=FM(s,o,r);if(i){for(const h of s)Iv(h,a,-i);OM(f,a,-i)}return f}function FM(e,t,n){const r=[];for(const h of e){const d=[...h];IM(d[0],d[d.length-1])||d.push([d[0][0],d[0][1]]),d.length>2&&r.push(d)}const i=[];t=Math.max(t,.1);const o=[];for(const h of r)for(let d=0;d<h.length-1;d++){const p=h[d],v=h[d+1];if(p[1]!==v[1]){const w=Math.min(p[1],v[1]);o.push({ymin:w,ymax:Math.max(p[1],v[1]),x:w===p[1]?p[0]:v[0],islope:(v[0]-p[0])/(v[1]-p[1])})}}if(o.sort((h,d)=>h.ymin<d.ymin?-1:h.ymin>d.ymin?1:h.x<d.x?-1:h.x>d.x?1:h.ymax===d.ymax?0:(h.ymax-d.ymax)/Math.abs(h.ymax-d.ymax)),!o.length)return i;let s=[],a=o[0].ymin,f=0;for(;s.length||o.length;){if(o.length){let h=-1;for(let p=0;p<o.length&&!(o[p].ymin>a);p++)h=p;o.splice(0,h+1).forEach(p=>{s.push({s:a,edge:p})})}if(s=s.filter(h=>!(h.edge.ymax<=a)),s.sort((h,d)=>h.edge.x===d.edge.x?0:(h.edge.x-d.edge.x)/Math.abs(h.edge.x-d.edge.x)),(n!==1||f%t===0)&&s.length>1)for(let h=0;h<s.length;h=h+2){const d=h+1;if(d>=s.length)break;const p=s[h].edge,v=s[d].edge;i.push([[Math.round(p.x),a],[Math.round(v.x),a]])}a+=n,s.forEach(h=>{h.edge.x=h.edge.x+n*h.edge.islope}),f++}return i}function rp(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=t.strokeWidth*4),i=Math.round(Math.max(i,.1));let o=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(o=i),kM(e,i,r,o||1)}class o4{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=rp(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function Am(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class LM extends o4{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const i=Object.assign({},n,{hachureGap:r}),o=rp(t,i),s=Math.PI/180*n.hachureAngle,a=[],f=r*.5*Math.cos(s),h=r*.5*Math.sin(s);for(const[p,v]of o)Am([p,v])&&a.push([[p[0]-f,p[1]+h],[...v]],[[p[0]+f,p[1]-h],[...v]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class _M extends o4{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),o=this._fillPolygons(t,i);return r.ops=r.ops.concat(o.ops),r}}class NM{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const r=rp(t,n);return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);let o=n.fillWeight;o<0&&(o=n.strokeWidth/2);const s=i/4;for(const a of t){const f=Am(a),h=f/i,d=Math.ceil(h)-1,p=f-d*i,v=(a[0][0]+a[1][0])/2-i/4,w=Math.min(a[0][1],a[1][1]);for(let E=0;E<d;E++){const y=w+p+E*i,S=v-s+Math.random()*2*s,A=y-s+Math.random()*2*s,B=this.helper.ellipse(S,A,o,o,n);r.push(...B.ops)}}return{type:"fillSketch",ops:r}}}class HM{constructor(t){this.helper=t}fillPolygons(t,n){const r=rp(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,o=[];return t.forEach(s=>{const a=Am(s),f=Math.floor(a/(r+i)),h=(a+i-f*(r+i))/2;let d=s[0],p=s[1];d[0]>p[0]&&(d=s[1],p=s[0]);const v=Math.atan((p[1]-d[1])/(p[0]-d[0]));for(let w=0;w<f;w++){const E=w*(r+i),y=E+r,S=[d[0]+E*Math.cos(v)+h*Math.cos(v),d[1]+E*Math.sin(v)+h*Math.sin(v)],A=[d[0]+y*Math.cos(v)+h*Math.cos(v),d[1]+y*Math.sin(v)+h*Math.sin(v)];o.push(...this.helper.doubleLineOps(S[0],S[1],A[0],A[1],n))}}),o}}class GM{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+i});const o=rp(t,n);return{type:"fillSketch",ops:this.zigzagLines(o,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(o=>{const s=Am(o),a=Math.round(s/(2*n));let f=o[0],h=o[1];f[0]>h[0]&&(f=o[1],h=o[0]);const d=Math.atan((h[1]-f[1])/(h[0]-f[0]));for(let p=0;p<a;p++){const v=p*2*n,w=(p+1)*2*n,E=Math.sqrt(2*Math.pow(n,2)),y=[f[0]+v*Math.cos(d),f[1]+v*Math.sin(d)],S=[f[0]+w*Math.cos(d),f[1]+w*Math.sin(d)],A=[y[0]+E*Math.cos(d+Math.PI/4),y[1]+E*Math.sin(d+Math.PI/4)];i.push(...this.helper.doubleLineOps(y[0],y[1],A[0],A[1],r),...this.helper.doubleLineOps(A[0],A[1],S[0],S[1],r))}}),i}}const lo={};function $M(e,t){let n=e.fillStyle||"hachure";if(!lo[n])switch(n){case"zigzag":lo[n]||(lo[n]=new LM(t));break;case"cross-hatch":lo[n]||(lo[n]=new _M(t));break;case"dots":lo[n]||(lo[n]=new NM(t));break;case"dashed":lo[n]||(lo[n]=new HM(t));break;case"zigzag-line":lo[n]||(lo[n]=new GM(t));break;case"hachure":default:n="hachure",lo[n]||(lo[n]=new o4(t));break}return lo[n]}function WM(){return Math.floor(Math.random()*2**31)}class jM{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const zM=0,kv=1,Zx=2,W2={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function VM(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:zM,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:kv,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:Zx,text:""},t}function D5(e,t){return e.type===t}function s4(e){const t=[],n=VM(e);let r="BOD",i=0,o=n[i];for(;!D5(o,Zx);){let s=0;const a=[];if(r==="BOD")if(o.text==="M"||o.text==="m")i++,s=W2[o.text],r=o.text;else return s4("M0,0"+e);else D5(o,kv)?s=W2[r]:(i++,s=W2[o.text],r=o.text);if(i+s<n.length){for(let f=i;f<i+s;f++){const h=n[f];if(D5(h,kv))a[a.length]=+h.text;else throw new Error("Param not a number: "+r+","+h.text)}if(typeof W2[r]=="number"){const f={key:r,data:a};t.push(f),i+=s,o=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return t}function Qx(e){let t=0,n=0,r=0,i=0;const o=[];for(const{key:s,data:a}of e)switch(s){case"M":o.push({key:"M",data:[...a]}),[t,n]=a,[r,i]=a;break;case"m":t+=a[0],n+=a[1],o.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":o.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],o.push({key:"L",data:[t,n]});break;case"C":o.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const f=a.map((h,d)=>d%2?h+n:h+t);o.push({key:"C",data:f}),t=f[4],n=f[5];break}case"Q":o.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const f=a.map((h,d)=>d%2?h+n:h+t);o.push({key:"Q",data:f}),t=f[2],n=f[3];break}case"A":o.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],o.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":o.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],o.push({key:"H",data:[t]});break;case"V":o.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],o.push({key:"V",data:[n]});break;case"S":o.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const f=a.map((h,d)=>d%2?h+n:h+t);o.push({key:"S",data:f}),t=f[2],n=f[3];break}case"T":o.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],o.push({key:"T",data:[t,n]});break;case"Z":case"z":o.push({key:"Z",data:[]}),t=r,n=i;break}return o}function Jx(e){const t=[];let n="",r=0,i=0,o=0,s=0,a=0,f=0;for(const{key:h,data:d}of e){switch(h){case"M":t.push({key:"M",data:[...d]}),[r,i]=d,[o,s]=d;break;case"C":t.push({key:"C",data:[...d]}),r=d[4],i=d[5],a=d[2],f=d[3];break;case"L":t.push({key:"L",data:[...d]}),[r,i]=d;break;case"H":r=d[0],t.push({key:"L",data:[r,i]});break;case"V":i=d[0],t.push({key:"L",data:[r,i]});break;case"S":{let p=0,v=0;n==="C"||n==="S"?(p=r+(r-a),v=i+(i-f)):(p=r,v=i),t.push({key:"C",data:[p,v,...d]}),a=d[0],f=d[1],r=d[2],i=d[3];break}case"T":{const[p,v]=d;let w=0,E=0;n==="Q"||n==="T"?(w=r+(r-a),E=i+(i-f)):(w=r,E=i);const y=r+2*(w-r)/3,S=i+2*(E-i)/3,A=p+2*(w-p)/3,B=v+2*(E-v)/3;t.push({key:"C",data:[y,S,A,B,p,v]}),a=w,f=E,r=p,i=v;break}case"Q":{const[p,v,w,E]=d,y=r+2*(p-r)/3,S=i+2*(v-i)/3,A=w+2*(p-w)/3,B=E+2*(v-E)/3;t.push({key:"C",data:[y,S,A,B,w,E]}),a=p,f=v,r=w,i=E;break}case"A":{const p=Math.abs(d[0]),v=Math.abs(d[1]),w=d[2],E=d[3],y=d[4],S=d[5],A=d[6];p===0||v===0?(t.push({key:"C",data:[r,i,S,A,S,A]}),r=S,i=A):(r!==S||i!==A)&&(eE(r,i,S,A,p,v,w,E,y).forEach(function(R){t.push({key:"C",data:R})}),r=S,i=A);break}case"Z":t.push({key:"Z",data:[]}),r=o,i=s;break}n=h}return t}function UM(e){return Math.PI*e/180}function tg(e,t,n){const r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return[r,i]}function eE(e,t,n,r,i,o,s,a,f,h){const d=UM(s);let p=[],v=0,w=0,E=0,y=0;if(h)[v,w,E,y]=h;else{[e,t]=tg(e,t,-d),[n,r]=tg(n,r,-d);const ie=(e-n)/2,ce=(t-r)/2;let me=ie*ie/(i*i)+ce*ce/(o*o);me>1&&(me=Math.sqrt(me),i=me*i,o=me*o);const Ce=a===f?-1:1,Fe=i*i,Ae=o*o,pe=Fe*Ae-Fe*ce*ce-Ae*ie*ie,ue=Fe*ce*ce+Ae*ie*ie,ye=Ce*Math.sqrt(Math.abs(pe/ue));E=ye*i*ce/o+(e+n)/2,y=ye*-o*ie/i+(t+r)/2,v=Math.asin(parseFloat(((t-y)/o).toFixed(9))),w=Math.asin(parseFloat(((r-y)/o).toFixed(9))),e<E&&(v=Math.PI-v),n<E&&(w=Math.PI-w),v<0&&(v=Math.PI*2+v),w<0&&(w=Math.PI*2+w),f&&v>w&&(v=v-Math.PI*2),!f&&w>v&&(w=w-Math.PI*2)}let S=w-v;if(Math.abs(S)>Math.PI*120/180){const ie=w,ce=n,me=r;f&&w>v?w=v+Math.PI*120/180*1:w=v+Math.PI*120/180*-1,n=E+i*Math.cos(w),r=y+o*Math.sin(w),p=eE(n,r,ce,me,i,o,s,0,f,[w,ie,E,y])}S=w-v;const A=Math.cos(v),B=Math.sin(v),R=Math.cos(w),_=Math.sin(w),F=Math.tan(S/4),j=4/3*i*F,z=4/3*o*F,Q=[e,t],se=[e+j*B,t-z*A],te=[n+j*_,r-z*R],Ee=[n,r];if(se[0]=2*Q[0]-se[0],se[1]=2*Q[1]-se[1],h)return[se,te,Ee].concat(p);{p=[se,te,Ee].concat(p);const ie=[];for(let ce=0;ce<p.length;ce+=3){const me=tg(p[ce][0],p[ce][1],d),Ce=tg(p[ce+1][0],p[ce+1][1],d),Fe=tg(p[ce+2][0],p[ce+2][1],d);ie.push([me[0],me[1],Ce[0],Ce[1],Fe[0],Fe[1]])}return ie}}const XM={randOffset:QM,randOffsetWithRange:JM,ellipse:qM,doubleLineOps:eb};function tE(e,t,n,r,i){return{type:"path",ops:Ql(e,t,n,r,i)}}function g3(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let o=0;o<r-1;o++)i.push(...Ql(e[o][0],e[o][1],e[o+1][0],e[o+1][1],n));return t&&i.push(...Ql(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}else if(r===2)return tE(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function KM(e,t){return g3(e,!0,t)}function YM(e,t,n,r,i){const o=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];return KM(o,i)}function Oy(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,i=j2(r[0],1*(1+t.roughness*.2),t),o=t.disableMultiStroke?[]:j2(r[0],1.5*(1+t.roughness*.22),Fy(t));for(let s=1;s<r.length;s++){const a=r[s];if(a.length){const f=j2(a,1*(1+t.roughness*.2),t),h=t.disableMultiStroke?[]:j2(a,1.5*(1+t.roughness*.22),Fy(t));for(const d of f)d.op!=="move"&&i.push(d);for(const d of h)d.op!=="move"&&o.push(d)}}return{type:"path",ops:i.concat(o)}}return{type:"path",ops:[]}}function qM(e,t,n,r,i){const o=nE(n,r,i);return Fv(e,t,i,o).opset}function nE(e,t,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),o=Math.PI*2/i;let s=Math.abs(e/2),a=Math.abs(t/2);const f=1-n.curveFitting;return s+=bt(s*f,n),a+=bt(a*f,n),{increment:o,rx:s,ry:a}}function Fv(e,t,n,r){const[i,o]=Ly(r.increment,e,t,r.rx,r.ry,1,r.increment*O3(.1,O3(.4,1,n),n),n);let s=I3(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=Ly(r.increment,e,t,r.rx,r.ry,1.5,0,n),f=I3(a,null,n);s=s.concat(f)}return{estimatedPoints:o,opset:{type:"path",ops:s}}}function Iy(e,t,n,r,i,o,s,a,f){const h=e,d=t;let p=Math.abs(n/2),v=Math.abs(r/2);p+=bt(p*.01,f),v+=bt(v*.01,f);let w=i,E=o;for(;w<0;)w+=Math.PI*2,E+=Math.PI*2;E-w>Math.PI*2&&(w=0,E=Math.PI*2);const y=Math.PI*2/f.curveStepCount,S=Math.min(y/2,(E-w)/2),A=_y(S,h,d,p,v,w,E,1,f);if(!f.disableMultiStroke){const B=_y(S,h,d,p,v,w,E,1.5,f);A.push(...B)}return s&&(a?A.push(...Ql(h,d,h+p*Math.cos(w),d+v*Math.sin(w),f),...Ql(h,d,h+p*Math.cos(E),d+v*Math.sin(E),f)):A.push({op:"lineTo",data:[h,d]},{op:"lineTo",data:[h+p*Math.cos(w),d+v*Math.sin(w)]})),{type:"path",ops:A}}function ky(e,t){const n=Jx(Qx(s4(e))),r=[];let i=[0,0],o=[0,0];for(const{key:s,data:a}of n)switch(s){case"M":{o=[a[0],a[1]],i=[a[0],a[1]];break}case"L":r.push(...Ql(o[0],o[1],a[0],a[1],t)),o=[a[0],a[1]];break;case"C":{const[f,h,d,p,v,w]=a;r.push(...tb(f,h,d,p,v,w,o,t)),o=[v,w];break}case"Z":r.push(...Ql(o[0],o[1],i[0],i[1],t)),o=[i[0],i[1]];break}return{type:"path",ops:r}}function T5(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,o=r.length;if(o>2){n.push({op:"move",data:[r[0][0]+bt(i,t),r[0][1]+bt(i,t)]});for(let s=1;s<o;s++)n.push({op:"lineTo",data:[r[s][0]+bt(i,t),r[s][1]+bt(i,t)]})}}return{type:"fillPath",ops:n}}function _d(e,t){return $M(t,XM).fillPolygons(e,t)}function ZM(e,t,n,r,i,o,s){const a=e,f=t;let h=Math.abs(n/2),d=Math.abs(r/2);h+=bt(h*.01,s),d+=bt(d*.01,s);let p=i,v=o;for(;p<0;)p+=Math.PI*2,v+=Math.PI*2;v-p>Math.PI*2&&(p=0,v=Math.PI*2);const w=(v-p)/s.curveStepCount,E=[];for(let y=p;y<=v;y=y+w)E.push([a+h*Math.cos(y),f+d*Math.sin(y)]);return E.push([a+h*Math.cos(v),f+d*Math.sin(v)]),E.push([a,f]),_d([E],s)}function QM(e,t){return bt(e,t)}function JM(e,t,n){return O3(e,t,n)}function eb(e,t,n,r,i){return Ql(e,t,n,r,i,!0)}function Fy(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function rE(e){return e.randomizer||(e.randomizer=new jM(e.seed||0)),e.randomizer.next()}function O3(e,t,n,r=1){return n.roughness*r*(rE(n)*(t-e)+e)}function bt(e,t,n=1){return O3(-e,e,t,n)}function Ql(e,t,n,r,i,o=!1){const s=o?i.disableMultiStrokeFill:i.disableMultiStroke,a=Lv(e,t,n,r,i,!0,!1);if(s)return a;const f=Lv(e,t,n,r,i,!0,!0);return a.concat(f)}function Lv(e,t,n,r,i,o,s){const a=Math.pow(e-n,2)+Math.pow(t-r,2),f=Math.sqrt(a);let h=1;f<200?h=1:f>500?h=.4:h=-.0016668*f+1.233334;let d=i.maxRandomnessOffset||0;d*d*100>a&&(d=f/10);const p=d/2,v=.2+rE(i)*.2;let w=i.bowing*i.maxRandomnessOffset*(r-t)/200,E=i.bowing*i.maxRandomnessOffset*(e-n)/200;w=bt(w,i,h),E=bt(E,i,h);const y=[],S=()=>bt(p,i,h),A=()=>bt(d,i,h),B=i.preserveVertices;return s?y.push({op:"move",data:[e+(B?0:S()),t+(B?0:S())]}):y.push({op:"move",data:[e+(B?0:bt(d,i,h)),t+(B?0:bt(d,i,h))]}),s?y.push({op:"bcurveTo",data:[w+e+(n-e)*v+S(),E+t+(r-t)*v+S(),w+e+2*(n-e)*v+S(),E+t+2*(r-t)*v+S(),n+(B?0:S()),r+(B?0:S())]}):y.push({op:"bcurveTo",data:[w+e+(n-e)*v+A(),E+t+(r-t)*v+A(),w+e+2*(n-e)*v+A(),E+t+2*(r-t)*v+A(),n+(B?0:A()),r+(B?0:A())]}),y}function j2(e,t,n){if(!e.length)return[];const r=[];r.push([e[0][0]+bt(t,n),e[0][1]+bt(t,n)]),r.push([e[0][0]+bt(t,n),e[0][1]+bt(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+bt(t,n),e[i][1]+bt(t,n)]),i===e.length-1&&r.push([e[i][0]+bt(t,n),e[i][1]+bt(t,n)]);return I3(r,null,n)}function I3(e,t,n){const r=e.length,i=[];if(r>3){const o=[],s=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<r;a++){const f=e[a];o[0]=[f[0],f[1]],o[1]=[f[0]+(s*e[a+1][0]-s*e[a-1][0])/6,f[1]+(s*e[a+1][1]-s*e[a-1][1])/6],o[2]=[e[a+1][0]+(s*e[a][0]-s*e[a+2][0])/6,e[a+1][1]+(s*e[a][1]-s*e[a+2][1])/6],o[3]=[e[a+1][0],e[a+1][1]],i.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...Lv(e[0][0],e[0][1],e[1][0],e[1][1],n,!0,!0));return i}function Ly(e,t,n,r,i,o,s,a){const f=a.roughness===0,h=[],d=[];if(f){e=e/4,d.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let p=0;p<=Math.PI*2;p=p+e){const v=[t+r*Math.cos(p),n+i*Math.sin(p)];h.push(v),d.push(v)}d.push([t+r*Math.cos(0),n+i*Math.sin(0)]),d.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const p=bt(.5,a)-Math.PI/2;d.push([bt(o,a)+t+.9*r*Math.cos(p-e),bt(o,a)+n+.9*i*Math.sin(p-e)]);const v=Math.PI*2+p-.01;for(let w=p;w<v;w=w+e){const E=[bt(o,a)+t+r*Math.cos(w),bt(o,a)+n+i*Math.sin(w)];h.push(E),d.push(E)}d.push([bt(o,a)+t+r*Math.cos(p+Math.PI*2+s*.5),bt(o,a)+n+i*Math.sin(p+Math.PI*2+s*.5)]),d.push([bt(o,a)+t+.98*r*Math.cos(p+s),bt(o,a)+n+.98*i*Math.sin(p+s)]),d.push([bt(o,a)+t+.9*r*Math.cos(p+s*.5),bt(o,a)+n+.9*i*Math.sin(p+s*.5)])}return[d,h]}function _y(e,t,n,r,i,o,s,a,f){const h=o+bt(.1,f),d=[];d.push([bt(a,f)+t+.9*r*Math.cos(h-e),bt(a,f)+n+.9*i*Math.sin(h-e)]);for(let p=h;p<=s;p=p+e)d.push([bt(a,f)+t+r*Math.cos(p),bt(a,f)+n+i*Math.sin(p)]);return d.push([t+r*Math.cos(s),n+i*Math.sin(s)]),d.push([t+r*Math.cos(s),n+i*Math.sin(s)]),I3(d,null,f)}function tb(e,t,n,r,i,o,s,a){const f=[],h=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let d=[0,0];const p=a.disableMultiStroke?1:2,v=a.preserveVertices;for(let w=0;w<p;w++)w===0?f.push({op:"move",data:[s[0],s[1]]}):f.push({op:"move",data:[s[0]+(v?0:bt(h[0],a)),s[1]+(v?0:bt(h[0],a))]}),d=v?[i,o]:[i+bt(h[w],a),o+bt(h[w],a)],f.push({op:"bcurveTo",data:[e+bt(h[w],a),t+bt(h[w],a),n+bt(h[w],a),r+bt(h[w],a),d[0],d[1]]});return f}function ng(e){return[...e]}function Ny(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(ng(e[0]),ng(e[1]),ng(e[2]),ng(e[2]));else{const i=[];i.push(e[0],e[0]);for(let a=1;a<e.length;a++)i.push(e[a]),a===e.length-1&&i.push(e[a]);const o=[],s=1-t;r.push(ng(i[0]));for(let a=1;a+2<i.length;a++){const f=i[a];o[0]=[f[0],f[1]],o[1]=[f[0]+(s*i[a+1][0]-s*i[a-1][0])/6,f[1]+(s*i[a+1][1]-s*i[a-1][1])/6],o[2]=[i[a+1][0]+(s*i[a][0]-s*i[a+2][0])/6,i[a+1][1]+(s*i[a][1]-s*i[a+2][1])/6],o[3]=[i[a+1][0],i[a+1][1]],r.push(o[1],o[2],o[3])}}return r}function nb(e,t){return Math.sqrt(p3(e,t))}function p3(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function rb(e,t,n){const r=p3(t,n);if(r===0)return p3(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),p3(e,mf(t,n,i))}function mf(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function ib(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let a=3*r[1]-2*n[1]-o[1];a*=a;let f=3*i[0]-2*o[0]-n[0];f*=f;let h=3*i[1]-2*o[1]-n[1];return h*=h,s<f&&(s=f),a<h&&(a=h),s+a}function _v(e,t,n,r){const i=r||[];if(ib(e,t)<n){const o=e[t+0];i.length?nb(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],a=e[t+1],f=e[t+2],h=e[t+3],d=mf(s,a,.5),p=mf(a,f,.5),v=mf(f,h,.5),w=mf(d,p,.5),E=mf(p,v,.5),y=mf(w,E,.5);_v([s,d,w,y],0,n,i),_v([y,E,v,h],0,n,i)}return i}function Nv(e,t,n,r,i){const o=i||[],s=e[t],a=e[n-1];let f=0,h=1;for(let d=t+1;d<n-1;++d){const p=rb(e[d],s,a);p>f&&(f=p,h=d)}return Math.sqrt(f)>r?(Nv(e,t,h+1,r,o),Nv(e,h,n,r,o)):(o.length||o.push(s),o.push(a)),o}function Hy(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;_v(e,s,t,r)}return n&&n>0?Nv(r,0,r.length,n):r}function ob(e,t){return Math.sqrt(m3(e,t))}function m3(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function sb(e,t,n){const r=m3(t,n);if(r===0)return m3(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),m3(e,vf(t,n,i))}function vf(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function ub(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let a=3*r[1]-2*n[1]-o[1];a*=a;let f=3*i[0]-2*o[0]-n[0];f*=f;let h=3*i[1]-2*o[1]-n[1];return h*=h,s<f&&(s=f),a<h&&(a=h),s+a}function Hv(e,t,n,r){const i=r||[];if(ub(e,t)<n){const o=e[t+0];i.length?ob(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],a=e[t+1],f=e[t+2],h=e[t+3],d=vf(s,a,.5),p=vf(a,f,.5),v=vf(f,h,.5),w=vf(d,p,.5),E=vf(p,v,.5),y=vf(w,E,.5);Hv([s,d,w,y],0,n,i),Hv([y,E,v,h],0,n,i)}return i}function ab(e,t){return Gv(e,0,e.length,t)}function Gv(e,t,n,r,i){const o=i||[],s=e[t],a=e[n-1];let f=0,h=1;for(let d=t+1;d<n-1;++d){const p=sb(e[d],s,a);p>f&&(f=p,h=d)}return Math.sqrt(f)>r?(Gv(e,t,h+1,r,o),Gv(e,h,n,r,o)):(o.length||o.push(s),o.push(a)),o}function lb(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;Hv(e,s,t,r)}return r}function cb(e,t,n){const r=s4(e),i=Jx(Qx(r)),o=[];let s=[],a=[0,0],f=[];const h=()=>{f.length>=4&&s.push(...lb(f,t)),f=[]},d=()=>{h(),s.length&&(o.push(s),s=[])};for(const{key:v,data:w}of i)switch(v){case"M":d(),a=[w[0],w[1]],s.push(a);break;case"L":h(),s.push([w[0],w[1]]);break;case"C":if(!f.length){const E=s.length?s[s.length-1]:a;f.push([E[0],E[1]])}f.push([w[0],w[1]]),f.push([w[2],w[3]]),f.push([w[4],w[5]]);break;case"Z":h(),s.push([a[0],a[1]]);break}if(d(),!n)return o;const p=[];for(const v of o){const w=ab(v,n);w.length&&p.push(w)}return p}const Lo="none";class k3{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return WM()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,o){const s=this._o(o);return this._d("line",[tE(t,n,r,i,s)],s)}rectangle(t,n,r,i,o){const s=this._o(o),a=[],f=YM(t,n,r,i,s);if(s.fill){const h=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];s.fillStyle==="solid"?a.push(T5([h],s)):a.push(_d([h],s))}return s.stroke!==Lo&&a.push(f),this._d("rectangle",a,s)}ellipse(t,n,r,i,o){const s=this._o(o),a=[],f=nE(r,i,s),h=Fv(t,n,s,f);if(s.fill)if(s.fillStyle==="solid"){const d=Fv(t,n,s,f).opset;d.type="fillPath",a.push(d)}else a.push(_d([h.estimatedPoints],s));return s.stroke!==Lo&&a.push(h.opset),this._d("ellipse",a,s)}circle(t,n,r,i){const o=this.ellipse(t,n,r,r,i);return o.shape="circle",o}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[g3(t,!1,r)],r)}arc(t,n,r,i,o,s,a=!1,f){const h=this._o(f),d=[],p=Iy(t,n,r,i,o,s,a,!0,h);if(a&&h.fill)if(h.fillStyle==="solid"){const v=Object.assign({},h);v.disableMultiStroke=!0;const w=Iy(t,n,r,i,o,s,!0,!1,v);w.type="fillPath",d.push(w)}else d.push(ZM(t,n,r,i,o,s,h));return h.stroke!==Lo&&d.push(p),this._d("arc",d,h)}curve(t,n){const r=this._o(n),i=[],o=Oy(t,r);if(r.fill&&r.fill!==Lo)if(r.fillStyle==="solid"){const s=Oy(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=[],a=t;if(a.length){const h=typeof a[0][0]=="number"?[a]:a;for(const d of h)d.length<3?s.push(...d):d.length===3?s.push(...Hy(Ny([d[0],d[0],d[1],d[2]]),10,(1+r.roughness)/2)):s.push(...Hy(Ny(d),10,(1+r.roughness)/2))}s.length&&i.push(_d([s],r))}return r.stroke!==Lo&&i.push(o),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],o=g3(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(T5([t],r)):i.push(_d([t],r))),r.stroke!==Lo&&i.push(o),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=r.fill&&r.fill!=="transparent"&&r.fill!==Lo,s=r.stroke!==Lo,a=!!(r.simplification&&r.simplification<1),f=a?4-4*(r.simplification||1):(1+r.roughness)/2,h=cb(t,1,f),d=ky(t,r);if(o)if(r.fillStyle==="solid")if(h.length===1){const p=ky(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(p.ops)})}else i.push(T5(h,r));else i.push(_d(h,r));return s&&(a?h.forEach(p=>{i.push(g3(p,!1,r))}):i.push(d)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const o=typeof n=="number"&&n>=0?i.data.map(s=>+s.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${o[0]} ${o[1]} `;break;case"bcurveTo":r+=`C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;break;case"lineTo":r+=`L${o[0]} ${o[1]} `;break}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const o of n){let s=null;switch(o.type){case"path":s={d:this.opsToPath(o),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:Lo};break;case"fillPath":s={d:this.opsToPath(o),stroke:Lo,strokeWidth:0,fill:r.fill||Lo};break;case"fillSketch":s=this.fillSketch(o,r);break}s&&i.push(s)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Lo,strokeWidth:r,fill:Lo}}_mergedShape(t){return t.filter((n,r)=>r===0?!0:n.op!=="move")}}class fb{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new k3(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,o=t.options.fixedDecimalPlaceDigits;for(const s of n)switch(s.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,s,o),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,s,o,a),i.restore();break}case"fillSketch":this.fillSketch(i,s,r);break}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const o of n.ops){const s=typeof r=="number"&&r>=0?o.data.map(a=>+a.toFixed(r)):o.data;switch(o.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1]);break}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s),s}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s),s}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s),s}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o),o}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,o,s,a=!1,f){const h=this.gen.arc(t,n,r,i,o,s,a,f);return this.draw(h),h}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const z2="http://www.w3.org/2000/svg";class hb{constructor(t,n){this.svg=t,this.gen=new k3(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,o=i.createElementNS(z2,"g"),s=t.options.fixedDecimalPlaceDigits;for(const a of n){let f=null;switch(a.type){case"path":{f=i.createElementNS(z2,"path"),f.setAttribute("d",this.opsToPath(a,s)),f.setAttribute("stroke",r.stroke),f.setAttribute("stroke-width",r.strokeWidth+""),f.setAttribute("fill","none"),r.strokeLineDash&&f.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&f.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{f=i.createElementNS(z2,"path"),f.setAttribute("d",this.opsToPath(a,s)),f.setAttribute("stroke","none"),f.setAttribute("stroke-width","0"),f.setAttribute("fill",r.fill||""),(t.shape==="curve"||t.shape==="polygon")&&f.setAttribute("fill-rule","evenodd");break}case"fillSketch":{f=this.fillSketch(i,a,r);break}}f&&o.appendChild(f)}return o}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const o=t.createElementNS(z2,"path");return o.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),o.setAttribute("stroke",r.fill||""),o.setAttribute("stroke-width",i+""),o.setAttribute("fill","none"),r.fillLineDash&&o.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s)}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s)}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s)}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,o,s,a=!1,f){const h=this.gen.arc(t,n,r,i,o,s,a,f);return this.draw(h)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}const db={canvas(e,t){return new fb(e,t)},svg(e,t){return new hb(e,t)},generator(e){return new k3(e)},newSeed(){return k3.newSeed()}};var iE=Symbol.for("immer-nothing"),Gy=Symbol.for("immer-draftable"),jo=Symbol.for("immer-state");function Qs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var r0=Object.getPrototypeOf;function _u(e){return!!e&&!!e[jo]}function kf(e){var t;return e?oE(e)||Array.isArray(e)||!!e[Gy]||!!((t=e.constructor)!=null&&t[Gy])||Rm(e)||Mm(e):!1}var gb=Object.prototype.constructor.toString();function oE(e){if(!e||typeof e!="object")return!1;const t=r0(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===gb}function F3(e,t){Bm(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Bm(e){const t=e[jo];return t?t.type_:Array.isArray(e)?1:Rm(e)?2:Mm(e)?3:0}function $v(e,t){return Bm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sE(e,t,n){const r=Bm(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function pb(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Rm(e){return e instanceof Map}function Mm(e){return e instanceof Set}function yf(e){return e.copy_||e.base_}function Wv(e,t){if(Rm(e))return new Map(e);if(Mm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=oE(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[jo];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(r0(e),r)}else{const r=r0(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function u4(e,t=!1){return bm(e)||_u(e)||!kf(e)||(Bm(e)>1&&(e.set=e.add=e.clear=e.delete=mb),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>u4(r,!0))),e}function mb(){Qs(2)}function bm(e){return Object.isFrozen(e)}var vb={};function Ff(e){const t=vb[e];return t||Qs(0,e),t}var Bg;function uE(){return Bg}function yb(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $y(e,t){t&&(Ff("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jv(e){zv(e),e.drafts_.forEach(wb),e.drafts_=null}function zv(e){e===Bg&&(Bg=e.parent_)}function Wy(e){return Bg=yb(Bg,e)}function wb(e){const t=e[jo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function jy(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[jo].modified_&&(jv(t),Qs(4)),kf(e)&&(e=L3(t,e),t.parent_||_3(t,e)),t.patches_&&Ff("Patches").generateReplacementPatches_(n[jo].base_,e,t.patches_,t.inversePatches_)):e=L3(t,n,[]),jv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==iE?e:void 0}function L3(e,t,n){if(bm(t))return t;const r=t[jo];if(!r)return F3(t,(i,o)=>zy(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return _3(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),F3(o,(a,f)=>zy(e,r,i,a,f,n,s)),_3(e,i,!1),n&&e.patches_&&Ff("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function zy(e,t,n,r,i,o,s){if(_u(i)){const a=o&&t&&t.type_!==3&&!$v(t.assigned_,r)?o.concat(r):void 0,f=L3(e,i,a);if(sE(n,r,f),_u(f))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(kf(i)&&!bm(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;L3(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&_3(e,i)}}function _3(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&u4(t,n)}function Cb(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:uE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=a4;n&&(i=[r],o=Rg);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var a4={get(e,t){if(t===jo)return e;const n=yf(e);if(!$v(n,t))return xb(e,n,t);const r=n[t];return e.finalized_||!kf(r)?r:r===A5(e.base_,t)?(B5(e),e.copy_[t]=Uv(r,e)):r},has(e,t){return t in yf(e)},ownKeys(e){return Reflect.ownKeys(yf(e))},set(e,t,n){const r=aE(yf(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=A5(yf(e),t),o=i==null?void 0:i[jo];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(pb(n,i)&&(n!==void 0||$v(e.base_,t)))return!0;B5(e),Vv(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return A5(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,B5(e),Vv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=yf(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Qs(11)},getPrototypeOf(e){return r0(e.base_)},setPrototypeOf(){Qs(12)}},Rg={};F3(a4,(e,t)=>{Rg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Rg.deleteProperty=function(e,t){return Rg.set.call(this,e,t,void 0)};Rg.set=function(e,t,n){return a4.set.call(this,e[0],t,n,e[0])};function A5(e,t){const n=e[jo];return(n?yf(n):e)[t]}function xb(e,t,n){var i;const r=aE(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function aE(e,t){if(!(t in e))return;let n=r0(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=r0(n)}}function Vv(e){e.modified_||(e.modified_=!0,e.parent_&&Vv(e.parent_))}function B5(e){e.copy_||(e.copy_=Wv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Eb=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(f=o,...h){return s.produce(f,d=>n.call(this,d,...h))}}typeof n!="function"&&Qs(6),r!==void 0&&typeof r!="function"&&Qs(7);let i;if(kf(t)){const o=Wy(this),s=Uv(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?jv(o):zv(o)}return $y(o,r),jy(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===iE&&(i=void 0),this.autoFreeze_&&u4(i,!0),r){const o=[],s=[];Ff("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else Qs(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,f=>t(f,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){kf(e)||Qs(8),_u(e)&&(e=Pb(e));const t=Wy(this),n=Uv(e,void 0);return n[jo].isManual_=!0,zv(t),n}finishDraft(e,t){const n=e&&e[jo];(!n||!n.isManual_)&&Qs(9);const{scope_:r}=n;return $y(r,t),jy(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Ff("Patches").applyPatches_;return _u(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Uv(e,t){const n=Rm(e)?Ff("MapSet").proxyMap_(e,t):Mm(e)?Ff("MapSet").proxySet_(e,t):Cb(e,t);return(t?t.scope_:uE()).drafts_.push(n),n}function Pb(e){return _u(e)||Qs(10,e),lE(e)}function lE(e){if(!kf(e)||bm(e))return e;const t=e[jo];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Wv(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Wv(e,!0);return F3(n,(r,i)=>{sE(n,r,lE(i))}),t&&(t.finalized_=!1),n}var zo=new Eb,l4=zo.produce;zo.produceWithPatches.bind(zo);zo.setAutoFreeze.bind(zo);zo.setUseStrictShallowCopy.bind(zo);zo.applyPatches.bind(zo);var Gd=zo.createDraft.bind(zo),$d=zo.finishDraft.bind(zo),Ys={},Vy;function Sb(){if(Vy)return Ys;Vy=1,Object.defineProperty(Ys,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),t={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},n={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)r["f"+i]=111+i;function o(v,w,E){w&&!("byKey"in w)&&(E=w,w=null),Array.isArray(v)||(v=[v]);var y=v.map(function(B){return f(B,w)}),S=function(R){return y.some(function(_){return h(_,R)})},A=E==null?S:S(E);return A}function s(v,w){return o(v,w)}function a(v,w){return o(v,{byKey:!0},w)}function f(v,w){var E=w&&w.byKey,y={};v=v.replace("++","+add");var S=v.split("+"),A=S.length;for(var B in t)y[t[B]]=!1;var R=!0,_=!1,F=void 0;try{for(var j=S[Symbol.iterator](),z;!(R=(z=j.next()).done);R=!0){var Q=z.value,se=Q.endsWith("?")&&Q.length>1;se&&(Q=Q.slice(0,-1));var te=p(Q),Ee=t[te];if(Q.length>1&&!Ee&&!n[Q]&&!r[te])throw new TypeError('Unknown modifier: "'+Q+'"');(A===1||!Ee)&&(E?y.key=te:y.which=d(Q)),Ee&&(y[Ee]=se?null:!0)}}catch(ie){_=!0,F=ie}finally{try{!R&&j.return&&j.return()}finally{if(_)throw F}}return y}function h(v,w){for(var E in v){var y=v[E],S=void 0;if(y!=null&&(E==="key"&&w.key!=null?S=w.key.toLowerCase():E==="which"?S=y===91&&w.which===93?91:w.which:S=w[E],!(S==null&&y===!1)&&S!==y))return!1}return!0}function d(v){v=p(v);var w=r[v]||v.toUpperCase().charCodeAt(0);return w}function p(v){return v=v.toLowerCase(),v=n[v]||v,v}return Ys.default=o,Ys.isHotkey=o,Ys.isCodeHotkey=s,Ys.isKeyHotkey=a,Ys.parseHotkey=f,Ys.compareHotkey=h,Ys.toKeyCode=d,Ys.toKeyName=p,Ys}var cn=Sb(),Xv=function(e,t){return Xv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Xv(e,t)};function ac(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Xv(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Db(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(d){try{h(r.next(d))}catch(p){s(p)}}function f(d){try{h(r.throw(d))}catch(p){s(p)}}function h(d){d.done?o(d.value):i(d.value).then(a,f)}h((r=r.apply(e,t||[])).next())})}function cE(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(h){return function(d){return f([h,d])}}function f(h){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(d){h=[6,d],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function i0(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o0(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Mg(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Yd(e){return this instanceof Yd?(this.v=e,this):new Yd(e)}function Tb(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(w){return function(E){return Promise.resolve(E).then(w,p)}}function a(w,E){r[w]&&(i[w]=function(y){return new Promise(function(S,A){o.push([w,y,S,A])>1||f(w,y)})},E&&(i[w]=E(i[w])))}function f(w,E){try{h(r[w](E))}catch(y){v(o[0][3],y)}}function h(w){w.value instanceof Yd?Promise.resolve(w.value.v).then(d,p):v(o[0][2],w)}function d(w){f("next",w)}function p(w){f("throw",w)}function v(w,E){w(E),o.shift(),o.length&&f(o[0][0],o[0][1])}}function Ab(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof i0=="function"?i0(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,f){s=e[o](s),i(a,f,s.done,s.value)})}}function i(o,s,a,f){Promise.resolve(f).then(function(h){o({value:h,done:a})},s)}}function Jn(e){return typeof e=="function"}function fE(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var R5=fE(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function N3(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ip=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=i0(s),f=a.next();!f.done;f=a.next()){var h=f.value;h.remove(this)}}catch(y){t={error:y}}finally{try{f&&!f.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var d=this.initialTeardown;if(Jn(d))try{d()}catch(y){o=y instanceof R5?y.errors:[y]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var v=i0(p),w=v.next();!w.done;w=v.next()){var E=w.value;try{Uy(E)}catch(y){o=o??[],y instanceof R5?o=Mg(Mg([],o0(o)),o0(y.errors)):o.push(y)}}}catch(y){r={error:y}}finally{try{w&&!w.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}}if(o)throw new R5(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Uy(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&N3(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&N3(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),hE=ip.EMPTY;function dE(e){return e instanceof ip||e&&"closed"in e&&Jn(e.remove)&&Jn(e.add)&&Jn(e.unsubscribe)}function Uy(e){Jn(e)?e():e.unsubscribe()}var Bb={Promise:void 0},Rb={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Mg([e,t],o0(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function gE(e){Rb.setTimeout(function(){throw e})}function Xy(){}function v3(e){e()}var c4=function(e){ac(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,dE(n)&&n.add(r)):r.destination=Ob,r}return t.create=function(n,r,i){return new Kv(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(ip),Mb=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){V2(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){V2(r)}else V2(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){V2(n)}},e}(),Kv=function(e){ac(t,e);function t(n,r,i){var o=e.call(this)||this,s;return Jn(n)||!n?s={next:n??void 0,error:r??void 0,complete:i??void 0}:s=n,o.destination=new Mb(s),o}return t}(c4);function V2(e){gE(e)}function bb(e){throw e}var Ob={closed:!0,next:Xy,error:bb,complete:Xy},f4=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ib(e){return e}function kb(e){return e.length===0?Ib:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var iu=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=Lb(t)?t:new Kv(t,n,r);return v3(function(){var s=i,a=s.operator,f=s.source;o.add(a?a.call(o,f):f?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Ky(n),new n(function(i,o){var s=new Kv({next:function(a){try{t(a)}catch(f){o(f),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[f4]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return kb(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Ky(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function Ky(e){var t;return(t=e??Bb.Promise)!==null&&t!==void 0?t:Promise}function Fb(e){return e&&Jn(e.next)&&Jn(e.error)&&Jn(e.complete)}function Lb(e){return e&&e instanceof c4||Fb(e)&&dE(e)}function _b(e){return Jn(e==null?void 0:e.lift)}function Om(e){return function(t){if(_b(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function bg(e,t,n,r,i){return new Nb(e,t,n,r,i)}var Nb=function(e){ac(t,e);function t(n,r,i,o,s,a){var f=e.call(this,n)||this;return f.onFinalize=s,f.shouldUnsubscribe=a,f._next=r?function(h){try{r(h)}catch(d){n.error(d)}}:e.prototype._next,f._error=o?function(h){try{o(h)}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._error,f._complete=i?function(){try{i()}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,f}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(c4),Hb=fE(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),pE=function(e){ac(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new Yy(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new Hb},t.prototype.next=function(n){var r=this;v3(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=i0(r.currentObservers),a=s.next();!a.done;a=s.next()){var f=a.value;f.next(n)}}catch(h){i={error:h}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;v3(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;v3(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?hE:(this.currentObservers=null,a.push(n),new ip(function(){r.currentObservers=null,N3(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new iu;return n.source=this,n},t.create=function(n,r){return new Yy(n,r)},t}(iu),Yy=function(e){ac(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:hE},t}(pE),Gb={now:function(){return Date.now()}},$b=function(e){ac(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(ip),qy={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Mg([e,t],o0(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},Wb=function(e){ac(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),qy.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&qy.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,N3(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}($b),Zy=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=Gb.now,e}(),jb=function(e){ac(t,e);function t(n,r){r===void 0&&(r=Zy.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Zy),zb=new jb(Wb),Vb=zb,Ub=new iu(function(e){return e.complete()}),mE=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Xb(e){return Jn(e==null?void 0:e.then)}function Kb(e){return Jn(e[f4])}function Yb(e){return Symbol.asyncIterator&&Jn(e==null?void 0:e[Symbol.asyncIterator])}function qb(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Zb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Qb=Zb();function Jb(e){return Jn(e==null?void 0:e[Qb])}function eO(e){return Tb(this,arguments,function(){var n,r,i,o;return cE(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Yd(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Yd(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Yd(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function tO(e){return Jn(e==null?void 0:e.getReader)}function h4(e){if(e instanceof iu)return e;if(e!=null){if(Kb(e))return nO(e);if(mE(e))return rO(e);if(Xb(e))return iO(e);if(Yb(e))return vE(e);if(Jb(e))return oO(e);if(tO(e))return sO(e)}throw qb(e)}function nO(e){return new iu(function(t){var n=e[f4]();if(Jn(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rO(e){return new iu(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function iO(e){return new iu(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,gE)})}function oO(e){return new iu(function(t){var n,r;try{for(var i=i0(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function vE(e){return new iu(function(t){uO(e,t).catch(function(n){return t.error(n)})})}function sO(e){return vE(eO(e))}function uO(e,t){var n,r,i,o;return Db(this,void 0,void 0,function(){var s,a;return cE(this,function(f){switch(f.label){case 0:f.trys.push([0,5,6,11]),n=Ab(e),f.label=1;case 1:return[4,n.next()];case 2:if(r=f.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];f.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=f.sent(),i={error:a},[3,11];case 6:return f.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:f.sent(),f.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function aO(e){return e instanceof Date&&!isNaN(e)}function yE(e,t){return Om(function(n,r){var i=0;n.subscribe(bg(r,function(o){r.next(e.call(t,o,i++))}))})}var lO=Array.isArray;function cO(e,t){return lO(t)?e.apply(void 0,Mg([],o0(t))):e(t)}function fO(e){return yE(function(t){return cO(e,t)})}function hO(e,t,n,r,i,o,s,a){var f=[],h=0,d=0,p=!1,v=function(){p&&!f.length&&!h&&t.complete()},w=function(y){return h<r?E(y):f.push(y)},E=function(y){h++;var S=!1;h4(n(y,d++)).subscribe(bg(t,function(A){t.next(A)},function(){S=!0},void 0,function(){if(S)try{h--;for(var A=function(){var B=f.shift();s||E(B)};f.length&&h<r;)A();v()}catch(B){t.error(B)}}))};return e.subscribe(bg(t,w,function(){p=!0,v()})),function(){}}function wE(e,t,n){return n===void 0&&(n=1/0),Jn(t)?wE(function(r,i){return yE(function(o,s){return t(r,o,i,s)})(h4(e(r,i)))},n):(typeof t=="number"&&(n=t),Om(function(r,i){return hO(r,i,e,n)}))}var dO=["addListener","removeListener"],gO=["addEventListener","removeEventListener"],pO=["on","off"];function Lf(e,t,n,r){if(Jn(n)&&(r=n,n=void 0),r)return Lf(e,t,n).pipe(fO(r));var i=o0(yO(e)?gO.map(function(a){return function(f){return e[a](t,f,n)}}):mO(e)?dO.map(Qy(e,t)):vO(e)?pO.map(Qy(e,t)):[],2),o=i[0],s=i[1];if(!o&&mE(e))return wE(function(a){return Lf(a,t,n)})(h4(e));if(!o)throw new TypeError("Invalid event target");return new iu(function(a){var f=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];return a.next(1<h.length?h:h[0])};return o(f),function(){return s(f)}})}function Qy(e,t){return function(n){return function(r){return e[n](t,r)}}}function mO(e){return Jn(e.addListener)&&Jn(e.removeListener)}function vO(e){return Jn(e.on)&&Jn(e.off)}function yO(e){return Jn(e.addEventListener)&&Jn(e.removeEventListener)}function wO(e,t,n){return n===void 0&&(n=Vb),new iu(function(r){var i=aO(e)?0-n.now():e;i<0&&(i=0);var o=0;return n.schedule(function(){r.closed||(r.next(o++),r.complete())},i)})}function CO(e,t){return Om(function(n,r){var i=0;n.subscribe(bg(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function Yv(e){return e<=0?function(){return Ub}:Om(function(t,n){var r=0;t.subscribe(bg(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}var Js;(function(e){e.ew="ew-resize",e.ns="ns-resize",e.nesw="nesw-resize",e.nwse="nwse-resize"})(Js||(Js={}));var H3;(function(e){e.crosshair="crosshair"})(H3||(H3={}));const M5=[Js.ns,Js.nesw,Js.ew,Js.nwse],Ya="plait-board-attached",hr=1,qv=2,op="selection-rectangle",xO="selection-rectangle-bounding",EO=.1,CE=.1,xE=4,PO="plait-board-container",EE="active-with-moving",Jy="rotate-handle",SO="resize-handle",DO=20,PE={MAIN:0,WHEEL:1},d4=3,SE=10,g4=5;function TO(e){return!!e.beforeContextChange}function AO(e){return!!e.onContextChanged}const e9=new WeakMap,y3=new WeakMap,qd=new WeakMap,Bf=new WeakMap,Zv=new WeakMap,lg=new WeakMap,cg=new WeakMap,Qv=new WeakMap,G3=new WeakMap,$3=new WeakMap,Jv=new WeakMap,e6=new WeakMap,t6=new WeakMap,n6=new WeakMap,ba=new WeakMap,DE=new WeakMap,r6=new WeakMap,TE=new WeakMap,p4=new WeakMap,m4=new WeakMap,Im=new WeakMap,km=new WeakMap,t9=new WeakMap,fg=new WeakMap;function Vo(e){return e==null}const AE=(e,t)=>e+Math.floor(t*255).toString(16);function BO(e){return e.button===2}function v4(e){const t=new Map;return e.forEach(n=>{t.has(n.id)||t.set(n.id,n)}),Array.from(t.values())}const RO=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let r=n+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},MO=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let r=n-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},bO=e=>{e.sort((t,n)=>t-n);for(let t=1;t<e.length;t++)if(e[t]!==e[t-1]+1)return!1;return!0},OO={isViewport:e=>!Vo(e.zoom)&&!Vo(e.viewBackgroundColor)},pt={ancestors(e,t={}){const{reverse:n=!1}=t;let r=pt.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},levels(e,t={}){const{reverse:n=!1}=t,r=[];for(let i=0;i<=e.length;i++)r.push(e.slice(0,i));return n&&r.reverse(),r},parent(e){if(e.length===0)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},next(e){if(e.length===0)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const t=e[e.length-1];return e.slice(0,-1).concat(t+1)},hasPrevious(e){return e[e.length-1]>0},previous(e){if(e.length===0)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const t=e[e.length-1];if(t<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(t-1)},isAncestor(e,t){return e.length<t.length&&pt.compare(e,t)===0},compare(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},endsBefore(e,t){const n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return pt.equals(r,i)&&o<s},isSibling(e,t){if(e.length!==t.length)return!1;const n=e.slice(0,-1),r=t.slice(0,-1),i=e[e.length-1],o=t[t.length-1];return i!==o&&pt.equals(n,r)},transform(e,t){if(!e)return null;const n=[...e];if(e.length===0)return n;switch(t.type){case"insert_node":{const{path:r}=t;(pt.equals(r,n)||pt.endsBefore(r,n)||pt.isAncestor(r,n))&&(n[r.length-1]+=1);break}case"remove_node":{const{path:r}=t;if(pt.equals(r,n)||pt.isAncestor(r,n))return null;pt.endsBefore(r,n)&&(n[r.length-1]-=1);break}case"move_node":{const{path:r,newPath:i}=t;if(pt.equals(r,i))return n;if(pt.isAncestor(r,n)||pt.equals(r,n)){const o=i.slice();return pt.endsBefore(r,i)&&r.length<i.length&&(o[r.length-1]-=1),o.concat(n.slice(r.length))}else pt.isSibling(r,i)&&(pt.isAncestor(i,n)||pt.equals(i,n))?pt.endsBefore(r,n)?n[r.length-1]-=1:n[r.length-1]+=1:pt.endsBefore(i,n)||pt.equals(i,n)||pt.isAncestor(i,n)?(pt.endsBefore(r,n)&&(n[r.length-1]-=1),n[i.length-1]+=1):pt.endsBefore(r,n)&&(pt.equals(i,n)&&(n[i.length-1]+=1),n[r.length-1]-=1);break}}return n}},Vt={parent:(e,t)=>{const n=pt.parent(t);return Vt.get(e,n)},*parents(e,t,n={}){for(const r of pt.ancestors(t,n))yield Vt.get(e,r)},get(e,t){let n=e;for(let r=0;r<t.length;r++){const i=t[r];if(!n||!n.children||!n.children[i])throw new Error(`Cannot find a descendant at path [${t}]`);n=n.children[i]}return n},last(e,t){let n=Vt.get(e,t);for(;n&&n.children&&n.children.length>0;){const r=n.children.length-1;n=n.children[r]}return n},first(e,t){const n=t.slice();let r=Vt.get(e,n);if(!r.children||!e.isExpanded(r))return r;for(;r&&r.children&&r.children.length>0&&e.isExpanded(r)&&r.children.length!==0;)r=r.children[0],n.push(0);return r}},IO=(e,t,n,r,i)=>{var o,s;switch(i.type){case"insert_node":{const{path:a,node:f}=i,h=Vt.parent(e,a),d=a[a.length-1];if(!h.children||d>h.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${a}] because the destination is past the end of the node.`);h.children.splice(d,0,f);break}case"remove_node":{const{path:a}=i,f=Vt.parent(e,a),h=a[a.length-1];if(!f.children||h>f.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${a}] because the destination is past the end of the node.`);f.children.splice(h,1);break}case"move_node":{const{path:a,newPath:f}=i;if(pt.isAncestor(a,f))throw new Error(`Cannot move a path [${a}] to new path [${f}] because the destination is inside itself.`);const h=Vt.get(e,a),d=Vt.parent(e,a),p=a[a.length-1];(o=d.children)==null||o.splice(p,1);const v=pt.transform(a,i),w=Vt.get(e,pt.parent(v)),E=v[v.length-1];(s=w.children)==null||s.splice(E,0,h);break}case"set_node":{const{path:a,properties:f,newProperties:h}=i;if(a.length===0)throw new Error("Cannot set properties on the root node!");const d=Vt.get(e,a);for(const p in h){const v=h[p];v==null?delete d[p]:d[p]=v}for(const p in f)h.hasOwnProperty(p)||delete d[p];break}case"set_viewport":{const{newProperties:a}=i;if(a==null)n=a;else{if(n==null){if(!OO.isViewport(a))throw new Error(`Cannot apply an incomplete "set_viewport" operation properties ${JSON.stringify(a)} when there is no current viewport.`);n={...a}}for(const f in a){const h=a[f];h==null?delete n[f]:n[f]=h}}break}case"set_selection":{const{newProperties:a}=i;a==null?t=a:t===null?t=i.newProperties:t=a;break}case"set_theme":{const{newProperties:a}=i;r=a;break}}return{selection:t,viewport:n,theme:r}},kO={transform(e,t){e.children=Gd(e.children);let n=e.viewport&&Gd(e.viewport),r=e.selection&&Gd(e.selection),i=e.theme&&Gd(e.theme);try{const o=IO(e,r,n,i,t);n=o.viewport,r=o.selection,i=o.theme}finally{e.children=$d(e.children),r?e.selection=_u(r)?$d(r):r:e.selection=null,e.viewport=_u(n)?$d(n):n,e.theme=_u(i)?$d(i):i}}},M={isHit:(e,t)=>M.isHitX(e,t)&&M.isHitY(e,t),isHitX:(e,t)=>{const n=e.x<t.x?e.x:t.x,r=e.x+e.width>t.x+t.width?e.x+e.width:t.x+t.width;return Math.floor(r-n-e.width-t.width)<=0},isHitY:(e,t)=>{const n=e.y<t.y?e.y:t.y,r=e.y+e.height>t.y+t.height?e.y+e.height:t.y+t.height;return Math.floor(r-n-e.height-t.height)<=0},getPoints(e){return[[e.x,e.y],[e.x+e.width,e.y+e.height]]},getRectangleByCenterPoint(e,t,n){return M.getRectangleByPoint([e[0]-t/2,e[1]-n/2],t,n)},getRectangleByPoint(e,t,n){return{x:e[0],y:e[1],width:t,height:n}},getRectangleByPoints(e){FO(e)&&(e=[e]);let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const s of e){const a=s.map(h=>h[0]),f=s.map(h=>h[1]);t=Math.min(t,...a),n=Math.min(n,...f),r=Math.max(r,...a),n=Math.min(n,...f),i=Math.max(i,...f)}return{x:t,y:n,width:r-t,height:i-n}},getCornerPointsByPoints(e){const t=e.map(a=>a[0]),n=e.map(a=>a[1]),r=Math.min(...t),i=Math.max(...t),o=Math.min(...n),s=Math.max(...n);return[[r,o],[i,o],[i,s],[r,s]]},getOutlineRectangle:(e,t)=>({x:e.x+t,y:e.y+t,width:e.width-t*2,height:e.height-t*2}),inflate:(e,t)=>{const n=t/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}},isEqual:(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,getCornerPoints:e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],getCenterPoint:e=>[e.x+e.width/2,e.y+e.height/2],getCenterPointByPoints:e=>M.getCenterPoint(M.getRectangleByPoints(e)),getEdgeCenterPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getConnectionPoint:(e,t)=>[e.x+e.width*t[0],e.y+e.height*t[1]],expand(e,t,n=t,r=t,i=n){return{x:e.x-t,y:e.y-n,width:e.width+t+r,height:e.height+n+i}},getGapCenter(e,t,n){const r=n?"x":"y",i=n?"width":"height",s=[e[r],e[r]+e[i],t[r],t[r]+t[i]].sort((a,f)=>a-f);return(s[1]+s[2])/2},isPointInRectangle(e,t){const n=t[0],r=t[1];return n>e.x&&n<e.x+e.width&&r>e.y&&r<e.y+e.height},getBoundingRectangle(e){if(e.length===0)throw new Error("rectangles can not be empty array");let t=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.forEach(o=>{t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x+o.width),i=Math.max(i,o.y+o.height)}),{x:t,y:n,width:r-t,height:i-n}}};function FO(e){return Array.isArray(e)&&e.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")}function BE(e,t,n,r,i,o){const s=e-n,a=t-r,f=i-n,h=o-r,d=s*f+a*h,p=f*f+h*h;let v=-1;p!==0&&(v=d/p);let w,E;v<0?(w=n,E=r):v>1?(w=i,E=o):(w=n+v*f,E=r+v*h);const y=e-w,S=t-E;return Math.hypot(y,S)}function Fm(e,t){const n=e[0],r=e[1],i=t[0][0],o=t[0][1],s=t[1][0],a=t[1][1],f=n-i,h=r-o,d=s-i,p=a-o,v=f*d+h*p,w=d*d+p*p;let E=-1;w!==0&&(E=v/w);let y,S;return E<0?(y=i,S=o):E>1?(y=s,S=a):(y=i+E*d,S=o+E*p),[y,S]}function RE(e,t){const n=t.length;let r=1/0;if(t.length===1)return Et(...t[0],...e);for(let i=0;i<n-1;i++){const o=t[i],s=t[i+1],a=BE(e[0],e[1],o[0],o[1],s[0],s[1]);a<r&&(r=a)}return r}function On(e,t,n=!0){const r=t.length;let i=1/0,o=e;for(let s=0;s<r;s++){const a=t[s];if(s===r-1&&!n)continue;const f=s===r-1?t[0]:t[s+1],h=BE(e[0],e[1],a[0],a[1],f[0],f[1]);h<i&&(i=h,o=Fm(e,[a,f]))}return o}function y4(e,t){let n=1/0,r=e;for(const i of t){const o=Fm(e,i),s=Et(e[0],e[1],o[0],o[1]);s<n&&(n=s,r=o)}return r}function Ai(e,t,n,r){const i={x:t[0]-n,y:t[1]-r,height:r*2,width:n*2},o=Math.abs(e[0]-i.x-i.width/2),s=Math.abs(e[1]-i.y-i.height/2);let a=.707,f=.707;const h=Math.abs(i.width)/2,d=Math.abs(i.height)/2;[0,1,2,3].forEach(w=>{const E=h*a,y=d*f,S=(h*h-d*d)*a**3/h,A=(d*d-h*h)*f**3/d,B=E-S,R=y-A,_=o-S,F=s-A,j=Math.hypot(R,B),z=Math.hypot(F,_);a=Math.min(1,Math.max(0,(_*j/z+S)/h)),f=Math.min(1,Math.max(0,(F*j/z+A)/d));const Q=Math.hypot(f,a);a/=Q,f/=Q});const p=e[0]>t[0]?1:-1,v=e[1]>t[1]?1:-1;return[t[0]+h*a*p,t[1]+d*f*v]}function s0(e,t,n,r,i){return[(e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r]}function Et(e,t,n,r){const i=e-n,o=t-r;return Math.hypot(i,o)}function sp(e,t,n){var r=Math.max(n.x-e,0,e-(n.x+n.width)),i=Math.max(n.y-t,0,t-(n.y+n.height));return Math.sqrt(r*r+i*i)}const U2=(e,t,n,r)=>{if(dt.isEquals(e,t)&&dt.isEquals(n,r)&&!dt.isEquals(e,n))return!1;const i=(p,v)=>p[0]*v[1]-p[1]*v[0],o=[t[0]-e[0],t[1]-e[1]],s=[n[0]-e[0],n[1]-e[1]],a=[r[0]-e[0],r[1]-e[1]],f=[e[0]-n[0],e[1]-n[1]],h=[t[0]-n[0],t[1]-n[1]],d=[r[0]-n[0],r[1]-n[1]];return i(o,s)*i(o,a)<=0&&i(d,f)*i(d,h)<=0},W3=(e,t)=>{if(e.length===1)return M.isPointInRectangle(t,e[0]);const n=M.getCornerPoints(t),r=e.length;for(let i=0;i<r;i++){const o=e[i],s=e[(i+1)%r];if(i===r-1&&dt.isEquals(o,s))continue;if(LO(o,s,t)||Jl(o,n)||Jl(s,n))return!0}return!1},LO=(e,t,n)=>{const r=M.getCornerPoints(n);return U2(e,t,r[0],r[1])||U2(e,t,r[1],r[2])||U2(e,t,r[2],r[3])||U2(e,t,r[3],r[0])},Jl=(e,t)=>{const n=e[0],r=e[1];let i=!1;for(var o=0,s=t.length-1;o<t.length;s=o++){let a=t[o][0],f=t[o][1],h=t[s][0],d=t[s][1];f>r!=d>r&&n<(h-a)*(r-f)/(d-f)+a&&(i=!i)}return i},Ga=(e,t,n,r,i=0)=>{const o=Math.cos(i),s=Math.sin(i),a=(e[0]-t[0])*o+(e[1]-t[1])*s,f=(e[1]-t[1])*o-(e[0]-t[0])*s;return a*a/(n*n)+f*f/(r*r)<=1},w4=(e,t,n,r=0)=>{const{x:i,y:o,width:s,height:a}=t,f=e[0]>=i&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+a,h=e[0]>=i&&e[0]<=i+n&&e[1]>=o&&e[1]<=o+n&&Math.hypot(e[0]-(i+n),e[1]-(o+n))>n,d=e[0]>=i&&e[0]<=i+n&&e[1]>=o+a&&e[1]<=o+a-n&&Math.hypot(e[0]-(i+n),e[1]-(o+a-n))>n,p=e[0]>=i+s-n&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+n&&Math.hypot(e[0]-(i+s-n),e[1]-(o+n))>n,v=e[0]>=i+s-n&&e[0]<=i+s&&e[1]>=o+a-n&&e[1]<=o+a&&Math.hypot(e[0]-(i+s-n),e[1]-(o+a-n))>n;return f&&!(h||d||p||v)},up=function(e){let n,r,i,o,s,a,f,h,d,p,v,w,E;var y,S,A,B,R,_;const F=[];F.push([Math.round(e[0][0]),Math.round(e[0][1])]);for(var j=e.length,z=0;z<j-1;z++)n=z==0?e[0]:e[z-1],r=e[z],i=e[z+1],o=z+2<j?e[z+2]:i,f=Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2)),h=Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)),d=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)),y=Math.pow(d,.5),A=Math.pow(d,2*.5),S=Math.pow(h,.5),B=Math.pow(h,2*.5),_=Math.pow(f,.5),R=Math.pow(f,2*.5),p=2*R+3*_*S+B,v=2*A+3*y*S+B,w=3*_*(_+S),w>0&&(w=1/w),E=3*y*(y+S),E>0&&(E=1/E),s=[(-B*n[0]+p*r[0]+R*i[0])*w,(-B*n[1]+p*r[1]+R*i[1])*w],a=[(A*r[0]+v*i[0]-B*o[0])*E,(A*r[1]+v*i[1]-B*o[1])*E],s[0]==0&&s[1]==0&&(s=r),a[0]==0&&a[1]==0&&(a=i),F.push(s,a,i);return F};function Xu(e,t,n,r){return Math.abs(t)===0?e>0?-1/0:1/0:-r*r*e/(n*n*t)}function Ku(e,t,n){if(n===1/0)return[0,-1];if(n===-1/0)return[0,1];let r=[1,-n];return t<0&&(r=[-r[0],-r[1]]),r}function _O(e){return+e.toFixed(2)}function C4(e,t){const n=Math.pow(10,t);return Math.ceil(e*n)/n}function i6(e,t,n=1e-6){return Math.abs(e-t)<=n}function n9(e,t,n,r,i,o,s=!0){if(i===0||o===0||e[0]===t[0]&&e[1]===t[1])return[];i=i<0?i:-i,o=o<0?o:-o,e[0]-=n,e[1]-=r,t[0]-=n,t[1]-=r;var a=(t[0]-e[0])*(t[0]-e[0])/i/i+(t[1]-e[1])*(t[1]-e[1])/o/o,f=2*e[0]*(t[0]-e[0])/i/i+2*e[1]*(t[1]-e[1])/o/o,h=e[0]*e[0]/i/i+e[1]*e[1]/o/o-1,d=[],p=f*f-4*a*h;return p===0?d.push(-f/2/a):p>0&&(d.push((-f+Math.sqrt(p))/2/a),d.push((-f-Math.sqrt(p))/2/a)),d.filter(v=>!s||v>=0&&v<=1).map(v=>[e[0]+(t[0]-e[0])*v+n,e[1]+(t[1]-e[1])*v+r])}function r9(e,t,n,r,i=.5){return[e+(n-e)*i,t+(r-t)*i]}function ME(e,t){const n=(t.endX-e[0])/2,r=(t.endY-e[1])/2,i=Math.cos(t.xAxisRotation),o=Math.sin(t.xAxisRotation),s=i*n+o*r,a=-o*n+i*r,f=Math.abs(t.rx),h=Math.abs(t.ry),d=s*s/(f*f)+a*a/(h*h),p=d>1?Math.sqrt(d):1,v=f*p,w=h*p,E=t.largeArcFlag===t.sweepFlag?-1:1,y=(v*v*w*w-v*v*a*a-w*w*s*s)/(v*v*a*a+w*w*s*s),S=E*Math.sqrt(Math.max(0,y)),A=S*(v*a/w),B=S*(-(w*s)/v),R=i*A-o*B+(e[0]+t.endX)/2,_=o*A+i*B+(e[1]+t.endY)/2;return{center:[R,_],rx:v,ry:w}}function Lm(e,t,n){const{center:r,rx:i,ry:o}=ME(t,n),s=Ai(e,r,i,o),a=Math.atan2(t[1]-r[1],t[0]-r[0]),f=Math.atan2(n.endY-r[1],n.endX-r[0]),h=Math.atan2(s[1]-r[1],s[0]-r[0]);if(NO(h,a,f,n.sweepFlag===1))return s;const p=Et(e[0],e[1],t[0],t[1]),v=Et(e[0],e[1],n.endX,n.endY);return p<v?t:[n.endX,n.endY]}function NO(e,t,n,r){const i=f=>(f%(2*Math.PI)+2*Math.PI)%(2*Math.PI),o=i(e),s=i(t),a=i(n);return r?s<=a?o>=s&&o<=a:o>=s||o<=a:s>=a?o<=s&&o>=a:o<=s||o>=a}function HO(e,t,n){const i=I.getBoardContainer(e).getBoundingClientRect();return sp(t,n,i)===0}function x4(e){const{hideScrollbar:t}=e.options;let n=0;if(!t){const r=I.getViewportContainer(e);n=r.offsetWidth-r.clientWidth}return n}const w0="http://www.w3.org/2000/svg";function Gt(){return document.createElementNS(w0,"g")}function E4(){return document.createElementNS(w0,"path")}function b5(e,t){const n=document.createElementNS(w0,"rect");n.setAttribute("x",`${e.x}`),n.setAttribute("y",`${e.y}`),n.setAttribute("width",`${e.width}`),n.setAttribute("height",`${e.height}`);for(let r in t){const i=r;n.setAttribute(r,`${t[i]}`)}return n}const Kt=(e,t)=>{e.setAttribute("stroke-linecap",t)},GO=(e,t)=>{e.querySelectorAll("path").forEach(n=>{n.setAttribute("stroke-linecap",t)})};function $O(){return document.createElementNS(w0,"mask")}function WO(e,t,n,r){var i=document.createElementNS(w0,"text");return i.setAttribute("x",`${e}`),i.setAttribute("y",`${t}`),i.setAttribute("fill",n),i.textContent=r,i}const jO=e=>zO(e)&&e.nodeType===1,zO=e=>e instanceof window.Node,VO=e=>!!(jO(e)&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA")),Wu=e=>e.button===PE.MAIN,UO=e=>e.button===PE.WHEEL;function P4(e,t,n,r){var i=document.createElementNS(w0,"foreignObject");return i.setAttribute("x",`${e}`),i.setAttribute("y",`${t}`),i.setAttribute("width",`${C4(n,0)}`),i.setAttribute("height",`${r}`),i}function pg(e,t,n,r,i){const o=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");o&&(o.setAttribute("width",`${C4(t,0)}`),o.setAttribute("height",`${n}`),o.setAttribute("x",`${r}`),o.setAttribute("y",`${i}`))}function XO(e,t){const n=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");n&&n.setAttribute("width",`${C4(t,0)}`)}const KO=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),YO=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,j3=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),qO=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),ZO=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),QO=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),JO=(e,t)=>e.type==="set_viewport"&&e.type===(t==null?void 0:t.type),eI=(e,t)=>!(e.type==="set_selection"||e.type==="set_viewport"),tI=e=>e.type!=="set_selection",gs={isSaving(e){return O5.get(e)},isMerging(e){return Or.get(e)},isSplittingOnce(e){return K2.get(e)},setSplittingOnce(e,t){K2.set(e,t)},withMerging(e,t){const n=gs.isMerging(e);Or.set(e,!0),t(),Or.set(e,n)},withNewBatch(e,t){const n=gs.isMerging(e);Or.set(e,!0),K2.set(e,!0),t(),Or.set(e,n),K2.delete(e)},withoutMerging(e,t){const n=gs.isMerging(e);Or.set(e,!1),t(),Or.set(e,n)},withoutSaving(e,t){const n=gs.isSaving(e);O5.set(e,!1),t(),O5.set(e,n)}},nI={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],arrow:["down","left","right","up"],extendArrow:["shift+down","shift+left","shift+right","shift+up"],moveBackward:"left",moveForward:"right",moveUp:"up",moveDown:"down",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendUp:"shift+up",extendDown:"shift+down",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",shift:"shift"},rI={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},iI={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Sn=e=>{const t=nI[e],n=rI[e],r=iI[e],i=t&&cn.isKeyHotkey(t),o=n&&cn.isKeyHotkey(n),s=r&&cn.isKeyHotkey(r);return a=>!!(i&&i(a)||j3&&o&&o(a)||!j3&&s&&s(a))},Di={isBold:Sn("bold"),isCompose:Sn("compose"),isArrow:Sn("arrow"),isMoveBackward:Sn("moveBackward"),isMoveForward:Sn("moveForward"),isMoveUp:Sn("moveUp"),isMoveDown:Sn("moveDown"),isDeleteBackward:Sn("deleteBackward"),isDeleteForward:Sn("deleteForward"),isDeleteLineBackward:Sn("deleteLineBackward"),isDeleteLineForward:Sn("deleteLineForward"),isDeleteWordBackward:Sn("deleteWordBackward"),isDeleteWordForward:Sn("deleteWordForward"),isExtendBackward:Sn("extendBackward"),isExtendForward:Sn("extendForward"),isExtendUp:Sn("extendUp"),isExtendDown:Sn("extendDown"),isExtendArrow:Sn("extendArrow"),isExtendLineBackward:Sn("extendLineBackward"),isExtendLineForward:Sn("extendLineForward"),isItalic:Sn("italic"),isMoveLineBackward:Sn("moveLineBackward"),isMoveLineForward:Sn("moveLineForward"),isMoveWordBackward:Sn("moveWordBackward"),isMoveWordForward:Sn("moveWordForward"),isRedo:Sn("redo"),isSplitBlock:Sn("splitBlock"),isTransposeCharacter:Sn("transposeCharacter"),isUndo:Sn("undo"),isShift:Sn("shift")};function yn(e=5){const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",n=t.length;let r="";for(let i=0;i<e;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}function di(e,t,n,r){if(e.children&&(!n||n(e))){let i=[...e.children];i=r?i.reverse():i,i.forEach(o=>{di(o,t,n)})}t(e)}const Xf=e=>t=>!!(I.isBoard(t)||e.isRecursion(t)),mo="#6698FF",S4="#6698FF25",u0={isCollapsed(e){return e.anchor[0]==e.focus[0]&&e.anchor[1]===e.focus[1]}},pn={isRootElement(e){const t=Bf.get(e);return!!(t&&I.isBoard(t))},getElementRef(e){return fg.get(e)},getElementG(e){const t=lg.get(e);if(!t)throw new Error(`can not resolve element g: ${JSON.stringify(e)}`);return t},hasMounted(e){return!!pn.getContainerG(e,{suppressThrow:!0})},getContainerG(e,t){const n=cg.get(e)||null;if(!n){if(t.suppressThrow)return null;throw new Error("can not resolve container g")}return n}},_m=(e,t,n=!0)=>[...t].sort((r,i)=>{const o=I.findPath(e,r),s=I.findPath(e,i);return n?o[0]-s[0]:s[0]-o[0]}),bE=new Map,rg=e=>bE.get(e)||[],ig=(e,t)=>{bE.set(e,t)};class oI{constructor(t){this.debugKey=t}isDebug(){return Vl(this.debugKey)}clear(){if(!this.isDebug())return;const t=rg(this.debugKey);ig(this.debugKey,[]),t.forEach(n=>n.remove())}drawPolygon(t,n,r){if(!Vl(this.debugKey))return;const i=I.getRoughSVG(t).polygon(n,r||{stroke:"red"});i.classList.add(this.debugKey),I.getElementTopHost(t).append(i);const o=rg(this.debugKey);return o.push(i),ig(this.debugKey,o),i}drawLine(t,n,r){if(!Vl(this.debugKey))return;const i=I.getRoughSVG(t).linearPath(n,r||{stroke:"red"});i.classList.add(this.debugKey),I.getElementTopHost(t).append(i);const o=rg(this.debugKey);return o.push(i),ig(this.debugKey,o),i}drawRectangle(t,n,r){if(!Vl(this.debugKey))return;let i;n instanceof Array?i=M.getRectangleByPoints(n):i=n;const o=I.getRoughSVG(t).rectangle(i.x,i.y,i.width,i.height,r||{stroke:"red"});o.classList.add(this.debugKey),I.getElementTopHost(t).append(o);const s=rg(this.debugKey);return s.push(o),ig(this.debugKey,s),o}drawCircles(t,n,r=0,i=!1,o){if(!Vl(this.debugKey))return;const s=[];return n.forEach((a,f)=>{const h=I.getRoughSVG(t).circle(a[0],a[1],i?r*(f+1):r,Object.assign({},{stroke:"red",fill:"red",fillStyle:"solid"},o||{}));h.classList.add(this.debugKey),I.getElementTopHost(t).append(h);const d=rg(this.debugKey);d.push(h),s.push(h),ig(this.debugKey,d)}),s}}const C0=e=>new oI(e),Vl=e=>localStorage.getItem(e||"debug:plait")==="true";var Nu;(function(e){e.withSelection="withSelection",e.withHand="withHand"})(Nu||(Nu={}));const OE=(e,t,n=()=>!0)=>{const r=t||e.selection,i=[];if(!r)return[];if(u0.isCollapsed(r)){const s=IE(e,r.anchor,n);return s!=null&&s.length?s:[]}return di(e,s=>{if(!I.isBoard(s)&&n(s)){let a=!1;try{a=e.isRectangleHit(s,r)}catch(f){Vl()&&console.error("isRectangleHit",f,"node",s)}a&&i.push(s)}},Xf(e),!0),i},IE=(e,t,n=()=>!0,r=!0)=>{let i=[];return di(e,o=>{if(I.isBoard(o)||!n(o)||!pn.hasMounted(o))return;let s=!1;try{s=e.isHit(o,t,r)}catch(a){Vl()&&console.error("isHit",a,"node",o)}if(s){i.push(o);return}},Xf(e),!0),i},qa=(e,t,n=()=>!0,r=!0)=>{const i=IE(e,t,n,r);return e.getOneHitElement(i)},sI=(e,t)=>{const n=Ye(e),r=n.length>0&&sn(e,n,!1);return r&&M.isPointInRectangle(r,t)?n:[]},Lu=(e,t)=>{const n=_m(e,t);DE.set(e,n)},Ye=e=>DE.get(e)||[],Kf=(e,t)=>{let n=[];Array.isArray(t)?n.push(...t):n.push(t);const r=Ye(e);Lu(e,[...r,...n])},Nm=(e,t,n=!1)=>{const r=Ye(e);if(r.includes(t)){const i=[];e.isRecursion(t)&&n?di(t,s=>{i.push(s)},s=>e.isRecursion(s)):i.push(t);const o=r.filter(s=>!i.includes(s));Lu(e,o)}},uI=(e,t,n)=>{const r=Ye(e);r.splice(r.indexOf(t),1,n)},x0=e=>{Lu(e,[])},o6=(e,t)=>!!Ye(e).find(r=>r===t),s6=e=>{const t=e.getPluginOptions(Nu.withSelection);e.setPluginOptions(Nu.withSelection,{isDisabledSelection:!0}),setTimeout(()=>{e.setPluginOptions(Nu.withSelection,{...t})},0)},aI=(e,t)=>sI(e,t).length>0,kE=(e,t)=>!!qa(e,t)||aI(e,t);function E0(e,t,n,r,i,o,s=!1,a){let f=a||0;const h=[t+f,n],d=[r-f,n],p=[r,n+f],v=[r,i-f],w=[r-f,i],E=[t+f,i],y=[t,i-f],S=[t,n+f],A=e.path(`M${d[0]} ${d[1]} A ${f} ${f}, 0, 0, 1, ${p[0]} ${p[1]} L ${v[0]} ${v[1]} A ${f} ${f}, 0, 0, 1, ${w[0]} ${w[1]} L ${E[0]} ${E[1]} A ${f} ${f}, 0, 0, 1, ${y[0]} ${y[1]} L ${S[0]} ${S[1]} A ${f} ${f}, 0, 0, 1, ${h[0]} ${h[1]} Z`,o);return Kt(A,"round"),A}const su=(e,t,n)=>{const i=I.getRoughSVG(e).rectangle(t.x,t.y,t.width,t.height,n);return Kt(i,"round"),i};function P0(e,t,n=40){const r=Math.abs(e[0]-t[0]),i=Math.abs(e[1]-t[1]);let o=Math.hypot(r,i);const s=o/2,a=s/o*r,f=s/o*i,h=[t[0]>e[0]?t[0]-a:t[0]+a,t[1]>e[1]?t[1]-f:t[1]+f],d=s0(h[0],h[1],t[0],t[1],n*Math.PI/180);return{pointLeft:s0(h[0],h[1],t[0],t[1],-n*Math.PI/180),pointRight:d}}function Yf(e,t,n,r){return e.circle(t[0],t[1],n,r)}function X2(e,t,n,r){return e.linearPath([t,n],r)}function Uo(e,t,n){const r=Gt(),i=E4();let o="";return e.forEach((s,a)=>{a===0?o+=`M ${s[0]} ${s[1]} `:o+=`L ${s[0]} ${s[1]} `}),n&&(o+="Z"),i.setAttribute("d",o),i.setAttribute("stroke",`${t==null?void 0:t.stroke}`),i.setAttribute("stroke-width",`${t==null?void 0:t.strokeWidth}`),i.setAttribute("fill",`${(t==null?void 0:t.fill)||"none"}`),t!=null&&t.strokeLineDash&&i.setAttribute("stroke-dasharray",`${t.strokeLineDash}`),r.appendChild(i),r}function lI(e,t){const n=Gt(),r=E4();let i="";for(let o=0;o<e.length-3;o+=3)o===0?i+=`M ${e[0][0]} ${e[0][1]} `:i+=`C ${e[o+1][0]} ${e[o+1][1]}, ${e[o+2][0]} ${e[o+2][1]}, ${e[o+3][0]} ${e[o+3][1]}`;return r.setAttribute("d",i),r.setAttribute("stroke",`${t==null?void 0:t.stroke}`),r.setAttribute("stroke-width",`${t==null?void 0:t.strokeWidth}`),r.setAttribute("fill","none"),n.appendChild(r),n}function D4(e,t){const n={type:"set_viewport",properties:e.viewport,newProperties:t};e.apply(n)}const cI={setViewport:D4};function fI(e,t){const n={type:"set_theme",properties:e.theme,newProperties:t};e.apply(n)}function Hm(e,t,n){n=n??e.viewport.zoom,D4(e,{...e.viewport,zoom:n,origination:t}),zE(e)}function hI(e,t,n){t=xI(t);const i=I.getBoardContainer(e).getBoundingClientRect(),o=I.getBoardContainer(e).getBoundingClientRect();let s=[o.width/2,o.height/2];n&&sp(n[0],n[1],i)===0&&(s=[n[0]-i.x,n[1]-i.y]);const a=e.viewport.zoom,f=S0(e),h=f[0]+s[0]/a,d=f[1]+s[1]/a,p=[h-s[0]/t,d-s[1]/t];Hm(e,p,t)}function dI(e){let t=x4(e);const n=I.getBoardContainer(e).getBoundingClientRect(),r=sn(e,e.children,!0),i=e.viewport.zoom,o=16,s=n.width-2*o,a=n.height-2*o;let f=i;s<r.width||a<r.height?f=Math.min(s/r.width,a/r.height):f=1;const h=GE(e),d=[h[0]-n.width/2/f+t/2/i,h[1]-n.height/2/f+t/2/i];Hm(e,d,f)}function gI(e,t){let n=x4(e);const r=I.getBoardContainer(e),i=r.getBoundingClientRect();let o=0;t.maxWidth?o=t.maxWidth:o=i.width;const s=sn(e,e.children,!0),a=o-2*t.autoFitPadding;let f=0;a<s.width?f=Math.min(a/s.width):f=1;let h=s.height*f+2*t.autoFitPadding;if(h>t.limitHeight){const w=r.closest(`.${t.containerClass}`);w.style.height=`${h}px`,A4(e)}else h=t.limitHeight;const d=s.x+s.width/2,p=s.y+s.height/2,v=[d-o/2/f+n/2/f,p-h/2/f+n/2/f];Hm(e,v,f)}function pI(e,t){t=t??e.theme.themeColorMode,fI(e,{themeColorMode:t}),di(e,n=>{e.applyTheme(n)})}const mI=(e,t)=>{e.pointer!==t&&(e.pointer=t)};function vI(e,t){var r;if((r=Ye(e))==null?void 0:r[0]){const i=I.getBoardContainer(e).getBoundingClientRect(),o=x4(e),s=GE(e),a=t[0]-s[0],f=t[1]-s[1],h=e.viewport.zoom,d=[a-i.width/2/h+o/2/h,f-i.height/2/h+o/2/h];D4(e,{...e.viewport,origination:d}),zE(e)}}const Ln={updatePointerType:mI,updateViewport:Hm,fitViewport:dI,updateZoom:hI,updateThemeColor:pI,fitViewportWidth:gI,moveToCenter:vI},T4=e=>I.getHost(e).viewBox.baseVal;function Ot(e,t,n){const i=I.getHost(e).getBoundingClientRect();return[t-i.x,n-i.y]}function Ti(e,t){const n=[t.x,t.y],r=[t.x+t.width,t.y+t.height],i=Og(e,n),o=Og(e,r);return M.getRectangleByPoints([i,o])}function Og(e,t){const n=u6(e,z3(e,t));return _f(e,n[0],n[1])}function _f(e,t,n){const i=I.getBoardContainer(e).getBoundingClientRect();return[t-i.x,n-i.y]}function yI(e,t){const r=I.getBoardContainer(e).getBoundingClientRect();return[r.x+t[0],r.y+t[1]]}function Bt(e,t){const n=T4(e),{zoom:r}=e.viewport,i=t[0]/r+n.x,o=t[1]/r+n.y;return[i,o]}function u6(e,t){const r=I.getHost(e).getBoundingClientRect();return[t[0]+r.x,t[1]+r.y]}function z3(e,t){const{zoom:n}=e.viewport,r=T4(e),i=(t[0]-r.x)*n,o=(t[1]-r.y)*n;return[i,o]}const FE=.75,LE=new WeakMap,_E=new WeakMap;function wI(e){const{hideScrollbar:t}=e.options,n=t?DO:0,r=I.getBoardContainer(e).getBoundingClientRect();return{width:r.width+n,height:r.height+n}}function CI(e,t){const n=sn(e,e.children,!0);let r,i,o,s;return r=n.x,i=n.x+n.width,o=n.y,s=n.y+n.height,{left:r,right:i,top:o,bottom:s}}function xI(e,t=CE,n=xE){return e<t?t:e>n?n:e}function NE(e,t){const n=I.getBoardContainer(e).getBoundingClientRect(),r=CI(e),i=n.width,o=n.height;let s=r.right-r.left,a=r.bottom-r.top;const f=i/2,h=o/2;if(s<f/t){const d=r.left+s/2;r.left=d-f/2/t,r.right=d+f/2/t,s=f/t}if(a<h/t){const d=r.top+a/2;r.top=d-h/2/t,r.bottom=d+h/2/t,a=h/t}return{elementHostBBox:r,containerWidth:i,containerHeight:o,width:s,height:a}}function a6(e,t,n,r,i,o,s=FE){const a=t*s/o,f=n*s/o;return[e.left-a,e.top-f,r+a*2,i+f*2]}function HE(e,t){const{elementHostBBox:n,containerWidth:r,containerHeight:i,width:o,height:s}=NE(e,t);return a6(n,r,i,o,s,t)}function GE(e){const t=sn(e,e.children,!0);return[t.x+t.width/2,t.y+t.height/2]}function $E(e,t){const n=e.viewport.zoom,r=I.getHost(e);r.style.display="block",r.style.width=`${t[2]*n}px`,r.style.height=`${t[3]*n}px`,t&&t[2]>0&&t[3]>0&&r.setAttribute("viewBox",t.join(" "))}function V3(e){const t=S0(e);if(!t)return;const[n,r]=z3(e,t);WE(e,n,r)}function WE(e,t,n,r=!0){const i=I.getViewportContainer(e),o=i.scrollLeft,s=i.scrollTop;if(!i6(i.scrollLeft,t,1)||!i6(i.scrollTop,n,1)){i.scrollLeft=t,i.scrollTop=n;const a=i.offsetWidth,f=i.offsetHeight;if(o===i.scrollLeft&&s===i.scrollTop)jE(e,o,s);else{const h=t>0&&n>0&&t<i.scrollWidth-a&&n<i.scrollHeight-f;r&&h&&UE(e,!0)}}}function jE(e,t,n){const r=Bt(e,[t,n]);dt.isEquals(r,S0(e))||(Ln.updateViewport(e,r),VE(e,!0))}function A4(e){const{width:t,height:n}=wI(e),r=I.getViewportContainer(e);r.style.width=`${t}px`,r.style.height=`${n}px`}function B4(e){const t=e.viewport.zoom,n=HE(e,t);$E(e,n)}function EI(e){const t=e.viewport.zoom,{elementHostBBox:n,containerWidth:r,containerHeight:i,width:o,height:s}=NE(e,t),a=a6(n,r,i,o,s,t,.5),f=T4(e);if(a[0]<f.x||a[1]<f.y||a[0]+a[2]>f.x+f.width||a[1]+a[3]>f.y+f.height){const h=a6(n,r,i,o,s,t,FE);$E(e,h)}}function PI(e){var t;if(!((t=e.viewport)!=null&&t.origination)){const n=e.viewport.zoom,r=I.getBoardContainer(e).getBoundingClientRect(),i=HE(e,n),o=i[0]+i[2]/2,s=i[1]+i[3]/2,a=[o-r.width/2/n,s-r.height/2/n];SI(e,a),V3(e);return}V3(e)}const SI=(e,t)=>{p4.set(e,t)},zE=e=>{p4.delete(e)},S0=e=>{const t=p4.get(e);return t||e.viewport.origination},DI=e=>!!LE.get(e),VE=(e,t)=>{LE.set(e,t)},TI=e=>!!_E.get(e),UE=(e,t)=>{_E.set(e,t)};function AI(e,t,n){const r={type:"insert_node",node:t,path:n};e.apply(r)}function BI(e,t,n){const r={},i={},o=Vt.get(e,n);for(const a in t)o[a]!==t[a]&&(o.hasOwnProperty(a)&&(r[a]=o[a]),t[a]!=null&&(i[a]=t[a]));const s={type:"set_node",properties:r,newProperties:i,path:n};e.apply(s)}function XE(e,t){const n=Vt.get(e,t),r={type:"remove_node",path:t,node:n};e.apply(r)}function RI(e,t,n){const r={type:"move_node",path:t,newPath:n};e.apply(r)}const Rf={insertNode:AI,setNode:BI,removeNode:XE,moveNode:RI},w3=new WeakMap,MI=(e,t)=>KE(e)[t]||null,KE=e=>w3.get(e)||{},ju=(e,t,n)=>{const r=()=>{let o=requestAnimationFrame(()=>{const a=w3.get(e)||{};a[t]=null,w3.set(e,a),I.isAlive(e)&&n()});const s=KE(e);s[t]=o,w3.set(e,s)};let i=MI(e,t);i!==null&&cancelAnimationFrame(i),r()},Gm=(e,t)=>(_m(e,t),t.map(n=>e.children.map(r=>r.id).indexOf(n.id)).filter(n=>n>=0)),bI=(e,t)=>{const n=Gm(e,t);return n[n.length-1]},ap=(e,t)=>{t.map(n=>{const r=I.findPath(e,n.element),i=e.pathRef(r);return()=>{i.current&&Rf.moveNode(e,i.current,n.newPath),i.unref()}}).forEach(n=>{n()})},YE=new WeakMap,a0=e=>!!YE.get(e),Za=(e,t)=>{YE.set(e,t)},OI=e=>km.get(e)||[],Nf=e=>(km.get(e)||[]).length>0,II=e=>{km.delete(e),Za(e,!1)},i9=(e,t)=>{km.set(e,t),Za(e,!0)},l6="foreignObject[class^='foreign-object']";function o9(e){return e.nodeType===Node.ELEMENT_NODE}function kI(e){return new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>t(r),r.onerror=()=>n(new Error("Failed to load image")),r.src=e})}function FI(e,t,n="transparent"){const r=document.createElement("canvas"),i=r.getContext("2d");return r.width=e,r.height=t,r.style.width=`${e}px`,r.style.height=`${t}px`,i.strokeStyle="#ffffff",i.fillStyle=n,i.fillRect(0,0,e,t),{canvas:r,ctx:i}}async function LI(e){const n=await(await fetch(e)).blob();return new Promise((r,i)=>{const o=new FileReader;o.onloadend=()=>r(o.result),o.onerror=i,o.readAsDataURL(n)})}function _I(e,t){const n=t==null?void 0:t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Array.from(r).forEach(i=>{let o=r.getPropertyValue(i);n.setProperty(i,o,r.getPropertyPriority(i))})}function NI(e,t,n){if(n){const r=n+`, ${l6}`,i=Array.from(e.querySelectorAll(r)),o=Array.from(t.querySelectorAll(r));i.forEach((s,a)=>{const f=Array.from(s.querySelectorAll("*")).filter(o9),h=Array.from(o[a].querySelectorAll("*")).filter(o9);i.push(...f),o.push(...h)}),i.map((s,a)=>{_I(s,o[a])})}}async function HI(e,t){const n=Array.from(e.querySelectorAll(`${l6}`)),r=Array.from(t.querySelectorAll(`${l6}`));await Promise.all(n.map((i,o)=>new Promise(s=>{const f=r[o].querySelector("img"),h=f==null?void 0:f.getAttribute("src");if(!h)return s(!0);LI(h).then(d=>{f==null||f.setAttribute("src",d),s(!0)})})))}async function GI(e,t,n,r){const{width:i,height:o,x:s,y:a}=n,{padding:f=4,inlineStyleClassNames:h}=r,d=I.getHost(e),p=t.map(y=>pn.getElementG(y)),v=d.cloneNode(),w=I.getElementHost(e).cloneNode();v.style.width=`${i}px`,v.style.height=`${o}px`,v.style.backgroundColor="",v.setAttribute("width",`${i}`),v.setAttribute("height",`${o}`),v.setAttribute("viewBox",[s-f,a-f,i+2*f,o+2*f].join(","));const E=new Array(p.length);return await Promise.all(p.map(async(y,S)=>{const A=y.cloneNode(!0);NI(y,A,h),await HI(y,A),E[S]=A})),w.append(...E),v.appendChild(w),v}async function $I(e,t){if(!e)return;const n=t.elements||D0(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),r=sn(e,n,!1),{ratio:i=2,fillStyle:o="transparent"}=t,{width:s,height:a}=r,f=s*i,h=a*i,d=await GI(e,n,r,t),{canvas:p,ctx:v}=FI(f,h,o),w=new XMLSerializer().serializeToString(d),E=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(w)}`;try{const y=await kI(E);return v.drawImage(y,0,0,f,h),p.toDataURL("image/png")}catch(y){console.error("Error converting SVG to image:",y);return}}var $a;(function(e){e.medias="medias",e.elements="elements"})($a||($a={}));var ru;(function(e){e.copy="copy",e.cut="cut",e.duplicate="duplicate",e.paste="paste"})(ru||(ru={}));const R4=(e,t)=>`<plait>${VI(JSON.stringify({type:e,data:t}))}</plait>`,M4=e=>{var n;let t=(n=e==null?void 0:e.match(/<plait[^>]*>(.*)<\/plait>/))==null?void 0:n[1];if(t){t=UI(t);try{const r=JSON.parse(t);if(r){if(r.type===$a.elements)return{elements:r.data};if(r.type===$a.medias)return{medias:r.data}}}catch(r){return console.error(r),null}}return null},s9=e=>{const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""},qE=()=>"clipboard"in navigator&&"write"in navigator.clipboard,WI=()=>"clipboard"in navigator&&"writeText"in navigator.clipboard,ZE=()=>"clipboard"in navigator&&"read"in navigator.clipboard,jI=(e,t,n)=>({type:e,elements:t,text:n}),zI=(e,t)=>{const{type:n,elements:r,text:i}=e;return n===t.type?{type:n,elements:r.concat(t.elements),text:i+" "+t.text}:e},$m=(e,t)=>e?zI(e,t):t,VI=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),UI=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),XI=(e,t,n)=>{e==null||e.setData("text/html",R4(t,n))},KI=(e,t)=>{e==null||e.setData("text/plain",t)},YI=e=>{const t=e==null?void 0:e.getData("text/html");if(t){const n=M4(t);if(n)return n}return{}},qI=e=>{if(!e)return{};const t=e==null?void 0:e.getData("text/plain");if(t){const n=M4(t);if(n)return n}return{text:t}},ZI=async(e,t,n="")=>{let r=n;qE()&&await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([R4(e,t)],{type:"text/html"}),"text/plain":new Blob([r??JSON.stringify(t)],{type:"text/plain"})})])},QI=async()=>{if(!ZE())return{};const e=await navigator.clipboard.read();let t={};if(Array.isArray(e)&&e[0]instanceof ClipboardItem)for(const n of e){if(JI(n)){const r=n.types.filter(a=>a.match(/^image\//)),o=(await Promise.all(r.map(a=>n.getType(a)))).filter(Boolean).map(a=>URL.createObjectURL(a));return{files:await Promise.all(o.map(async a=>{const f=await(await fetch(a)).blob();return new File([f],"plait-file",{type:f.type})}))}}if(n.types.includes("text/html")){const r=await u9(await n.getType("text/html")),i=M4(r);if(i)return i;r&&r.trim()&&(t={text:s9(r)})}if(n.types.includes("text/plain")){const r=await u9(await n.getType("text/plain"));t={text:s9(r)}}}return t},JI=e=>e.types.find(t=>t.match(/^image\//)),u9=e=>new Promise((t,n)=>{const r=new FileReader;r.addEventListener("loadend",()=>{const i=r.result;t(i)}),r.addEventListener("error",()=>{n(r.error)}),r.readAsText(e)}),ek=async e=>{let t={};return e?e.files.length?{files:Array.from(e.files)}:(t=YI(e),Object.keys(t).length===0&&(t=qI(e)),t):ZE()?await QI():t},tk=async(e,t)=>{if(!t)return;const{type:n,elements:r,text:i}=t;if(qE())return await ZI(n,r,i);if(e){XI(e,n,r),KI(e,i);return}if(WI())return await navigator.clipboard.writeText(R4(n,r))};function Wi(e){return!!m4.get(e)}function nk(e){I.getBoardContainer(e).classList.add("selection-moving"),m4.set(e,!0),Za(e,!0)}function rk(e){I.getBoardContainer(e).classList.remove("selection-moving"),m4.delete(e),Za(e,!1)}function a9(e){const t=C3(e);return e.pointer!==en.hand&&!t.isDisabledSelection&&!I.isReadonly(e)}function l9(e){return!!e.operations.find(t=>Wl.isSetSelectionOperation(t))}function ik(e){const t=Im.get(e);if(t)return t.elements}function ok(e){return Im.get(e)}function sk(e){Im.delete(e)}function uk(e){const t=Ye(e),n=sn(e,t,!1),r=Ti(e,n);if(r.width>0&&r.height>0&&t.length>1){const i=su(e,M.inflate(r,hr),{stroke:mo,strokeWidth:hr,fillStyle:"solid"});i.classList.add(op,xO);const o=ho(t);return o&&Cs(i,M.getCenterPoint(r),o),i}return null}function ak(e,t,n){if(!e.selection)return;const r=Ye(e);if(!u0.isCollapsed(e.selection)){let i=[...r];t.forEach(o=>{o.groupId?i.push(...O4(e,o)):i.push(o)}),Lu(e,v4(i));return}if(u0.isCollapsed(e.selection)){const i=t[0],o=lc(e,i,!0);if(o.length>0){const s=Ds(e,o[o.length-1],!0)||[],a=r.some(f=>s.map(h=>h.id).includes(f.id));n?lk(e,t,a,s):ck(e,t,a,o)}}}function lk(e,t,n,r){const i=Ye(e);let o=[...i];const s=t[0];let a=[];if(!n)a=r;else{const f=i.some(d=>d.id===s.id),h=r.filter(d=>i.includes(d));f?a=h.filter(d=>d.id!==s.id):a.push(...h,...t)}r.forEach(f=>{o.includes(f)&&o.splice(o.indexOf(f),1)}),a.length&&o.push(...a),Lu(e,v4(o))}function ck(e,t,n,r){let i=[...t];const o=QE(e,r);if(o.length>0)if(o.length>1)i=U3(e,o[o.length-2],!0);else{const s=e.getOneHitElement(t);s&&(i=[s])}else{const s=U3(e,r[r.length-1],!0);if(!n)i=s;else{const a=e.getOneHitElement(t);a&&(i=[a])}}Lu(e,v4(i))}const C3=e=>e.getPluginOptions(Nu.withSelection),c6=(e,t)=>{e.setPluginOptions(Nu.withSelection,t)},Ds=(e,t,n,r)=>{let i=[];const o=e.children.filter(s=>s.groupId===t.id);return n?o.forEach(s=>{vo.isGroup(s)?(r&&i.push(s),i.push(...Ds(e,s,n,r))):i.push(s)}):i=r?o:o.filter(s=>!vo.isGroup(s)),i},U3=(e,t,n,r)=>{const i=Ds(e,t,n,r),o=[];return i.forEach(s=>{di(s,a=>{o.push(a)},()=>!0)}),o},b4=(e,t,n)=>{const r=U3(e,t,n);return sn(e,r,!1)},lc=(e,t,n,r)=>{const i=(r||e.children).find(o=>o.id===(t==null?void 0:t.groupId));if(!i)return[];{const o=[i],s=lc(e,i,n,r);return s.length&&o.push(...s),o}},f6=(e,t)=>{const n=lc(e,t,!0);return n.length?n[n.length-1]:null},O4=(e,t)=>{const n=f6(e,t);return n?U3(e,n,!0):[t]},h6=(e,t,n)=>{const r=n!=null&&n.length?n:Ye(e);return vo.isGroup(t)?X3(e,t,n):r.map(i=>i.id).includes(t.id)},X3=(e,t,n)=>{const r=n!=null&&n.length?n:Ye(e);return Ds(e,t,!0).every(o=>r.map(s=>s.id).includes(o.id))},QE=(e,t,n)=>{const r=[];return t.forEach(i=>{h6(e,i,n)&&r.push(i)}),r},fk=(e,t,n)=>{const r=cc(e,t,n),i=[];return r.forEach(o=>{i.push(o);const s=Ds(e,o,!0,!0);i.push(...s.filter(a=>vo.isGroup(a)))}),i},JE=(e,t,n,r)=>{const i=lc(e,t,!0,r),o=QE(e,i,n);return o.length?o[o.length-1]:null},cc=(e,t,n)=>{let r=[];return(t!=null&&t.length?t:Ye(e)).forEach(o=>{if(o.groupId){const s=JE(e,o,t,n);s&&!r.includes(s)&&r.push(s)}}),r},I4=(e,t)=>{let n=[];return(t!=null&&t.length?t:Ye(e)).filter(i=>!vo.isGroup(i)).forEach(i=>{i.groupId&&JE(e,i,t)||n.push(i)}),n},k4=(e,t)=>I4(e,t).filter(r=>e.canAddToGroup(r)),hk=(e,t)=>[...cc(e,t),...I4(e,t)],dk=(e,t)=>{const n=Ye(e).map(o=>o.id);let r=null;const i=Wi(e);return t.forEach(o=>{const s=!n.includes(o.id)&&!i||i;if(o.groupId&&s){r||(r=Gt());const a=O4(e,o),f=sn(e,a,!1),h=su(e,f,{stroke:mo,strokeWidth:hr,strokeLineDash:[5]}),d=ho(a);d&&Cs(h,M.getCenterPoint(f),d),r.append(h)}}),r},gk=e=>({id:yn(),type:"group"}),pk=e=>e.every(t=>!t.groupId),eP=e=>e.every(t=>t.groupId&&t.groupId===e[0].groupId),mk=(e,t)=>{const r=hk(e,t).filter(i=>e.canAddToGroup(i));return r.length>1?pk(r)||eP(r):!1},vk=(e,t,n)=>{const r=cc(e,t,n);return Ye(e).length>0&&r.length>0},tP=(e,t)=>{const n=lc(e,t,!0);let r=null;if(n!=null&&n.length){for(let i=0;i<(n==null?void 0:n.length);i++)if(!X3(e,n[i])){r=n[i];break}}return r},yk=(e,t,n)=>{const r=[...t];_m(e,r),r.pop(),ap(e,r.map(i=>({element:i,newPath:n})))},F4=e=>{const t=e.getDeletedFragment([]);e.deleteFragment(t)},c9=(e,t,n)=>{const r=Ye(e),i=sn(e,r,!1),o=e.buildFragment(null,i,t);o&&tk(n,o)},L4=(e,t,n)=>{const r=t!=null&&t.length?t:Ye(e),i=sn(e,r,!1),o=e.buildFragment(null,i,ru.duplicate,r),s=o&&JSON.stringify(o),a=s&&JSON.parse(s);a&&e.insertFragment({...a,text:void 0},n||[i.x+i.width/2,i.y+i.height/2],ru.duplicate)},Na=2,wk=24;function nP(e,t){return D0(e,{match:r=>e.isAlign(r)&&!t.some(i=>i.id===r.id),recursion:()=>!0,isReverse:!1}).map(r=>{const i=e.getRectangle(r);return lp(i,r.angle||0)})}function Ck(e,t){return t?[[e[0],e[1]-4],[e[0],e[1]+4]]:[[e[0]-4,e[1]],[e[0]+4,e[1]]]}function mg(e,t,n){let r=Na;return e.forEach(i=>{const o=xk(t,i,n);Math.abs(o)<Math.abs(r)&&(r=o)}),r}const xk=(e,t,n)=>{const i=Hf(t,n).map(a=>a-e),o=i.map(a=>Math.abs(a)),s=o.indexOf(Math.min(...o));return i[s]},Hf=(e,t)=>{const n=t?"x":"y",r=t?"width":"height";return[e[n],e[n]+e[r]/2,e[n]+e[r]]};function Md(e,t){let n=1/0,r=e[0];return e.forEach(i=>{const o=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2));o<n&&(n=o,r=i)}),r}const bd=(e,t,n)=>Hf(t,n).includes(e);function rP(e,t,n,r=!0,i=!0,o=!1){let s=[];const a=Hf(t,!0),f=Hf(t,!1),h=[{axis:a[0],isHorizontal:!0,pointRectangles:[]},{axis:a[1],isHorizontal:!0,pointRectangles:[]},{axis:a[2],isHorizontal:!0,pointRectangles:[]},{axis:f[0],isHorizontal:!1,pointRectangles:[]},{axis:f[1],isHorizontal:!1,pointRectangles:[]},{axis:f[2],isHorizontal:!1,pointRectangles:[]}];for(let p=0;p<n.length;p++){const v=n[p];bd(h[0].axis,v,h[0].isHorizontal)&&h[0].pointRectangles.push(v),bd(h[1].axis,v,h[1].isHorizontal)&&h[1].pointRectangles.push(v),bd(h[2].axis,v,h[2].isHorizontal)&&h[2].pointRectangles.push(v),bd(h[3].axis,v,h[3].isHorizontal)&&h[3].pointRectangles.push(v),bd(h[4].axis,v,h[4].isHorizontal)&&h[4].pointRectangles.push(v),bd(h[5].axis,v,h[5].isHorizontal)&&h[5].pointRectangles.push(v)}const d=(p,v,w)=>{const E=M.inflate(M.getBoundingRectangle([t,v]),wk);if(w){const y=[p,E.y],S=[p,E.y+E.height];s.push([y,S])}else{const y=[E.x,p],S=[E.x+E.width,p];s.push([y,S])}};if(r&&h[0].pointRectangles.length){const p=h[0].pointRectangles.length===1?h[0].pointRectangles[0]:Md(h[0].pointRectangles,t);d(h[0].axis,p,h[0].isHorizontal)}if(r&&o&&h[1].pointRectangles.length){const p=h[1].pointRectangles.length===1?h[1].pointRectangles[0]:Md(h[1].pointRectangles,t);d(h[1].axis,p,h[1].isHorizontal)}if(r&&h[2].pointRectangles.length){const p=h[2].pointRectangles.length===1?h[2].pointRectangles[0]:Md(h[2].pointRectangles,t);d(h[2].axis,p,h[2].isHorizontal)}if(i&&h[3].pointRectangles.length){const p=h[3].pointRectangles.length===1?h[3].pointRectangles[0]:Md(h[3].pointRectangles,t);d(h[3].axis,p,h[3].isHorizontal)}if(i&&o&&h[4].pointRectangles.length){const p=h[4].pointRectangles.length===1?h[4].pointRectangles[0]:Md(h[4].pointRectangles,t);d(h[4].axis,p,h[4].isHorizontal)}if(i&&h[5].pointRectangles.length){const p=h[5].pointRectangles.length===1?h[5].pointRectangles[0]:Md(h[5].pointRectangles,t);d(h[5].axis,p,h[5].isHorizontal)}return Ek(e,s)}function Ek(e,t){const n=Gt();return t.forEach(r=>{if(!r.length)return;const i=I.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:mo,strokeWidth:1,strokeLineDash:[4,4]});n.appendChild(i)}),n}function iP(e,t){const n=Gt();return t.forEach(r=>{if(!r.length)return;let i=r[0][1]===r[1][1];const o=I.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:mo,strokeWidth:1});n.appendChild(o),r.forEach(s=>{const a=Ck(s,i),f=I.getRoughSVG(e).line(a[0][0],a[0][1],a[1][0],a[1][1],{stroke:mo,strokeWidth:1});n.appendChild(f)})}),n}const oP=(e,t)=>{const n=Gm(e,Ye(e));let r=uP(e,n);t==="up"&&(r=r.reverse());let i=[];return r.forEach((o,s)=>{const a=o[0],f=o[o.length-1],h=t==="down"?a:f,d=Pk(e,h,t);d===-1||h===d||(t==="down"&&(o=o.reverse()),i.push(...o.map(p=>({element:e.children[p],newPath:[d]}))))}),i},sP=(e,t)=>{const n=Gm(e,Ye(e));let r=uP(e,n),i=[];return t==="down"&&(r=r.reverse()),r.forEach(o=>{const s=o[0],a=o[o.length-1],f=t==="down"?s:a,h=e.children[f],d=tP(e,h);let p=t==="down"?0:e.children.length-1;if(d){const v=_m(e,Ds(e,d,!0,!0));p=t==="down"?e.children.indexOf(v[0]):e.children.indexOf(v[v.length-1])}t==="down"&&(o=o.reverse()),i.push(...o.map(v=>({element:e.children[v],newPath:[p]})))}),i},uP=(e,t)=>{let n=0;return t.reduce((r,i,o)=>{if(o>0){const s=e.children[i],a=e.children[t[o-1]],f=i-1===t[o-1]?!0:e.children.every((d,p)=>p>t[o-1]&&p<=i-1?vo.isGroup(d):!0);let h=!1;if(a!=null&&a.groupId||s!=null&&s.groupId&&(a==null?void 0:a.groupId)!==(s==null?void 0:s.groupId)){let d=!1,p=!1;if(a.groupId){const v=f6(e,a);d=!X3(e,v)}if(s.groupId){const v=f6(e,s);p=!X3(e,v)}h=d||p}(!f||h)&&(n=++n)}return(r[n]||(r[n]=[])).push(i),r},[])},Pk=(e,t,n)=>{if(t===0&&n==="down"||t===e.children.length-1&&n==="up")return-1;const r=p=>!(p.isDeleted||vo.isGroup(p)),i=n==="down"?RO(e.children,p=>r(p),Math.max(0,t-1)):MO(e.children,p=>r(p),t+1),o=e.children[i];if(!o)return-1;const s=[...e.children],a=s[t],f=tP(e,a),h=lc(e,o,!0)||[];if(f&&(a==null?void 0:a.groupId)!==(o==null?void 0:o.groupId)&&!h.find(p=>p.id===f.id))return-1;if(!o.groupId)return i;let d;if(f?d=h[h.indexOf(f)-1]:d=h[h.length-1],d){let p=Ds(e,d,!0,!1);if(p.length)return p.sort((v,w)=>{const E=e.children.findIndex(S=>S.id===v.id),y=e.children.findIndex(S=>S.id===w.id);return E-y}),n==="down"?s.indexOf(p[0]):s.indexOf(p[p.length-1])}return i},aP=e=>d6(e)||Sk(e),d6=e=>e.pointerType==="pen",Sk=e=>e.pointerType==="touch",Dk=(e,t)=>{const n=cc(e,t),r=k4(e),i=[...n,...r],o=gk();if(mk(e)){i.forEach(d=>{const p=I.findPath(e,d);Rf.setNode(e,{groupId:o.id},p)});const s=Ye(e),a=bI(e,s),f=Gm(e,i);if(bO(f)||yk(e,s,[a-1]),eP(i)){const d=r[0].groupId;Rf.insertNode(e,{...o,groupId:d},[e.children.length])}else Rf.insertNode(e,o,[e.children.length])}},Tk=(e,t)=>{const n=cc(e,t);vk(e)&&(n.forEach(r=>{D0(e,{match:o=>o.groupId===r.id,recursion:()=>!1}).forEach(o=>{const s=I.findPath(e,o);Rf.setNode(e,{groupId:r.groupId||void 0},s)})}),n.map(r=>{const i=I.findPath(e,r),o=e.pathRef(i);return()=>{o.current&&Rf.removeNode(e,o.current),o.unref()}}).forEach(r=>{r()}))},Ak={addGroup:Dk,removeGroup:Tk};function lP(e,t){const n={type:"set_selection",properties:e.selection,newProperties:t};e.apply(n)}const Bk={setSelection:lP,addSelectionWithTemporaryElements:cP};function cP(e,t){const n=setTimeout(()=>{lP(e,{anchor:[0,0],focus:[0,0]})},0);let r=ok(e);if(r){clearTimeout(r.timeoutId);const i=r.elements;r.elements.push(...t.filter(o=>!i.includes(o))),r.timeoutId=n}else Im.set(e,{timeoutId:n,elements:t})}const Rk=e=>{const t=sP(e,"up");ap(e,t)},Mk=e=>{const t=sP(e,"down");ap(e,t)},bk=e=>{const t=oP(e,"up");ap(e,t)},Ok=e=>{const t=oP(e,"down");ap(e,t)},Ik={moveUp:bk,moveDown:Ok,moveToTop:Rk,moveToBottom:Mk},kk=(e,t)=>{t.map(n=>{const r=I.findPath(e,n),i=e.pathRef(r);return()=>{i.current&&XE(e,i.current),i.unref(),Nm(e,n,!0)}}).forEach(n=>{n()})},fP={removeElements:kk},Ve={...kO,...cI,...Bk,...Rf,...Ak,...Ik},Ir=(e,t,n)=>(n||(n=0),Array.isArray(e)&&typeof e[0]=="number"?s0(e[0],e[1],t[0],t[1],n):e.map(r=>s0(r[0],r[1],t[0],t[1],n||0))),ho=e=>{var n;let t=((n=e[0])==null?void 0:n.angle)||0;return e.forEach(r=>{r.angle!==t&&!i6((r.angle||0)%(Math.PI/2)-t%(Math.PI/2),0)&&(t=0)}),t},Fk=e=>{if(!e.length)return!1;const t=e[0].angle;return t===void 0?!1:!e.some(n=>n.angle!==t)},Lk=(e,t)=>{let n=[];for(let a=0;a<e.length;a++){const f=e[a],h=Ir(f,[0,0],-t);n.push(M.getRectangleByPoints(h))}const r=M.getBoundingRectangle(n),i=M.getCornerPoints(r),o=Ir(i,[0,0],t),s=M.getCenterPoint(M.getRectangleByPoints(o));return M.getRectangleByPoints(Ir(o,s,-t))},_k=(e,t,n)=>{const r=M.getCenterPoint(e),[i]=Ir([r],t,n),o=i[0]-r[0],s=i[1]-r[1];return{offsetX:o,offsetY:s}},g6=(e,t,n)=>{const{offsetX:r,offsetY:i}=_k(M.getRectangleByPoints(e),t,n);return e.map(o=>[o[0]+r,o[1]+i])},zu=e=>hP(e.angle),hP=e=>e&&e!==0,ec=(e,t)=>{if(zu(t)){let n=M.getRectangleByPoints(t.points);const r=M.getCenterPoint(n);return Ir(e,r,t.angle)}else return null},Nk=(e,t)=>{if(hP(t)){let n=M.getRectangleByPoints(e);const r=M.getCenterPoint(n);return Ir(e,r,t)}else return null},tc=(e,t,n,r=!1)=>{if(zu(n)){let i=M.getRectangleByPoints(n.points);const o=r?Ti(e,i):i,s=M.getCenterPoint(o);return Ir(t,s,n.angle?-n.angle:0)}else return null},lp=(e,t)=>{if(t){const n=M.getCornerPoints(e),r=M.getCenterPoint(e);return M.getRectangleByPoints(Ir(n,r,t))}return e},Hk=e=>{const t=Math.abs(e)%Math.PI;return t>=1/4*Math.PI&&t<=3/4*Math.PI};function p6(e){return e/180*Math.PI}function Gk(e,t,n){const r=sn(e,t,!1),i=M.getCenterPoint(r);t.forEach(o=>{const s=o.angle,a=g6(o.points,i,Ig(n)),f=I.findPath(e,o);Ve.setNode(e,{points:a,angle:Ig((s||0)+n)},f)})}const Ig=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,$k=(e,t,n)=>{const r=5*Math.PI/2+Math.atan2(e[1]-n[1],e[0]-n[0]),i=5*Math.PI/2+Math.atan2(t[1]-n[1],t[0]-n[0]);return Ig(i-r)},Wk=e=>e==null?void 0:e.angle,Cs=(e,t,n)=>{if(n===0){e.removeAttribute("transform");return}var r=t[0],i=t[1];let o=Math.cos(n),s=Math.sin(n),f="matrix("+[o,s,-s,o,r*(1-o)+i*s,i*(1-o)-r*s].join(",")+")";e.setAttribute("transform",`${f}`)};function sn(e,t,n){const r=[],i=o=>{const s=e.getRectangle(o);if(s){const a=M.getCornerPoints(s),f=ec(a,o)||a;r.push(f)}else console.error("can not get rectangle of element:",o)};if(t.forEach(o=>{n?di(o,s=>i(s),s=>e.isRecursion(s)):i(o)}),r.length>0)if(Fk(t)){const o=ho(t);return Lk(r,o)}else{const o=r.reduce((s,a)=>s.concat(a),[]);return M.getRectangleByPoints(o)}else return{x:0,y:0,width:0,height:0}}function ys(e,t,n){const r=!n&&x3(e).get(t);return r||(n||(n=D0(e,{match:o=>!0,recursion:o=>!0})),n.find(o=>o.id===t))}function x3(e){const t=Zv.get(e);if(!t)throw new Error("can not resolve element map");return t}function D0(e,t){let n=[];const r=t.isReverse??!0;return di(e,i=>{!I.isBoard(i)&&t.match(i)&&n.push(i)},i=>I.isBoard(i)?!0:Xf(e)(i)&&t.recursion(i),r),n}var cr;(function(e){e.default="default",e.colorful="colorful",e.soft="soft",e.retro="retro",e.dark="dark",e.starry="starry"})(cr||(cr={}));const qr="#333333",dP={mode:cr.default,boardBackground:"#ffffff",textColor:qr},gP={mode:cr.colorful,boardBackground:"#ffffff",textColor:qr},pP={mode:cr.soft,boardBackground:"#f5f5f5",textColor:qr},mP={mode:cr.retro,boardBackground:"#f9f8ed",textColor:qr},vP={mode:cr.dark,boardBackground:"#141414",textColor:"#FFFFFF"},yP={mode:cr.starry,boardBackground:"#0d2537",textColor:"#FFFFFF"},jk=[dP,gP,pP,mP,vP,yP],I={isBoard(e){const t=e9.get(e);if(t!==void 0)return t;const n=typeof e.onChange=="function"&&typeof e.apply=="function";return e9.set(e,n),n},isAlive(e){return!!n6.get(e)},findPath(e,t){const n=[];let r=t;for(;;){const i=Bf.get(r);if(i==null){if(I.isBoard(r))return n;break}const o=qd.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error(`Unable to find the path for Plait node: ${JSON.stringify(t)}`)},getHost(e){return e6.get(e)},getElementLowerHost(e){var t;return(t=ba.get(e))==null?void 0:t.lowerHost},getElementHost(e){var t;return(t=ba.get(e))==null?void 0:t.host},getElementUpperHost(e){var t;return(t=ba.get(e))==null?void 0:t.upperHost},getElementTopHost(e){var t;return(t=ba.get(e))==null?void 0:t.topHost},getActiveHost(e){var t;return(t=ba.get(e))==null?void 0:t.activeHost},getRoughSVG(e){return Jv.get(e)},getBoardContainer(e){var t;return(t=ba.get(e))==null?void 0:t.container},getBoardContext(e){return t6.get(e)},getRectangle(e){return sn(e,e.children,!0)},getViewportContainer(e){var t;return(t=ba.get(e))==null?void 0:t.viewportContainer},isFocus(e){return!!e.selection},isReadonly(e){return e.options.readonly},hasBeenTextEditing(e){return!!Qv.get(e)},getPointer(e){return e.pointer},isPointer(e,t){return e.pointer===t},isInPointer(e,t){const n=e.pointer;return t.includes(n)},getMovingPointInBoard(e){return r6.get(e)},isMovingPointInBoard(e){const t=TE.get(e),n=I.getBoardContainer(e).getBoundingClientRect();return!!(t&&sp(t[0],t[1],n)===0)},getThemeColors(e){return e.options.themeColors||jk}};var en;(function(e){e.hand="hand",e.selection="selection"})(en||(en={}));const zk=e=>e.type==="set_viewport",Vk=e=>e.type==="set_selection",Uk=e=>e.type==="set_theme",Xk=e=>{switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"remove_node":return{...e,type:"insert_node"};case"move_node":{const{newPath:t,path:n}=e;if(pt.equals(t,n))return e;const r=pt.transform(n,e),i=pt.transform(pt.next(n),e);return{...e,path:r,newPath:i}}case"set_node":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}case"set_selection":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:null}:n==null?{...e,properties:null,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_viewport":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:n}:n==null?{...e,properties:t,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_theme":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}}},Wl={isSetViewportOperation:zk,isSetSelectionOperation:Vk,isSetThemeOperation:Uk,inverse:Xk},dt={isEquals(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]},isHorizontal(e,t,n=0){return e&&t&&dt.isOverHorizontal([e,t],n)},isOverHorizontal(e,t=0){return e.every(n=>Math.abs(n[1]-e[0][1])<=t)},isVertical(e,t,n=0){return e&&t&&dt.isOverVertical([e,t],n)},isOverVertical(e,t=0){return e.every(n=>Math.abs(n[0]-e[0][0])<=t)},isAlign(e,t=0){return dt.isOverHorizontal(e,t)||dt.isOverVertical(e,t)},getOffsetX(e,t){return t[0]-e[0]},getOffsetY(e,t){return t[1]-e[1]}},O5=new WeakMap,Or=new WeakMap,K2=new WeakMap;var rn;(function(e){e.left="left",e.top="top",e.right="right",e.bottom="bottom"})(rn||(rn={}));const vo={isGroup:e=>e.type==="group"};/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function Kk(e){return Yk(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function Yk(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function qk(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const Zk=(e,t)=>t;class Qk{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Zk}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<h9(r,i,o)?n:r,a=h9(s,i,o),f=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);const h=a-i,d=f-i;if(h!=d){for(let v=0;v<h;v++){const w=v<o.length?o[v]:o[v]=0,E=w+v;d<=E&&E<h&&(o[v]=w+1)}const p=s.previousIndex;o[p]=d-h}}a!==f&&t(s,a,f)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Kk(t))throw new Error("Exception: Error trying to diff. Only arrays and iterables are allowed");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,qk(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new Jk(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new f9),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new f9),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}}class Jk{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eF{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}}class f9{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new eF,this.map.set(n,r)),r.add(t)}get(t,n){const r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}}function h9(e,t,n){const r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class wP{constructor(t){this.board=t,this.children=[],this.instances=[],this.contexts=[],this.differ=null,this.initialized=!1}initialize(t,n){this.initialized=!0,this.children=t,t.forEach((r,i)=>{qd.set(r,i),Bf.set(r,n.parent);const o=I5(this.board,r,i,n.parent),s=g9(this.board,o),a=d9(this.board,s,o,n);this.instances.push(a),this.contexts.push(o)}),this.differ=new Qk(tF),this.differ.diff(t)}update(t,n){if(!this.initialized){this.initialize(t,n);return}if(!this.differ)throw new Error("Exception: Can not find differ ");const{board:r,parent:i}=n,o=this.differ.diff(t);if(o){const s=[],a=[];let f=null;o.forEachItem(h=>{var v;qd.set(h.item,h.currentIndex),Bf.set(h.item,n.parent);const d=h.previousIndex===null?void 0:this.contexts[h.previousIndex],p=I5(r,h.item,h.currentIndex,i,d);if(h.previousIndex===null){const w=g9(r,p),E=d9(r,w,p,n);s.push(p),a.push(E)}else{const w=this.instances[h.previousIndex];w.context=p,a.push(w),s.push(p)}(h.item===this.children[0]||h.item.id===((v=this.children[0])==null?void 0:v.id))&&(f=h.currentIndex)}),o.forEachOperation(h=>{if(h.currentIndex===null){const d=this.instances[h.previousIndex];d==null||d.destroy()}h.previousIndex!==null&&h.currentIndex!==null&&xP(h.item,h.currentIndex,n,f)}),this.instances=a,this.contexts=s,this.children=t}else{const s=[];this.children.forEach((a,f)=>{qd.set(a,f),Bf.set(a,n.parent);const h=this.contexts[f],d=this.instances[f],p=I5(r,a,f,i,h);d.context=p,s.push(p)}),this.contexts=s}}destroy(){this.children.forEach((t,n)=>{this.instances[n]&&this.instances[n].destroy()}),this.instances=[],this.children=[],this.contexts=[],this.initialized=!1,this.differ=null}}const tF=(e,t)=>t.id,d9=(e,t,n,r)=>{const i=new t;i.context=n,e.normalizeElement(n);try{i.initialize()}catch(s){Vl()&&console.error("list-render-initialize",s,"context",n)}const o=i.getContainerG();return CP(n.index,o,r),i.initializeListRender(),i},g9=(e,t)=>e.drawElement(t),I5=(e,t,n,r,i)=>{var f;let o=o6(e,t);const s=i&&i.element;return s&&s!==t&&o6(e,s)&&(o=!0,uI(e,s,t)),{element:t,parent:r,board:e,selected:o,index:n,hasThemeChanged:!!((f=e.operations)!=null&&f.find(h=>h.type==="set_theme"))}},CP=(e,t,n,r=null)=>{const{parent:i,parentG:o}=n;if(I.isBoard(i))if(e>0){const s=i.children[e-1];pn.getContainerG(s,{suppressThrow:!1}).insertAdjacentElement("afterend",t)}else if(r!==null){const s=i.children[r],a=s&&pn.getContainerG(s,{suppressThrow:!0});if(s&&a)o.insertBefore(t,a);else throw new Error("fail to mount container on moving")}else o.append(t);else if(e>0){const s=i.children[e-1];pn.getElementG(s).insertAdjacentElement("afterend",t)}else if(r){const s=i.children[r],a=s&&I.findPath(n.board,s),f=a&&Vt.first(n.board,a),h=f&&pn.getContainerG(f,{suppressThrow:!1});if(h)o.insertBefore(t,h);else throw new Error("fail to mount container on moving")}else{let s=pn.getElementG(i);o.insertBefore(t,s)}},xP=(e,t,n,r)=>{const i=pn.getContainerG(e,{suppressThrow:!1});CP(t,i,n,r),e.children&&!pn.isRootElement(e)&&n.board.isExpanded(e)&&e.children.forEach((o,s)=>{xP(o,s,{...n,parent:e},null)})};class nF{get hasChildren(){return!!this.element.children}set context(t){TO(this)&&this.beforeContextChange(t);const n=this._context;if(this._context=t,this.initialized){const r=this.getElementG(),i=this.getContainerG();lg.set(this.element,r),cg.set(this.element,i),x3(this.board).set(this.element.id,this.element),fg.set(this.element,this.ref),this.updateListRender(),AO(this)&&this.onContextChanged(t,n)}else pn.isRootElement(this.element)&&this.hasChildren?(this._g=Gt(),this._containerG=Gt(),this._containerG.append(this._g)):(this._g=Gt(),this._containerG=this._g),lg.set(this.element,this._g),cg.set(this.element,this._containerG),fg.set(this.element,this.ref),x3(this.board).set(this.element.id,this.element)}get context(){return this._context}get element(){return this.context&&this.context.element}get board(){return this.context&&this.context.board}get selected(){return this.context&&this.context.selected}getContainerG(){return this._containerG}getElementG(){return this._g}constructor(t){this.ref=t,this.initialized=!1}initialize(){if(this.element.type&&this.getContainerG().setAttribute(`plait-${this.element.type}`,"true"),this.hasChildren)if(pn.isRootElement(this.element))this._rootContainerG=this._containerG;else{const t=I.findPath(this.board,this.element),n=Vt.get(this.board,t.slice(0,1));this._rootContainerG=pn.getContainerG(n,{suppressThrow:!1})}this.getContainerG().setAttribute("plait-data-id",this.element.id),this.initialized=!0}initializeListRender(){this.hasChildren&&(this.listRender=new wP(this.board),this.board.isExpanded(this.element)&&this.listRender.initialize(this.element.children,this.initializeChildrenContext()))}getRef(){return this.ref}updateListRender(){if(this.hasChildren){if(!this.listRender)throw new Error("incorrectly initialize list render");this.board.isExpanded(this.element)?this.listRender.update(this.element.children,this.initializeChildrenContext()):this.listRender.initialized&&this.listRender.destroy()}}initializeChildrenContext(){if(!this._rootContainerG)throw new Error("can not resolve root container g");return{board:this.board,parent:this.element,parentG:this._rootContainerG}}destroy(){var t;lg.get(this.element)===this._g&&lg.delete(this.element),x3(this.board).delete(this.element.id),cg.get(this.element)===this._containerG&&cg.delete(this.element),fg.get(this.element)===this.ref&&fg.set(this.element,this.ref),Nm(this.board,this.element),this.getContainerG().remove(),(t=this.listRender)==null||t.destroy()}}class rF{constructor(){this._stable=new pE,this.uploadingFiles=[]}getUploadingFile(t){return this.uploadingFiles.find(n=>n.url===t)}setUploadingFile(t){return this.uploadingFiles.push(t)}removeUploadingFile(t){this.uploadingFiles=this.uploadingFiles.filter(n=>n.url!==t.url)}onStable(){return this._stable.asObservable()}nextStable(){this._stable.next("")}}const iF={transform(e,t){const{current:n}=e;if(n==null)return;const r=pt.transform(n,t);e.current=r,r==null&&e.unref()}};function oF(e,t){const n={viewport:{zoom:1},children:e,theme:{themeColorMode:cr.default},operations:[],history:{redos:[],undos:[]},selection:null,options:t||{readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1},pointer:t!=null&&t.readonly?en.hand:en.selection,undo:()=>{},redo:()=>{},apply:r=>{for(const i of n.pathRefs())iF.transform(i,r);n.operations.push(r),Ve.transform(n,r),y3.get(n)||(y3.set(n,!0),Promise.resolve().then(()=>{y3.set(n,!1),n.onChange(),n.afterChange(),n.operations=[]}))},pathRef:(r,i)=>{const o=(i==null?void 0:i.affinity)||"forward",s={current:r,affinity:o,unref(){const{current:f}=s;return n.pathRefs().delete(s),s.current=null,f}};return n.pathRefs().add(s),s},pathRefs:()=>{let r=t9.get(n);return r||(r=new Set,t9.set(n,r)),r},onChange:()=>{},afterChange:()=>{},drawSelectionRectangle:()=>uk(n),mousedown:r=>{},mousemove:r=>{},mouseleave:r=>{},globalMousemove:r=>{},mouseup:r=>{},globalMouseup:r=>{},keyDown:r=>{},globalKeyDown:r=>{},keyUp:r=>{},dblClick:r=>{},buildFragment:(r,i,o,s)=>r,insertFragment:(r,i,o)=>{},deleteFragment:r=>{fP.removeElements(n,r)},getDeletedFragment:r=>r,getRelatedFragment:(r,i)=>r,normalizeElement:r=>{},drawElement:r=>{throw new Error(`can not resolve plugin element component type: ${r.element.type}`)},isWithinSelection:r=>!1,isRectangleHit:r=>!1,isHit:r=>!1,isInsidePoint:r=>!1,getOneHitElement:r=>r[0],isRecursion:r=>!0,isMovable:r=>!1,getRectangle:r=>null,applyTheme:r=>{},isAlign:r=>!1,pointerDown:r=>{},pointerMove:r=>{},pointerUp:r=>{},pointerCancel:r=>{},pointerOut:r=>{},pointerLeave:r=>{},globalPointerMove:r=>{},globalPointerUp:r=>{},drop:r=>!1,isImageBindingAllowed:r=>!1,canAddToGroup:r=>!0,canSetZIndex:r=>!0,isExpanded:r=>!0};return n}function sF(e){const{onChange:t,afterChange:n}=e;return e.onChange=()=>{const r=G3.get(e);r&&r(),t()},e.afterChange=()=>{const r=$3.get(e);r&&r(),n()},e}const p9=(e,t)=>I.isPointer(e,en.selection)&&aP(t),m9="Space";function uF(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,keyDown:i,keyUp:o,pointerUp:s}=e;let a=!1,f=null,h=null,d=!1,p=!1;return e.pointerDown=v=>{const w=e.getPluginOptions(Nu.withHand),E=Bt(e,Ot(e,v.x,v.y)),y=kE(e,E);((w==null?void 0:w.isHandMode(e,v))||I.isPointer(e,en.hand)||p9(e,v)&&!y||p)&&Wu(v)?(f={x:v.x,y:v.y},I.isPointer(e,en.hand)||I.getBoardContainer(e).classList.add("viewport-moving")):UO(v)&&(d=!0,v.preventDefault(),f={x:v.x,y:v.y},a=!0,I.getBoardContainer(e).classList.add("viewport-moving")),h=v,t(v)},e.pointerMove=v=>{const w=e.getPluginOptions(Nu.withHand),E=SE+4;if(f&&!a&&!Wi(e)&&h&&Et(h.x,h.y,v.x,v.y)>E&&!Nf(e)&&(a=!0,I.getBoardContainer(e).classList.add("viewport-moving")),((w==null?void 0:w.isHandMode(e,v))||I.isPointer(e,en.hand)||p9(e,v)||d||p)&&a&&f&&!Wi(e)&&!Nf(e)){const S=I.getViewportContainer(e),A=S.scrollLeft-(v.x-f.x),B=S.scrollTop-(v.y-f.y);WE(e,A,B,!1),f.x=v.x,f.y=v.y}n(v)},e.pointerUp=v=>{a||s(v)},e.globalPointerUp=v=>{f&&(f=null),a=!1,I.getBoardContainer(e).classList.remove("viewport-moving"),d=!1,r(v)},e.keyDown=v=>{v.code===m9&&(!e.options.readonly&&!I.isPointer(e,en.hand)&&(p=!0,c6(e,{isDisabledSelection:!0}),I.getBoardContainer(e).classList.add("viewport-moving")),v.preventDefault()),i(v)},e.keyUp=v=>{!e.options.readonly&&v.code===m9&&(p=!1,c6(e,{isDisabledSelection:!1}),I.getBoardContainer(e).classList.remove("viewport-moving")),o(v)},e}function aF(e){const{apply:t,keyDown:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{const{history:r}=e,{redos:i}=r;if(i.length>0){const o=i[i.length-1];gs.withoutSaving(e,()=>{for(const s of o)e.apply(s)}),r.redos.pop(),r.undos.push(o)}},e.undo=()=>{const{history:r}=e,{undos:i}=r;if(i.length>0){const o=i[i.length-1];gs.withoutSaving(e,()=>{const s=o.map(Wl.inverse).reverse();for(const a of s)e.apply(a)}),r.redos.push(o),r.undos.pop()}},e.apply=r=>{const{operations:i,history:o}=e,{undos:s}=o,a=s[s.length-1],f=a&&a[a.length-1];let h=gs.isSaving(e),d=gs.isMerging(e);if(h==null&&(h=eI(r)),h){if(d||(a==null?d=!1:i.length!==0?d=!0:d=JO(r,f)),gs.isSplittingOnce(e)&&(d=!1,gs.setSplittingOnce(e,void 0)),a&&d)a.push(r);else{const p=[r];s.push(p)}for(;s.length>100;)s.shift();tI(r)&&(o.redos=[])}t(r)},e.keyDown=r=>{if(cn.isHotkey("mod+z",r)){e.undo();return}if(cn.isHotkey("mod+shift+z",r)){e.redo();return}n(r)},e}const lF=e=>{const{keyDown:t,keyUp:n,globalKeyDown:r}=e;return e.keyDown=i=>{const o=e.getPluginOptions(Nu.withSelection);if(!I.isReadonly(e)&&o.isMultipleSelection&&cn.isHotkey("mod+a",i)){i.preventDefault();let a=[];di(e,f=>{I.isBoard(f)||a.push(f)},f=>!!(I.isBoard(f)||e.isRecursion(f)),!0),Ve.addSelectionWithTemporaryElements(e,a);return}if(!I.isReadonly(e)){if(cn.isKeyHotkey("mod+]",i)){i.preventDefault(),Ve.moveUp(e);return}if(cn.isKeyHotkey("mod+[",i)){i.preventDefault(),Ve.moveDown(e);return}if(cn.isKeyHotkey("mod+option+",i)){i.preventDefault(),Ve.moveToTop(e);return}if(cn.isKeyHotkey("mod+option+",i)){i.preventDefault(),Ve.moveToBottom(e);return}}const s=Ye(e);if(!I.isReadonly(e)&&s.length>0&&cn.isKeyHotkey("mod+d",i)){i.preventDefault(),L4(e);return}!I.isReadonly(e)&&s.length>0&&(Di.isDeleteBackward(i)||Di.isDeleteForward(i))&&(i.preventDefault(),F4(e)),t(i)},e.keyUp=i=>{n(i)},e.globalKeyDown=i=>{if(I.getMovingPointInBoard(e)||I.isMovingPointInBoard(e)){if(cn.isHotkey(["mod+=","mod++"],{byKey:!0})(i)){i.preventDefault(),Ln.updateZoom(e,e.viewport.zoom+.1);return}if(cn.isHotkey(["mod+shift+=","mod+shift++"],{byKey:!0})(i)){i.preventDefault(),Ln.fitViewport(e);return}if(cn.isHotkey(["mod+-","mod+shift+-"])(i)){i.preventDefault(),Ln.updateZoom(e,e.viewport.zoom-.1);return}if(cn.isHotkey(["mod+0","mod+shift+0"],{byKey:!0})(i)){i.preventDefault(),Ln.updateZoom(e,1);return}}r(i)},e};function cF(e,t,n){const r=nP(e,n),i=Gt();let o=hF(t,r);const s=gF(e,o,t,r);i.append(s);const a=pF(e,o,t,r);return o=a.snapDelta,i.append(a.snapG),{...o,snapG:i}}function fF(e,t,n){const r=Hf(e,n),i=mg(t,r[0],n),o=mg(t,r[1],n),s=mg(t,r[2],n);return[i,o,s]}function hF(e,t){let n={deltaX:0,deltaY:0};function r(i){let o=0;const s=fF(e,t,i);for(let a=0;a<s.length;a++)if(Math.abs(s[a])<Na){o=s[a];break}return o}return n.deltaX=r(!0),n.deltaY=r(!1),n}function dF(e,t){const{deltaX:n,deltaY:r}=e,{x:i,y:o,width:s,height:a}=t;return{x:i+n,y:o+r,width:s,height:a}}function gF(e,t,n,r){const i=dF(t,n);return rP(e,i,r,!0,!0,!0)}function pF(e,t,n,r){let i=t.deltaX,o=t.deltaY;const s=v9(n,r,!0),a=v9(n,r,!1),f=[...s.lines,...a.lines];return s.delta&&(i=s.delta),a.delta&&(o=a.delta),{snapDelta:{deltaX:i,deltaY:o},snapG:iP(e,f)}}function v9(e,t,n){var B,R;let r=[],i=0,o=[];const s=n?"x":"y",a=n?"width":"height",f=e[s]+e[a]/2;t.forEach(_=>{(n?mF(_,e):vF(_,e))&&!M.isHit(_,e)&&o.push(_)}),o=[...o,e].sort((_,F)=>_[s]-F[s]);const h=[];let d=0,p,v;for(let _=0;_<o.length;_++)for(let F=_+1;F<o.length;F++){const j=o[_],z=o[F],Q=z[s]-(j[s]+j[a]);let se=1/0;(B=h[_])!=null&&B.after?h[_].after.push({distance:Q,index:F}):h[_]={...h[_],after:[{distance:Q,index:F}]},(R=h[F])!=null&&R.before?h[F].before.push({distance:Q,index:_}):h[F]={...h[F],before:[{distance:Q,index:_}]};let te=(j[s]+j[a]+z[s])/2;se=Math.abs(te-f),se<Na&&(d=(z[s]-(j[s]+j[a])-e[a])/2,i=te-f,p=_,v=F);const Ee=z[s]-(j[s]+j[a]);te=z[s]+z[a]+Ee+e[a]/2,se=Math.abs(te-f),(!d||d!==Ee)&&se<Na&&(d=Ee,p=F,i=te-f);const ie=z[s]-(j[s]+j[a]);te=j[s]-ie-e[a]/2,se=Math.abs(te-f),!d&&se<Na&&(d=ie,v=_,i=te-f)}const w=o.indexOf(e);let E=[],y=[];if(p!==void 0&&(E.push(p),S(d,h[p],"before",E)),v!==void 0&&(y.push(v),S(d,h[v],"after",y)),E.length||y.length){const _=[...E.reverse(),w,...y];e[s]+=i;for(let F=1;F<_.length;F++)r.push(A(o[_[F-1]],o[_[F]]))}function S(_,F,j,z){const Q=F[j],se=h.indexOf(F);if(!(se===0&&j==="before"||se===h.length-1&&j==="after")){for(let te=0;te<Q.length;te++)if(Math.abs(Q[te].distance-_)<.1){z.push(Q[te].index),S(_,h[Q[te].index],j,z);return}}}function A(_,F){const j=s==="x"?"y":"x",z=a==="width"?"height":"width",se=[_[j],_[j]+_[z],F[j],F[j]+F[z]].sort((ie,ce)=>ie-ce),te=(se[1]+se[2])/2,Ee=3;return n?[[_.x+_.width+Ee,te],[F.x-Ee,te]]:[[te,_.y+_.height+Ee],[te,F.y-Ee]]}return{delta:i,lines:r}}function mF(e,t){return!(e.y+e.height<t.y||e.y>t.y+t.height)}function vF(e,t){return!(e.x+e.width<t.x||e.x>t.x+t.width)}function yF(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,globalPointerMove:i,globalKeyDown:o,keyUp:s}=e;let a=0,f=0,h=!1,d,p=[],v=null,w=null,E=null,y,S,A=null;e.globalKeyDown=R=>{I.isReadonly(e)||cn.isKeyHotkey("option",R)&&(R.preventDefault(),d&&p.length&&!I.hasBeenTextEditing(e)&&(A=y9(e,p,a,f),A&&I.getElementTopHost(e).append(A))),o(R)},e.keyUp=R=>{if(!I.isReadonly(e)&&A&&d&&p.length&&!I.hasBeenTextEditing(e)){R.preventDefault();const _=m6(e,p,a,f);I.getBoardContainer(e).classList.add("element-moving"),i9(e,_)}A==null||A.remove(),s(R)},e.pointerDown=R=>{if(I.isReadonly(e)||!I.isPointer(e,en.selection)||!Wu(R)){t(R);return}const _=Bt(e,Ot(e,R.x,R.y));if(y=qa(e,_,F=>e.isMovable(F)),E=EP(e),S=y&&E.includes(y),y&&S)d=_,p=E,w=sn(e,p,!0);else if(y){d=_;const F=e.getRelatedFragment([],[y]);p=[...O4(e,y),...F],w=sn(e,p,!0)}else{const F=E.length>0&&sn(e,E,!1);F&&M.isPointInRectangle(F,_)&&(d=_,p=E,w=F)}t(R)},e.pointerMove=R=>{if(d&&p.length&&!I.hasBeenTextEditing(e)){h||(h=!0),v==null||v.remove(),A==null||A.remove();const _=Bt(e,Ot(e,R.x,R.y));a=_[0]-d[0],f=_[1]-d[1],(Et(..._,...d)>d4||OI(e).length>0)&&(y&&!S&&E&&E.length>0&&(cP(e,[]),y=void 0,E=null,S=void 0),ju(e,"with-moving",()=>{if(!w)return;const j={...w,x:w.x+a,y:w.y+f},z=lp(j,ho(p)),Q=cF(e,z,p);if(a+=Q.deltaX,f+=Q.deltaY,v=Q.snapG,v.classList.add(EE),I.getElementTopHost(e).append(v),R.altKey)A=y9(e,p,a,f),A&&I.getElementTopHost(e).append(A);else{const se=m6(e,p,a,f);I.getBoardContainer(e).classList.add("element-moving"),i9(e,se)}}))}h&&R.preventDefault(),n(R)},e.globalPointerMove=R=>{d&&(HO(e,R.x,R.y)||B(e)),i(R)},e.globalPointerUp=R=>{if(R.altKey&&p.length){const _=_4(e,p),F=sn(e,_,!1);L4(e,_,[F.x+a,F.y+f])}h=!1,y=void 0,E=null,S=void 0,d&&B(e),r(R)};function B(R){v==null||v.remove(),A==null||A.remove(),d=null,w=null,a=0,f=0,p=[],Nf(R)&&II(R),Or.set(R,!1),I.getBoardContainer(R).classList.remove("element-moving")}return wF(e)}function wF(e){const{keyDown:t,keyUp:n}=e;return e.keyDown=r=>{const i=Ye(e);if(!I.isReadonly(e)&&i.length>0&&(Di.isArrow(r)||Di.isExtendArrow(r))){r.preventDefault();const o=!!r.shiftKey,s=[0,0],a=o?10:1;switch(!0){case(Di.isMoveUp(r)||Di.isExtendUp(r)):{s[1]=-a;break}case(Di.isMoveDown(r)||Di.isExtendDown(r)):{s[1]=a;break}case(Di.isMoveBackward(r)||Di.isExtendBackward(r)):{s[0]=-a;break}case(Di.isMoveForward(r)||Di.isExtendForward(r)):{s[0]=a;break}}const f=EP(e);ju(e,"with-arrow-moving",()=>{m6(e,f,s[0],s[1])})}t(r)},e.keyUp=r=>{Or.set(e,!1),n(r)},e}function EP(e){const t=Ye(e),n=e.children.filter(o=>e.isMovable(o)),r=t.filter(o=>n.includes(o)),i=e.getRelatedFragment([]);return r.push(...i),r}function _4(e,t){return[...t].filter(r=>!vo.isGroup(r)&&pn.isRootElement(r))}function m6(e,t,n,r){return _4(e,t).map(s=>{const f=(s.points||[]).map(d=>[d[0]+n,d[1]+r]),h=qd.get(s);return Ve.setNode(e,{points:f},[h]),Or.set(e,!0),Vt.get(e,[h])})}function y9(e,t,n,r){let i=null;const o=[];return _4(e,t).forEach(a=>{di(a,f=>{o.push(f)},()=>!0)}),o.forEach(a=>{let f=e.getRectangle(a);if(f){f={x:f.x+n,y:f.y+r,width:f.width,height:f.height};const h=su(e,f,{stroke:mo,strokeWidth:1,fill:S4,fillStyle:"solid"});i||(i=Gt(),i.classList.add(EE));const d=Wk(a);d&&Cs(h,M.getCenterPoint(f),d),i.append(h)}}),i}const CF=e=>{const t=new Map,n=e;return n.getPluginOptions=r=>t.get(r),n.setPluginOptions=(r,i)=>{const o=n.getPluginOptions(r)||{};t.set(r,{...o,...i})},n};function xF(e){const{buildFragment:t}=e;return e.buildFragment=(n,r,i,o)=>{let s=e.getRelatedFragment(o||[]);if(s&&(o!=null&&o.length&&(s=s.filter(a=>!o.map(f=>f.id).includes(a.id))),s.length)){const a={text:"",type:$a.elements,elements:s};n=$m(n,a)}return t(n,r,i,o)},e}function EF(e){const{pointerDown:t,pointerUp:n,pointerMove:r,globalPointerUp:i,onChange:o,afterChange:s,drawSelectionRectangle:a}=e;let f=null,h=null,d,p,v=!1,w=null,E=null;return e.pointerDown=y=>{!v&&y.shiftKey&&(v=!0),v&&!y.shiftKey&&(v=!1);const S=Bt(e,Ot(e,y.x,y.y)),A=kE(e,S),B=C3(e);I.isPointer(e,en.selection)&&Wu(y)&&!A&&B.isMultipleSelection&&!B.isDisabledSelection&&(aP(y)?w=setTimeout(()=>{f=[y.x,y.y],w=null},120):f=[y.x,y.y]),E=y,t(y)},e.pointerMove=y=>{if(w&&E&&Et(E.x,E.y,y.x,y.y)>SE&&(clearTimeout(w),w=null),I.isPointer(e,en.selection)&&f){y.preventDefault(),h=[y.x,y.y];const S=M.getRectangleByPoints([_f(e,...f),_f(e,...h)]);d==null||d.remove(),ju(e,"with-selection",()=>{f&&h&&Ve.setSelection(e,{anchor:Bt(e,Ot(e,f[0],f[1])),focus:Bt(e,Ot(e,h[0],h[1]))})}),nk(e),d=su(e,S,{stroke:mo,strokeWidth:1,fill:S4,fillStyle:"solid"}),I.getActiveHost(e).append(d)}r(y)},e.pointerUp=y=>{const S=I.isPointer(e,en.selection)||I.isPointer(e,en.hand);if(!Wu(y)||a0(e)||!S){n(y);return}const B=Bt(e,Ot(e,y.x,y.y)),R={anchor:B,focus:B};Ve.setSelection(e,R),n(y)},e.globalPointerUp=y=>{f&&h&&(d==null||d.remove(),rk(e),Ve.setSelection(e,{anchor:Bt(e,Ot(e,f[0],f[1])),focus:Bt(e,Ot(e,h[0],h[1]))}));const S=C3(e);if(I.isFocus(e)&&!S.isPreventClearSelection){const A=y.target instanceof Node&&I.getBoardContainer(e).contains(y.target),B=y.target instanceof Node&&document.contains(y.target),R=y.target instanceof Element&&y.target.closest(`.${Ya}`);!A&&!f&&!R&&B&&Ve.setSelection(e,null)}f=null,h=null,w&&(clearTimeout(w),w=null),E=null,i(y)},e.onChange=()=>{const y=C3(e);if(y.isDisabledSelection&&x0(e),e.operations.forEach(S=>{S.type==="remove_node"&&Nm(e,S.node,!0)}),a9(e)&&l9(e))try{v||p==null||p.remove();const S=ik(e);if(S)Lu(e,[...S]);else{let B=OE(e);!y.isMultipleSelection&&B.length>1&&(B=[B[0]]);const R=B.some(F=>F.groupId),_=Ye(e);if(R)ak(e,B,v);else{if(e.selection&&u0.isCollapsed(e.selection)){const F=e.getOneHitElement(B);F&&(B=[F])}if(v){const F=[..._];e.selection&&u0.isCollapsed(e.selection)?(B.forEach(j=>{F.includes(j)?F.splice(F.indexOf(j),1):F.push(j)}),Lu(e,F)):(B.forEach(j=>{F.includes(j)||F.push(j)}),Lu(e,[...F]))}else Lu(e,[...B])}}const A=Ye(e);sk(e),Wi(e)||(p==null||p.remove(),A.length>1&&(p=e.drawSelectionRectangle(),I.getActiveHost(e).append(p)))}catch(S){console.error(S)}o()},e.afterChange=()=>{if(a9(e)&&!l9(e))try{const y=Ye(e);y.length&&y.length>1?(p==null||p.remove(),p=e.drawSelectionRectangle(),I.getActiveHost(e).append(p)):p==null||p.remove()}catch(y){console.error(y)}s()},c6(e,{isMultipleSelection:!0,isDisabledSelection:!1,isPreventClearSelection:!1}),e}const PF=e=>{const t=e;return t.getI18nValue=n=>(console.warn(`I18n key "${n}" is not found.`),null),t},Wm=(e,t,n="")=>e.getI18nValue(t)||n;var k5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var w9;function SF(){return w9||(w9=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=i(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)t.call(o,a)&&o[a]&&(s=i(s,a));return s}function i(o,s){return s?o?o+" "+s:o+s:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(k5)),k5.exports}var DF=SF();const Dn=uc(DF);var TF=function(e){return typeof e=="function"};function C9(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}function PP(e){var t=$.useRef(e);return t.current=e,t}var AF=function(e){var t=PP(e);$.useEffect(function(){return function(){t.current()}},[])},F5,x9;function N4(){if(x9)return F5;x9=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return F5=e,F5}var L5,E9;function BF(){if(E9)return L5;E9=1;var e=typeof vs=="object"&&vs&&vs.Object===Object&&vs;return L5=e,L5}var _5,P9;function SP(){if(P9)return _5;P9=1;var e=BF(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return _5=n,_5}var N5,S9;function RF(){if(S9)return N5;S9=1;var e=SP(),t=function(){return e.Date.now()};return N5=t,N5}var H5,D9;function MF(){if(D9)return H5;D9=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return H5=t,H5}var G5,T9;function bF(){if(T9)return G5;T9=1;var e=MF(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return G5=n,G5}var $5,A9;function DP(){if(A9)return $5;A9=1;var e=SP(),t=e.Symbol;return $5=t,$5}var W5,B9;function OF(){if(B9)return W5;B9=1;var e=DP(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function o(s){var a=n.call(s,i),f=s[i];try{s[i]=void 0;var h=!0}catch{}var d=r.call(s);return h&&(a?s[i]=f:delete s[i]),d}return W5=o,W5}var j5,R9;function IF(){if(R9)return j5;R9=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return j5=n,j5}var z5,M9;function kF(){if(M9)return z5;M9=1;var e=DP(),t=OF(),n=IF(),r="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function s(a){return a==null?a===void 0?i:r:o&&o in Object(a)?t(a):n(a)}return z5=s,z5}var V5,b9;function FF(){if(b9)return V5;b9=1;function e(t){return t!=null&&typeof t=="object"}return V5=e,V5}var U5,O9;function LF(){if(O9)return U5;O9=1;var e=kF(),t=FF(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return U5=r,U5}var X5,I9;function _F(){if(I9)return X5;I9=1;var e=bF(),t=N4(),n=LF(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function f(h){if(typeof h=="number")return h;if(n(h))return r;if(t(h)){var d=typeof h.valueOf=="function"?h.valueOf():h;h=t(d)?d+"":d}if(typeof h!="string")return h===0?h:+h;h=e(h);var p=o.test(h);return p||s.test(h)?a(h.slice(2),p?2:8):i.test(h)?r:+h}return X5=f,X5}var K5,k9;function TP(){if(k9)return K5;k9=1;var e=N4(),t=RF(),n=_F(),r="Expected a function",i=Math.max,o=Math.min;function s(a,f,h){var d,p,v,w,E,y,S=0,A=!1,B=!1,R=!0;if(typeof a!="function")throw new TypeError(r);f=n(f)||0,e(h)&&(A=!!h.leading,B="maxWait"in h,v=B?i(n(h.maxWait)||0,f):v,R="trailing"in h?!!h.trailing:R);function _(ce){var me=d,Ce=p;return d=p=void 0,S=ce,w=a.apply(Ce,me),w}function F(ce){return S=ce,E=setTimeout(Q,f),A?_(ce):w}function j(ce){var me=ce-y,Ce=ce-S,Fe=f-me;return B?o(Fe,v-Ce):Fe}function z(ce){var me=ce-y,Ce=ce-S;return y===void 0||me>=f||me<0||B&&Ce>=v}function Q(){var ce=t();if(z(ce))return se(ce);E=setTimeout(Q,j(ce))}function se(ce){return E=void 0,R&&d?_(ce):(d=p=void 0,w)}function te(){E!==void 0&&clearTimeout(E),S=0,d=y=p=E=void 0}function Ee(){return E===void 0?w:se(t())}function ie(){var ce=t(),me=z(ce);if(d=arguments,p=this,y=ce,me){if(E===void 0)return F(y);if(B)return clearTimeout(E),E=setTimeout(Q,f),_(y)}return E===void 0&&(E=setTimeout(Q,f)),w}return ie.cancel=te,ie.flush=Ee,ie}return K5=s,K5}var NF=TP();const HF=uc(NF);var GF=!!(typeof window<"u"&&window.document&&window.document.createElement),Y5,F9;function $F(){if(F9)return Y5;F9=1;var e=TP(),t=N4(),n="Expected a function";function r(i,o,s){var a=!0,f=!0;if(typeof i!="function")throw new TypeError(n);return t(s)&&(a="leading"in s?!!s.leading:a,f="trailing"in s?!!s.trailing:f),e(i,o,{leading:a,maxWait:o,trailing:f})}return Y5=r,Y5}var WF=$F();const jF=uc(WF);function AP(e,t){if(GF){if(!e)return t;var n;return TF(e)?n=e():"current"in e?n=e.current:n=e,n}}var zF=function(e){var t=function(n,r,i){var o=$.useRef(!1),s=$.useRef([]),a=$.useRef([]),f=$.useRef();e(function(){var h,d=Array.isArray(i)?i:[i],p=d.map(function(v){return AP(v)});if(!o.current){o.current=!0,s.current=p,a.current=r,f.current=n();return}(p.length!==s.current.length||!C9(s.current,p)||!C9(a.current,r))&&((h=f.current)===null||h===void 0||h.call(f),s.current=p,a.current=r,f.current=n())}),AF(function(){var h;(h=f.current)===null||h===void 0||h.call(f),o.current=!1})};return t},VF=zF($.useEffect);function ui(e,t,n){n===void 0&&(n={});var r=n.enable,i=r===void 0?!0:r,o=PP(t);VF(function(){if(i){var s=AP(n.target,window);if(s!=null&&s.addEventListener){var a=function(h){return o.current(h)},f=Array.isArray(e)?e:[e];return f.forEach(function(h){s.addEventListener(h,a,{capture:n.capture,once:n.once,passive:n.passive})}),function(){f.forEach(function(h){s.removeEventListener(h,a,{capture:n.capture})})}}}},[e,n.capture,n.once,n.passive,i],n.target)}const UF=(e,t,n)=>{ui("pointerdown",r=>{e.pointerDown(r)},{target:n}),ui("pointermove",r=>{r6.set(e,[r.x,r.y]),e.pointerMove(r)},{target:t}),ui("pointerleave",r=>{r6.delete(e),e.pointerLeave(r)},{target:t}),ui("pointerup",r=>{e.pointerUp(r)},{target:t}),ui("dblclick",r=>{I.isFocus(e)&&!I.hasBeenTextEditing(e)&&e.dblClick(r)},{target:n}),ui("pointermove",r=>{TE.set(e,[r.x,r.y]),e.globalPointerMove(r)}),ui("pointerup",r=>{e.globalPointerUp(r)}),ui("keydown",r=>{e.globalKeyDown(r),I.isFocus(e)&&!I.hasBeenTextEditing(e)&&!VO(r.target)&&e.keyDown(r)}),ui("keyup",r=>{I.isFocus(e)&&!I.hasBeenTextEditing(e)&&(e==null||e.keyUp(r))}),ui("copy",r=>{I.isFocus(e)&&!I.hasBeenTextEditing(e)&&(r.preventDefault(),c9(e,ru.copy,r.clipboardData))}),ui("paste",async r=>{if(I.isFocus(e)&&!I.isReadonly(e)&&!I.hasBeenTextEditing(e)){const i=I.getMovingPointInBoard(e);if(i){const o=Bt(e,Ot(e,i[0],i[1])),s=await ek(r.clipboardData);e.insertFragment(s,o,ru.paste)}}}),ui("cut",r=>{I.isFocus(e)&&!I.isReadonly(e)&&!I.hasBeenTextEditing(e)&&(r.preventDefault(),c9(e,ru.cut,r.clipboardData),F4(e))}),ui("drop",r=>{I.isReadonly(e)||(r.preventDefault(),e.drop(r))},{target:t}),ui("dragover",r=>{r.preventDefault()},{target:t})},XF=(e,t)=>{ui("scroll",r=>{if(TI(e))UE(e,!1);else{const{scrollLeft:i,scrollTop:o}=r.target;jE(e,i,o)}},{target:t}),ui("touchstart",r=>{r.preventDefault()},{target:t,passive:!1}),ui("wheel",r=>{if(r.metaKey||r.ctrlKey){r.preventDefault();const{deltaX:i,deltaY:o}=r,s=e.viewport.zoom,a=Math.sign(o),f=EO*100,h=Math.abs(o);let d=o;h>f&&(d=f*a);let p=s-d/100;p+=Math.log10(Math.max(1,s))*-a*Math.min(1,h/20),Ln.updateZoom(e,p,I.getMovingPointInBoard(e))}},{target:t,passive:!1});const n=$.useRef(!1);$.useEffect(()=>{const r=new ResizeObserver(()=>{if(!n.current){n.current=!0;return}A4(e),B4(e),V3(e)});return r.observe(I.getBoardContainer(e)),()=>{r&&r.disconnect()}},[])},H4=$.createContext(null),Zr=()=>{const e=$.useContext(H4);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{board:t}=e;return t},BP=()=>{const e=$.useContext(H4);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{listRender:t}=e;return t},RP=({style:e,className:t,children:n,afterInit:r})=>{var E,y;const i=$.useRef(null),o=$.useRef(null),s=$.useRef(null),a=$.useRef(null),f=$.useRef(null),h=$.useRef(null),d=$.useRef(null),p=$.useRef(null),v=Zr(),w=BP();return $.useEffect(()=>{const S=db.svg(i.current,{options:{roughness:0,strokeWidth:1}});Jv.set(v,S),e6.set(v,i.current),n6.set(v,!0),ba.set(v,{lowerHost:o.current,host:s.current,upperHost:a.current,topHost:f.current,activeHost:h.current,container:p.current,viewportContainer:d.current});const A=new rF;return t6.set(v,A),Zv.set(v,new Map),w.initialized||(w.initialize(v.children,{board:v,parent:v,parentG:I.getElementHost(v)}),r&&r(v)),A4(v),B4(v),PI(v),()=>{t6.delete(v),$3.delete(v),G3.delete(v),ba.delete(v),n6.delete(v),e6.delete(v),Jv.delete(v),Zv.delete(v)}},[]),UF(v,d,i),XF(v,d),b.jsx("div",{className:Dn(t,PO,`${KF()}`,`theme-${(E=v.theme)==null?void 0:E.themeColorMode}`,`pointer-${v.pointer}`,{focused:I.isFocus(v),readonly:I.isReadonly(v),"disabled-scroll":((y=v.options)==null?void 0:y.disabledScrollOnNonFocus)&&!I.isFocus(v)}),ref:p,style:e,children:b.jsxs("div",{className:"viewport-container",ref:d,style:{width:"100%",height:"100%",overflow:"auto"},children:[b.jsxs("svg",{ref:i,width:"100%",height:"100%",style:{position:"relative"},className:"board-host-svg",children:[b.jsx("g",{className:"element-lower-host",ref:o}),b.jsx("g",{className:"element-host",ref:s}),b.jsx("g",{className:"element-upper-host",ref:a}),b.jsx("g",{className:"element-top-host",ref:f})]}),b.jsx("svg",{width:"100%",height:"100%",className:"board-active-svg",children:b.jsx("g",{className:"active-host-g",ref:h})}),n]})})},KF=()=>ZO?"safari":QO?"chrome":qO?"firefox":"";/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function L9(e){return Object.prototype.toString.call(e)==="[object Object]"}function ai(e){var t,n;return L9(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(L9(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}var YF={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=q.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},qF={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=Yt.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},ZF={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=Se.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},K3=new WeakMap,Y3=new WeakMap,vg=new WeakMap,MP=new WeakMap,_9=new WeakMap,N9=new WeakMap,H9=new WeakMap,q={ancestors(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=q.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},common(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var i=e[r],o=t[r];if(i!==o)break;n.push(i)}return n},compare(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter(e,t){var n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return q.equals(r,i)&&o>s},endsAt(e,t){var n=e.length,r=e.slice(0,n),i=t.slice(0,n);return q.equals(r,i)},endsBefore(e,t){var n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return q.equals(r,i)&&o<s},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,t){return q.compare(e,t)===1},isAncestor(e,t){return e.length<t.length&&q.compare(e,t)===0},isBefore(e,t){return q.compare(e,t)===-1},isChild(e,t){return e.length===t.length+1&&q.compare(e,t)===0},isCommon(e,t){return e.length<=t.length&&q.compare(e,t)===0},isDescendant(e,t){return e.length>t.length&&q.compare(e,t)===0},isParent(e,t){return e.length+1===t.length&&q.compare(e,t)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1),i=e[e.length-1],o=t[t.length-1];return i!==o&&q.equals(n,r)},levels(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=[],i=0;i<=e.length;i++)r.push(e.slice(0,i));return n&&r.reverse(),r},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!q.isAncestor(t,e)&&!q.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:i="forward"}=n;if(e.length===0)return r;switch(t.type){case"insert_node":{var{path:o}=t;(q.equals(o,r)||q.endsBefore(o,r)||q.isAncestor(o,r))&&(r[o.length-1]+=1);break}case"remove_node":{var{path:s}=t;if(q.equals(s,r)||q.isAncestor(s,r))return null;q.endsBefore(s,r)&&(r[s.length-1]-=1);break}case"merge_node":{var{path:a,position:f}=t;q.equals(a,r)||q.endsBefore(a,r)?r[a.length-1]-=1:q.isAncestor(a,r)&&(r[a.length-1]-=1,r[a.length]+=f);break}case"split_node":{var{path:h,position:d}=t;if(q.equals(h,r)){if(i==="forward")r[r.length-1]+=1;else if(i!=="backward")return null}else q.endsBefore(h,r)?r[h.length-1]+=1:q.isAncestor(h,r)&&e[h.length]>=d&&(r[h.length-1]+=1,r[h.length]-=d);break}case"move_node":{var{path:p,newPath:v}=t;if(q.equals(p,v))return r;if(q.isAncestor(p,r)||q.equals(p,r)){var w=v.slice();return q.endsBefore(p,v)&&p.length<v.length&&(w[p.length-1]-=1),w.concat(r.slice(p.length))}else q.isSibling(p,v)&&(q.isAncestor(v,r)||q.equals(v,r))?q.endsBefore(p,r)?r[p.length-1]-=1:r[p.length-1]+=1:q.endsBefore(v,r)||q.equals(v,r)||q.isAncestor(v,r)?(q.endsBefore(p,r)&&(r[p.length-1]-=1),r[v.length-1]+=1):q.endsBefore(p,r)&&(q.equals(v,r)&&(r[v.length-1]+=1),r[p.length-1]-=1);break}}return r}};function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}function QF(e,t){if(kg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JF(e){var t=QF(e,"string");return kg(t)==="symbol"?t:String(t)}function ji(e,t,n){return t=JF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function og(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G9(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var eL=(e,t,n)=>{switch(n.type){case"insert_node":{var{path:r,node:i}=n,o=We.parent(e,r),s=r[r.length-1];if(s>o.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(o.children.splice(s,0,i),t)for(var[a,f]of Se.points(t))t[f]=Yt.transform(a,n);break}case"insert_text":{var{path:h,offset:d,text:p}=n;if(p.length===0)break;var v=We.leaf(e,h),w=v.text.slice(0,d),E=v.text.slice(d);if(v.text=w+p+E,t)for(var[y,S]of Se.points(t))t[S]=Yt.transform(y,n);break}case"merge_node":{var{path:A}=n,B=We.get(e,A),R=q.previous(A),_=We.get(e,R),F=We.parent(e,A),j=A[A.length-1];if(st.isText(B)&&st.isText(_))_.text+=B.text;else if(!st.isText(B)&&!st.isText(_))_.children.push(...B.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(A,"] to nodes of different interfaces: ").concat(Ur.stringify(B)," ").concat(Ur.stringify(_)));if(F.children.splice(j,1),t)for(var[z,Q]of Se.points(t))t[Q]=Yt.transform(z,n);break}case"move_node":{var{path:se,newPath:te}=n;if(q.isAncestor(se,te))throw new Error("Cannot move a path [".concat(se,"] to new path [").concat(te,"] because the destination is inside itself."));var Ee=We.get(e,se),ie=We.parent(e,se),ce=se[se.length-1];ie.children.splice(ce,1);var me=q.transform(se,n),Ce=We.get(e,q.parent(me)),Fe=me[me.length-1];if(Ce.children.splice(Fe,0,Ee),t)for(var[Ae,pe]of Se.points(t))t[pe]=Yt.transform(Ae,n);break}case"remove_node":{var{path:ue}=n,ye=ue[ue.length-1],X=We.parent(e,ue);if(X.children.splice(ye,1),t)for(var[Pe,ut]of Se.points(t)){var Me=Yt.transform(Pe,n);if(t!=null&&Me!=null)t[ut]=Me;else{var K=void 0,fe=void 0;for(var[we,De]of We.texts(e))if(q.compare(De,ue)===-1)K=[we,De];else{fe=[we,De];break}var Ke=!1;K&&fe&&(q.equals(fe[1],ue)?Ke=!q.hasPrevious(fe[1]):Ke=q.common(K[1],ue).length<q.common(fe[1],ue).length),K&&!Ke?(Pe.path=K[1],Pe.offset=K[0].text.length):fe?(Pe.path=fe[1],Pe.offset=0):t=null}}break}case"remove_text":{var{path:Ue,offset:Rt,text:It}=n;if(It.length===0)break;var St=We.leaf(e,Ue),lt=St.text.slice(0,Rt),yt=St.text.slice(Rt+It.length);if(St.text=lt+yt,t)for(var[wn,Mt]of Se.points(t))t[Mt]=Yt.transform(wn,n);break}case"set_node":{var{path:_n,properties:ir,newProperties:Tn}=n;if(_n.length===0)throw new Error("Cannot set properties on the root node!");var tn=We.get(e,_n);for(var nn in Tn){if(nn==="children"||nn==="text")throw new Error('Cannot set the "'.concat(nn,'" property of nodes!'));var Yn=Tn[nn];Yn==null?delete tn[nn]:tn[nn]=Yn}for(var Nn in ir)Tn.hasOwnProperty(Nn)||delete tn[Nn];break}case"set_selection":{var{newProperties:$t}=n;if($t==null)t=$t;else{if(t==null){if(!Se.isRange($t))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Ur.stringify($t)," when there is no current selection."));t=og({},$t)}for(var Dr in $t){var vr=$t[Dr];if(vr==null){if(Dr==="anchor"||Dr==="focus")throw new Error('Cannot remove the "'.concat(Dr,'" selection property'));delete t[Dr]}else t[Dr]=vr}}break}case"split_node":{var{path:An,position:yr,properties:wr}=n;if(An.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(An,"] because the root node cannot be split."));var or=We.get(e,An),zi=We.parent(e,An),Vi=An[An.length-1],Ui;if(st.isText(or)){var Zu=or.text.slice(0,yr),Bs=or.text.slice(yr);or.text=Zu,Ui=og(og({},wr),{},{text:Bs})}else{var Eo=or.children.slice(0,yr),uu=or.children.slice(yr);or.children=Eo,Ui=og(og({},wr),{},{children:uu})}if(zi.children.splice(Vi+1,0,Ui),t)for(var[Qu,pi]of Se.points(t))t[pi]=Yt.transform(Qu,n);break}}return t},tL={transform(e,t){e.children=Gd(e.children);var n=e.selection&&Gd(e.selection);try{n=eL(e,n,t)}finally{e.children=$d(e.children),n?e.selection=_u(n)?$d(n):n:e.selection=null}}},nL={insertNodes(e,t,n){e.insertNodes(t,n)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,n){e.setNodes(t,n)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,n){e.unsetNodes(t,n)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,n){e.wrapNodes(t,n)}},rL={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,n){e.setPoint(t,n)},setSelection(e,t){e.setSelection(t)}},bP=(e,t)=>{for(var n in e){var r=e[n],i=t[n];if(ai(r)&&ai(i)){if(!bP(r,i))return!1}else if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==i[o])return!1}else if(r!==i)return!1}for(var s in t)if(e[s]===void 0&&t[s]!==void 0)return!1;return!0};function iL(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Wa(e,t){if(e==null)return{};var n=iL(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var oL=["anchor","focus"];function $9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$9(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Se={edges(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,{anchor:r,focus:i}=e;return Se.isBackward(e)===n?[r,i]:[i,r]},end(e){var[,t]=Se.edges(e);return t},equals(e,t){return Yt.equals(e.anchor,t.anchor)&&Yt.equals(e.focus,t.focus)},includes(e,t){if(Se.isRange(t)){if(Se.includes(e,t.anchor)||Se.includes(e,t.focus))return!0;var[n,r]=Se.edges(e),[i,o]=Se.edges(t);return Yt.isBefore(n,i)&&Yt.isAfter(r,o)}var[s,a]=Se.edges(e),f=!1,h=!1;return Yt.isPoint(t)?(f=Yt.compare(t,s)>=0,h=Yt.compare(t,a)<=0):(f=q.compare(t,s.path)>=0,h=q.compare(t,a.path)<=0),f&&h},intersection(e,t){var n=Wa(e,oL),[r,i]=Se.edges(e),[o,s]=Se.edges(t),a=Yt.isBefore(r,o)?o:r,f=Yt.isBefore(i,s)?i:s;return Yt.isBefore(f,a)?null:sL({anchor:a,focus:f},n)},isBackward(e){var{anchor:t,focus:n}=e;return Yt.isAfter(t,n)},isCollapsed(e){var{anchor:t,focus:n}=e;return Yt.equals(t,n)},isExpanded(e){return!Se.isCollapsed(e)},isForward(e){return!Se.isBackward(e)},isRange(e){return ai(e)&&Yt.isPoint(e.anchor)&&Yt.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=Se.edges(e);return t},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return l4(e,r=>{if(r===null)return null;var{affinity:i="inward"}=n,o,s;if(i==="inward"){var a=Se.isCollapsed(r);Se.isForward(r)?(o="forward",s=a?o:"backward"):(o="backward",s=a?o:"forward")}else i==="outward"?Se.isForward(r)?(o="backward",s="forward"):(o="forward",s="backward"):(o=i,s=i);var f=Yt.transform(r.anchor,t,{affinity:o}),h=Yt.transform(r.focus,t,{affinity:s});if(!f||!h)return null;r.anchor=f,r.focus=h})}},W9=e=>ai(e)&&We.isNodeList(e.children)&&!k.isEditor(e),rt={isAncestor(e){return ai(e)&&We.isNodeList(e.children)},isElement:W9,isElementList(e){return Array.isArray(e)&&e.every(t=>rt.isElement(t))},isElementProps(e){return e.children!==void 0},isElementType:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return W9(t)&&t[r]===n},matches(e,t){for(var n in t)if(n!=="children"&&e[n]!==t[n])return!1;return!0}},uL=["children"],aL=["text"],j9=new WeakMap,We={ancestor(e,t){var n=We.get(e,t);if(st.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(Ur.stringify(n)));return n},ancestors(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of q.ancestors(t,n)){var i=We.ancestor(e,r),o=[i,r];yield o}}()},child(e,t){if(st.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Ur.stringify(e)));var n=e.children[t];if(n==null)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(Ur.stringify(e)));return n},children(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,i=We.ancestor(e,t),{children:o}=i,s=r?o.length-1:0;r?s>=0:s<o.length;){var a=We.child(i,s),f=t.concat(s);yield[a,f],s=r?s-1:s+1}}()},common(e,t,n){var r=q.common(t,n),i=We.get(e,r);return[i,r]},descendant(e,t){var n=We.get(e,t);if(k.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(Ur.stringify(n)));return n},descendants(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of We.nodes(e,t))r.length!==0&&(yield[n,r])}()},elements(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of We.nodes(e,t))rt.isElement(n)&&(yield[n,r])}()},extractProps(e){if(rt.isAncestor(e)){var t=Wa(e,uL);return t}else{var t=Wa(e,aL);return t}},first(e,t){for(var n=t.slice(),r=We.get(e,n);r&&!(st.isText(r)||r.children.length===0);)r=r.children[0],n.push(0);return[r,n]},fragment(e,t){if(st.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Ur.stringify(e)));var n=l4({children:e.children},r=>{var[i,o]=Se.edges(t),s=We.nodes(r,{reverse:!0,pass:v=>{var[,w]=v;return!Se.includes(t,w)}});for(var[,a]of s){if(!Se.includes(t,a)){var f=We.parent(r,a),h=a[a.length-1];f.children.splice(h,1)}if(q.equals(a,o.path)){var d=We.leaf(r,a);d.text=d.text.slice(0,o.offset)}if(q.equals(a,i.path)){var p=We.leaf(r,a);p.text=p.text.slice(i.offset)}}k.isEditor(r)&&(r.selection=null)});return n.children},get(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(st.isText(n)||!n.children[i])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(Ur.stringify(e)));n=n.children[i]}return n},has(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(st.isText(n)||!n.children[i])return!1;n=n.children[i]}return!0},isNode(e){return st.isText(e)||rt.isElement(e)||k.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var t=j9.get(e);if(t!==void 0)return t;var n=e.every(r=>We.isNode(r));return j9.set(e,n),n},last(e,t){for(var n=t.slice(),r=We.get(e,n);r&&!(st.isText(r)||r.children.length===0);){var i=r.children.length-1;r=r.children[i],n.push(i)}return[r,n]},leaf(e,t){var n=We.get(e,t);if(!st.isText(n))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(Ur.stringify(n)));return n},levels(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of q.levels(t,n)){var i=We.get(e,r);yield[i,r]}}()},matches(e,t){return rt.isElement(e)&&rt.isElementProps(t)&&rt.matches(e,t)||st.isText(e)&&st.isTextProps(t)&&st.matches(e,t)},nodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=t,{from:i=[],to:o}=t,s=new Set,a=[],f=e;!(o&&(r?q.isBefore(a,o):q.isAfter(a,o)));){if(s.has(f)||(yield[f,a]),!s.has(f)&&!st.isText(f)&&f.children.length!==0&&(n==null||n([f,a])===!1)){s.add(f);var h=r?f.children.length-1:0;q.isAncestor(a,i)&&(h=i[a.length]),a=a.concat(h),f=We.get(e,a);continue}if(a.length===0)break;if(!r){var d=q.next(a);if(We.has(e,d)){a=d,f=We.get(e,a);continue}}if(r&&a[a.length-1]!==0){var p=q.previous(a);a=p,f=We.get(e,a);continue}a=q.parent(a),f=We.get(e,a),s.add(f)}}()},parent(e,t){var n=q.parent(t),r=We.get(e,n);if(st.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string(e){return st.isText(e)?e.text:e.children.map(We.string).join("")},texts(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of We.nodes(e,t))st.isText(n)&&(yield[n,r])}()}};function z9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z9(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ia={isNodeOperation(e){return Ia.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!ai(e))return!1;switch(e.type){case"insert_node":return q.isPath(e.path)&&We.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&q.isPath(e.path);case"merge_node":return typeof e.position=="number"&&q.isPath(e.path)&&ai(e.properties);case"move_node":return q.isPath(e.path)&&q.isPath(e.newPath);case"remove_node":return q.isPath(e.path)&&We.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&q.isPath(e.path);case"set_node":return q.isPath(e.path)&&ai(e.properties)&&ai(e.newProperties);case"set_selection":return e.properties===null&&Se.isRange(e.newProperties)||e.newProperties===null&&Se.isRange(e.properties)||ai(e.properties)&&ai(e.newProperties);case"split_node":return q.isPath(e.path)&&typeof e.position=="number"&&ai(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(t=>Ia.isOperation(t))},isSelectionOperation(e){return Ia.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return Ia.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return Zn(Zn({},e),{},{type:"remove_node"});case"insert_text":return Zn(Zn({},e),{},{type:"remove_text"});case"merge_node":return Zn(Zn({},e),{},{type:"split_node",path:q.previous(e.path)});case"move_node":{var{newPath:t,path:n}=e;if(q.equals(t,n))return e;if(q.isSibling(n,t))return Zn(Zn({},e),{},{path:t,newPath:n});var r=q.transform(n,e),i=q.transform(q.next(n),e);return Zn(Zn({},e),{},{path:r,newPath:i})}case"remove_node":return Zn(Zn({},e),{},{type:"insert_node"});case"remove_text":return Zn(Zn({},e),{},{type:"insert_text"});case"set_node":{var{properties:o,newProperties:s}=e;return Zn(Zn({},e),{},{properties:s,newProperties:o})}case"set_selection":{var{properties:a,newProperties:f}=e;return a==null?Zn(Zn({},e),{},{properties:f,newProperties:null}):f==null?Zn(Zn({},e),{},{properties:null,newProperties:a}):Zn(Zn({},e),{},{properties:f,newProperties:a})}case"split_node":return Zn(Zn({},e),{},{type:"merge_node",path:q.next(e.path)})}}},V9=new WeakMap,lL=e=>{var t=V9.get(e);if(t!==void 0)return t;if(!ai(e))return!1;var n=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isInline=="function"&&typeof e.isSelectable=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||ai(e.marks))&&(e.selection===null||Se.isRange(e.selection))&&We.isNodeList(e.children)&&Ia.isOperationList(e.operations);return V9.set(e,n),n},k={above(e,t){return e.above(t)},addMark(e,t,n){e.addMark(t,n)},after(e,t,n){return e.after(t,n)},before(e,t,n){return e.before(t,n)},deleteBackward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e,t){e.deleteFragment(t)},edges(e,t){return e.edges(t)},elementReadOnly(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(t)},end(e,t){return e.end(t)},first(e,t){return e.first(t)},fragment(e,t){return e.fragment(t)},hasBlocks(e,t){return e.hasBlocks(t)},hasInlines(e,t){return e.hasInlines(t)},hasPath(e,t){return e.hasPath(t)},hasTexts(e,t){return e.hasTexts(t)},insertBreak(e){e.insertBreak()},insertFragment(e,t,n){e.insertFragment(t,n)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock(e,t){return e.isBlock(t)},isEdge(e,t,n){return e.isEdge(t,n)},isEditor(e){return lL(e)},isElementReadOnly(e,t){return e.isElementReadOnly(t)},isEmpty(e,t){return e.isEmpty(t)},isEnd(e,t,n){return e.isEnd(t,n)},isInline(e,t){return e.isInline(t)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,t){return e.isSelectable(t)},isStart(e,t,n){return e.isStart(t,n)},isVoid(e,t){return e.isVoid(t)},last(e,t){return e.last(t)},leaf(e,t,n){return e.leaf(t,n)},levels(e,t){return e.levels(t)},marks(e){return e.getMarks()},next(e,t){return e.next(t)},node(e,t,n){return e.node(t,n)},nodes(e,t){return e.nodes(t)},normalize(e,t){e.normalize(t)},parent(e,t,n){return e.parent(t,n)},path(e,t,n){return e.path(t,n)},pathRef(e,t,n){return e.pathRef(t,n)},pathRefs(e){return e.pathRefs()},point(e,t,n){return e.point(t,n)},pointRef(e,t,n){return e.pointRef(t,n)},pointRefs(e){return e.pointRefs()},positions(e,t){return e.positions(t)},previous(e,t){return e.previous(t)},range(e,t,n){return e.range(t,n)},rangeRef(e,t,n){return e.rangeRef(t,n)},rangeRefs(e){return e.rangeRefs()},removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start(e,t){return e.start(t)},string(e,t,n){return e.string(t,n)},unhangRange(e,t,n){return e.unhangRange(t,n)},void(e,t){return e.void(t)},withoutNormalizing(e,t){e.withoutNormalizing(t)}},cL={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(q.isPath)}};function U9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function X9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U9(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Yt={compare(e,t){var n=q.compare(e.path,t.path);return n===0?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter(e,t){return Yt.compare(e,t)===1},isBefore(e,t){return Yt.compare(e,t)===-1},equals(e,t){return e.offset===t.offset&&q.equals(e.path,t.path)},isPoint(e){return ai(e)&&typeof e.offset=="number"&&q.isPath(e.path)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return l4(e,r=>{if(r===null)return null;var{affinity:i="forward"}=n,{path:o,offset:s}=r;switch(t.type){case"insert_node":case"move_node":{r.path=q.transform(o,t,n);break}case"insert_text":{q.equals(t.path,o)&&(t.offset<s||t.offset===s&&i==="forward")&&(r.offset+=t.text.length);break}case"merge_node":{q.equals(t.path,o)&&(r.offset+=t.position),r.path=q.transform(o,t,n);break}case"remove_text":{q.equals(t.path,o)&&t.offset<=s&&(r.offset-=Math.min(s-t.offset,t.text.length));break}case"remove_node":{if(q.equals(t.path,o)||q.isAncestor(t.path,o))return null;r.path=q.transform(o,t,n);break}case"split_node":{if(q.equals(t.path,o)){if(t.position===s&&i==null)return null;(t.position<s||t.position===s&&i==="forward")&&(r.offset-=t.position,r.path=q.transform(o,t,X9(X9({},n),{},{affinity:"forward"})))}else r.path=q.transform(o,t,n);break}}})}},K9=void 0,Ur={setScrubber(e){K9=e},stringify(e){return JSON.stringify(e,K9)}},fL=["text"],hL=["anchor","focus"];function Y9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ma(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y9(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var st={equals(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=n;function i(o){var s=Wa(o,fL);return s}return bP(r?i(e):e,r?i(t):t)},isText(e){return ai(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(t=>st.isText(t))},isTextProps(e){return e.text!==void 0},matches(e,t){for(var n in t)if(n!=="text"&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){var n=[Ma({},e)];for(var r of t){var i=Wa(r,hL),[o,s]=Se.edges(r),a=[],f=0,h=o.offset,d=s.offset;for(var p of n){var{length:v}=p.text,w=f;if(f+=v,h<=w&&f<=d){Object.assign(p,i),a.push(p);continue}if(h!==d&&(h===f||d===w)||h>f||d<w||d===w&&w!==0){a.push(p);continue}var E=p,y=void 0,S=void 0;if(d<f){var A=d-w;S=Ma(Ma({},E),{},{text:E.text.slice(A)}),E=Ma(Ma({},E),{},{text:E.text.slice(0,A)})}if(h>w){var B=h-w;y=Ma(Ma({},E),{},{text:E.text.slice(0,B)}),E=Ma(Ma({},E),{},{text:E.text.slice(B)})}Object.assign(E,i),y&&a.push(y),a.push(E),S&&a.push(S)}n=a}return n}},G4=e=>e.selection?e.selection:e.children.length>0?k.end(e,[]):[0],T0=(e,t)=>{var[n]=k.node(e,t);return r=>r===n},$4=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!n,i=n?yL(t):t,o=_t.None,s=_t.None,a=0,f=null,h=null;for(var d of i){var p=d.codePointAt(0);if(!p)break;var v=ML(d,p);if([o,s]=r?[s,v]:[v,o],Wd(o,_t.ZWJ)&&Wd(s,_t.ExtPict)&&(r?f=q9(t.substring(0,a)):f=q9(t.substring(0,t.length-a)),!f)||Wd(o,_t.RI)&&Wd(s,_t.RI)&&(h!==null?h=!h:r?h=!0:h=FL(t.substring(0,t.length-a)),!h)||o!==_t.None&&s!==_t.None&&OL(o,s))break;a+=d.length}return a||1},dL=/\s/,gL=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,pL=/['\u2018\u2019]/,mL=function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,i=!1;t.length>0;){var o=$4(t,n),[s,a]=W4(t,o,n);if(vL(s,a,n))i=!0,r+=o;else if(!i)r+=o;else break;t=a}return r},W4=(e,t,n)=>{if(n){var r=e.length-t;return[e.slice(r,e.length),e.slice(0,r)]}return[e.slice(0,t),e.slice(t)]},vL=function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(dL.test(t))return!1;if(pL.test(t)){var i=$4(n,r),[o,s]=W4(n,i,r);if(e(o,s,r))return!0}return!gL.test(t)},yL=function*(t){for(var n=t.length-1,r=0;r<t.length;r++){var i=t.charAt(n-r);if(CL(i.charCodeAt(0))){var o=t.charAt(n-r-1);if(wL(o.charCodeAt(0))){yield o+i,r++;continue}}yield i}},wL=e=>e>=55296&&e<=56319,CL=e=>e>=56320&&e<=57343,_t;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(_t||(_t={}));var xL=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,EL=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,PL=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,SL=/^[\u1100-\u115F\uA960-\uA97C]$/,DL=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,TL=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,AL=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,BL=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,RL=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,ML=(e,t)=>{var n=_t.Any;return e.search(xL)!==-1&&(n|=_t.Extend),t===8205&&(n|=_t.ZWJ),t>=127462&&t<=127487&&(n|=_t.RI),e.search(EL)!==-1&&(n|=_t.Prepend),e.search(PL)!==-1&&(n|=_t.SpacingMark),e.search(SL)!==-1&&(n|=_t.L),e.search(DL)!==-1&&(n|=_t.V),e.search(TL)!==-1&&(n|=_t.T),e.search(AL)!==-1&&(n|=_t.LV),e.search(BL)!==-1&&(n|=_t.LVT),e.search(RL)!==-1&&(n|=_t.ExtPict),n};function Wd(e,t){return(e&t)!==0}var bL=[[_t.L,_t.L|_t.V|_t.LV|_t.LVT],[_t.LV|_t.V,_t.V|_t.T],[_t.LVT|_t.T,_t.T],[_t.Any,_t.Extend|_t.ZWJ],[_t.Any,_t.SpacingMark],[_t.Prepend,_t.Any],[_t.ZWJ,_t.ExtPict],[_t.RI,_t.RI]];function OL(e,t){return bL.findIndex(n=>Wd(e,n[0])&&Wd(t,n[1]))===-1}var IL=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,q9=e=>e.search(IL)!==-1,kL=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,FL=e=>{var t=e.match(kL);if(t===null)return!1;var n=t[0].length/2;return n%2===1},LL={delete(e,t){e.delete(t)},insertFragment(e,t,n){e.insertFragment(t,n)},insertText(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};k.withoutNormalizing(e,()=>{var{voids:r=!1}=n,{at:i=G4(e)}=n;if(q.isPath(i)&&(i=k.range(e,i)),Se.isRange(i))if(Se.isCollapsed(i))i=i.anchor;else{var o=Se.end(i);if(!r&&k.void(e,{at:o}))return;var s=Se.start(i),a=k.pointRef(e,s),f=k.pointRef(e,o);Oe.delete(e,{at:i,voids:r});var h=a.unref(),d=f.unref();i=h||d,Oe.setSelection(e,{anchor:i,focus:i})}if(!(!r&&k.void(e,{at:i})||k.elementReadOnly(e,{at:i}))){var{path:p,offset:v}=i;t.length>0&&e.apply({type:"insert_text",path:p,offset:v,text:t})}})}};function Z9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Y2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z9(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Oe=Y2(Y2(Y2(Y2({},tL),nL),rL),LL),_L=(e,t)=>{for(var n of k.pathRefs(e))YF.transform(n,t);for(var r of k.pointRefs(e))qF.transform(r,t);for(var i of k.rangeRefs(e))ZF.transform(i,t);var o=K3.get(e)||[],s=Y3.get(e)||new Set,a,f,h=E=>{if(E){var y=E.join(",");f.has(y)||(f.add(y),a.push(E))}};if(q.operationCanTransformPath(t)){a=[],f=new Set;for(var d of o){var p=q.transform(d,t);h(p)}}else a=o,f=s;var v=e.getDirtyPaths(t);for(var w of v)h(w);K3.set(e,a),Y3.set(e,f),Oe.transform(e,t),e.operations.push(t),k.normalize(e,{operation:t}),t.type==="set_selection"&&(e.marks=null),vg.get(e)||(vg.set(e,!0),Promise.resolve().then(()=>{vg.set(e,!1),e.onChange({operation:t}),e.operations=[]}))},NL=(e,t)=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":{var{path:n}=t;return q.levels(n)}case"insert_node":{var{node:r,path:i}=t,o=q.levels(i),s=st.isText(r)?[]:Array.from(We.nodes(r),te=>{var[,Ee]=te;return i.concat(Ee)});return[...o,...s]}case"merge_node":{var{path:a}=t,f=q.ancestors(a),h=q.previous(a);return[...f,h]}case"move_node":{var{path:d,newPath:p}=t;if(q.equals(d,p))return[];var v=[],w=[];for(var E of q.ancestors(d)){var y=q.transform(E,t);v.push(y)}for(var S of q.ancestors(p)){var A=q.transform(S,t);w.push(A)}var B=w[w.length-1],R=p[p.length-1],_=B.concat(R);return[...v,...w,_]}case"remove_node":{var{path:F}=t,j=q.ancestors(F);return[...j]}case"split_node":{var{path:z}=t,Q=q.levels(z),se=q.next(z);return[...Q,se]}default:return[]}},HL=e=>{var{selection:t}=e;return t?We.fragment(e,t):[]},GL=(e,t)=>{var[n,r]=t;if(!st.isText(n)){if(rt.isElement(n)&&n.children.length===0){var i={text:""};Oe.insertNodes(e,i,{at:r.concat(0),voids:!0});return}for(var o=k.isEditor(n)?!1:rt.isElement(n)&&(e.isInline(n)||n.children.length===0||st.isText(n.children[0])||e.isInline(n.children[0])),s=0,a=0;a<n.children.length;a++,s++){var f=We.get(e,r);if(!st.isText(f)){var h=f.children[s],d=f.children[s-1],p=a===n.children.length-1,v=st.isText(h)||rt.isElement(h)&&e.isInline(h);if(v!==o)Oe.removeNodes(e,{at:r.concat(s),voids:!0}),s--;else if(rt.isElement(h)){if(e.isInline(h)){if(d==null||!st.isText(d)){var w={text:""};Oe.insertNodes(e,w,{at:r.concat(s),voids:!0}),s++}else if(p){var E={text:""};Oe.insertNodes(e,E,{at:r.concat(s+1),voids:!0}),s++}}}else d!=null&&st.isText(d)&&(st.equals(h,d,{loose:!0})?(Oe.mergeNodes(e,{at:r.concat(s),voids:!0}),s--):d.text===""?(Oe.removeNodes(e,{at:r.concat(s-1),voids:!0}),s--):h.text===""&&(Oe.removeNodes(e,{at:r.concat(s),voids:!0}),s--))}}}},$L=(e,t)=>{var{iteration:n,initialDirtyPathsLength:r}=t,i=r*42;if(n>i)throw new Error("Could not completely normalize the editor after ".concat(i," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},WL=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:i="lowest",at:o=t.selection,match:s}=n;if(o){var a=k.path(t,o),f=i==="lowest";for(var[h,d]of k.levels(t,{at:a,voids:r,match:s,reverse:f}))if(!st.isText(h)){if(Se.isRange(o)){if(q.isAncestor(d,o.anchor.path)&&q.isAncestor(d,o.focus.path))return[h,d]}else if(!q.equals(a,d))return[h,d]}}};function Q9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function J9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q9(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var jL=(e,t,n)=>{var{selection:r}=e;if(r){var i=(p,v)=>{if(!st.isText(p))return!1;var[w,E]=k.parent(e,v);return!e.isVoid(w)||e.markableVoid(w)},o=Se.isExpanded(r),s=!1;if(!o){var[a,f]=k.node(e,r);if(a&&i(a,f)){var[h]=k.parent(e,f);s=h&&e.markableVoid(h)}}if(o||s)Oe.setNodes(e,{[t]:n},{match:i,split:!0,voids:!0});else{var d=J9(J9({},k.marks(e)||{}),{},{[t]:n});e.marks=d,vg.get(e)||e.onChange()}}};function ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ew(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ew(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var zL=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=k.point(t,n,{edge:"end"}),o=k.end(t,[]),s={anchor:i,focus:o},{distance:a=1}=r,f=0,h;for(var d of k.positions(t,tw(tw({},r),{},{at:s}))){if(f>a)break;f!==0&&(h=d),f++}return h};function nw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nw(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var VL=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=k.start(t,[]),o=k.point(t,n,{edge:"start"}),s={anchor:i,focus:o},{distance:a=1}=r,f=0,h;for(var d of k.positions(t,rw(rw({},r),{},{at:s,reverse:!0}))){if(f>a)break;f!==0&&(h=d),f++}return h},UL=(e,t)=>{var{selection:n}=e;n&&Se.isCollapsed(n)&&Oe.delete(e,{unit:t,reverse:!0})},XL=(e,t)=>{var{selection:n}=e;n&&Se.isCollapsed(n)&&Oe.delete(e,{unit:t})},KL=function(t){var{direction:n="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t;r&&Se.isExpanded(r)&&Oe.delete(t,{reverse:n==="backward"})},YL=(e,t)=>[k.start(e,t),k.end(e,t)];function iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ow(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var qL=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k.above(t,ow(ow({},n),{},{match:r=>rt.isElement(r)&&k.isElementReadOnly(t,r)}))},ZL=(e,t)=>k.point(e,t,{edge:"end"}),QL=(e,t)=>{var n=k.path(e,t,{edge:"start"});return k.node(e,n)},JL=(e,t)=>{var n=k.range(e,t);return We.fragment(e,n)};function sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var e_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k.above(t,uw(uw({},n),{},{match:r=>rt.isElement(r)&&k.isVoid(t,r)}))},t_=(e,t)=>t.children.some(n=>rt.isElement(n)&&k.isBlock(e,n)),n_=(e,t)=>t.children.some(n=>st.isText(n)||k.isInline(e,n)),r_=(e,t)=>We.has(e,t),i_=(e,t)=>t.children.every(n=>st.isText(n)),o_=e=>{Oe.splitNodes(e,{always:!0})},s_=(e,t,n)=>{Oe.insertNodes(e,t,n)},u_=e=>{Oe.splitNodes(e,{always:!0})};function aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function a_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var l_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i,marks:o}=t;if(i){if(o){var s=a_({text:n},o);Oe.insertNodes(t,s,{at:r.at,voids:r.voids})}else Oe.insertText(t,n,r);t.marks=null}},c_=(e,t)=>!e.isInline(t),f_=(e,t,n)=>k.isStart(e,t,n)||k.isEnd(e,t,n),h_=(e,t)=>{var{children:n}=t,[r]=n;return n.length===0||n.length===1&&st.isText(r)&&r.text===""&&!e.isVoid(t)},d_=(e,t,n)=>{var r=k.end(e,n);return Yt.equals(t,r)},g_=e=>{var t=MP.get(e);return t===void 0?!0:t},p_=(e,t,n)=>{if(t.offset!==0)return!1;var r=k.start(e,n);return Yt.equals(t,r)},m_=(e,t)=>{var n=k.path(e,t,{edge:"end"});return k.node(e,n)},v_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=k.path(t,n,r),o=We.leaf(t,i);return[o,i]};function y_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,reverse:r=!1,voids:i=!1}=t,{match:o}=t;if(o==null&&(o=()=>!0),!!n){var s=[],a=k.path(e,n);for(var[f,h]of We.levels(e,a))if(o(f,h)&&(s.push([f,h]),!i&&rt.isElement(f)&&k.isVoid(e,f)))break;r&&s.reverse(),yield*s}}()}var w_=["text"],C_=["text"],x_=function(t){var{marks:n,selection:r}=t;if(!r)return null;var{anchor:i,focus:o}=r;if(n)return n;if(Se.isExpanded(r)){var s=k.isEnd(t,i,i.path);if(s){var a=k.after(t,i);a&&(i=a)}var[f]=k.nodes(t,{match:st.isText,at:{anchor:i,focus:o}});if(f){var[h]=f,d=Wa(h,w_);return d}else return{}}var{path:p}=i,[v]=k.leaf(t,p);if(i.offset===0){var w=k.previous(t,{at:p,match:st.isText}),E=k.above(t,{match:_=>rt.isElement(_)&&k.isVoid(t,_)&&t.markableVoid(_)});if(!E){var y=k.above(t,{match:_=>rt.isElement(_)&&k.isBlock(t,_)});if(w&&y){var[S,A]=w,[,B]=y;q.isAncestor(B,A)&&(v=S)}}}var R=Wa(v,C_);return R},E_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection}=n;if(s){var a=k.after(t,s,{voids:i});if(a){var[,f]=k.last(t,[]),h=[a.path,f];if(q.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(o==null)if(q.isPath(s)){var[d]=k.parent(t,s);o=v=>d.children.includes(v)}else o=()=>!0;var[p]=k.nodes(t,{at:h,match:o,mode:r,voids:i});return p}}},P_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=k.path(t,n,r),o=We.get(t,i);return[o,i]};function S_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,mode:r="all",universal:i=!1,reverse:o=!1,voids:s=!1,ignoreNonSelectable:a=!1}=t,{match:f}=t;if(f||(f=()=>!0),!!n){var h,d;if(cL.isSpan(n))h=n[0],d=n[1];else{var p=k.path(e,n,{edge:"start"}),v=k.path(e,n,{edge:"end"});h=o?v:p,d=o?p:v}var w=We.nodes(e,{reverse:o,from:h,to:d,pass:_=>{var[F]=_;return rt.isElement(F)?!!(!s&&(k.isVoid(e,F)||k.isElementReadOnly(e,F))||a&&!k.isSelectable(e,F)):!1}}),E=[],y;for(var[S,A]of w)if(!(a&&rt.isElement(S)&&!k.isSelectable(e,S))){var B=y&&q.compare(A,y[1])===0;if(!(r==="highest"&&B)){if(!f(S,A)){if(i&&!B&&st.isText(S))return;continue}if(r==="lowest"&&B){y=[S,A];continue}var R=r==="lowest"?y:[S,A];R&&(i?E.push(R):yield R),y=[S,A]}}r==="lowest"&&y&&(i?E.push(y):yield y),i&&(yield*E)}}()}var D_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:i}=n,o=d=>K3.get(d)||[],s=d=>Y3.get(d)||new Set,a=d=>{var p=o(d).pop(),v=p.join(",");return s(d).delete(v),p};if(k.isNormalizing(t)){if(r){var f=Array.from(We.nodes(t),d=>{var[,p]=d;return p}),h=new Set(f.map(d=>d.join(",")));K3.set(t,f),Y3.set(t,h)}o(t).length!==0&&k.withoutNormalizing(t,()=>{for(var d of o(t))if(We.has(t,d)){var p=k.node(t,d),[v,w]=p;rt.isElement(v)&&v.children.length===0&&t.normalizeNode(p,{operation:i})}for(var E=o(t),y=E.length,S=0;E.length!==0;){if(!t.shouldNormalize({dirtyPaths:E,iteration:S,initialDirtyPathsLength:y,operation:i}))return;var A=a(t);if(We.has(t,A)){var B=k.node(t,A);t.normalizeNode(B,{operation:i})}S++,E=o(t)}})}},T_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=k.path(t,n,r),o=q.parent(i),s=k.node(t,o);return s},A_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,f=k.pathRefs(t);return f.delete(o),o.current=null,a}},s=k.pathRefs(t);return s.add(o),o},B_=e=>{var t=_9.get(e);return t||(t=new Set,_9.set(e,t)),t},R_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:i,edge:o}=r;if(q.isPath(n)){if(o==="start"){var[,s]=We.first(t,n);n=s}else if(o==="end"){var[,a]=We.last(t,n);n=a}}return Se.isRange(n)&&(o==="start"?n=Se.start(n):o==="end"?n=Se.end(n):n=q.common(n.anchor.path,n.focus.path)),Yt.isPoint(n)&&(n=n.path),i!=null&&(n=n.slice(0,i)),n},M_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,f=k.pointRefs(t);return f.delete(o),o.current=null,a}},s=k.pointRefs(t);return s.add(o),o},b_=e=>{var t=N9.get(e);return t||(t=new Set,N9.set(e,t)),t},O_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:i="start"}=r;if(q.isPath(n)){var o;if(i==="end"){var[,s]=We.last(t,n);o=s}else{var[,a]=We.first(t,n);o=a}var f=We.get(t,o);if(!st.isText(f))throw new Error("Cannot get the ".concat(i," point in the node at path [").concat(n,"] because it has no ").concat(i," text node."));return{path:o,offset:i==="end"?f.text.length:0}}if(Se.isRange(n)){var[h,d]=Se.edges(n);return i==="start"?h:d}return n};function I_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,unit:r="offset",reverse:i=!1,voids:o=!1,ignoreNonSelectable:s=!1}=t;if(!n)return;var a=k.range(e,n),[f,h]=Se.edges(a),d=i?h:f,p=!1,v="",w=0,E=0,y=0;for(var[S,A]of k.nodes(e,{at:n,reverse:i,voids:o,ignoreNonSelectable:s})){if(rt.isElement(S)){if(!o&&(e.isVoid(S)||e.isElementReadOnly(S))){yield k.start(e,A);continue}if(e.isInline(S))continue;if(k.hasInlines(e,S)){var B=q.isAncestor(A,h.path)?h:k.end(e,A),R=q.isAncestor(A,f.path)?f:k.start(e,A);v=k.string(e,{anchor:R,focus:B},{voids:o}),p=!0}}if(st.isText(S)){var _=q.equals(A,d.path);for(_?(E=i?d.offset:S.text.length-d.offset,y=d.offset):(E=S.text.length,y=i?E:0),(_||p||r==="offset")&&(yield{path:A,offset:y},p=!1);;){if(w===0){if(v==="")break;w=F(v,r,i),v=W4(v,w,i)[1]}if(y=i?y-w:y+w,E=E-w,E<0){w=-E;break}w=0,yield{path:A,offset:y}}}}function F(j,z,Q){return z==="character"?$4(j,Q):z==="word"?mL(j,Q):z==="line"||z==="block"?j.length:1}}()}var k_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection}=n;if(s){var a=k.before(t,s,{voids:i});if(a){var[,f]=k.first(t,[]),h=[a.path,f];if(q.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(o==null)if(q.isPath(s)){var[d]=k.parent(t,s);o=v=>d.children.includes(v)}else o=()=>!0;var[p]=k.nodes(t,{reverse:!0,at:h,match:o,mode:r,voids:i});return p}}},F_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:a}=o,f=k.rangeRefs(t);return f.delete(o),o.current=null,a}},s=k.rangeRefs(t);return s.add(o),o},L_=e=>{var t=H9.get(e);return t||(t=new Set,H9.set(e,t)),t},__=(e,t,n)=>{if(Se.isRange(t)&&!n)return t;var r=k.start(e,t),i=k.end(e,n||t);return{anchor:r,focus:i}};function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function N_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lw(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var H_=(e,t)=>{var{selection:n}=e;if(n){var r=(d,p)=>{if(!st.isText(d))return!1;var[v,w]=k.parent(e,p);return!e.isVoid(v)||e.markableVoid(v)},i=Se.isExpanded(n),o=!1;if(!i){var[s,a]=k.node(e,n);if(s&&r(s,a)){var[f]=k.parent(e,a);o=f&&e.markableVoid(f)}}if(i||o)Oe.unsetNodes(e,t,{match:r,split:!0,voids:!0});else{var h=N_({},k.marks(e)||{});delete h[t],e.marks=h,vg.get(e)||e.onChange()}}},G_=(e,t)=>{MP.set(e,t)},$_=(e,t)=>k.point(e,t,{edge:"start"}),W_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,o=k.range(t,n),[s,a]=Se.edges(o),f="";for(var[h,d]of k.nodes(t,{at:o,match:st.isText,voids:i})){var p=h.text;q.equals(d,a.path)&&(p=p.slice(0,a.offset)),q.equals(d,s.path)&&(p=p.slice(s.offset)),f+=p}return f},j_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,[o,s]=Se.edges(n);if(o.offset!==0||s.offset!==0||Se.isCollapsed(n)||q.hasPrevious(s.path))return n;var a=k.above(t,{at:s,match:E=>rt.isElement(E)&&k.isBlock(t,E),voids:i}),f=a?a[1]:[],h=k.start(t,o),d={anchor:h,focus:s},p=!0;for(var[v,w]of k.nodes(t,{at:d,match:st.isText,reverse:!0,voids:i})){if(p){p=!1;continue}if(v.text!==""||q.isBefore(w,f)){s={path:w,offset:v.text.length};break}}return{anchor:o,focus:s}},z_=(e,t)=>{var n=k.isNormalizing(e);k.setNormalizing(e,!1);try{t()}finally{k.setNormalizing(e,n)}k.normalize(e)},V_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k.withoutNormalizing(t,()=>{var r,i,{reverse:o=!1,unit:s="character",distance:a=1,voids:f=!1}=n,{at:h=t.selection,hanging:d=!1}=n;if(h){var p=!1;if(Se.isRange(h)&&Se.isCollapsed(h)&&(p=!0,h=h.anchor),Yt.isPoint(h)){var v=k.void(t,{at:h,mode:"highest"});if(!f&&v){var[,w]=v;h=w}else{var E={unit:s,distance:a},y=o?k.before(t,h,E)||k.start(t,[]):k.after(t,h,E)||k.end(t,[]);h={anchor:h,focus:y},d=!0}}if(q.isPath(h)){Oe.removeNodes(t,{at:h,voids:f});return}if(!Se.isCollapsed(h)){if(!d){var[,S]=Se.edges(h),A=k.end(t,[]);Yt.equals(S,A)||(h=k.unhangRange(t,h,{voids:f}))}var[B,R]=Se.edges(h),_=k.above(t,{match:lt=>rt.isElement(lt)&&k.isBlock(t,lt),at:B,voids:f}),F=k.above(t,{match:lt=>rt.isElement(lt)&&k.isBlock(t,lt),at:R,voids:f}),j=_&&F&&!q.equals(_[1],F[1]),z=q.equals(B.path,R.path),Q=f?null:(r=k.void(t,{at:B,mode:"highest"}))!==null&&r!==void 0?r:k.elementReadOnly(t,{at:B,mode:"highest"}),se=f?null:(i=k.void(t,{at:R,mode:"highest"}))!==null&&i!==void 0?i:k.elementReadOnly(t,{at:R,mode:"highest"});if(Q){var te=k.before(t,B);te&&_&&q.isAncestor(_[1],te.path)&&(B=te)}if(se){var Ee=k.after(t,R);Ee&&F&&q.isAncestor(F[1],Ee.path)&&(R=Ee)}var ie=[],ce;for(var me of k.nodes(t,{at:h,voids:f})){var[Ce,Fe]=me;ce&&q.compare(Fe,ce)===0||(!f&&rt.isElement(Ce)&&(k.isVoid(t,Ce)||k.isElementReadOnly(t,Ce))||!q.isCommon(Fe,B.path)&&!q.isCommon(Fe,R.path))&&(ie.push(me),ce=Fe)}var Ae=Array.from(ie,lt=>{var[,yt]=lt;return k.pathRef(t,yt)}),pe=k.pointRef(t,B),ue=k.pointRef(t,R),ye="";if(!z&&!Q){var X=pe.current,[Pe]=k.leaf(t,X),{path:ut}=X,{offset:Me}=B,K=Pe.text.slice(Me);K.length>0&&(t.apply({type:"remove_text",path:ut,offset:Me,text:K}),ye=K)}if(Ae.reverse().map(lt=>lt.unref()).filter(lt=>lt!==null).forEach(lt=>Oe.removeNodes(t,{at:lt,voids:f})),!se){var fe=ue.current,[we]=k.leaf(t,fe),{path:De}=fe,Ke=z?B.offset:0,Ue=we.text.slice(Ke,R.offset);Ue.length>0&&(t.apply({type:"remove_text",path:De,offset:Ke,text:Ue}),ye=Ue)}!z&&j&&ue.current&&pe.current&&Oe.mergeNodes(t,{at:ue.current,hanging:!0,voids:f}),p&&o&&s==="character"&&ye.length>1&&ye.match(/[\u0E00-\u0E7F]+/)&&Oe.insertText(t,ye.slice(0,ye.length-a));var Rt=pe.unref(),It=ue.unref(),St=o?Rt||It:It||Rt;n.at==null&&St&&Oe.select(t,St)}}})},U_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};k.withoutNormalizing(t,()=>{var{hanging:i=!1,voids:o=!1}=r,{at:s=G4(t)}=r;if(n.length){if(Se.isRange(s))if(i||(s=k.unhangRange(t,s,{voids:o})),Se.isCollapsed(s))s=s.anchor;else{var[,a]=Se.edges(s);if(!o&&k.void(t,{at:a}))return;var f=k.pointRef(t,a);Oe.delete(t,{at:s}),s=f.unref()}else q.isPath(s)&&(s=k.start(t,s));if(!(!o&&k.void(t,{at:s}))){var h=k.above(t,{at:s,match:Me=>rt.isElement(Me)&&k.isInline(t,Me),mode:"highest",voids:o});if(h){var[,d]=h;if(k.isEnd(t,s,d)){var p=k.after(t,d);s=p}else if(k.isStart(t,s,d)){var v=k.before(t,d);s=v}}var w=k.above(t,{match:Me=>rt.isElement(Me)&&k.isBlock(t,Me),at:s,voids:o}),[,E]=w,y=k.isStart(t,s,E),S=k.isEnd(t,s,E),A=y&&S,B=!y||y&&S,R=!S,[,_]=We.first({children:n},[]),[,F]=We.last({children:n},[]),j=[],z=Me=>{var[K,fe]=Me,we=fe.length===0;return we?!1:A?!0:!(B&&q.isAncestor(fe,_)&&rt.isElement(K)&&!t.isVoid(K)&&!t.isInline(K)||R&&q.isAncestor(fe,F)&&rt.isElement(K)&&!t.isVoid(K)&&!t.isInline(K))};for(var Q of We.nodes({children:n},{pass:z}))z(Q)&&j.push(Q);var se=[],te=[],Ee=[],ie=!0,ce=!1;for(var[me]of j)rt.isElement(me)&&!t.isInline(me)?(ie=!1,ce=!0,te.push(me)):ie?se.push(me):Ee.push(me);var[Ce]=k.nodes(t,{at:s,match:Me=>st.isText(Me)||k.isInline(t,Me),mode:"highest",voids:o}),[,Fe]=Ce,Ae=k.isStart(t,s,Fe),pe=k.isEnd(t,s,Fe),ue=k.pathRef(t,S&&!Ee.length?q.next(E):E),ye=k.pathRef(t,pe?q.next(Fe):Fe);Oe.splitNodes(t,{at:s,match:Me=>ce?rt.isElement(Me)&&k.isBlock(t,Me):st.isText(Me)||k.isInline(t,Me),mode:ce?"lowest":"highest",always:ce&&(!y||se.length>0)&&(!S||Ee.length>0),voids:o});var X=k.pathRef(t,!Ae||Ae&&pe?q.next(Fe):Fe);if(Oe.insertNodes(t,se,{at:X.current,match:Me=>st.isText(Me)||k.isInline(t,Me),mode:"highest",voids:o}),A&&!se.length&&te.length&&!Ee.length&&Oe.delete(t,{at:E,voids:o}),Oe.insertNodes(t,te,{at:ue.current,match:Me=>rt.isElement(Me)&&k.isBlock(t,Me),mode:"lowest",voids:o}),Oe.insertNodes(t,Ee,{at:ye.current,match:Me=>st.isText(Me)||k.isInline(t,Me),mode:"highest",voids:o}),!r.at){var Pe;if(Ee.length>0&&ye.current?Pe=q.previous(ye.current):te.length>0&&ue.current?Pe=q.previous(ue.current):X.current&&(Pe=q.previous(X.current)),Pe){var ut=k.end(t,Pe);Oe.select(t,ut)}}X.unref(),ue.unref(),ye.unref()}}})},X_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=n,{selection:i}=t;if(i){if(r==="anchor")Oe.select(t,i.anchor);else if(r==="focus")Oe.select(t,i.focus);else if(r==="start"){var[o]=Se.edges(i);Oe.select(t,o)}else if(r==="end"){var[,s]=Se.edges(i);Oe.select(t,s)}}else return},K_=e=>{var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},Y_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t,{distance:i=1,unit:o="character",reverse:s=!1}=n,{edge:a=null}=n;if(r){a==="start"&&(a=Se.isBackward(r)?"focus":"anchor"),a==="end"&&(a=Se.isBackward(r)?"anchor":"focus");var{anchor:f,focus:h}=r,d={distance:i,unit:o,ignoreNonSelectable:!0},p={};if(a==null||a==="anchor"){var v=s?k.before(t,f,d):k.after(t,f,d);v&&(p.anchor=v)}if(a==null||a==="focus"){var w=s?k.before(t,h,d):k.after(t,h,d);w&&(p.focus=w)}Oe.setSelection(t,p)}},q_=(e,t)=>{var{selection:n}=e;if(t=k.range(e,t),n){Oe.setSelection(e,t);return}if(!Se.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Ur.stringify(t)));e.apply({type:"set_selection",properties:n,newProperties:t})};function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Z_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i}=t,{edge:o="both"}=r;if(i){o==="start"&&(o=Se.isBackward(i)?"focus":"anchor"),o==="end"&&(o=Se.isBackward(i)?"anchor":"focus");var{anchor:s,focus:a}=i,f=o==="anchor"?s:a;Oe.setSelection(t,{[o==="anchor"?"anchor":"focus"]:fw(fw({},f),n)})}},Q_=(e,t)=>{var{selection:n}=e,r={},i={};if(n){for(var o in t)(o==="anchor"&&t.anchor!=null&&!Yt.equals(t.anchor,n.anchor)||o==="focus"&&t.focus!=null&&!Yt.equals(t.focus,n.focus)||o!=="anchor"&&o!=="focus"&&t[o]!==n[o])&&(r[o]=n[o],i[o]=t[o]);Object.keys(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:i})}},J_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};k.withoutNormalizing(t,()=>{var{hanging:i=!1,voids:o=!1,mode:s="lowest"}=r,{at:a,match:f,select:h}=r;if(We.isNode(n)&&(n=[n]),n.length!==0){var[d]=n;if(a||(a=G4(t),h!==!1&&(h=!0)),h==null&&(h=!1),Se.isRange(a))if(i||(a=k.unhangRange(t,a,{voids:o})),Se.isCollapsed(a))a=a.anchor;else{var[,p]=Se.edges(a),v=k.pointRef(t,p);Oe.delete(t,{at:a}),a=v.unref()}if(Yt.isPoint(a)){f==null&&(st.isText(d)?f=z=>st.isText(z):t.isInline(d)?f=z=>st.isText(z)||k.isInline(t,z):f=z=>rt.isElement(z)&&k.isBlock(t,z));var[w]=k.nodes(t,{at:a.path,match:f,mode:s,voids:o});if(w){var[,E]=w,y=k.pathRef(t,E),S=k.isEnd(t,a,E);Oe.splitNodes(t,{at:a,match:f,mode:s,voids:o});var A=y.unref();a=S?q.next(A):A}else return}var B=q.parent(a),R=a[a.length-1];if(!(!o&&k.void(t,{at:B}))){for(var _ of n){var F=B.concat(R);R++,t.apply({type:"insert_node",path:F,node:_}),a=q.next(a)}if(a=q.previous(a),h){var j=k.end(t,a);j&&Oe.select(t,j)}}}})},eN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k.withoutNormalizing(t,()=>{var{at:r=t.selection,mode:i="lowest",voids:o=!1}=n,{match:s}=n;if(s==null&&(s=q.isPath(r)?T0(t,r):_=>rt.isElement(_)&&k.isBlock(t,_)),!!r){var a=k.nodes(t,{at:r,match:s,mode:i,voids:o}),f=Array.from(a,_=>{var[,F]=_;return k.pathRef(t,F)});for(var h of f){var d=h.unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var p=k.node(t,q.parent(d)),[v,w]=p,E=d[d.length-1],{length:y}=v.children;if(y===1){var S=q.next(w);Oe.moveNodes(t,{at:d,to:S,voids:o}),Oe.removeNodes(t,{at:w,voids:o})}else if(E===0)Oe.moveNodes(t,{at:d,to:w,voids:o});else if(E===y-1){var A=q.next(w);Oe.moveNodes(t,{at:d,to:A,voids:o})}else{var B=q.next(d),R=q.next(w);Oe.splitNodes(t,{at:B,voids:o}),Oe.moveNodes(t,{at:d,to:R,voids:o})}}}})},tN=["text"],nN=["children"],OP=(e,t)=>{if(rt.isElement(t)){var n=t;return k.isVoid(e,t)?!0:n.children.length===1?OP(e,n.children[0]):!1}else return!k.isEditor(t)},rN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k.withoutNormalizing(t,()=>{var{match:r,at:i=t.selection}=n,{hanging:o=!1,voids:s=!1,mode:a="lowest"}=n;if(i){if(r==null)if(q.isPath(i)){var[f]=k.parent(t,i);r=te=>f.children.includes(te)}else r=te=>rt.isElement(te)&&k.isBlock(t,te);if(!o&&Se.isRange(i)&&(i=k.unhangRange(t,i,{voids:s})),Se.isRange(i))if(Se.isCollapsed(i))i=i.anchor;else{var[,h]=Se.edges(i),d=k.pointRef(t,h);Oe.delete(t,{at:i}),i=d.unref(),n.at==null&&Oe.select(t,i)}var[p]=k.nodes(t,{at:i,match:r,voids:s,mode:a}),v=k.previous(t,{at:i,match:r,voids:s,mode:a});if(!(!p||!v)){var[w,E]=p,[y,S]=v;if(!(E.length===0||S.length===0)){var A=q.next(S),B=q.common(E,S),R=q.isSibling(E,S),_=Array.from(k.levels(t,{at:E}),te=>{var[Ee]=te;return Ee}).slice(B.length).slice(0,-1),F=k.above(t,{at:E,mode:"highest",match:te=>_.includes(te)&&OP(t,te)}),j=F&&k.pathRef(t,F[1]),z,Q;if(st.isText(w)&&st.isText(y)){var se=Wa(w,tN);Q=y.text.length,z=se}else if(rt.isElement(w)&&rt.isElement(y)){var se=Wa(w,nN);Q=y.children.length,z=se}else throw new Error("Cannot merge the node at path [".concat(E,"] with the previous sibling because it is not the same kind: ").concat(Ur.stringify(w)," ").concat(Ur.stringify(y)));R||Oe.moveNodes(t,{at:E,to:A,voids:s}),j&&Oe.removeNodes(t,{at:j.current,voids:s}),rt.isElement(y)&&k.isEmpty(t,y)||st.isText(y)&&y.text===""&&S[S.length-1]!==0?Oe.removeNodes(t,{at:S,voids:s}):t.apply({type:"merge_node",path:A,position:Q,properties:z}),j&&j.unref()}}}})},iN=(e,t)=>{k.withoutNormalizing(e,()=>{var{to:n,at:r=e.selection,mode:i="lowest",voids:o=!1}=t,{match:s}=t;if(r){s==null&&(s=q.isPath(r)?T0(e,r):w=>rt.isElement(w)&&k.isBlock(e,w));var a=k.pathRef(e,n),f=k.nodes(e,{at:r,match:s,mode:i,voids:o}),h=Array.from(f,w=>{var[,E]=w;return k.pathRef(e,E)});for(var d of h){var p=d.unref(),v=a.current;p.length!==0&&e.apply({type:"move_node",path:p,newPath:v}),a.current&&q.isSibling(v,p)&&q.isAfter(v,p)&&(a.current=q.next(a.current))}a.unref()}})},oN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k.withoutNormalizing(t,()=>{var{hanging:r=!1,voids:i=!1,mode:o="lowest"}=n,{at:s=t.selection,match:a}=n;if(s){a==null&&(a=q.isPath(s)?T0(t,s):w=>rt.isElement(w)&&k.isBlock(t,w)),!r&&Se.isRange(s)&&(s=k.unhangRange(t,s,{voids:i}));var f=k.nodes(t,{at:s,match:a,mode:o,voids:i}),h=Array.from(f,w=>{var[,E]=w;return k.pathRef(t,E)});for(var d of h){var p=d.unref();if(p){var[v]=k.node(t,p);t.apply({type:"remove_node",path:p,node:v})}}}})},sN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};k.withoutNormalizing(t,()=>{var{match:i,at:o=t.selection,compare:s,merge:a}=r,{hanging:f=!1,mode:h="lowest",split:d=!1,voids:p=!1}=r;if(o){if(i==null&&(i=q.isPath(o)?T0(t,o):Q=>rt.isElement(Q)&&k.isBlock(t,Q)),!f&&Se.isRange(o)&&(o=k.unhangRange(t,o,{voids:p})),d&&Se.isRange(o)){if(Se.isCollapsed(o)&&k.leaf(t,o.anchor)[0].text.length>0)return;var v=k.rangeRef(t,o,{affinity:"inward"}),[w,E]=Se.edges(o),y=h==="lowest"?"lowest":"highest",S=k.isEnd(t,E,E.path);Oe.splitNodes(t,{at:E,match:i,mode:y,voids:p,always:!S});var A=k.isStart(t,w,w.path);Oe.splitNodes(t,{at:w,match:i,mode:y,voids:p,always:!A}),o=v.unref(),r.at==null&&Oe.select(t,o)}s||(s=(Q,se)=>Q!==se);for(var[B,R]of k.nodes(t,{at:o,match:i,mode:h,voids:p})){var _={},F={};if(R.length!==0){var j=!1;for(var z in n)z==="children"||z==="text"||s(n[z],B[z])&&(j=!0,B.hasOwnProperty(z)&&(_[z]=B[z]),a?n[z]!=null&&(F[z]=a(B[z],n[z])):n[z]!=null&&(F[z]=n[z]));j&&t.apply({type:"set_node",path:R,properties:_,newProperties:F})}}}})},uN=(e,t)=>{if(Se.isCollapsed(t))return t.anchor;var[,n]=Se.edges(t),r=k.pointRef(e,n);return Oe.delete(e,{at:t}),r.unref()},aN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k.withoutNormalizing(t,()=>{var{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection,height:a=0,always:f=!1}=n;if(o==null&&(o=ue=>rt.isElement(ue)&&k.isBlock(t,ue)),Se.isRange(s)&&(s=uN(t,s)),q.isPath(s)){var h=s,d=k.point(t,h),[p]=k.parent(t,h);o=ue=>ue===p,a=d.path.length-h.length+1,s=d,f=!0}if(s){var v=k.pointRef(t,s,{affinity:"backward"}),w;try{var[E]=k.nodes(t,{at:s,match:o,mode:r,voids:i});if(!E)return;var y=k.void(t,{at:s,mode:"highest"}),S=0;if(!i&&y){var[A,B]=y;if(rt.isElement(A)&&t.isInline(A)){var R=k.after(t,B);if(!R){var _={text:""},F=q.next(B);Oe.insertNodes(t,_,{at:F,voids:i}),R=k.point(t,F)}s=R,f=!0}var j=s.path.length-B.length;a=j+1,f=!0}w=k.pointRef(t,s);var z=s.path.length-a,[,Q]=E,se=s.path.slice(0,z),te=a===0?s.offset:s.path[z]+S;for(var[Ee,ie]of k.levels(t,{at:se,reverse:!0,voids:i})){var ce=!1;if(ie.length<Q.length||ie.length===0||!i&&rt.isElement(Ee)&&k.isVoid(t,Ee))break;var me=v.current,Ce=k.isEnd(t,me,ie);if(f||!v||!k.isEdge(t,me,ie)){ce=!0;var Fe=We.extractProps(Ee);t.apply({type:"split_node",path:ie,position:te,properties:Fe})}te=ie[ie.length-1]+(ce||Ce?1:0)}if(n.at==null){var Ae=w.current||k.end(t,[]);Oe.select(t,Ae)}}finally{var pe;v.unref(),(pe=w)===null||pe===void 0||pe.unref()}}})},lN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(n)||(n=[n]);var i={};for(var o of n)i[o]=null;Oe.setNodes(t,i,r)},cN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k.withoutNormalizing(t,()=>{var{mode:r="lowest",split:i=!1,voids:o=!1}=n,{at:s=t.selection,match:a}=n;if(s){a==null&&(a=q.isPath(s)?T0(t,s):w=>rt.isElement(w)&&k.isBlock(t,w)),q.isPath(s)&&(s=k.range(t,s));var f=Se.isRange(s)?k.rangeRef(t,s):null,h=k.nodes(t,{at:s,match:a,mode:r,voids:o}),d=Array.from(h,w=>{var[,E]=w;return k.pathRef(t,E)}).reverse(),p=function(){var E=v.unref(),[y]=k.node(t,E),S=k.range(t,E);i&&f&&(S=Se.intersection(f.current,S)),Oe.liftNodes(t,{at:S,match:A=>rt.isAncestor(y)&&y.children.includes(A),voids:o})};for(var v of d)p();f&&f.unref()}})};function hw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function dw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hw(Object(n),!0).forEach(function(r){ji(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var fN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};k.withoutNormalizing(t,()=>{var{mode:i="lowest",split:o=!1,voids:s=!1}=r,{match:a,at:f=t.selection}=r;if(f){if(a==null&&(q.isPath(f)?a=T0(t,f):t.isInline(n)?a=S=>rt.isElement(S)&&k.isInline(t,S)||st.isText(S):a=S=>rt.isElement(S)&&k.isBlock(t,S)),o&&Se.isRange(f)){var[h,d]=Se.edges(f),p=k.rangeRef(t,f,{affinity:"inward"});Oe.splitNodes(t,{at:d,match:a,voids:s}),Oe.splitNodes(t,{at:h,match:a,voids:s}),f=p.unref(),r.at==null&&Oe.select(t,f)}var v=Array.from(k.nodes(t,{at:f,match:t.isInline(n)?S=>rt.isElement(S)&&k.isBlock(t,S):S=>k.isEditor(S),mode:"lowest",voids:s})),w=function(){var A=Se.isRange(f)?Se.intersection(f,k.range(t,y)):f;if(!A)return 0;var B=Array.from(k.nodes(t,{at:A,match:a,mode:i,voids:s}));if(B.length>0){var[R]=B,_=B[B.length-1],[,F]=R,[,j]=_;if(F.length===0&&j.length===0)return 0;var z=q.equals(F,j)?q.parent(F):q.common(F,j),Q=k.range(t,F,j),se=k.node(t,z),[te]=se,Ee=z.length+1,ie=q.next(j.slice(0,Ee)),ce=dw(dw({},n),{},{children:[]});Oe.insertNodes(t,ce,{at:ie,voids:s}),Oe.moveNodes(t,{at:Q,match:me=>rt.isAncestor(te)&&te.children.includes(me),to:ie.concat(0),voids:s})}},E;for(var[,y]of v)E=w()}})},hN=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _L(e,...r)},addMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return jL(e,...r)},deleteBackward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return UL(e,...r)},deleteForward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return XL(e,...r)},deleteFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return KL(e,...r)},getFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return HL(e,...r)},insertBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return o_(e,...r)},insertSoftBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return u_(e,...r)},insertFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return U_(e,...r)},insertNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return s_(e,...r)},insertText:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return l_(e,...r)},normalizeNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return GL(e,...r)},removeMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return H_(e,...r)},getDirtyPaths:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return NL(e,...r)},shouldNormalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $L(e,...r)},above:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return WL(e,...r)},after:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return zL(e,...r)},before:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return VL(e,...r)},collapse:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return X_(e,...r)},delete:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return V_(e,...r)},deselect:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return K_(e,...r)},edges:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return YL(e,...r)},elementReadOnly:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return qL(e,...r)},end:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ZL(e,...r)},first:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return QL(e,...r)},fragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return JL(e,...r)},getMarks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return x_(e,...r)},hasBlocks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t_(e,...r)},hasInlines:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return n_(e,...r)},hasPath:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r_(e,...r)},hasTexts:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return i_(e,...r)},insertNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return J_(e,...r)},isBlock:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return c_(e,...r)},isEdge:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return f_(e,...r)},isEmpty:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return h_(e,...r)},isEnd:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return d_(e,...r)},isNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return g_(e,...r)},isStart:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p_(e,...r)},last:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return m_(e,...r)},leaf:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return v_(e,...r)},levels:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return y_(e,...r)},liftNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return eN(e,...r)},mergeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return rN(e,...r)},move:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Y_(e,...r)},moveNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return iN(e,...r)},next:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return E_(e,...r)},node:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return P_(e,...r)},nodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return S_(e,...r)},normalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return D_(e,...r)},parent:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return T_(e,...r)},path:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return R_(e,...r)},pathRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return A_(e,...r)},pathRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return B_(e,...r)},point:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return O_(e,...r)},pointRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return M_(e,...r)},pointRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return b_(e,...r)},positions:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return I_(e,...r)},previous:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return k_(e,...r)},range:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return __(e,...r)},rangeRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return F_(e,...r)},rangeRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return L_(e,...r)},removeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return oN(e,...r)},select:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return q_(e,...r)},setNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return sN(e,...r)},setNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return G_(e,...r)},setPoint:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Z_(e,...r)},setSelection:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Q_(e,...r)},splitNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return aN(e,...r)},start:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $_(e,...r)},string:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return W_(e,...r)},unhangRange:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return j_(e,...r)},unsetNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return lN(e,...r)},unwrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return cN(e,...r)},void:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e_(e,...r)},withoutNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return z_(e,...r)},wrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return fN(e,...r)}};return e},q5,gw;function dN(){if(gw)return q5;gw=1,q5=i;var e="---",t="A-Za-z--------",n=new RegExp("^[^"+t+"]*["+e+"]"),r=new RegExp("^[^"+e+"]*["+t+"]");function i(o){return o=String(o||""),n.test(o)?"rtl":r.test(o)?"ltr":"neutral"}return q5}var gN=dN();const IP=uc(gN),pw=e=>typeof e=="object"&&e!=null&&e.nodeType===1,mw=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",q2=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return mw(n.overflowY,t)||mw(n.overflowX,t)||(r=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(e)}return!1},Z2=(e,t,n,r,i,o,s,a)=>o<e&&s>t||o>e&&s<t?0:o<=e&&a<=n||s>=t&&a>=n?o-e-r:s>t&&a<n||o<e&&a>n?s-t+i:0,pN=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},vw=(e,t)=>{var n,r,i,o;if(typeof document>"u")return[];const{scrollMode:s,block:a,inline:f,boundary:h,skipOverflowHiddenElements:d}=t,p=typeof h=="function"?h:Fe=>Fe!==h;if(!pw(e))throw new TypeError("Invalid target");const v=document.scrollingElement||document.documentElement,w=[];let E=e;for(;pw(E)&&p(E);){if(E=pN(E),E===v){w.push(E);break}E!=null&&E===document.body&&q2(E)&&!q2(document.documentElement)||E!=null&&q2(E,d)&&w.push(E)}const y=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,S=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:A,scrollY:B}=window,{height:R,width:_,top:F,right:j,bottom:z,left:Q}=e.getBoundingClientRect(),{top:se,right:te,bottom:Ee,left:ie}=(Fe=>{const Ae=window.getComputedStyle(Fe);return{top:parseFloat(Ae.scrollMarginTop)||0,right:parseFloat(Ae.scrollMarginRight)||0,bottom:parseFloat(Ae.scrollMarginBottom)||0,left:parseFloat(Ae.scrollMarginLeft)||0}})(e);let ce=a==="start"||a==="nearest"?F-se:a==="end"?z+Ee:F+R/2-se+Ee,me=f==="center"?Q+_/2-ie+te:f==="end"?j+te:Q-ie;const Ce=[];for(let Fe=0;Fe<w.length;Fe++){const Ae=w[Fe],{height:pe,width:ue,top:ye,right:X,bottom:Pe,left:ut}=Ae.getBoundingClientRect();if(s==="if-needed"&&F>=0&&Q>=0&&z<=S&&j<=y&&(Ae===v&&!q2(Ae)||F>=ye&&z<=Pe&&Q>=ut&&j<=X))return Ce;const Me=getComputedStyle(Ae),K=parseInt(Me.borderLeftWidth,10),fe=parseInt(Me.borderTopWidth,10),we=parseInt(Me.borderRightWidth,10),De=parseInt(Me.borderBottomWidth,10);let Ke=0,Ue=0;const Rt="offsetWidth"in Ae?Ae.offsetWidth-Ae.clientWidth-K-we:0,It="offsetHeight"in Ae?Ae.offsetHeight-Ae.clientHeight-fe-De:0,St="offsetWidth"in Ae?Ae.offsetWidth===0?0:ue/Ae.offsetWidth:0,lt="offsetHeight"in Ae?Ae.offsetHeight===0?0:pe/Ae.offsetHeight:0;if(v===Ae)Ke=a==="start"?ce:a==="end"?ce-S:a==="nearest"?Z2(B,B+S,S,fe,De,B+ce,B+ce+R,R):ce-S/2,Ue=f==="start"?me:f==="center"?me-y/2:f==="end"?me-y:Z2(A,A+y,y,K,we,A+me,A+me+_,_),Ke=Math.max(0,Ke+B),Ue=Math.max(0,Ue+A);else{Ke=a==="start"?ce-ye-fe:a==="end"?ce-Pe+De+It:a==="nearest"?Z2(ye,Pe,pe,fe,De+It,ce,ce+R,R):ce-(ye+pe/2)+It/2,Ue=f==="start"?me-ut-K:f==="center"?me-(ut+ue/2)+Rt/2:f==="end"?me-X+we+Rt:Z2(ut,X,ue,K,we+Rt,me,me+_,_);const{scrollLeft:yt,scrollTop:wn}=Ae;Ke=lt===0?0:Math.max(0,Math.min(wn+Ke/lt,Ae.scrollHeight-pe/lt+It)),Ue=St===0?0:Math.max(0,Math.min(yt+Ue/St,Ae.scrollWidth-ue/St+Rt)),ce+=wn-Ke,me+=yt-Ue}Ce.push({el:Ae,top:Ke,left:Ue})}return Ce},mN=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function vN(e,t){if(!e.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e))return;const n=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(e);if((i=>typeof i=="object"&&typeof i.behavior=="function")(t))return t.behavior(vw(e,t));const r=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:i,top:o,left:s}of vw(e,mN(t))){const a=o-n.top+n.bottom,f=s-n.left+n.right;i.scroll({top:a,left:f,behavior:r})}}var Mf=[],yN=function(){return Mf.some(function(e){return e.activeTargets.length>0})},wN=function(){return Mf.some(function(e){return e.skippedTargets.length>0})},yw="ResizeObserver loop completed with undelivered notifications.",CN=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:yw}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=yw),window.dispatchEvent(e)},Fg;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Fg||(Fg={}));var bf=function(e){return Object.freeze(e)},xN=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,bf(this)}return e}(),kP=function(){function e(t,n,r,i){return this.x=t,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,bf(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,i=t.top,o=t.right,s=t.bottom,a=t.left,f=t.width,h=t.height;return{x:n,y:r,top:i,right:o,bottom:s,left:a,width:f,height:h}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),j4=function(e){return e instanceof SVGElement&&"getBBox"in e},FP=function(e){if(j4(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||e.getClientRects().length)},ww=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},EN=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},yg=typeof window<"u"?window:{},Q2=new WeakMap,Cw=/auto|scroll/,PN=/^tb|vertical/,SN=/msie|trident/i.test(yg.navigator&&yg.navigator.userAgent),Ou=function(e){return parseFloat(e||"0")},Zd=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new xN((n?t:e)||0,(n?e:t)||0)},xw=bf({devicePixelContentBoxSize:Zd(),borderBoxSize:Zd(),contentBoxSize:Zd(),contentRect:new kP(0,0,0,0)}),LP=function(e,t){if(t===void 0&&(t=!1),Q2.has(e)&&!t)return Q2.get(e);if(FP(e))return Q2.set(e,xw),xw;var n=getComputedStyle(e),r=j4(e)&&e.ownerSVGElement&&e.getBBox(),i=!SN&&n.boxSizing==="border-box",o=PN.test(n.writingMode||""),s=!r&&Cw.test(n.overflowY||""),a=!r&&Cw.test(n.overflowX||""),f=r?0:Ou(n.paddingTop),h=r?0:Ou(n.paddingRight),d=r?0:Ou(n.paddingBottom),p=r?0:Ou(n.paddingLeft),v=r?0:Ou(n.borderTopWidth),w=r?0:Ou(n.borderRightWidth),E=r?0:Ou(n.borderBottomWidth),y=r?0:Ou(n.borderLeftWidth),S=p+h,A=f+d,B=y+w,R=v+E,_=a?e.offsetHeight-R-e.clientHeight:0,F=s?e.offsetWidth-B-e.clientWidth:0,j=i?S+B:0,z=i?A+R:0,Q=r?r.width:Ou(n.width)-j-F,se=r?r.height:Ou(n.height)-z-_,te=Q+S+F+B,Ee=se+A+_+R,ie=bf({devicePixelContentBoxSize:Zd(Math.round(Q*devicePixelRatio),Math.round(se*devicePixelRatio),o),borderBoxSize:Zd(te,Ee,o),contentBoxSize:Zd(Q,se,o),contentRect:new kP(p,f,Q,se)});return Q2.set(e,ie),ie},_P=function(e,t,n){var r=LP(e,n),i=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case Fg.DEVICE_PIXEL_CONTENT_BOX:return s;case Fg.BORDER_BOX:return i;default:return o}},DN=function(){function e(t){var n=LP(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=bf([n.borderBoxSize]),this.contentBoxSize=bf([n.contentBoxSize]),this.devicePixelContentBoxSize=bf([n.devicePixelContentBoxSize])}return e}(),NP=function(e){if(FP(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},TN=function(){var e=1/0,t=[];Mf.forEach(function(s){if(s.activeTargets.length!==0){var a=[];s.activeTargets.forEach(function(h){var d=new DN(h.target),p=NP(h.target);a.push(d),h.lastReportedSize=_P(h.target,h.observedBox),p<e&&(e=p)}),t.push(function(){s.callback.call(s.observer,a,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var i=r[n];i()}return e},Ew=function(e){Mf.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(NP(i.target)>e?n.activeTargets.push(i):n.skippedTargets.push(i))})})},AN=function(){var e=0;for(Ew(e);yN();)e=TN(),Ew(e);return wN()&&CN(),e>0},Z5,HP=[],BN=function(){return HP.splice(0).forEach(function(e){return e()})},RN=function(e){if(!Z5){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return BN()}).observe(n,r),Z5=function(){n.textContent="".concat(t?t--:t++)}}HP.push(e),Z5()},MN=function(e){RN(function(){requestAnimationFrame(e)})},E3=0,bN=function(){return!!E3},ON=250,IN={attributes:!0,characterData:!0,childList:!0,subtree:!0},Pw=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Sw=function(e){return e===void 0&&(e=0),Date.now()+e},Q5=!1,kN=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=ON),!Q5){Q5=!0;var r=Sw(t);MN(function(){var i=!1;try{i=AN()}finally{if(Q5=!1,t=r-Sw(),!bN())return;i?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,IN)};document.body?n():yg.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Pw.forEach(function(n){return yg.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Pw.forEach(function(n){return yg.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),v6=new kN,Dw=function(e){!E3&&e>0&&v6.start(),E3+=e,!E3&&v6.stop()},FN=function(e){return!j4(e)&&!EN(e)&&getComputedStyle(e).display==="inline"},LN=function(){function e(t,n){this.target=t,this.observedBox=n||Fg.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=_P(this.target,this.observedBox,!0);return FN(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),_N=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),J2=new WeakMap,Tw=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},e3=function(){function e(){}return e.connect=function(t,n){var r=new _N(t,n);J2.set(t,r)},e.observe=function(t,n,r){var i=J2.get(t),o=i.observationTargets.length===0;Tw(i.observationTargets,n)<0&&(o&&Mf.push(i),i.observationTargets.push(new LN(n,r&&r.box)),Dw(1),v6.schedule())},e.unobserve=function(t,n){var r=J2.get(t),i=Tw(r.observationTargets,n),o=r.observationTargets.length===1;i>=0&&(o&&Mf.splice(Mf.indexOf(r),1),r.observationTargets.splice(i,1),Dw(-1))},e.disconnect=function(t){var n=this,r=J2.get(t);r.observationTargets.slice().forEach(function(i){return n.unobserve(t,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),NN=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");e3.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ww(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");e3.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ww(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");e3.unobserve(this,t)},e.prototype.disconnect=function(){e3.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),z4=qx();const HN=uc(z4);function GN(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function l0(e,t){if(e==null)return{};var n=GN(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Lg(e){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}function $N(e,t){if(Lg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Lg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WN(e){var t=$N(e,"string");return Lg(t)==="symbol"?t:String(t)}function xs(e,t,n){return t=WN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V4=$.createContext(null),fc=()=>{var e=$.useContext(V4);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},J5,ev,GP=parseInt(Pt.version.split(".")[0],10),$P=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Aw=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Hi=typeof navigator<"u"&&/Android/.test(navigator.userAgent),jd=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),wf=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),jN=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),WP=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),zN=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),VN=Hi&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),UN=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),XN=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),KN=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),P3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bw=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((J5=navigator.userAgent.match(/Version\/(\d+)/))!==null&&J5!==void 0&&J5[1]?parseInt((ev=navigator.userAgent.match(/Version\/(\d+)/))===null||ev===void 0?void 0:ev[1],10)<17:!1),Gl=(!zN||!VN)&&!jN&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",U4=new WeakMap,X4=new WeakMap,jP=new WeakMap,S3=new WeakMap,y6=new WeakMap,_g=new WeakMap,Of=new WeakMap,q3=new WeakMap,jm=new WeakMap,w6=new WeakMap,Xl=new WeakMap,Pf=new WeakMap,wg=new WeakMap,C6=new WeakMap,K4=new WeakMap,eu=new WeakMap,ka=new WeakMap,co=new WeakMap,jl=new WeakMap,zl=new WeakMap,zP=new WeakMap,c0=Symbol("placeholder"),VP=Symbol("mark-placeholder"),YN=globalThis.Text,Y4=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,qN=e=>nc(e)&&e.nodeType===8,ms=e=>nc(e)&&e.nodeType===1,nc=e=>{var t=Y4(e);return!!t&&e instanceof t.Node},x6=e=>{var t=e&&e.anchorNode&&Y4(e.anchorNode);return!!t&&e instanceof t.Selection},UP=e=>nc(e)&&e.nodeType===3,ZN=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,QN=e=>{var[t,n]=e;if(ms(t)&&t.childNodes.length){var r=n===t.childNodes.length,i=r?n-1:n;for([t,i]=XP(t,i,r?"backward":"forward"),r=i<n;ms(t)&&t.childNodes.length;){var o=r?t.childNodes.length-1:0;t=eH(t,o,r?"backward":"forward")}n=r&&t.textContent!=null?t.textContent.length:0}return[t,n]},JN=e=>{for(var t=e&&e.parentNode;t;){if(t.toString()==="[object ShadowRoot]")return!0;t=t.parentNode}return!1},XP=(e,t,n)=>{for(var{childNodes:r}=e,i=r[t],o=t,s=!1,a=!1;(qN(i)||ms(i)&&i.childNodes.length===0||ms(i)&&i.getAttribute("contenteditable")==="false")&&!(s&&a);){if(o>=r.length){s=!0,o=t-1,n="backward";continue}if(o<0){a=!0,o=t+1,n="forward";continue}i=r[o],t=o,o+=n==="forward"?1:-1}return[i,t]},eH=(e,t,n)=>{var[r]=XP(e,t,n);return r},KP=e=>{var t="";if(UP(e)&&e.nodeValue)return e.nodeValue;if(ms(e)){for(var n of Array.from(e.childNodes))t+=KP(n);var r=getComputedStyle(e).getPropertyValue("display");(r==="block"||r==="list"||e.tagName==="BR")&&(t+=`
`)}return t},tH=/data-slate-fragment="(.+?)"/m,nH=e=>{var t=e.getData("text/html"),[,n]=t.match(tH)||[];return n},q4=(e,t,n)=>{var{target:r}=t;if(ms(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:i}=Te.getWindow(e);if(i.contains(r))return Te.hasDOMNode(e,r,{editable:!0});var o=n.find(s=>{var{addedNodes:a,removedNodes:f}=s;for(var h of a)if(h===r||h.contains(r))return!0;for(var d of f)if(d===r||d.contains(r))return!0});return!o||o===t?!1:q4(e,o,n)},rH=()=>{for(var e=document.activeElement;(t=e)!==null&&t!==void 0&&t.shadowRoot&&(n=e.shadowRoot)!==null&&n!==void 0&&n.activeElement;){var t,n,r;e=(r=e)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return e},iH=0;class oH{constructor(){xs(this,"id",void 0),this.id="".concat(iH++)}}var Te={androidPendingDiffs:e=>co.get(e),androidScheduleFlush:e=>{var t;(t=K4.get(e))===null||t===void 0||t()},blur:e=>{var t=Te.toDOMNode(e,e),n=Te.findDocumentOrShadowRoot(e);Xl.set(e,!1),n.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,n=Te.findDocumentOrShadowRoot(e),r=n.getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&Oe.deselect(e)},findDocumentOrShadowRoot:e=>{var t=Te.toDOMNode(e,e),n=t.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:n,clientY:r,target:i}=t;if(n==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o=Te.toSlateNode(e,t.target),s=Te.findPath(e,o);if(rt.isElement(o)&&k.isVoid(e,o)){var a=i.getBoundingClientRect(),f=e.isInline(o)?n-a.left<a.left+a.width-n:r-a.top<a.top+a.height-r,h=k.point(e,s,{edge:f?"start":"end"}),d=f?k.before(e,h):k.after(e,h);if(d){var p=k.range(e,d);return p}}var v,{document:w}=Te.getWindow(e);if(w.caretRangeFromPoint)v=w.caretRangeFromPoint(n,r);else{var E=w.caretPositionFromPoint(n,r);E&&(v=w.createRange(),v.setStart(E.offsetNode,E.offset),v.setEnd(E.offsetNode,E.offset))}if(!v)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var y=Te.toSlateRange(e,v,{exactMatch:!1,suppressThrow:!1});return y},findKey:(e,t)=>{var n=q3.get(t);return n||(n=new oH,q3.set(t,n)),n},findPath:(e,t)=>{for(var n=[],r=t;;){var i=X4.get(r);if(i==null){if(k.isEditor(r))return n;break}var o=U4.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error("Unable to find the path for Slate node: ".concat(Ur.stringify(t)))},focus:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Xl.get(t)){if(n.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(t.operations.length>0){setTimeout(()=>{Te.focus(t,{retries:n.retries-1})},10);return}var r=Te.toDOMNode(t,t),i=Te.findDocumentOrShadowRoot(t);if(i.activeElement!==r){if(t.selection&&i instanceof Document){var o=i.getSelection(),s=Te.toDOMRange(t,t.selection);o==null||o.removeAllRanges(),o==null||o.addRange(s)}t.selection||(Oe.select(t,k.start(t,[])),t.onChange()),Xl.set(t,!0),r.focus({preventScroll:!0})}}},getWindow:e=>{var t=jP.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:i=!1}=r,o=Te.toDOMNode(t,t),s;try{s=ms(n)?n:n.parentElement}catch(a){if(a instanceof Error&&!a.message.includes('Permission denied to access property "nodeType"'))throw a}return s?s.closest("[data-slate-editor]")===o&&(!i||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===o||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,t)=>nc(t)&&Te.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:n,focus:r}=t;return k.hasPath(e,n.path)&&k.hasPath(e,r.path)},hasSelectableTarget:(e,t)=>Te.hasEditableTarget(e,t)||Te.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>nc(t)&&Te.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!Pf.get(e),isFocused:e=>!!Xl.get(e),isReadOnly:e=>!!w6.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(w6.get(e))return!1;var n=Te.hasTarget(e,t)&&Te.toSlateNode(e,t);return rt.isElement(n)&&k.isVoid(e,n)},setFragmentData:(e,t,n)=>e.setFragmentData(t,n),toDOMNode:(e,t)=>{var n=jm.get(e),r=k.isEditor(t)?S3.get(e):n==null?void 0:n.get(Te.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Ur.stringify(t)));return r},toDOMPoint:(e,t)=>{var[n]=k.node(e,t.path),r=Te.toDOMNode(e,n),i;k.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o="[data-slate-string], [data-slate-zero-width]",s=Array.from(r.querySelectorAll(o)),a=0,f=0;f<s.length;f++){var h=s[f],d=h.childNodes[0];if(!(d==null||d.textContent==null)){var{length:p}=d.textContent,v=h.getAttribute("data-slate-length"),w=v==null?p:parseInt(v,10),E=a+w,y=s[f+1];if(t.offset===E&&y!==null&&y!==void 0&&y.hasAttribute("data-slate-mark-placeholder")){var S,A=y.childNodes[0];i=[A instanceof YN?A:y,(S=y.textContent)!==null&&S!==void 0&&S.startsWith("\uFEFF")?1:0];break}if(t.offset<=E){var B=Math.min(p,Math.max(0,t.offset-a));i=[d,B];break}a=E}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Ur.stringify(t)));return i},toDOMRange:(e,t)=>{var{anchor:n,focus:r}=t,i=Se.isBackward(t),o=Te.toDOMPoint(e,n),s=Se.isCollapsed(t)?o:Te.toDOMPoint(e,r),a=Te.getWindow(e),f=a.document.createRange(),[h,d]=i?s:o,[p,v]=i?o:s,w=ms(h)?h:h.parentElement,E=!!w.getAttribute("data-slate-zero-width"),y=ms(p)?p:p.parentElement,S=!!y.getAttribute("data-slate-zero-width");return f.setStart(h,E?1:d),f.setEnd(p,S?1:v),f},toSlateNode:(e,t)=>{var n=ms(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?_g.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(e,t,n)=>{var{exactMatch:r,suppressThrow:i}=n,[o,s]=r?t:QN(t),a=o.parentNode,f=null,h=0;if(a){var d,p,v=Te.toDOMNode(e,e),w=a.closest('[data-slate-void="true"]'),E=w&&v.contains(w)?w:null,y=a.closest("[data-slate-leaf]"),S=null;if(y){if(f=y.closest('[data-slate-node="text"]'),f){var A=Te.getWindow(e),B=A.document.createRange();B.setStart(f,0),B.setEnd(o,s);var R=B.cloneContents(),_=[...Array.prototype.slice.call(R.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(R.querySelectorAll("[contenteditable=false]"))];_.forEach(me=>{if(Hi&&!r&&me.hasAttribute("data-slate-zero-width")&&me.textContent.length>0&&me.textContext!=="\uFEFF"){me.textContent.startsWith("\uFEFF")&&(me.textContent=me.textContent.slice(1));return}me.parentNode.removeChild(me)}),h=R.textContent.length,S=f}}else if(E){for(var F=E.querySelectorAll("[data-slate-leaf]"),j=0;j<F.length;j++){var z=F[j];if(Te.hasDOMNode(e,z)){y=z;break}}y?(f=y.closest('[data-slate-node="text"]'),S=y,h=S.textContent.length,S.querySelectorAll("[data-slate-zero-width]").forEach(me=>{h-=me.textContent.length})):h=1}S&&h===S.textContent.length&&Hi&&S.getAttribute("data-slate-zero-width")==="z"&&(d=S.textContent)!==null&&d!==void 0&&d.startsWith("\uFEFF")&&(a.hasAttribute("data-slate-zero-width")||jd&&(p=S.textContent)!==null&&p!==void 0&&p.endsWith(`

`))&&h--}if(Hi&&!f&&!r){var Q=a.hasAttribute("data-slate-node")?a:a.closest("[data-slate-node]");if(Q&&Te.hasDOMNode(e,Q,{editable:!0})){var se=Te.toSlateNode(e,Q),{path:te,offset:Ee}=k.start(e,Te.findPath(e,se));return Q.querySelector("[data-slate-leaf]")||(Ee=s),{path:te,offset:Ee}}}if(!f){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var ie=Te.toSlateNode(e,f),ce=Te.findPath(e,ie);return{path:ce,offset:h}},toSlateRange:(e,t,n)=>{var r,{exactMatch:i,suppressThrow:o}=n,s=x6(t)?t.anchorNode:t.startContainer,a,f,h,d,p;if(s)if(x6(t)){if(jd&&t.rangeCount>1){h=t.focusNode;var v=t.getRangeAt(0),w=t.getRangeAt(t.rangeCount-1);if(h instanceof HTMLTableRowElement&&v.startContainer instanceof HTMLTableRowElement&&w.startContainer instanceof HTMLTableRowElement){let j=function(z){return z.childElementCount>0?j(z.children[0]):z};var E=v.startContainer,y=w.startContainer,S=j(E.children[v.startOffset]),A=j(y.children[w.startOffset]);d=0,A.childNodes.length>0?a=A.childNodes[0]:a=A,S.childNodes.length>0?h=S.childNodes[0]:h=S,A instanceof HTMLElement?f=A.innerHTML.length:f=0}else v.startContainer===h?(a=w.endContainer,f=w.endOffset,d=v.startOffset):(a=v.startContainer,f=v.endOffset,d=w.startOffset)}else a=t.anchorNode,f=t.anchorOffset,h=t.focusNode,d=t.focusOffset;WP&&JN(a)||jd?p=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:p=t.isCollapsed}else a=t.startContainer,f=t.startOffset,h=t.endContainer,d=t.endOffset,p=t.collapsed;if(a==null||h==null||f==null||d==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));if(jd&&(r=h.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&d===h.textContent.length&&d--,"getAttribute"in h&&h.getAttribute("contenteditable")==="false"&&h.getAttribute("data-slate-void")!=="true"){var B;h=a,d=((B=a.textContent)===null||B===void 0?void 0:B.length)||0}var R=Te.toSlatePoint(e,[a,f],{exactMatch:i,suppressThrow:o});if(!R)return null;var _=p?R:Te.toSlatePoint(e,[h,d],{exactMatch:i,suppressThrow:o});if(!_)return null;var F={anchor:R,focus:_};return Se.isExpanded(F)&&Se.isForward(F)&&ms(h)&&k.void(e,{at:F.focus,mode:"highest"})&&(F=k.unhangRange(e,F,{voids:!0})),F}};function sH(e,t){var{path:n,diff:r}=t;if(!k.hasPath(e,n))return!1;var i=We.get(e,n);if(!st.isText(i))return!1;if(r.start!==i.text.length||r.text.length===0)return i.text.slice(r.start,r.start+r.text.length)===r.text;var o=q.next(n);if(!k.hasPath(e,o))return!1;var s=We.get(e,o);return st.isText(s)&&s.text.startsWith(r.text)}function YP(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((i,o)=>i.slice(0,o.start)+o.text+i.slice(o.end),e)}function uH(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return n}function aH(e,t,n){for(var r=Math.min(e.length,t.length,n),i=0;i<r;i++)if(e.charAt(e.length-i-1)!==t.charAt(t.length-i-1))return i;return r}function qP(e,t){var{start:n,end:r,text:i}=t,o=e.slice(n,r),s=uH(o,i),a=Math.min(o.length-s,i.length-s),f=aH(o,i,a),h={start:n+s,end:r-f,text:i.slice(s,i.length-f)};return h.start===h.end&&h.text.length===0?null:h}function lH(e,t,n){var r=Math.min(t.start,n.start),i=Math.max(0,Math.min(t.start+t.text.length,n.end)-n.start),o=YP(e,t,n),s=Math.max(n.start+n.text.length,t.start+t.text.length+(t.start+t.text.length>n.start?n.text.length:0)-i),a=o.slice(r,s),f=Math.max(t.end,n.end-t.text.length+(t.end-t.start));return qP(e,{start:r,end:f,text:a})}function cH(e){var{path:t,diff:n}=e;return{anchor:{path:t,offset:n.start},focus:{path:t,offset:n.end}}}function E6(e,t){var{path:n,offset:r}=t;if(!k.hasPath(e,n))return null;var i=We.get(e,n);if(!st.isText(i))return null;var o=k.above(e,{match:a=>rt.isElement(a)&&k.isBlock(e,a),at:n});if(!o)return null;for(;r>i.text.length;){var s=k.next(e,{at:n,match:st.isText});if(!s||!q.isDescendant(s[1],o[1]))return null;r-=i.text.length,i=s[0],n=s[1]}return{path:n,offset:r}}function Rw(e,t){var n=E6(e,t.anchor);if(!n)return null;if(Se.isCollapsed(t))return{anchor:n,focus:n};var r=E6(e,t.focus);return r?{anchor:n,focus:r}:null}function P6(e,t,n){var r=co.get(e),i=r==null?void 0:r.find(d=>{var{path:p}=d;return q.equals(p,t.path)});if(!i||t.offset<=i.diff.start)return Yt.transform(t,n,{affinity:"backward"});var{diff:o}=i;if(t.offset<=o.start+o.text.length){var s={path:t.path,offset:o.start},a=Yt.transform(s,n,{affinity:"backward"});return a?{path:a.path,offset:a.offset+t.offset-o.start}:null}var f={path:t.path,offset:t.offset-o.text.length+o.end-o.start},h=Yt.transform(f,n,{affinity:"backward"});return h?n.type==="split_node"&&q.equals(n.path,t.path)&&f.offset<n.position&&o.start<n.position?h:{path:h.path,offset:h.offset+o.text.length-o.end+o.start}:null}function Mw(e,t,n){var r=P6(e,t.anchor,n);if(!r)return null;if(Se.isCollapsed(t))return{anchor:r,focus:r};var i=P6(e,t.focus,n);return i?{anchor:r,focus:i}:null}function fH(e,t){var{path:n,diff:r,id:i}=e;switch(t.type){case"insert_text":return!q.equals(t.path,n)||t.offset>=r.end?e:t.offset<=r.start?{diff:{start:t.text.length+r.start,end:t.text.length+r.end,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end+t.text.length,text:r.text},id:i,path:n};case"remove_text":return!q.equals(t.path,n)||t.offset>=r.end?e:t.offset+t.text.length<=r.start?{diff:{start:r.start-t.text.length,end:r.end-t.text.length,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end-t.text.length,text:r.text},id:i,path:n};case"split_node":return!q.equals(t.path,n)||t.position>=r.end?{diff:r,id:i,path:q.transform(n,t,{affinity:"backward"})}:t.position>r.start?{diff:{start:r.start,end:Math.min(t.position,r.end),text:r.text},id:i,path:n}:{diff:{start:r.start-t.position,end:r.end-t.position,text:r.text},id:i,path:q.transform(n,t,{affinity:"forward"})};case"merge_node":return q.equals(t.path,n)?{diff:{start:r.start+t.position,end:r.end+t.position,text:r.text},id:i,path:q.transform(n,t)}:{diff:r,id:i,path:q.transform(n,t)}}var o=q.transform(n,t);return o?{diff:r,path:o,id:i}:null}function bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function t3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bw(Object(n),!0).forEach(function(r){xs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var hH=25,dH=200,gH=function(){},pH=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function mH(e){var{editor:t,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=e,i=!1,o=null,s=null,a=null,f=0,h=!1,d=()=>{var ie=zl.get(t);if(zl.delete(t),ie){var{selection:ce}=t,me=Rw(t,ie);me&&(!ce||!Se.equals(me,ce))&&Oe.select(t,me)}},p=()=>{var ie=jl.get(t);if(jl.delete(t),!!ie){if(ie.at){var ce=Yt.isPoint(ie.at)?E6(t,ie.at):Rw(t,ie.at);if(!ce)return;var me=k.range(t,ce);(!t.selection||!Se.equals(t.selection,me))&&Oe.select(t,ce)}ie.run()}},v=()=>{if(s&&(clearTimeout(s),s=null),a&&(clearTimeout(a),a=null),!_()&&!R()){d();return}i||(i=!0,setTimeout(()=>i=!1)),R()&&(i="action");var ie=t.selection&&k.rangeRef(t,t.selection,{affinity:"forward"});ka.set(t,t.marks),gH("flush",jl.get(t),co.get(t));for(var ce=_(),me;me=(Ce=co.get(t))===null||Ce===void 0?void 0:Ce[0];){var Ce,Fe,Ae=eu.get(t);Ae!==void 0&&(eu.delete(t),t.marks=Ae),Ae&&h===!1&&(h=null);var pe=cH(me);(!t.selection||!Se.equals(t.selection,pe))&&Oe.select(t,pe),me.diff.text?k.insertText(t,me.diff.text):k.deleteFragment(t),co.set(t,(Fe=co.get(t))===null||Fe===void 0?void 0:Fe.filter(X=>{var{id:Pe}=X;return Pe!==me.id})),sH(t,me)||(ce=!1,jl.delete(t),ka.delete(t),i="action",zl.delete(t),n.cancel(),r.cancel(),ie==null||ie.unref())}var ue=ie==null?void 0:ie.unref();if(ue&&!zl.get(t)&&(!t.selection||!Se.equals(ue,t.selection))&&Oe.select(t,ue),R()){p();return}ce&&n(),n.flush(),r.flush(),d();var ye=ka.get(t);ka.delete(t),ye!==void 0&&(t.marks=ye,t.onChange())},w=ie=>{o&&clearTimeout(o),o=setTimeout(()=>{Pf.set(t,!1),v()},hH)},E=ie=>{Pf.set(t,!0),o&&(clearTimeout(o),o=null)},y=function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,me=y6.get(t);if(me){if(_()||ce){me.style.display="none";return}me.style.removeProperty("display")}},S=(ie,ce)=>{var me,Ce=(me=co.get(t))!==null&&me!==void 0?me:[];co.set(t,Ce);var Fe=We.leaf(t,ie),Ae=Ce.findIndex(ye=>q.equals(ye.path,ie));if(Ae<0){var pe=qP(Fe.text,ce);pe&&Ce.push({path:ie,diff:ce,id:f++}),y();return}var ue=lH(Fe.text,Ce[Ae].diff,ce);if(!ue){Ce.splice(Ae,1),y();return}Ce[Ae]=t3(t3({},Ce[Ae]),{},{diff:ue})},A=function(ce){var{at:me}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};h=!1,zl.delete(t),n.cancel(),r.cancel(),R()&&v(),jl.set(t,{at:me,run:ce}),a=setTimeout(v)},B=ie=>{var ce;s&&(clearTimeout(s),s=null);var{inputType:me}=ie,Ce=null,Fe=ie.dataTransfer||ie.data||void 0;h!==!1&&me!=="insertText"&&me!=="insertCompositionText"&&(h=!1);var[Ae]=ie.getTargetRanges();Ae&&(Ce=Te.toSlateRange(t,Ae,{exactMatch:!1,suppressThrow:!0}));var pe=Te.getWindow(t),ue=pe.getSelection();if(!Ce&&ue&&(Ae=ue,Ce=Te.toSlateRange(t,ue,{exactMatch:!1,suppressThrow:!0})),Ce=(ce=Ce)!==null&&ce!==void 0?ce:t.selection,!!Ce){var ye=!0;if(me.startsWith("delete")){if(Se.isExpanded(Ce)){var[X,Pe]=Se.edges(Ce),ut=We.leaf(t,X.path);if(ut.text.length===X.offset&&Pe.offset===0){var Me=k.next(t,{at:X.path,match:st.isText});Me&&q.equals(Me[1],Pe.path)&&(Ce={anchor:Pe,focus:Pe})}}var K=me.endsWith("Backward")?"backward":"forward",[fe,we]=Se.edges(Ce),[De,Ke]=k.leaf(t,fe.path),Ue={text:"",start:fe.offset,end:we.offset},Rt=co.get(t),It=Rt==null?void 0:Rt.find(An=>q.equals(An.path,Ke)),St=It?[It.diff,Ue]:[Ue],lt=YP(De.text,...St);if(lt.length===0&&(ye=!1),Se.isExpanded(Ce)){if(ye&&q.equals(Ce.anchor.path,Ce.focus.path)){var yt={path:Ce.anchor.path,offset:fe.offset},wn=k.range(t,yt,yt);return z(wn),S(Ce.anchor.path,{text:"",end:we.offset,start:fe.offset})}return A(()=>k.deleteFragment(t,{direction:K}),{at:Ce})}}switch(me){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return A(()=>k.deleteFragment(t),{at:Ce});case"deleteContent":case"deleteContentForward":{var{anchor:Mt}=Ce;if(ye&&Se.isCollapsed(Ce)){var _n=We.leaf(t,Mt.path);if(Mt.offset<_n.text.length)return S(Mt.path,{text:"",start:Mt.offset,end:Mt.offset+1})}return A(()=>k.deleteForward(t),{at:Ce})}case"deleteContentBackward":{var ir,{anchor:Tn}=Ce,tn=x6(Ae)?Ae.isCollapsed:!!((ir=Ae)!==null&&ir!==void 0&&ir.collapsed);return ye&&tn&&Se.isCollapsed(Ce)&&Tn.offset>0?S(Tn.path,{text:"",start:Tn.offset-1,end:Tn.offset}):A(()=>k.deleteBackward(t),{at:Ce})}case"deleteEntireSoftLine":return A(()=>{k.deleteBackward(t,{unit:"line"}),k.deleteForward(t,{unit:"line"})},{at:Ce});case"deleteHardLineBackward":return A(()=>k.deleteBackward(t,{unit:"block"}),{at:Ce});case"deleteSoftLineBackward":return A(()=>k.deleteBackward(t,{unit:"line"}),{at:Ce});case"deleteHardLineForward":return A(()=>k.deleteForward(t,{unit:"block"}),{at:Ce});case"deleteSoftLineForward":return A(()=>k.deleteForward(t,{unit:"line"}),{at:Ce});case"deleteWordBackward":return A(()=>k.deleteBackward(t,{unit:"word"}),{at:Ce});case"deleteWordForward":return A(()=>k.deleteForward(t,{unit:"word"}),{at:Ce});case"insertLineBreak":return A(()=>k.insertSoftBreak(t),{at:Ce});case"insertParagraph":return A(()=>k.insertBreak(t),{at:Ce});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(pH(Fe))return A(()=>Te.insertData(t,Fe),{at:Ce});var nn=Fe??"";if(eu.get(t)&&(nn=nn.replace("\uFEFF","")),me==="insertText"&&/.*\n.*\n$/.test(nn)&&(nn=nn.slice(0,-1)),nn.includes(`
`))return A(()=>{var An=nn.split(`
`);An.forEach((yr,wr)=>{yr&&k.insertText(t,yr),wr!==An.length-1&&k.insertSoftBreak(t)})},{at:Ce});if(q.equals(Ce.anchor.path,Ce.focus.path)){var[Yn,Nn]=Se.edges(Ce),$t={start:Yn.offset,end:Nn.offset,text:nn};if(nn&&h&&me==="insertCompositionText"){var Dr=h.start+h.text.search(/\S|$/),vr=$t.start+$t.text.search(/\S|$/);vr===Dr+1&&$t.end===h.start+h.text.length?($t.start-=1,h=null,te()):h=!1}else me==="insertText"?h===null?h=$t:h&&Se.isCollapsed(Ce)&&h.end+h.text.length===Yn.offset?h=t3(t3({},h),{},{text:h.text+nn}):h=!1:h=!1;if(ye){S(Yn.path,$t);return}}return A(()=>k.insertText(t,nn),{at:Ce})}}}},R=()=>!!jl.get(t),_=()=>{var ie;return!!((ie=co.get(t))!==null&&ie!==void 0&&ie.length)},F=()=>R()||_(),j=()=>i,z=ie=>{zl.set(t,ie),s&&(clearTimeout(s),s=null);var{selection:ce}=t;if(ie){var me=!ce||!q.equals(ce.anchor.path,ie.anchor.path),Ce=!ce||!q.equals(ce.anchor.path.slice(0,-1),ie.anchor.path.slice(0,-1));(me&&h||Ce)&&(h=!1),(me||_())&&(s=setTimeout(v,dH))}},Q=()=>{(R()||!_())&&v()},se=ie=>{_()||(y(!0),setTimeout(y))},te=()=>{R()||(a=setTimeout(v))},Ee=ie=>{if(!(_()||R())&&ie.some(me=>q4(t,me,ie))){var ce;(ce=zP.get(t))===null||ce===void 0||ce()}};return{flush:v,scheduleFlush:te,hasPendingDiffs:_,hasPendingAction:R,hasPendingChanges:F,isFlushing:j,handleUserSelect:z,handleCompositionEnd:w,handleCompositionStart:E,handleDOMBeforeInput:B,handleKeyDown:se,handleDomMutations:Ee,handleInput:Q}}function vH(){var e=$.useRef(!1);return $.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var Ng=P3?$.useLayoutEffect:$.useEffect;function yH(e,t,n){var[r]=$.useState(()=>new MutationObserver(t));Ng(()=>{r.takeRecords()}),$.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(e.current,n),()=>r.disconnect()},[r,e,n])}var wH=["node"];function Ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ow(Object(n),!0).forEach(function(r){xs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ow(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var xH={subtree:!0,childList:!0,characterData:!0},EH=Hi?e=>{var{node:t}=e,n=l0(e,wH);if(!Hi)return null;var r=fc(),i=vH(),[o]=$.useState(()=>mH(CH({editor:r},n)));return yH(t,o.handleDomMutations,xH),K4.set(r,o.scheduleFlush),i&&o.flush(),o}:()=>null,PH=["anchor","focus"],SH=["anchor","focus"],DH=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n]),ZP=(e,t)=>{var n=l0(e,PH),r=l0(t,SH);return e[c0]===t[c0]&&DH(n,r)},TH=(e,t)=>{if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(!Se.equals(r,i)||!ZP(r,i))return!1}return!0},AH=(e,t)=>{if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(r.anchor.offset!==i.anchor.offset||r.focus.offset!==i.focus.offset||!ZP(r,i))return!1}return!0};function Iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function BH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Iw(Object(n),!0).forEach(function(r){xs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var RH=e=>{var{isLast:t,leaf:n,parent:r,text:i}=e,o=fc(),s=Te.findPath(o,i),a=q.parent(s),f=!!n[VP];return o.isVoid(r)?Pt.createElement(tv,{length:We.string(r).length}):n.text===""&&r.children[r.children.length-1]===i&&!o.isInline(r)&&k.string(o,a)===""?Pt.createElement(tv,{isLineBreak:!0,isMarkPlaceholder:f}):n.text===""?Pt.createElement(tv,{isMarkPlaceholder:f}):t&&n.text.slice(-1)===`
`?Pt.createElement(kw,{isTrailing:!0,text:n.text}):Pt.createElement(kw,{text:n.text})},kw=e=>{var{text:t,isTrailing:n=!1}=e,r=$.useRef(null),i=()=>"".concat(t??"").concat(n?`
`:""),[o]=$.useState(i);return Ng(()=>{var s=i();r.current&&r.current.textContent!==s&&(r.current.textContent=s)}),Pt.createElement(MH,{ref:r},o)},MH=$.memo($.forwardRef((e,t)=>Pt.createElement("span",{"data-slate-string":!0,ref:t},e.children))),tv=e=>{var{length:t=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=e,i={"data-slate-zero-width":n?"n":"z","data-slate-length":t};return r&&(i["data-slate-mark-placeholder"]=!0),Pt.createElement("span",BH({},i),!(Hi||$P)||!n?"\uFEFF":null,n?Pt.createElement("br",null):null)};function Fw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fw(Object(n),!0).forEach(function(r){xs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var bH=Hi?300:0;function OH(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}function Lw(e){e.current&&(clearTimeout(e.current),e.current=null)}var IH=e=>{var{leaf:t,isLast:n,text:r,parent:i,renderPlaceholder:o,renderLeaf:s=B=>Pt.createElement(FH,QP({},B))}=e,a=fc(),f=$.useRef(null),h=$.useRef(null),[d,p]=$.useState(!1),v=$.useRef(null),w=$.useCallback(B=>{if(OH(f,B==null),B==null){var R;y6.delete(a),(R=t.onPlaceholderResize)===null||R===void 0||R.call(t,null)}else{if(y6.set(a,B),!f.current){var _=window.ResizeObserver||NN;f.current=new _(()=>{var F;(F=t.onPlaceholderResize)===null||F===void 0||F.call(t,B)})}f.current.observe(B),h.current=B}},[h,t,a]),E=Pt.createElement(RH,{isLast:n,leaf:t,parent:i,text:r}),y=!!t[c0];if($.useEffect(()=>(y?v.current||(v.current=setTimeout(()=>{p(!0),v.current=null},bH)):(Lw(v),p(!1)),()=>Lw(v)),[y,p]),y&&d){var S={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:wf?"inherit":void 0},contentEditable:!1,ref:w}};E=Pt.createElement(Pt.Fragment,null,o(S),E)}var A={"data-slate-leaf":!0};return s({attributes:A,children:E,leaf:t,text:r})},kH=Pt.memo(IH,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&st.equals(t.leaf,e.leaf)&&t.leaf[c0]===e.leaf[c0]),FH=e=>{var{attributes:t,children:n}=e;return Pt.createElement("span",QP({},t),n)},LH=e=>{for(var{decorations:t,isLast:n,parent:r,renderPlaceholder:i,renderLeaf:o,text:s}=e,a=fc(),f=$.useRef(null),h=st.decorations(s,t),d=Te.findKey(a,s),p=[],v=0;v<h.length;v++){var w=h[v];p.push(Pt.createElement(kH,{isLast:n&&v===h.length-1,key:"".concat(d.id,"-").concat(v),renderPlaceholder:i,leaf:w,text:s,parent:r,renderLeaf:o}))}var E=$.useCallback(y=>{var S=jm.get(a);y?(S==null||S.set(d,y),Of.set(s,y),_g.set(y,s)):(S==null||S.delete(d),Of.delete(s),f.current&&_g.delete(f.current)),f.current=y},[f,a,d,s]);return Pt.createElement("span",{"data-slate-node":"text",ref:E},p)},JP=Pt.memo(LH,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&AH(t.decorations,e.decorations));function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function S6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_w(Object(n),!0).forEach(function(r){xs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var _H=e=>{var{decorations:t,element:n,renderElement:r=B=>Pt.createElement(HH,S6({},B)),renderPlaceholder:i,renderLeaf:o,selection:s}=e,a=fc(),f=WH(),h=a.isInline(n),d=Te.findKey(a,n),p=$.useCallback(B=>{var R=jm.get(a);B?(R==null||R.set(d,B),Of.set(n,B),_g.set(B,n)):(R==null||R.delete(d),Of.delete(n))},[a,d,n]),v=tS({decorations:t,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:s}),w={"data-slate-node":"element",ref:p};if(h&&(w["data-slate-inline"]=!0),!h&&k.hasInlines(a,n)){var E=We.string(n),y=IP(E);y==="rtl"&&(w.dir=y)}if(k.isVoid(a,n)){w["data-slate-void"]=!0,!f&&h&&(w.contentEditable=!1);var S=h?"span":"div",[[A]]=We.texts(n);v=Pt.createElement(S,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Pt.createElement(JP,{renderPlaceholder:i,decorations:[],isLast:!1,parent:n,text:A})),U4.set(A,0),X4.set(A,n)}return r({attributes:w,children:v,element:n})},NH=Pt.memo(_H,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&TH(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&Se.equals(e.selection,t.selection))),HH=e=>{var{attributes:t,children:n,element:r}=e,i=fc(),o=i.isInline(r)?"span":"div";return Pt.createElement(o,S6(S6({},t),{},{style:{position:"relative"}}),n)},eS=$.createContext(()=>[]),GH=()=>$.useContext(eS),$H=$.createContext(!1),tS=e=>{for(var{decorations:t,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:s}=e,a=GH(),f=fc(),h=Te.findPath(f,n),d=[],p=rt.isElement(n)&&!f.isInline(n)&&k.hasInlines(f,n),v=0;v<n.children.length;v++){var w=h.concat(v),E=n.children[v],y=Te.findKey(f,E),S=k.range(f,w),A=s&&Se.intersection(S,s),B=a([E,w]);for(var R of t){var _=Se.intersection(R,S);_&&B.push(_)}rt.isElement(E)?d.push(Pt.createElement($H.Provider,{key:"provider-".concat(y.id),value:!!A},Pt.createElement(NH,{decorations:B,element:E,key:y.id,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:A}))):d.push(Pt.createElement(JP,{decorations:B,key:y.id,isLast:p&&v===n.children.length-1,parent:n,renderPlaceholder:i,renderLeaf:o,text:E})),U4.set(E,v),X4.set(E,n)}return d},nS=$.createContext(!1),WH=()=>$.useContext(nS),rS=$.createContext(null),jH=()=>{var e=$.useContext(rS);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t};function zH(){var e=fc(),t=$.useRef(!1),n=$.useRef(0),r=$.useCallback(()=>{if(!t.current){t.current=!0;var i=Te.getWindow(e);i.cancelAnimationFrame(n.current),n.current=i.requestAnimationFrame(()=>{t.current=!1})}},[e]);return $.useEffect(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:t,onUserInput:r}}var VH=3,UH={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},XH={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},KH={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Qn=e=>{var t=UH[e],n=XH[e],r=KH[e],i=t&&cn.isHotkey(t),o=n&&cn.isHotkey(n),s=r&&cn.isHotkey(r);return a=>!!(i&&i(a)||Aw&&o&&o(a)||!Aw&&s&&s(a))},rr={isBold:Qn("bold"),isCompose:Qn("compose"),isMoveBackward:Qn("moveBackward"),isMoveForward:Qn("moveForward"),isDeleteBackward:Qn("deleteBackward"),isDeleteForward:Qn("deleteForward"),isDeleteLineBackward:Qn("deleteLineBackward"),isDeleteLineForward:Qn("deleteLineForward"),isDeleteWordBackward:Qn("deleteWordBackward"),isDeleteWordForward:Qn("deleteWordForward"),isExtendBackward:Qn("extendBackward"),isExtendForward:Qn("extendForward"),isExtendLineBackward:Qn("extendLineBackward"),isExtendLineForward:Qn("extendLineForward"),isItalic:Qn("italic"),isMoveLineBackward:Qn("moveLineBackward"),isMoveLineForward:Qn("moveLineForward"),isMoveWordBackward:Qn("moveWordBackward"),isMoveWordForward:Qn("moveWordForward"),isRedo:Qn("redo"),isSoftBreak:Qn("insertSoftBreak"),isSplitBlock:Qn("splitBlock"),isTransposeCharacter:Qn("transposeCharacter"),isUndo:Qn("undo")},YH=(e,t)=>{var n=[],r=()=>{n=[]},i=s=>{if(t.current){var a=s.filter(f=>q4(e,f,s));n.push(...a)}};function o(){n.length>0&&(n.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(a=>{s.target.insertBefore(a,s.nextSibling)}),s.addedNodes.forEach(a=>{s.target.removeChild(a)}))}),r())}return{registerMutations:i,restoreDOM:o,clear:r}},qH={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class iS extends $.Component{constructor(){super(...arguments),xs(this,"context",null),xs(this,"manager",null),xs(this,"mutationObserver",null)}observe(){var t,{node:n}=this.props;if(!n.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(t=this.mutationObserver)===null||t===void 0||t.observe(n.current,qH)}componentDidMount(){var{receivedUserInput:t}=this.props,n=this.context;this.manager=YH(n,t),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var t,n,r,i=(t=this.mutationObserver)===null||t===void 0?void 0:t.takeRecords();if(i!=null&&i.length){var o;(o=this.manager)===null||o===void 0||o.registerMutations(i)}return(n=this.mutationObserver)===null||n===void 0||n.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var t;(t=this.manager)===null||t===void 0||t.clear(),this.observe()}componentWillUnmount(){var t;(t=this.mutationObserver)===null||t===void 0||t.disconnect()}render(){return this.props.children}}xs(iS,"contextType",V4);var ZH=Hi?iS:e=>{var{children:t}=e;return Pt.createElement(Pt.Fragment,null,t)},QH=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],JH=["text"];function Nw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nw(Object(n),!0).forEach(function(r){xs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var eG=e=>Pt.createElement(Pt.Fragment,null,tS(e)),tG=e=>{var t=$.useCallback(K=>Pt.createElement(nG,Fu({},K)),[]),{autoFocus:n,decorate:r=rG,onDOMBeforeInput:i,placeholder:o,readOnly:s=!1,renderElement:a,renderLeaf:f,renderPlaceholder:h=t,scrollSelectionIntoView:d=iG,style:p={},as:v="div",disableDefaultStyles:w=!1}=e,E=l0(e,QH),y=jH(),[S,A]=$.useState(!1),B=$.useRef(null),R=$.useRef([]),[_,F]=$.useState(),j=$.useRef(!1),{onUserInput:z,receivedUserInput:Q}=zH(),[,se]=$.useReducer(K=>K+1,0);zP.set(y,se),w6.set(y,s);var te=$.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);$.useEffect(()=>{B.current&&n&&B.current.focus()},[n]);var Ee=$.useRef(),ie=$.useMemo(()=>jF(()=>{var K=Te.toDOMNode(y,y),fe=K.getRootNode();if(Bw&&!j.current&&wf&&fe instanceof ShadowRoot){j.current=!0;var we=rH();we?document.execCommand("indent"):Oe.deselect(y),j.current=!1;return}var De=Ee.current;if((Hi||!Te.isComposing(y))&&(!te.isUpdatingSelection||De!=null&&De.isFlushing())&&!te.isDraggingInternally){var Ke=Te.findDocumentOrShadowRoot(y),{activeElement:Ue}=Ke,Rt=Te.toDOMNode(y,y),It=Ke.getSelection();if(Ue===Rt?(te.latestElement=Ue,Xl.set(y,!0)):Xl.delete(y),!It)return Oe.deselect(y);var{anchorNode:St,focusNode:lt}=It,yt=Te.hasEditableTarget(y,St)||Te.isTargetInsideNonReadonlyVoid(y,St),wn=Te.hasEditableTarget(y,lt)||Te.isTargetInsideNonReadonlyVoid(y,lt);if(yt&&wn){var Mt=Te.toSlateRange(y,It,{exactMatch:!1,suppressThrow:!0});Mt&&(!Te.isComposing(y)&&!(De!=null&&De.hasPendingChanges())&&!(De!=null&&De.isFlushing())?Oe.select(y,Mt):De==null||De.handleUserSelect(Mt))}s&&(!yt||!wn)&&Oe.deselect(y)}},100),[y,s,te]),ce=$.useMemo(()=>HF(ie,0),[ie]);Ee.current=EH({node:B,onDOMSelectionChange:ie,scheduleOnDOMSelectionChange:ce}),Ng(()=>{var K,fe,we;B.current&&(we=Y4(B.current))?(jP.set(y,we),S3.set(y,B.current),Of.set(y,B.current),_g.set(B.current,y)):Of.delete(y);var{selection:De}=y,Ke=Te.findDocumentOrShadowRoot(y),Ue=Ke.getSelection();if(!(!Ue||!Te.isFocused(y)||(K=Ee.current)!==null&&K!==void 0&&K.hasPendingAction())){var Rt=yt=>{var wn=Ue.type!=="None";if(!(!De&&!wn)){var Mt=Ue.focusNode,_n;if(jd&&Ue.rangeCount>1){var ir=Ue.getRangeAt(0),Tn=Ue.getRangeAt(Ue.rangeCount-1);ir.startContainer===Mt?_n=Tn.endContainer:_n=ir.startContainer}else _n=Ue.anchorNode;var tn=S3.get(y),nn=!1;if(tn.contains(_n)&&tn.contains(Mt)&&(nn=!0),wn&&nn&&De&&!yt){var Yn=Te.toSlateRange(y,Ue,{exactMatch:!0,suppressThrow:!0});if(Yn&&Se.equals(Yn,De)){var Nn;if(!te.hasMarkPlaceholder||(Nn=_n)!==null&&Nn!==void 0&&(Nn=Nn.parentElement)!==null&&Nn!==void 0&&Nn.hasAttribute("data-slate-mark-placeholder"))return}}if(De&&!Te.hasRange(y,De)){y.selection=Te.toSlateRange(y,Ue,{exactMatch:!1,suppressThrow:!0});return}te.isUpdatingSelection=!0;var $t=De&&Te.toDOMRange(y,De);return $t?(Te.isComposing(y)&&!Hi?Ue.collapseToEnd():Se.isBackward(De)?Ue.setBaseAndExtent($t.endContainer,$t.endOffset,$t.startContainer,$t.startOffset):Ue.setBaseAndExtent($t.startContainer,$t.startOffset,$t.endContainer,$t.endOffset),d(y,$t)):Ue.removeAllRanges(),$t}};Ue.rangeCount<=1&&Rt();var It=((fe=Ee.current)===null||fe===void 0?void 0:fe.isFlushing())==="action";if(!Hi||!It){setTimeout(()=>{te.isUpdatingSelection=!1});return}var St=null,lt=requestAnimationFrame(()=>{if(It){var yt=wn=>{try{var Mt=Te.toDOMNode(y,y);Mt.focus(),Rt(wn)}catch{}};yt(),St=setTimeout(()=>{yt(!0),te.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(lt),St&&clearTimeout(St)}}});var me=$.useCallback(K=>{var fe=Te.toDOMNode(y,y),we=fe.getRootNode();if(Bw&&j!==null&&j!==void 0&&j.current&&wf&&we instanceof ShadowRoot){var De=K.getTargetRanges(),Ke=De[0],Ue=new window.Range;Ue.setStart(Ke.startContainer,Ke.startOffset),Ue.setEnd(Ke.endContainer,Ke.endOffset);var Rt=Te.toSlateRange(y,Ue,{exactMatch:!1,suppressThrow:!1});Oe.select(y,Rt),K.preventDefault(),K.stopImmediatePropagation();return}if(z(),!s&&Te.hasEditableTarget(y,K.target)&&!oG(K,i)){var It;if(Ee.current)return Ee.current.handleDOMBeforeInput(K);ce.flush(),ie.flush();var{selection:St}=y,{inputType:lt}=K,yt=K.dataTransfer||K.data||void 0,wn=lt==="insertCompositionText"||lt==="deleteCompositionText";if(wn&&Te.isComposing(y))return;var Mt=!1;if(lt==="insertText"&&St&&Se.isCollapsed(St)&&K.data&&K.data.length===1&&/[a-z ]/i.test(K.data)&&St.anchor.offset!==0){var _n,ir;Mt=!0,y.marks&&(Mt=!1);var{anchor:Tn}=St,[tn,nn]=Te.toDOMPoint(y,Tn),Yn=(_n=tn.parentElement)===null||_n===void 0?void 0:_n.closest("a"),Nn=Te.getWindow(y);if(Mt&&Yn&&Te.hasDOMNode(y,Yn)){var $t,Dr=Nn==null?void 0:Nn.document.createTreeWalker(Yn,NodeFilter.SHOW_TEXT).lastChild();Dr===tn&&(($t=Dr.textContent)===null||$t===void 0?void 0:$t.length)===nn&&(Mt=!1)}if(Mt&&tn.parentElement&&(Nn==null||(ir=Nn.getComputedStyle(tn.parentElement))===null||ir===void 0?void 0:ir.whiteSpace)==="pre"){var vr=k.above(y,{at:Tn.path,match:Vi=>rt.isElement(Vi)&&k.isBlock(y,Vi)});vr&&We.string(vr[0]).includes("	")&&(Mt=!1)}}if(!lt.startsWith("delete")||lt.startsWith("deleteBy")){var[An]=K.getTargetRanges();if(An){var yr=Te.toSlateRange(y,An,{exactMatch:!1,suppressThrow:!1});if(!St||!Se.equals(St,yr)){Mt=!1;var wr=!wn&&y.selection&&k.rangeRef(y,y.selection);Oe.select(y,yr),wr&&wg.set(y,wr)}}}if(wn)return;if(Mt||K.preventDefault(),St&&Se.isExpanded(St)&&lt.startsWith("delete")){var or=lt.endsWith("Backward")?"backward":"forward";k.deleteFragment(y,{direction:or});return}switch(lt){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{k.deleteFragment(y);break}case"deleteContent":case"deleteContentForward":{k.deleteForward(y);break}case"deleteContentBackward":{k.deleteBackward(y);break}case"deleteEntireSoftLine":{k.deleteBackward(y,{unit:"line"}),k.deleteForward(y,{unit:"line"});break}case"deleteHardLineBackward":{k.deleteBackward(y,{unit:"block"});break}case"deleteSoftLineBackward":{k.deleteBackward(y,{unit:"line"});break}case"deleteHardLineForward":{k.deleteForward(y,{unit:"block"});break}case"deleteSoftLineForward":{k.deleteForward(y,{unit:"line"});break}case"deleteWordBackward":{k.deleteBackward(y,{unit:"word"});break}case"deleteWordForward":{k.deleteForward(y,{unit:"word"});break}case"insertLineBreak":k.insertSoftBreak(y);break;case"insertParagraph":{k.insertBreak(y);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{lt==="insertFromComposition"&&Te.isComposing(y)&&(A(!1),Pf.set(y,!1)),(yt==null?void 0:yt.constructor.name)==="DataTransfer"?Te.insertData(y,yt):typeof yt=="string"&&(Mt?R.current.push(()=>k.insertText(y,yt)):k.insertText(y,yt));break}}var zi=(It=wg.get(y))===null||It===void 0?void 0:It.unref();wg.delete(y),zi&&(!y.selection||!Se.equals(y.selection,zi))&&Oe.select(y,zi)}},[y,ie,z,i,s,ce]),Ce=$.useCallback(K=>{K==null?(ie.cancel(),ce.cancel(),S3.delete(y),Of.delete(y),B.current&&Gl&&B.current.removeEventListener("beforeinput",me)):Gl&&K.addEventListener("beforeinput",me),B.current=K},[ie,ce,y,me]);Ng(()=>{var K=Te.getWindow(y);return K.document.addEventListener("selectionchange",ce),()=>{K.document.removeEventListener("selectionchange",ce)}},[ce]);var Fe=r([y,[]]),Ae=o&&y.children.length===1&&Array.from(We.texts(y)).length===1&&We.string(y)===""&&!S,pe=$.useCallback(K=>{if(K&&Ae){var fe;F((fe=K.getBoundingClientRect())===null||fe===void 0?void 0:fe.height)}else F(void 0)},[Ae]);if(Ae){var ue=k.start(y,[]);Fe.push({[c0]:!0,placeholder:o,onPlaceholderResize:pe,anchor:ue,focus:ue})}var{marks:ye}=y;if(te.hasMarkPlaceholder=!1,y.selection&&Se.isCollapsed(y.selection)&&ye){var{anchor:X}=y.selection,Pe=We.leaf(y,X.path),ut=l0(Pe,JH);if(!st.equals(Pe,ye,{loose:!0})){te.hasMarkPlaceholder=!0;var Me=Object.fromEntries(Object.keys(ut).map(K=>[K,null]));Fe.push(Fu(Fu(Fu({[VP]:!0},Me),ye),{},{anchor:X,focus:X}))}}return $.useEffect(()=>{setTimeout(()=>{var{selection:K}=y;if(K){var{anchor:fe}=K,we=We.leaf(y,fe.path);if(ye&&!st.equals(we,ye,{loose:!0})){eu.set(y,ye);return}}eu.delete(y)})}),Pt.createElement(nS.Provider,{value:s},Pt.createElement(eS.Provider,{value:r},Pt.createElement(ZH,{node:B,receivedUserInput:Q},Pt.createElement(v,Fu(Fu({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},E),{},{spellCheck:Gl||!P3?E.spellCheck:!1,autoCorrect:Gl||!P3?E.autoCorrect:"false",autoCapitalize:Gl||!P3?E.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:Ce,style:Fu(Fu({},w?{}:Fu({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},_?{minHeight:_}:{})),p),onBeforeInput:$.useCallback(K=>{if(!Gl&&!s&&!_i(K,E.onBeforeInput)&&Te.hasSelectableTarget(y,K.target)&&(K.preventDefault(),!Te.isComposing(y))){var fe=K.data;k.insertText(y,fe)}},[E.onBeforeInput,y,s]),onInput:$.useCallback(K=>{if(!_i(K,E.onInput)){if(Ee.current){Ee.current.handleInput();return}for(var fe of R.current)fe();R.current=[]}},[E.onInput]),onBlur:$.useCallback(K=>{if(!(s||te.isUpdatingSelection||!Te.hasSelectableTarget(y,K.target)||_i(K,E.onBlur))){var fe=Te.findDocumentOrShadowRoot(y);if(te.latestElement!==fe.activeElement){var{relatedTarget:we}=K,De=Te.toDOMNode(y,y);if(we!==De&&!(ms(we)&&we.hasAttribute("data-slate-spacer"))){if(we!=null&&nc(we)&&Te.hasDOMNode(y,we)){var Ke=Te.toSlateNode(y,we);if(rt.isElement(Ke)&&!y.isVoid(Ke))return}if(wf){var Ue=fe.getSelection();Ue==null||Ue.removeAllRanges()}Xl.delete(y)}}}},[s,te.isUpdatingSelection,te.latestElement,y,E.onBlur]),onClick:$.useCallback(K=>{if(Te.hasTarget(y,K.target)&&!_i(K,E.onClick)&&nc(K.target)){var fe=Te.toSlateNode(y,K.target),we=Te.findPath(y,fe);if(!k.hasPath(y,we)||We.get(y,we)!==fe)return;if(K.detail===VH&&we.length>=1){var De=we;if(!(rt.isElement(fe)&&k.isBlock(y,fe))){var Ke,Ue=k.above(y,{match:Mt=>rt.isElement(Mt)&&k.isBlock(y,Mt),at:we});De=(Ke=Ue==null?void 0:Ue[1])!==null&&Ke!==void 0?Ke:we.slice(0,1)}var Rt=k.range(y,De);Oe.select(y,Rt);return}if(s)return;var It=k.start(y,we),St=k.end(y,we),lt=k.void(y,{at:It}),yt=k.void(y,{at:St});if(lt&&yt&&q.equals(lt[1],yt[1])){var wn=k.range(y,It);Oe.select(y,wn)}}},[y,E.onClick,s]),onCompositionEnd:$.useCallback(K=>{if(Te.hasSelectableTarget(y,K.target)){var fe;if(Te.isComposing(y)&&Promise.resolve().then(()=>{A(!1),Pf.set(y,!1)}),(fe=Ee.current)===null||fe===void 0||fe.handleCompositionEnd(K),_i(K,E.onCompositionEnd)||Hi)return;if(!wf&&!UN&&!$P&&!KN&&!XN&&K.data){var we=eu.get(y);eu.delete(y),we!==void 0&&(ka.set(y,y.marks),y.marks=we),k.insertText(y,K.data);var De=ka.get(y);ka.delete(y),De!==void 0&&(y.marks=De)}}},[E.onCompositionEnd,y]),onCompositionUpdate:$.useCallback(K=>{Te.hasSelectableTarget(y,K.target)&&!_i(K,E.onCompositionUpdate)&&(Te.isComposing(y)||(A(!0),Pf.set(y,!0)))},[E.onCompositionUpdate,y]),onCompositionStart:$.useCallback(K=>{if(Te.hasSelectableTarget(y,K.target)){var fe;if((fe=Ee.current)===null||fe===void 0||fe.handleCompositionStart(K),_i(K,E.onCompositionStart)||Hi)return;A(!0);var{selection:we}=y;if(we&&Se.isExpanded(we)){k.deleteFragment(y);return}}},[E.onCompositionStart,y]),onCopy:$.useCallback(K=>{Te.hasSelectableTarget(y,K.target)&&!_i(K,E.onCopy)&&!Hw(K)&&(K.preventDefault(),Te.setFragmentData(y,K.clipboardData,"copy"))},[E.onCopy,y]),onCut:$.useCallback(K=>{if(!s&&Te.hasSelectableTarget(y,K.target)&&!_i(K,E.onCut)&&!Hw(K)){K.preventDefault(),Te.setFragmentData(y,K.clipboardData,"cut");var{selection:fe}=y;if(fe)if(Se.isExpanded(fe))k.deleteFragment(y);else{var we=We.parent(y,fe.anchor.path);k.isVoid(y,we)&&Oe.delete(y)}}},[s,y,E.onCut]),onDragOver:$.useCallback(K=>{if(Te.hasTarget(y,K.target)&&!_i(K,E.onDragOver)){var fe=Te.toSlateNode(y,K.target);rt.isElement(fe)&&k.isVoid(y,fe)&&K.preventDefault()}},[E.onDragOver,y]),onDragStart:$.useCallback(K=>{if(!s&&Te.hasTarget(y,K.target)&&!_i(K,E.onDragStart)){var fe=Te.toSlateNode(y,K.target),we=Te.findPath(y,fe),De=rt.isElement(fe)&&k.isVoid(y,fe)||k.void(y,{at:we,voids:!0});if(De){var Ke=k.range(y,we);Oe.select(y,Ke)}te.isDraggingInternally=!0,Te.setFragmentData(y,K.dataTransfer,"drag")}},[s,y,E.onDragStart,te]),onDrop:$.useCallback(K=>{if(!s&&Te.hasTarget(y,K.target)&&!_i(K,E.onDrop)){K.preventDefault();var fe=y.selection,we=Te.findEventRange(y,K),De=K.dataTransfer;Oe.select(y,we),te.isDraggingInternally&&fe&&!Se.equals(fe,we)&&!k.void(y,{at:we,voids:!0})&&Oe.delete(y,{at:fe}),Te.insertData(y,De),Te.isFocused(y)||Te.focus(y)}te.isDraggingInternally=!1},[s,y,E.onDrop,te]),onDragEnd:$.useCallback(K=>{!s&&te.isDraggingInternally&&E.onDragEnd&&Te.hasTarget(y,K.target)&&E.onDragEnd(K),te.isDraggingInternally=!1},[s,te,E,y]),onFocus:$.useCallback(K=>{if(!s&&!te.isUpdatingSelection&&Te.hasEditableTarget(y,K.target)&&!_i(K,E.onFocus)){var fe=Te.toDOMNode(y,y),we=Te.findDocumentOrShadowRoot(y);if(te.latestElement=we.activeElement,jd&&K.target!==fe){fe.focus();return}Xl.set(y,!0)}},[s,te,y,E.onFocus]),onKeyDown:$.useCallback(K=>{if(!s&&Te.hasEditableTarget(y,K.target)){var fe;(fe=Ee.current)===null||fe===void 0||fe.handleKeyDown(K);var{nativeEvent:we}=K;if(Te.isComposing(y)&&we.isComposing===!1&&(Pf.set(y,!1),A(!1)),_i(K,E.onKeyDown)||Te.isComposing(y))return;var{selection:De}=y,Ke=y.children[De!==null?De.focus.path[0]:0],Ue=IP(We.string(Ke))==="rtl";if(rr.isRedo(we)){K.preventDefault();var Rt=y;typeof Rt.redo=="function"&&Rt.redo();return}if(rr.isUndo(we)){K.preventDefault();var It=y;typeof It.undo=="function"&&It.undo();return}if(rr.isMoveLineBackward(we)){K.preventDefault(),Oe.move(y,{unit:"line",reverse:!0});return}if(rr.isMoveLineForward(we)){K.preventDefault(),Oe.move(y,{unit:"line"});return}if(rr.isExtendLineBackward(we)){K.preventDefault(),Oe.move(y,{unit:"line",edge:"focus",reverse:!0});return}if(rr.isExtendLineForward(we)){K.preventDefault(),Oe.move(y,{unit:"line",edge:"focus"});return}if(rr.isMoveBackward(we)){K.preventDefault(),De&&Se.isCollapsed(De)?Oe.move(y,{reverse:!Ue}):Oe.collapse(y,{edge:Ue?"end":"start"});return}if(rr.isMoveForward(we)){K.preventDefault(),De&&Se.isCollapsed(De)?Oe.move(y,{reverse:Ue}):Oe.collapse(y,{edge:Ue?"start":"end"});return}if(rr.isMoveWordBackward(we)){K.preventDefault(),De&&Se.isExpanded(De)&&Oe.collapse(y,{edge:"focus"}),Oe.move(y,{unit:"word",reverse:!Ue});return}if(rr.isMoveWordForward(we)){K.preventDefault(),De&&Se.isExpanded(De)&&Oe.collapse(y,{edge:"focus"}),Oe.move(y,{unit:"word",reverse:Ue});return}if(Gl){if((WP||wf)&&De&&(rr.isDeleteBackward(we)||rr.isDeleteForward(we))&&Se.isCollapsed(De)){var St=We.parent(y,De.anchor.path);if(rt.isElement(St)&&k.isVoid(y,St)&&(k.isInline(y,St)||k.isBlock(y,St))){K.preventDefault(),k.deleteBackward(y,{unit:"block"});return}}}else{if(rr.isBold(we)||rr.isItalic(we)||rr.isTransposeCharacter(we)){K.preventDefault();return}if(rr.isSoftBreak(we)){K.preventDefault(),k.insertSoftBreak(y);return}if(rr.isSplitBlock(we)){K.preventDefault(),k.insertBreak(y);return}if(rr.isDeleteBackward(we)){K.preventDefault(),De&&Se.isExpanded(De)?k.deleteFragment(y,{direction:"backward"}):k.deleteBackward(y);return}if(rr.isDeleteForward(we)){K.preventDefault(),De&&Se.isExpanded(De)?k.deleteFragment(y,{direction:"forward"}):k.deleteForward(y);return}if(rr.isDeleteLineBackward(we)){K.preventDefault(),De&&Se.isExpanded(De)?k.deleteFragment(y,{direction:"backward"}):k.deleteBackward(y,{unit:"line"});return}if(rr.isDeleteLineForward(we)){K.preventDefault(),De&&Se.isExpanded(De)?k.deleteFragment(y,{direction:"forward"}):k.deleteForward(y,{unit:"line"});return}if(rr.isDeleteWordBackward(we)){K.preventDefault(),De&&Se.isExpanded(De)?k.deleteFragment(y,{direction:"backward"}):k.deleteBackward(y,{unit:"word"});return}if(rr.isDeleteWordForward(we)){K.preventDefault(),De&&Se.isExpanded(De)?k.deleteFragment(y,{direction:"forward"}):k.deleteForward(y,{unit:"word"});return}}}},[s,y,E.onKeyDown]),onPaste:$.useCallback(K=>{!s&&Te.hasEditableTarget(y,K.target)&&!_i(K,E.onPaste)&&(!Gl||ZN(K.nativeEvent)||wf)&&(K.preventDefault(),Te.insertData(y,K.clipboardData))},[s,y,E.onPaste])}),Pt.createElement(eG,{decorations:Fe,node:y,renderElement:a,renderPlaceholder:h,renderLeaf:f,selection:y.selection})))))},nG=e=>{var{attributes:t,children:n}=e;return Pt.createElement("span",Fu({},t),n,Hi&&Pt.createElement("br",null))},rG=()=>[],iG=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&Se.isCollapsed(e.selection))){var n=t.startContainer.parentElement;n.getBoundingClientRect=t.getBoundingClientRect.bind(t),vN(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},_i=(e,t)=>{if(!t)return!1;var n=t(e);return n??(e.isDefaultPrevented()||e.isPropagationStopped())},Hw=e=>nc(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),oG=(e,t)=>{if(!t)return!1;var n=t(e);return n??e.defaultPrevented},sG=$.createContext(!1),uG=$.createContext({});function aG(e){var t=$.useRef([]).current,n=$.useRef({editor:e}).current,r=$.useCallback(o=>{n.editor=o,t.forEach(s=>s(o))},[t,n]),i=$.useMemo(()=>({getSlate:()=>n.editor,addEventListener:o=>(t.push(o),()=>{t.splice(t.indexOf(o),1)})}),[t,n]);return{selectorContext:i,onChange:r}}var lG=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],cG=e=>{var{editor:t,children:n,onChange:r,onSelectionChange:i,onValueChange:o,initialValue:s}=e,a=l0(e,lG),[f,h]=Pt.useState(()=>{if(!We.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Ur.stringify(s)));if(!k.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(Ur.stringify(t)));return t.children=s,Object.assign(t,a),{v:0,editor:t}}),{selectorContext:d,onChange:p}=aG(t),v=$.useCallback(y=>{var S;switch(r&&r(t.children),y==null||(S=y.operation)===null||S===void 0?void 0:S.type){case"set_selection":i==null||i(t.selection);break;default:o==null||o(t.children)}h(A=>({v:A.v+1,editor:t})),p(t)},[t,p,r,i,o]);$.useEffect(()=>(C6.set(t,v),()=>{C6.set(t,()=>{})}),[t,v]);var[w,E]=$.useState(Te.isFocused(t));return $.useEffect(()=>{E(Te.isFocused(t))},[t]),Ng(()=>{var y=()=>E(Te.isFocused(t));return GP>=17?(document.addEventListener("focusin",y),document.addEventListener("focusout",y),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",y)}):(document.addEventListener("focus",y,!0),document.addEventListener("blur",y,!0),()=>{document.removeEventListener("focus",y,!0),document.removeEventListener("blur",y,!0)})},[]),Pt.createElement(uG.Provider,{value:d},Pt.createElement(rS.Provider,{value:f},Pt.createElement(V4.Provider,{value:f.editor},Pt.createElement(sG.Provider,{value:w},n))))},Gw=(e,t)=>{var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},$w=(e,t,n)=>{var r=Te.toDOMRange(e,t).getBoundingClientRect(),i=Te.toDOMRange(e,n).getBoundingClientRect();return Gw(r,i)&&Gw(i,r)},fG=(e,t)=>{var n=k.range(e,Se.end(t)),r=Array.from(k.positions(e,{at:t})),i=0,o=r.length,s=Math.floor(o/2);if($w(e,k.range(e,r[i]),n))return k.range(e,r[i],n);if(r.length<2)return k.range(e,r[r.length-1],n);for(;s!==r.length&&s!==i;)$w(e,k.range(e,r[s]),n)?o=s:i=s,s=Math.floor((i+o)/2);return k.range(e,r[o],n)};function Ww(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ww(Object(n),!0).forEach(function(r){xs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ww(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var hG=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=t,{apply:i,onChange:o,deleteBackward:s,addMark:a,removeMark:f}=r;return jm.set(r,new WeakMap),r.addMark=(h,d)=>{var p,v;(p=K4.get(r))===null||p===void 0||p(),!eu.get(r)&&(v=co.get(r))!==null&&v!==void 0&&v.length&&eu.set(r,null),ka.delete(r),a(h,d)},r.removeMark=h=>{var d;!eu.get(r)&&(d=co.get(r))!==null&&d!==void 0&&d.length&&eu.set(r,null),ka.delete(r),f(h)},r.deleteBackward=h=>{if(h!=="line")return s(h);if(r.selection&&Se.isCollapsed(r.selection)){var d=k.above(r,{match:E=>rt.isElement(E)&&k.isBlock(r,E),at:r.selection});if(d){var[,p]=d,v=k.range(r,p,r.selection.anchor),w=fG(r,v);Se.isCollapsed(w)||Oe.delete(r,{at:w})}}},r.apply=h=>{var d=[],p=[],v=co.get(r);if(v!=null&&v.length){var w=v.map(me=>fH(me,h)).filter(Boolean);co.set(r,w)}var E=zl.get(r);E&&zl.set(r,Mw(r,E,h));var y=jl.get(r);if(y!=null&&y.at){var S=Yt.isPoint(y==null?void 0:y.at)?P6(r,y.at,h):Mw(r,y.at,h);jl.set(r,S?jw(jw({},y),{},{at:S}):null)}switch(h.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...Od(r,h.path));break}case"set_selection":{var A;(A=wg.get(r))===null||A===void 0||A.unref(),wg.delete(r);break}case"insert_node":case"remove_node":{d.push(...Od(r,q.parent(h.path)));break}case"merge_node":{var B=q.previous(h.path);d.push(...Od(r,B));break}case"move_node":{var R=q.common(q.parent(h.path),q.parent(h.newPath));d.push(...Od(r,R));var _;q.isBefore(h.path,h.newPath)?(d.push(...Od(r,q.parent(h.path))),_=h.newPath):(d.push(...Od(r,q.parent(h.newPath))),_=h.path);var F=We.get(t,q.parent(_)),j=Te.findKey(r,F),z=k.pathRef(r,q.parent(_));p.push([z,j]);break}}i(h);for(var[Q,se]of d){var[te]=k.node(r,Q);q3.set(te,se)}for(var[Ee,ie]of p)if(Ee.current){var[ce]=k.node(r,Ee.current);q3.set(ce,ie)}},r.setFragmentData=h=>{var{selection:d}=r;if(d){var[p,v]=Se.edges(d),w=k.void(r,{at:p.path}),E=k.void(r,{at:v.path});if(!(Se.isCollapsed(d)&&!w)){var y=Te.toDOMRange(r,d),S=y.cloneContents(),A=S.childNodes[0];if(S.childNodes.forEach(te=>{te.textContent&&te.textContent.trim()!==""&&(A=te)}),E){var[B]=E,R=y.cloneRange(),_=Te.toDOMNode(r,B);R.setEndAfter(_),S=R.cloneContents()}if(w&&(A=S.querySelector("[data-slate-spacer]")),Array.from(S.querySelectorAll("[data-slate-zero-width]")).forEach(te=>{var Ee=te.getAttribute("data-slate-zero-width")==="n";te.textContent=Ee?`
`:""}),UP(A)){var F=A.ownerDocument.createElement("span");F.style.whiteSpace="pre",F.appendChild(A),S.appendChild(F),A=F}var j=r.getFragment(),z=JSON.stringify(j),Q=window.btoa(encodeURIComponent(z));A.setAttribute("data-slate-fragment",Q),h.setData("application/".concat(n),Q);var se=S.ownerDocument.createElement("div");return se.appendChild(S),se.setAttribute("hidden","true"),S.ownerDocument.body.appendChild(se),h.setData("text/html",se.innerHTML),h.setData("text/plain",KP(se)),S.ownerDocument.body.removeChild(se),h}}},r.insertData=h=>{r.insertFragmentData(h)||r.insertTextData(h)},r.insertFragmentData=h=>{var d=h.getData("application/".concat(n))||nH(h);if(d){var p=decodeURIComponent(window.atob(d)),v=JSON.parse(p);return r.insertFragment(v),!0}return!1},r.insertTextData=h=>{var d=h.getData("text/plain");if(d){var p=d.split(/\r\n|\r|\n/),v=!1;for(var w of p)v&&Oe.splitNodes(r,{always:!0}),r.insertText(w),v=!0;return!0}return!1},r.onChange=h=>{var d=GP<18?HN.unstable_batchedUpdates:p=>p();d(()=>{var p=C6.get(r);p&&p(h),o(h)})},r},Od=(e,t)=>{var n=[];for(var[r,i]of k.levels(e,{at:t})){var o=Te.findKey(e,r);n.push([i,o])}return n},dG={isHistory(e){return ai(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||Ia.isOperationList(e.redos[0].operations))&&(e.undos.length===0||Ia.isOperationList(e.undos[0].operations))}},nv=new WeakMap,rv=new WeakMap,zd={isHistoryEditor(e){return dG.isHistory(e.history)&&k.isEditor(e)},isMerging(e){return rv.get(e)},isSaving(e){return nv.get(e)},redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var n=zd.isMerging(e);rv.set(e,!1),t(),rv.set(e,n)},withoutSaving(e,t){var n=zd.isSaving(e);nv.set(e,!1),t(),nv.set(e,n)}},gG=e=>{var t=e,{apply:n}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:r}=t,{redos:i}=r;if(i.length>0){var o=i[i.length-1];o.selectionBefore&&Oe.setSelection(t,o.selectionBefore),zd.withoutSaving(t,()=>{k.withoutNormalizing(t,()=>{for(var s of o.operations)t.apply(s)})}),r.redos.pop(),t.writeHistory("undos",o)}},t.undo=()=>{var{history:r}=t,{undos:i}=r;if(i.length>0){var o=i[i.length-1];zd.withoutSaving(t,()=>{k.withoutNormalizing(t,()=>{var s=o.operations.map(Ia.inverse).reverse();for(var a of s)t.apply(a);o.selectionBefore&&Oe.setSelection(t,o.selectionBefore)})}),t.writeHistory("redos",o),r.undos.pop()}},t.apply=r=>{var{operations:i,history:o}=t,{undos:s}=o,a=s[s.length-1],f=a&&a.operations[a.operations.length-1],h=zd.isSaving(t),d=zd.isMerging(t);if(h==null&&(h=mG(r)),h){if(d==null&&(a==null?d=!1:i.length!==0?d=!0:d=pG(r,f)),a&&d)a.operations.push(r);else{var p={operations:[r],selectionBefore:t.selection};t.writeHistory("undos",p)}for(;s.length>100;)s.shift();o.redos=[]}n(r)},t.writeHistory=(r,i)=>{t.history[r].push(i)},t},pG=(e,t)=>!!(t&&e.type==="insert_text"&&t.type==="insert_text"&&e.offset===t.offset+t.text.length&&q.equals(e.path,t.path)||t&&e.type==="remove_text"&&t.type==="remove_text"&&e.offset+e.text.length===t.offset&&q.equals(e.path,t.path)),mG=(e,t)=>e.type!=="set_selection";const vG=e=>{const t=e,{insertData:n}=t;return t.insertBreak=()=>{e.insertText(`
`)},t.insertSoftBreak=()=>{e.insertText(`
`)},t.insertData=r=>{let i=r.getData("text/plain");if(!r.getData("application/x-slate-fragment")&&i){i.endsWith(`
`)&&(i=i.substring(0,i.length-1)),i=i.trim().replace(/\t+/g," "),t.insertText(i);return}n(r)},t},A0="#6698FF",tu=9,D6="plait-text-plugin-key",oS=30,yG="transparent",Z3=20,Cg=18,xg="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Noto Sans', 'Noto Sans CJK SC', 'Microsoft Yahei', 'Hiragino Sans GB', Arial, sans-serif",sS="none";var zw;(function(e){e.image="image"})(zw||(zw={}));const uS=["png","jpeg","gif","bmp"];var T6;(function(e){e.nw="0",e.n="4",e.ne="1",e.e="5",e.se="2",e.s="6",e.sw="3",e.w="7"})(T6||(T6={}));var Es;(function(e){e.solid="solid",e.dashed="dashed",e.dotted="dotted"})(Es||(Es={}));class xo{constructor(t,n){this.board=t,this.options=n}processDrawing(t,n,r){var i,o;if(this.canDraw&&this.canDraw(t,r)){const s=this.draw(t,r);if(s){this.g&&n.contains(this.g)?this.g.replaceWith(s):(this.g&&this.g.remove(),(i=this.options)!=null&&i.prepend?n.prepend(s):n.appendChild(s)),this.g=s;const a=this.board.getRectangle(t);if(!a)return;let f=M.getCenterPoint(a);if((o=this.options)!=null&&o.active){const d=Ti(this.board,a);f=M.getCenterPoint(d)}let h;vo.isGroup(t)?h=ho(Ds(this.board,t,!0)):h=t.angle,h&&Cs(s,f,h)}else this.destroy();wG(this)&&this.afterDraw(t)}else this.destroy()}destroy(){this.g&&(this.g.remove(),this.g=void 0)}}function wG(e){return!!e.afterDraw}const aS=(e,t)=>{const n={stroke:"#99999995",strokeWidth:2,fill:"#FFF",fillStyle:"solid"},r=Yf(I.getRoughSVG(e),t,tu,n);return r.classList.add(SO),r};function CG(e,t){return Yf(I.getRoughSVG(e),t,tu,{stroke:"#FFFFFF",strokeWidth:1,fill:`${A0}`,fillStyle:"solid"})}function Vw(e,t){return Yf(I.getRoughSVG(e),t,tu,{stroke:`${A0}`,strokeWidth:2,fill:"#FFFFFF",fillStyle:"solid"})}const pf=6,Uw=(e,t)=>{const n={stroke:qr,strokeWidth:1,fillStyle:"solid"},r=[t.x-Z3-Cg/2,t.y+t.height+Z3+Cg/2],i=I.getRoughSVG(e),o=Gt(),s=i.path(`M ${r[0]+pf} ${r[1]} A ${pf} ${pf}, 0, 1, 0, ${r[0]} ${r[1]+pf}`,n),a=i.polygon([[r[0],r[1]+pf-2],[r[0],r[1]+pf+2],[r[0]+4.5,r[1]+pf]],{...n,fill:qr});return Kt(a,"round"),o.append(s,a),o},cp=(e,t)=>new Q3(e,{...t,active:!0}),ey=class ey extends xo{constructor(t,n){super(t,{...n,active:!0}),this.board=t,this.options=n,this.hasResizeHandle=!1}canDraw(t,n){return!!n.selected}draw(t,n){const r=Gt(),i=Ti(this.board,this.options.getRectangle(t)),o=this.options.getStrokeWidth()*this.board.viewport.zoom,s=M.inflate(i,o),a=su(this.board,s,{stroke:A0,strokeWidth:hr});return r.append(a),a.classList.add(op),a.style.opacity=`${this.options.getStrokeOpacity()}`,this.options.hasResizeHandle()?(this.hasResizeHandle=!0,M.getCornerPoints(s).forEach(f=>{const h=aS(this.board,f);r.append(h)})):this.hasResizeHandle=!1,r}};ey.key="active-generator";let Q3=ey;const J3=e=>`${e}`,em=e=>Number(e),xG=(e,t)=>{let r=(A6(e,J3(t))?t-4:t)+2;return r>=4&&(r=r-4),A6(e,J3(t))?r+4:r},Xw=e=>{switch(e){case 0:case 2:return Js.nwse;case 1:case 3:return Js.nesw;case 4:case 6:return Js.ns;case 5:case 7:return Js.ew;default:return null}},EG=(e,t)=>{const n=M5.indexOf(e);if(n>=0){const r=Math.round(t/(Math.PI/4));e=M5[(n+r)%M5.length]}return e},lS=(e,t)=>{const n=M.getCornerPoints(e),r=n.map((o,s)=>({rectangle:{x:o[0]-t/2,y:o[1]-t/2,width:t,height:t},handle:J3(s),cursorClass:Xw(s)})),i=PG(n,t/2);return r.push(...i.map((o,s)=>({rectangle:o,handle:J3(s+4),cursorClass:Xw(s+4)}))),r},Kw=(e,t)=>t<=3?M.getCornerPoints(e)[t]:M.getEdgeCenterPoints(e)[t-4],PG=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){let i=M.getRectangleByPoints([e[r],e[(r+1)%4]]);const o=new Array(2).fill(0);o[(r+1)%2]=t/2,i=M.expand(i,o[0],o[1]),n.push(i)}return n},zm=new WeakMap,Sf=e=>!!zm.get(e),SG=(e,t)=>Sf(e)&&t(zm.get(e)),DG=(e,t,n)=>{I.getBoardContainer(e).classList.add(`${n}-resizing`),zm.set(e,t),Za(e,!0)},TG=(e,t)=>{I.getBoardContainer(e).classList.remove(`${t}-resizing`),zm.delete(e),Za(e,!1)},A6=(e,t)=>em(t)>=4,D3=(e,t)=>!A6(e,t),Z4=(e,t,n,r,i)=>{const o=Ir([r],n,i)[0],s=Ir([M.getCenterPoint(t)],n,i)[0],a=M.getPoints(t),f=M.getCenterPoint(e),h=Ir([s],o,-i)[0],d=Ir(a,f,i);return Ir(d,h,-i)},AG=e=>{const t=e.points;return t&&t.length>1},Vm=(e,t)=>{if(I.hasBeenTextEditing(e)||Wi(e))return!1;const n=Ye(e);return n.length===1&&n[0]===t&&AG(t)};function zn(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=Math.sqrt(n*n+r*r);if(i===0)throw new Error("Points must not be the same for a unit vector calculation.");const o=n/i,s=r/i;return[o,s]}function Vd(e,t,n){const r=Math.hypot(t[0],t[1]);return[e[0]+t[0]/r*n,e[1]+t[1]/r*n]}function Yw(e,t,n,r){return r?[e[0]+n,e[1]+n/t[0]*t[1]]:[e[0]+n/t[1]*t[0],e[1]+n]}function qw(e){const t=e[0],r=e[1],i=-t;return[r,i]}function Hg(e,t){if(!t)return e;const n=e[0],r=e[1],i=n*Math.cos(t)-r*Math.sin(t),o=n*Math.sin(t)+r*Math.cos(t);return[i,o]}function cS(e,t,n){const r=Et(e[0],e[1],t[0],t[1]),i=Et(e[0],e[1],n[0],n[1]),o=Et(t[0],t[1],n[0],n[1]);return Math.abs(r+i-o)<.1}const BG=(e,t,n)=>{const r=[],i=[Math.min(t[0],n[0]),Math.max(t[0],n[0])],o=[Math.min(t[1],n[1]),Math.max(t[1],n[1])],s=zn(t,n);if(e[0]>=i[0]&&e[0]<=i[1]){const a=Yw(t,s,e[0]-t[0],!0);r.push(a)}else if(e[1]>=o[0]&&e[1]<=o[1]){const a=Yw(t,s,e[1]-t[1],!1);r.push(a)}return r};function fS(e,t){const r=hS(e)*t;let i=0;for(let o=0;o<e.length-1;o++){const[s,a]=e[o],[f,h]=e[o+1],d=Et(s,a,f,h);if(i+d>=r){const v=(r-i)/d,w=s+(f-s)*v,E=a+(h-a)*v;return[w,E]}i+=d}return e[e.length-1]}function hS(e){let t=0;for(let n=0;n<e.length-1;n++){const[r,i]=e[n],[o,s]=e[n+1];t+=Et(r,i,o,s)}return t}function dS(e,t){const n=hS(e);let r=0;for(let i=0;i<e.length-1;i++){if(cS(t,e[i],e[i+1]))return r+=Et(t[0],t[1],e[i][0],e[i][1]),r/n;r+=Et(e[i][0],e[i][1],e[i+1][0],e[i+1][1])}throw new Error("Cannot get ratio by point")}const f0=e=>{const t=[];return e.forEach(n=>{t.findIndex(i=>dt.isEquals(n,i))===-1&&t.push(n)}),t};function Oa(e){if(e.length<=2)return e;let t=[e[0]];for(let n=1;n<e.length-1;n++){const r=e[n-1],i=e[n],o=e[n+1];!(dt.isOverHorizontal([r,i,o])||dt.isOverVertical([r,i,o]))&&t.push(i)}return t.push(e[e.length-1]),t}const Gg=(e,t,n)=>{const r=Et(...e,...t),i=dt.isEquals(e,t),o=i?1:(t[1]-e[1])/r,s=i?1:(t[0]-e[0])/r;return[e[0]+n*s,e[1]+n*o]},RG={[rn.left]:{x:-1,y:0},[rn.right]:{x:1,y:0},[rn.top]:{x:0,y:-1},[rn.bottom]:{x:0,y:1}};function MG(e){switch(e){case rn.left:return rn.right;case rn.right:return rn.left;case rn.top:return rn.bottom;case rn.bottom:return rn.top}}function gS(e){if(e[0]===0)return rn.left;if(e[0]===1)return rn.right;if(e[1]===0)return rn.top;if(e[1]===1)return rn.bottom}function Nd(e){const t=e[0],n=e[1];if(t===0&&n===0)return null;if(t===0)return n>0?rn.bottom:rn.top;if(n===0)return t>0?rn.right:rn.left;const r=Math.atan2(n,t);return r>-Math.PI/4&&r<=Math.PI/4?rn.right:r>Math.PI/4&&r<=3*Math.PI/4?rn.bottom:r>-3*Math.PI/4&&r<=-Math.PI/4?rn.top:rn.left}function Gf(e){return RG[e]}function h0(e){return e===0?e:e/Math.abs(e)}const bG=(e,t,n,r,i)=>{const o=Gf(t),s=Gf(r),a=[e[0]+o.x*i,e[1]+o.y*i],f=[n[0]+s.x*i,n[1]+s.y*i],h=OG(a,t,f),d=h.x!==0?"x":"y",p=h[d];let v=[],w,E;const[y,S]=IG({sourceX:e[0],sourceY:e[1],targetX:n[0],targetY:n[1]});if(o[d]*s[d]===-1){w=y,E=S;const A=[[w,a[1]],[w,f[1]]],B=[[a[0],E],[f[0],E]];o[d]===p?v=d==="x"?A:B:v=d==="x"?B:A}else{const A=[[a[0],f[1]]],B=[[f[0],a[1]]];d==="x"?v=o.x===p?B:A:v=o.y===p?A:B;let R;if(t!==r){const _=d==="x"?1:0,F=o[d]===s[d==="x"?"y":"x"],j=a[_]>f[_],z=a[_]<f[_];R=o[d]===1&&(!F&&j||F&&z)||o[d]!==1&&(!F&&z||F&&j),R&&(v=d==="x"?A:B)}}return[e,a,...v,f,n]},OG=(e,t=rn.bottom,n)=>t===rn.left||t===rn.right?e[0]<n[0]?{x:1,y:0}:{x:-1,y:0}:e[1]<n[1]?{x:0,y:1}:{x:0,y:-1};function IG({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function Q4(e){const t=e.ctrlKey||e.metaKey,n=cn.isKeyHotkey("alt",e),r=cn.isKeyHotkey("shift",e),i=e.key.includes("CapsLock"),o=e.key.includes("Tab"),s=e.key.includes("Escape"),a=e.key.startsWith("F"),f=!!e.key.includes("Arrow");return i||t||n||f||r||o||s||a}const kG=e=>cn.isKeyHotkey("mod+/",e),FG=e=>e.key==="Tab",LG=e=>e.key==="Enter",J4=e=>e.code==="Space",e8=e=>Di.isDeleteBackward(e)||Di.isDeleteForward(e);var Vu;(function(e){e.dnd="dnd",e.drawing="drawing"})(Vu||(Vu={}));const pS=new WeakMap,mS=e=>pS.get(e),d0=(e,t)=>{pS.set(e,t)},Um=e=>mS(e)===Vu.dnd,B0=e=>mS(e)===Vu.drawing,R0=e=>{const t=pn.getElementRef(e);return(t==null?void 0:t.getTextManages())||[]},qf=e=>{const t=R0(e)[0];return t||console.warn("can not find textManage"),t},Zf=e=>R0(e).map(t=>t.editor),Xm=e=>{const t=Zf(e)[0];return t||console.warn("can not find textManage"),t},_G=e=>{const t=Ye(e);let n=null;return t.forEach(r=>{const i=Zf(r);!n&&i&&i.length>0&&(n=i[0])}),n},vS=e=>e.map(t=>{try{const n=Zf(t);return n.length?n.map(r=>{const i=We.texts(r);return Array.from(i).reduce((o,s)=>o+=s[0].text,"")}).join(" "):""}catch{return""}}).filter(t=>t).join(" "),yS=(e,t)=>{const n=t||Ye(e);if(n.length){const r=[];n.forEach(o=>{r.push(...R0(o))});const i=r.find(o=>o.isEditing);return i?[i.editor]:r.map(o=>o.editor)}},Qa=(e,t,n)=>{n=n||{};const r=typeof e=="string"?{children:[{text:e,...n}]}:e;return t&&(r.align=t),r},Zw=e=>e===14?20:e===18?25:e*1.5,wS=async(e,t,n,r)=>{let i=0,o=0;await NG(t,n).then(h=>{i=h.width,o=h.height});let s=null;const a=URL.createObjectURL(t);I.getBoardContext(e).setUploadingFile({url:a,file:t}),s={url:a,width:i,height:o},r(s)};function NG(e,t){return new Promise((n,r)=>{const i=new Image;i.src=URL.createObjectURL(e),i.onload=function(){const o=t,s=t*i.naturalHeight/i.naturalWidth;n(i.naturalWidth>t?{width:o,height:s}:{width:i.naturalWidth,height:i.naturalHeight})}})}const t8=new WeakMap,No=e=>t8.get(e),CS=(e,t)=>{t8.set(e,t)},HG=e=>{t8.delete(e)};class GG{constructor(){this.list=[]}enqueue(t){this.list.push(t),this.list=this.list.sort((n,r)=>n.priority-r.priority)}dequeue(){return this.list.shift()}}class $G{constructor(t){this.graph=t,this.cameFrom=new Map}heuristic(t,n){return Math.abs(t[0]-n[0])+Math.abs(t[1]-n[1])}search(t,n,r){const i=new GG,o=this.graph.get(t);this.cameFrom=new Map;const s=new Map;for(s.set(o,0),i.enqueue({node:o,priority:0});i.list.length>0;){var a=i.dequeue();if(!a)throw new Error("can't find current");const f=a.node.data;if(f[0]===n[0]&&f[1]===n[1])break;a.node.adjacentNodes.forEach(h=>{let d=s.get(a.node)+this.heuristic(h.data,a.node.data);const p=this.cameFrom.get(a.node),v=p?p.data:r,w=v[0]===(a==null?void 0:a.node.data[0])&&v[0]===h.data[0],E=v[1]===(a==null?void 0:a.node.data[1])&&v[1]===h.data[1];if(!w&&!E&&(d=d+1),!s.has(h)||s.get(h)&&d<s.get(h)){s.set(h,d);const y=d+this.heuristic(h.data,n);i.enqueue({node:h,priority:y}),this.cameFrom.set(h,a.node)}})}}getRoute(t,n){const r=[];let i=n;for(;i[0]!==t[0]||i[1]!==t[1];){const o=this.graph.get(i),s=this.cameFrom.get(o);r.unshift(s.data),i=s.data}return r}}class WG{constructor(t){this.data=t,this.distance=Number.MAX_SAFE_INTEGER,this.adjacentNodes=[]}}class jG{constructor(){this.index={}}add(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();i in this.index||(this.index[i]={}),o in this.index[i]||(this.index[i][o]=new WG(t))}connect(t,n){const r=this.get(t),i=this.get(n);if(!r||!i)throw new Error("A point was not found");r.adjacentNodes.push(i)}has(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();return i in this.index&&o in this.index[i]}get(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();return i in this.index&&o in this.index[i]?this.index[i][o]:null}}const xS=C0("debug:plait:elbow-line-routing"),ES=(e,t)=>{const{nextSourcePoint:n,nextTargetPoint:r}=e,i=VG(e),o=UG(i),s=new $G(o);s.search(n,r,e.sourcePoint);let a=s.getRoute(n,r);a=[e.sourcePoint,...a,r,e.targetPoint];const f=M.isHitX(e.sourceOuterRectangle,e.targetOuterRectangle),h=M.isHitY(e.sourceOuterRectangle,e.targetOuterRectangle),d=f?void 0:M.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!0),p=h?void 0:M.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!1);return a=zG(a,{centerX:d,centerY:p,sourceRectangle:e.sourceRectangle,targetRectangle:e.targetRectangle},t),a},zG=(e,t,n)=>{const{sourceRectangle:r,targetRectangle:i,centerX:o,centerY:s}=t;if(n&&xS.clear(),o!==void 0){const a=Jw(e,o,!0),f=a.pointOfHit&&Qw(e,{parallelPaths:a.parallelPaths,pointOfHit:a.pointOfHit,sourceRectangle:r,targetRectangle:i},n);f&&(e=f)}if(s!==void 0){const a=Jw(e,s,!1),f=a.pointOfHit&&Qw(e,{parallelPaths:a.parallelPaths,pointOfHit:a.pointOfHit,sourceRectangle:r,targetRectangle:i},n);f&&(e=f)}return e},Qw=(e,t,n)=>{const{parallelPaths:r,pointOfHit:i,sourceRectangle:o,targetRectangle:s}=t;let a=null;return r.forEach(f=>{const h=[i,f[0],f[1]],d=M.getRectangleByPoints(h);if(!M.isHit(d,o)&&!M.isHit(d,s)){const p=M.getCornerPointsByPoints(h);n&&xS.drawRectangle(n,d);const v=[],w=[];e.forEach((_,F)=>{const j=p.findIndex(z=>dt.isEquals(_,z));j!==-1&&(v.push(F),w.push(j))});const E=[...e],y=p.find((_,F)=>!w.includes(F)),S=Math.abs(v[0]-v[v.length-1])+1;E.splice(v[0]+1,S-2,y);const A=Oa([...e]).length-1;Oa([...E]).length-1<=A&&(a=E)}return null}),a},Jw=(e,t,n)=>{const r=[];let i=null,o=null;const s=n?0:1;for(let a=0;a<e.length;a++){const f=e[a-1],h=e[a];i===null&&f&&f[s]===h[s]&&(i=f),i!==null&&f[s]!==h[s]&&(r.push([i,f]),i=null),h[s]===t&&(o=h)}return i&&r.push([i,e[e.length-1]]),{pointOfHit:o,parallelPaths:r}},VG=e=>{const{nextSourcePoint:t,nextTargetPoint:n,sourceOuterRectangle:r,targetOuterRectangle:i}=e,o=[],s=[];let a=[];[r,i].forEach(d=>{o.push(d.x,d.x+d.width/2,d.x+d.width),s.push(d.y,d.y+d.height/2,d.y+d.height)});const f=[r.x,r.x+r.width,i.x,i.x+i.width].sort((d,p)=>d-p);o.push((f[1]+f[2])/2,t[0],n[0]);const h=[r.y,r.y+r.height,i.y,i.y+i.height].sort((d,p)=>d-p);s.push((h[1]+h[2])/2,t[1],n[1]);for(let d=0;d<o.length;d++)for(let p=0;p<s.length;p++){const v=[o[d],s[p]],w=M.isPointInRectangle(r,v),E=M.isPointInRectangle(i,v);!w&&!E&&a.push(v)}return a=f0(a).filter(d=>{const p=M.isPointInRectangle(r,d),v=M.isPointInRectangle(i,d);return!p&&!v}),a},UG=e=>{const t=new jG,n=[],r=[];e.forEach(o=>{const s=o[0],a=o[1];n.indexOf(s)<0&&n.push(s),r.indexOf(a)<0&&r.push(a),t.add(o)}),n.sort((o,s)=>o-s),r.sort((o,s)=>o-s);const i=o=>t.has(o);for(let o=0;o<n.length;o++)for(let s=0;s<r.length;s++){const a=[n[o],r[s]];if(i(a)){if(o>0){const f=[n[o-1],r[s]];i(f)&&(t.connect(f,a),t.connect(a,f))}if(s>0){const f=[n[o],r[s-1]];i(f)&&(t.connect(f,a),t.connect(a,f))}}}return t},XG=(e,t)=>{const n=oS;let r=new Array(4).fill(n),i=new Array(4).fill(n);const o=e.x-(t.x+t.width),s=t.x-(e.x+e.width);if(o>0&&o<n*2){const h=o/2;r[3]=h,i[1]=h}if(s>0&&s<n*2){const h=s/2;i[3]=h,r[1]=h}const a=e.y-(t.y+t.height),f=t.y-(e.y+e.height);if(a>0&&a<n*2){const h=a/2;r[0]=h,i[2]=h}if(f>0&&f<n*2){const h=f/2;r[2]=h,i[0]=h}return{sourceOffset:r,targetOffset:i}},eC=(e,t,n)=>{switch(n){case rn.top:return[e[0],t.y];case rn.bottom:return[e[0],t.y+t.height];case rn.right:return[t.x+t.width,e[1]];default:return[t.x,e[1]]}},KG=(e,t)=>{const{sourceOffset:n,targetOffset:r}=XG(e,t),i=M.expand(e,n[3],n[0],n[1],n[2]),o=M.expand(t,r[3],r[0],r[1],r[2]);return{sourceOuterRectangle:i,targetOuterRectangle:o}},YG=e=>{const{sourcePoint:t,nextSourcePoint:n,sourceRectangle:r,sourceOuterRectangle:i,targetPoint:o,nextTargetPoint:s,targetRectangle:a,targetOuterRectangle:f}=e;return M.isPointInRectangle(a,t)||M.isPointInRectangle(f,n)||M.isPointInRectangle(i,s)||M.isPointInRectangle(r,o)},T3=new Map,n8=(e,t,n)=>{let r=T3.has(e)?T3.get(e):{};r[t]=n,T3.set(e,r)},Km=e=>T3.get(e),PS=new WeakMap,qG=(e,t)=>{I.getBoardContainer(e).classList.add("draw-elements-rotating"),PS.set(e,t),Za(e,!0)},ZG=e=>{I.getBoardContainer(e).classList.remove("draw-elements-rotating"),PS.delete(e),Za(e,!1)},tC=(e,t)=>{const n=e.getRectangle(t);return n?n.width*n.height:0},QG=(e,t,n="asc")=>t.sort((r,i)=>{const o=tC(e,r),s=tC(e,i);return n==="asc"?o-s:s-o}),JG=e=>e&&e!==sS&&e!==yG,hc=(e,t)=>{switch(e){case Es.dashed:return[8,8+t];case Es.dotted:return[2,4+t];default:return}},SS=(e,t,n,r)=>t.map(i=>{const o=r&&r(i);if(o)return o;if(i.points){const s=i.points.map(a=>[a[0]-n[0],a[1]-n[1]]);return{...i,points:s}}return i}),DS=(e,t,n,r)=>{const i={};t.forEach(o=>{i[o.id]=yn()}),t.forEach(o=>{o.id=i[o.id],r&&r(o,i),o.points&&(o.points=o.points.map(s=>[n[0]+s[0],n[1]+s[1]])),Ve.insertNode(e,o,[e.children.length])}),Ve.addSelectionWithTemporaryElements(e,t)},e$="foreign-object-image",ty=class ty extends xo{constructor(t,n){super(t,n),this.board=t,this.options=n,this.isFocus=!1}canDraw(t){return!!this.options.getImageItem(t)}draw(t){this.element=t;const n=Gt(),r=this.options.getRectangle(t);this.foreignObject=P4(r.x,r.y,r.width,r.height),this.foreignObject.classList.add(e$),n.append(this.foreignObject);const i={board:this.board,imageItem:this.options.getImageItem(t),element:t,getRectangle:()=>this.options.getRectangle(t)};return this.imageComponentRef=this.board.renderImage(this.foreignObject,i),this.activeGenerator=cp(this.board,{getStrokeWidth:()=>(Ye(this.board).length===1&&!Wi(this.board),hr),getStrokeOpacity:()=>{const o=Ye(this.board);return o.length===1&&!Wi(this.board)||!o.length?1:.5},getRectangle:()=>this.options.getRectangle(this.element),hasResizeHandle:()=>{const o=Vm(this.board,this.element);return!!No(this.board)||o}}),n}updateImage(t,n,r){if(this.element=r,n!==r&&this.imageComponentRef){const s={imageItem:this.options.getImageItem(r),element:r,getRectangle:()=>this.options.getRectangle(r)};this.imageComponentRef.update(s)}const i=this.options.getRectangle(r);pg(this.g,i.width,i.height,i.x,i.y),i&&r.angle!==void 0&&Cs(this.g,M.getCenterPoint(i),r.angle);const o=I.getActiveHost(this.board);this.activeGenerator.processDrawing(r,o,{selected:this.isFocus})}setFocus(t,n){this.isFocus=n;const r=I.getActiveHost(this.board);this.activeGenerator.processDrawing(t,r,{selected:n});const i={isFocus:n};this.imageComponentRef.update(i)}destroy(){var t,n;super.destroy(),(t=this.imageComponentRef)==null||t.destroy(),(n=this.activeGenerator)==null||n.destroy()}};ty.key="image-generator";let ja=ty;const fp=(e,t,n)=>{Ye(e).forEach(i=>{if(n!=null&&n.match&&!(n!=null&&n.match(i)))return;const o=I.findPath(e,i),s=n!=null&&n.getMemorizeKey?n==null?void 0:n.getMemorizeKey(i):"";for(let a in t)s&&n8(s,a,t[a]);n!=null&&n.callback?n.callback(i,o):Ve.setNode(e,t,o)})},t$=(e,t,n)=>{fp(e,{strokeStyle:t},n)},n$=(e,t,n)=>{fp(e,{fill:t},n)},r$=(e,t,n)=>{fp(e,{strokeColor:t},n)},i$=(e,t,n)=>{fp(e,{strokeWidth:t},n)},Yu={setFillColor:n$,setStrokeStyle:t$,setProperty:fp,setStrokeWidth:i$,setStrokeColor:r$},$f=(e,t=!1)=>{let n=e[0],r=e[1];if(t){const s=Math.abs(n[0]-r[0]),a=Math.abs(n[1]-r[1]),f=Math.max(a,s);r=[n[0]+(r[0]>n[0]?f:-f),n[1]+(r[1]>n[1]?f:-f)]}const i=[Math.min(n[0],r[0]),Math.min(n[1],r[1])];let o=[Math.max(n[0],r[0]),Math.max(n[1],r[1])];return[i,o]},nC=(e,t)=>!I.isReadonly(e)&&!I.hasBeenTextEditing(e)&&I.isPointer(e,en.selection),Qf=(e,t)=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=null,s=null,a=null,f=null;e.pointerDown=d=>{if(!t.canResize()||!nC(e)||!Wu(d)){n(d);return}const p=Bt(e,Ot(e,d.x,d.y));if(o=t.hitTest(p),o){o.cursorClass&&I.getBoardContainer(e).classList.add(`${o.cursorClass}`),a=[d.x,d.y],s={path:Array.isArray(o.element)?o.element.map(w=>I.findPath(e,w)):I.findPath(e,o.element),element:o.element,handle:o.handle,handleIndex:o.handleIndex,rectangle:o.rectangle,options:o.options};return}n(d)},e.pointerMove=d=>{if(!t.canResize()||!nC(e)){h(),r(d);return}if(a&&o&&!Sf(e)){const p=[d.x,d.y];Et(a[0],a[1],p[0],p[1])>d4&&(DG(e,s,t.key),Or.set(e,!0),t.beforeResize&&t.beforeResize(s))}if(!Sf(e)&&!a0(e)){const p=Bt(e,Ot(e,d.x,d.y));ju(e,t.key+"-common-resize-hit-test",()=>{const v=t.hitTest(p);v?(f&&v.cursorClass!==f.cursorClass&&I.getBoardContainer(e).classList.remove(`${f.cursorClass}`),f=v,f.cursorClass&&I.getBoardContainer(e).classList.add(`${f.cursorClass}`)):h()})}else if(a&&Sf(e)){d.preventDefault();const p=Bt(e,Ot(e,d.x,d.y));ju(e,"with-common-resize",()=>{a&&s&&t.onResize(s,{startPoint:Bt(e,Ot(e,a[0],a[1])),endPoint:p,isShift:!!d.shiftKey})});return}r(d)},e.globalPointerUp=d=>{i(d),(Sf(e)||o)&&(t.afterResize&&t.afterResize(s),TG(e,t.key),a=null,o=null,s=null,Or.set(e,!1))};const h=()=>{f&&(f.cursorClass&&I.getBoardContainer(e).classList.remove(`${f.cursorClass}`),f=null)};return e};class o$ extends xo{canDraw(t){return!0}draw(t,n){const r={stroke:"",strokeWidth:hr,strokeLineDash:[5]};let i={x:0,y:0,width:0,height:0};return n&&(r.stroke="#999",i=b4(this.board,t,!0)),su(this.board,i,r)}}class s${constructor(){this.textManages=[],this.generatorMap=new Map,this.updateActiveSection=()=>{}}addGenerator(t,n){this.generatorMap.set(t,n)}getGenerator(t){return this.generatorMap.get(t)}initializeTextManage(t){this.textManages=[],Array.isArray(t)?this.textManages.push(...t):this.textManages.push(t)}getTextManages(){return this.textManages}destroyTextManage(){this.textManages.forEach(t=>{t.destroy()}),this.textManages=[]}}class dc extends nF{constructor(t=new s$){super(t)}}class u$ extends dc{constructor(){super()}initializeGenerator(){this.activeGenerator=cp(this.board,{getRectangle:t=>b4(this.board,t),getStrokeWidth:()=>0,getStrokeOpacity:()=>0,hasResizeHandle:()=>!Wi(this.board)}),this.groupGenerator=new o$(this.board)}initialize(){super.initialize(),this.initializeGenerator();const t=I.getBoardContext(this.board);this.onStableSubscription=t.onStable().subscribe(()=>{const n=Ds(this.board,this.element,!1,!0),r=n.some(i=>h6(this.board,i))&&!n.every(i=>h6(this.board,i));this.groupGenerator.processDrawing(this.element,this.getElementG(),r)})}onContextChanged(t,n){}destroy(){var t;super.destroy(),(t=this.onStableSubscription)==null||t.unsubscribe()}}function TS(e){let t,n;const{drawElement:r,pointerMove:i,globalPointerUp:o,insertFragment:s,getDeletedFragment:a,deleteFragment:f,getRelatedFragment:h,getRectangle:d,keyDown:p}=e;return e.drawElement=v=>vo.isGroup(v.element)?u$:r(v),e.pointerMove=v=>{ju(e,"with-group",()=>{t==null||t.remove();const w=Bt(e,Ot(e,v.x,v.y));let E={anchor:w,focus:w};e.selection&&!u0.isCollapsed(e.selection)&&(E=e.selection);const y=I.getPointer(e);if(!Sf(e)&&!Nf(e)&&y===en.selection){const S=OE(e,E);S.length&&(t=dk(e,S),t&&I.getElementTopHost(e).append(t))}}),i(v)},e.globalPointerUp=v=>{t==null||t.remove(),t=null,o(v)},e.getRelatedFragment=(v,w)=>{const E=fk(e,v,w);return h([...v,...E],w)},e.insertFragment=(v,w,E)=>{var A,B;let y=[];if((A=v==null?void 0:v.elements)!=null&&A.length){y=new Array((B=v==null?void 0:v.elements)==null?void 0:B.length);const R=cc(e,v==null?void 0:v.elements);I4(e,v==null?void 0:v.elements).forEach(F=>{const j=v.elements.map(z=>z.id).indexOf(F.id);y.splice(j,1,F.groupId?tm(F,void 0):F)}),R.length&&R.forEach(F=>{const j=v.elements.map(Q=>Q.id).indexOf(F.id),z={...tm(F,void 0),id:yn()};y.splice(j,1,z),AS(F,v.elements,z.id,y)}),v.elements=y}s(v,w,E),(y==null?void 0:y.filter(R=>vo.isGroup(R))).forEach(R=>{Ve.insertNode(e,R,[e.children.length])})},e.getDeletedFragment=v=>(n=a$(e),n&&n.length&&v.push(...n),a(v)),e.deleteFragment=v=>{n!=null&&n.length&&c$(e,n),f(v),n=null},e.getRectangle=v=>vo.isGroup(v)?b4(e,v,!0):d(v),e.keyDown=v=>{if(!I.isReadonly(e)){if(cn.isKeyHotkey("mod+g",v)){v.preventDefault(),Ve.addGroup(e);return}if(cn.isKeyHotkey("mod+shift+g",v)){v.preventDefault(),Ve.removeGroup(e);return}}p(v)},e}const tm=(e,t)=>({...e,groupId:t}),AS=(e,t,n,r)=>{const i=t.filter(o=>o.groupId===e.id);return i.length&&i.forEach(o=>{const s=t.map(a=>a.id).indexOf(o.id);if(vo.isGroup(o)){const a={...tm(o,n),id:yn()};r.splice(s,1,a),AS(o,t,a.id,r)}else r.splice(s,1,tm(o,n))}),r},a$=e=>{const n=[...e.getRelatedFragment([])],r=cc(e),i=k4(e),o=[...r,...i];return o.forEach(s=>{const a=lc(e,s,!0);if(a.length){const h=Ds(e,a[0],!1,!0).filter(d=>![...o,...n].map(p=>p.id).includes(d.id));if((h.length===1||h.length===0)&&(n.includes(a[0])||n.push(a[0]),h.length===1&&a.length>1)){const d=l$(e,a.slice(1,a.length),[...o,...n]);let p=a.length;d&&(p=a.findIndex(v=>v.id===d.id)),[...a.slice(1,p)].forEach(v=>{n.includes(v)||n.push(v)})}}}),n},l$=(e,t,n)=>{let r=null;for(let i=0;i<t.length;i++)if(Ds(e,t[i],!1,!0).filter(a=>!n.map(f=>f.id).includes(a.id)).length>0){r=t[i];break}return r},c$=(e,t)=>{const n=k4(e),r=cc(e),i=n.filter(o=>o.groupId);[...r,...i].forEach(o=>{const s=lc(e,o,!0);if(s.length){const f=Ds(e,s[0],!1,!0).filter(h=>h.id!==o.id);if(f.length===1){const h=t.map(d=>d.id);if(s.some(d=>h.includes(d.id))){const d=s.find(v=>!h.includes(v.id)),p=I.findPath(e,f[0]);Ve.setNode(e,{groupId:(d==null?void 0:d.id)||void 0},p)}}}})};function Ym(e,t,n=1e4){const i=document.createElement("canvas").getContext("2d"),o=We.texts(e),s=[[]];for(const h of o){const[d]=h;We.string(d).split(`
`).forEach((w,E)=>{const y={...d,text:w};if(E===0)s[s.length-1].push(y);else{const S=[];S.push(y),s.push(S)}})}let a=0,f=0;return s.forEach((h,d)=>{let p=0,v=Zw(t.fontSize);if(h.forEach((w,E)=>{const y=f$(w,{fontFamily:t.fontFamily,fontSize:t.fontSize});i.font=y,p+=i.measureText(w.text).width;const S=E===h.length-1;if(w["font-size"]&&(S||w.text!=="")){const A=Zw(parseFloat(w["font-size"]));A>v&&(v=A)}}),p<=n)p>a&&(a=p),f+=v;else{a=n;const w=Math.ceil(p/n);f+=v*w}}),{width:a,height:f}}const f$=(e,t)=>`${e.italic?"italic ":""} ${e.bold?"bold ":""} ${e["font-size"]||t.fontSize}px ${t.fontFamily} `;class hp{constructor(t,n){this.board=t,this.options=n,this.isEditing=!1,this.getSize=(r,i)=>{const o=window.getComputedStyle(this.foreignObject.children[0]),s=o.fontFamily,a=parseFloat(o.fontSize),f=r||this.editor.children[0];return Ym(f,{fontSize:a,fontFamily:s},i||this.options.getMaxWidth())},this.getText=()=>this.editor.children[0],this.options.getMaxWidth||(this.options.getMaxWidth=()=>999)}draw(t){const n=this.options.getRectangle();this.g=Gt(),this.foreignObject=P4(n.x,n.y,n.width,n.height),this.g.append(this.foreignObject),this.g.classList.add("text");const r={board:this.board,text:t,textPlugins:this.options.textPlugins,onChange:i=>{if(i.operations.some(o=>!Ia.isSelectionOperation(o))){const{width:o,height:s}=this.getSize();this.options.onChange&&this.options.onChange({...i,width:o,height:s}),Or.set(this.board,!0)}},afterInit:i=>{this.editor=i},onComposition:i=>{if(i.type==="compositionend")return;const o=h$(this.editor,i.data);if(o){const s=this.getSize(o.children[0]);this.options.onChange&&this.options.onChange({...s}),Or.set(this.board,!0)}}};this.textComponentRef=this.board.renderText(this.foreignObject,r)}updateRectangleWidth(t){XO(this.g,t)}updateAngle(t,n=0){Cs(this.g,t,n)}updateRectangle(t){const{x:n,y:r,width:i,height:o}=t||this.options.getRectangle();pg(this.g,i,o,n,r)}updateText(t){const n={text:t};this.textComponentRef.update(n)}edit(t,n){this.isEditing=!0,Qv.set(this.board,!0);const r={readonly:!1};this.textComponentRef.update(r),Oe.select(this.editor,[0]);const i=Lf(document,"mousedown").subscribe(a=>{const f=Bt(this.board,Ot(this.board,a.x,a.y)),h=this.options.getRenderRectangle?this.options.getRenderRectangle():this.options.getRectangle(),d=M.isHit(M.getRectangleByPoints([f,f]),h),p=a.target.closest(".plait-board-attached");!d&&!p&&wO(0).subscribe(()=>{s()})}),o=Lf(document,"keydown").subscribe(a=>{if(!a.isComposing&&(a.key==="Escape"||a.key==="Tab"||n&&n(a))){a.preventDefault(),a.stopPropagation(),s();return}}),s=()=>{if(this.isEditing){this.updateRectangle(),i.unsubscribe(),o.unsubscribe(),Qv.set(this.board,!1),Or.set(this.board,!1),t&&t();const a={readonly:!0};this.textComponentRef.update(a),this.isEditing=!1,this.exitCallback=void 0}};return this.exitCallback=s,s}destroy(){var t,n;(t=this.g)==null||t.remove(),(n=this.textComponentRef)==null||n.destroy(),this.exitCallback&&this.exitCallback()}}const h$=(e,t)=>{if(e.selection&&Se.isCollapsed(e.selection)){const[n,r]=k.node(e,e.selection),i=e.selection.anchor.offset,s={children:[JSON.parse(JSON.stringify(e.children[0]))]},a=n.text.slice(0,i+1)+t+n.text.slice(i+1),f=We.get(s,r);return f.text=a,s}return null},d$=e=>{const t=e;return t.renderText=(n,r)=>{throw new Error("No implementation for renderText method.")},t};var hi;(function(e){e.left="left",e.center="center",e.right="right"})(hi||(hi={}));const g$=e=>{const t=e;return t.renderImage=(n,r)=>{throw new Error("No implementation for renderImage method.")},t},B6={isActive(e,t){const n=We.get(e,rC);if(n){const{align:r}=n;return r===t}return!1},setAlign(e,t){const n={align:t};Oe.setNodes(e,n,{at:rC})}},rC=[0];var li;(function(e){e.bold="bold",e.italic="italic",e.underline="underlined",e.strike="strike",e.color="color",e.fontSize="font-size"})(li||(li={}));const iC=[li.bold,li.color,li.italic,li.strike,li.underline,li.fontSize];var oC;(function(e){e.fontSize12="12",e.fontSize13="13",e.fontSize14="14",e.fontSize15="15",e.fontSize16="16",e.fontSize18="18",e.fontSize20="20",e.fontSize24="24",e.fontSize28="28",e.fontSize32="32",e.fontSize40="40",e.fontSize48="48"})(oC||(oC={}));li.bold,li.italic,li.underline,li.strike;const qm=14,Hu={getMarks(e){const t={};let n=[];e.selection?n=e.selection:e.children&&e.children.length>0&&(n={anchor:k.start(e,[0]),focus:k.end(e,[0])});const r=k.nodes(e,{match:st.isText,at:n});for(const i of r){const[o]=i,{text:s,...a}=o;Object.assign(t,a)}for(const i in t)iC.includes(i)||delete t[i];return t},getMarksByElement(e){const t={},n=We.texts(e);for(const r of n){const[i]=r,{text:o,...s}=i;Object.assign(t,s)}for(const r in t)iC.includes(r)||delete t[r];return t},isMarkActive(e,t){var i,o;if(!(e!=null&&e.selection))return;const n=We.get(e,(o=(i=e==null?void 0:e.selection)==null?void 0:i.anchor)==null?void 0:o.path);if(!st.isText(n))return!1;const r=Hu.getMarks(e);return!!(r&&r[t])},toggleMark(e,t){iv(e),Hu.isMarkActive(e,t)?k.removeMark(e,t):k.addMark(e,t,!0)},setFontSizeMark(e,t,n=qm){iv(e),Number(t)===n?k.removeMark(e,li.fontSize):k.addMark(e,li.fontSize,Number(t))},setColorMark(e,t,n=qr){iv(e),t===n||t===null||t===void 0?k.removeMark(e,"color"):k.addMark(e,"color",t)}};function iv(e){e.selection||Oe.select(e,[0])}const Gu={wrapLink(e,t,n){Gu.isLinkActive(e)&&Gu.unwrapLink(e);const{selection:r}=e,i=r&&Se.isCollapsed(r),o={type:"link",url:n,children:[{text:t}]};if(i||We.string(e)==="")Oe.insertNodes(e,o);else if(r)Oe.wrapNodes(e,o,{split:!0}),Oe.collapse(e,{edge:"end"});else{const s={anchor:k.start(e,[0]),focus:k.end(e,[0])};Oe.wrapNodes(e,o,{split:!0,at:s})}},unwrapLink(e,t){t||(t=e.selection,!t&&e.children&&e.children.length>0&&(t={anchor:k.start(e,[0]),focus:k.end(e,[0])})),Oe.unwrapNodes(e,{at:t,match:n=>rt.isElement(n)&&n.type==="link"})},isLinkActive(e){let t=e.selection;!t&&e.children&&e.children.length>0&&(t={anchor:k.start(e,[0]),focus:k.end(e,[0])});const[n]=k.nodes(e,{match:r=>rt.isElement(r)&&r.type==="link",at:t});return!!n},getLinkElement(e){let t=e.selection;!t&&e.children&&e.children.length>0&&(t={anchor:k.start(e,[0]),focus:k.end(e,[0])});const[n]=k.nodes(e,{match:r=>rt.isElement(r)&&r.type==="link",at:t});return n}},BS=20;function sC(e){const t=/^(?:\w+:)?\/\/(\S+)$/,n=/^mailto:([^\s@]+@[^\s@]+\.[^\s@]+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,i=/^[^\s\.]+\.\S{2,}$/;if(typeof e!="string")return!1;const o=e.match(n);if(o)return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o[1]);const s=e.match(t);if(!s)return!1;const a=s[1];return a?!!(r.test(a)||i.test(a)):!1}const RS=e=>{const n=Zf(e)[0];return!n||n.children.length===0?{}:Hu.getMarks(n)},p$=(e,t,n)=>{let r;if(n!=null&&n.length)r=n;else{const i=Ye(e);if(i.length){const o=_G(e);if(!o)return;const s=Hu.getMarks(o),a=i.filter(f=>Zf(f).some(d=>Hu.getMarks(d)[t]===s[t]));r=yS(e,a)}}r&&r.length&&r.forEach(i=>{Hu.toggleMark(i,t)})},m$=(e,t,n,r)=>{const i=r8(e,r);if(i&&i.length){const o=Ye(e);i.forEach(s=>{let a;if(typeof n=="function"){const f=o.find(h=>Zf(h).includes(s));a=n(f)}else a=n;Hu.setFontSizeMark(s,t,a)})}},v$=(e,t,n,r)=>{const i=r8(e,r);i&&i.length&&i.forEach(o=>{n&&Oe.select(o,n),t==="transparent"?k.removeMark(o,li.color):Hu.setColorMark(o,t)})},y$=(e,t,n)=>{const r=r8(e,n);r&&r.length&&r.forEach(i=>B6.setAlign(i,t))},r8=(e,t)=>{let n;return t!=null&&t.length?n=t:n=yS(e),n},R6={setTextAlign:y$,setTextColor:v$,setFontSize:m$,setTextMarks:p$},uC=()=>b.jsx("span",{contentEditable:!1,style:{fontSize:0},children:String.fromCodePoint(160)}),w$=({attributes:e,children:t,element:n})=>b.jsxs("a",{...e,style:{textDecoration:"none",cursor:"inherit"},"data-url":n.url,className:"plait-board-link",children:[b.jsx(uC,{}),t,b.jsx(uC,{})]}),C$=e=>{const{insertData:t,insertText:n,isInline:r}=e;return e.isInline=i=>i.type&&["link"].includes(i.type)||r(i),e.insertText=i=>{i&&sC(i)?Gu.wrapLink(e,i,i):n(i)},e.insertData=i=>{const o=i.getData("text/plain");o&&sC(o)?Gu.wrapLink(e,o,o):t(i)},e},aC=e=>{const{text:t,readonly:n,onChange:r,onComposition:i,afterInit:o}=e,s=$.useCallback(d=>b.jsx(P$,{...d}),[]),a=[t],f=$.useMemo(()=>{const d=C$(vG(gG(hG(hN()))));return o&&o(d),d},[]);$.useEffect(()=>{t!==f.children[0]&&(f.children=[t],f.onChange())},[t,f]);const h=d=>{const{selection:p}=f;if(p&&Se.isCollapsed(p)){const{nativeEvent:v}=d;if(cn.isKeyHotkey("left",v)){d.preventDefault(),Oe.move(f,{unit:"offset",reverse:!0});return}if(cn.isKeyHotkey("right",v)){d.preventDefault(),Oe.move(f,{unit:"offset"});return}}};return b.jsx(cG,{editor:f,initialValue:a,onChange:d=>{r&&r({newText:f.children[0],operations:f.operations})},children:b.jsx(tG,{className:"slate-editable-container plait-text-container",renderElement:d=>b.jsx(x$,{...d}),renderLeaf:s,readOnly:n===void 0?!0:n,onCompositionStart:d=>{i&&i(d)},onCompositionUpdate:d=>{i&&i(d)},onCompositionEnd:d=>{i&&i(d)},onKeyDown:h,style:{whiteSpace:"pre"}})})},x$=e=>{const{attributes:t,children:n,element:r}=e;switch(r.type){case"link":return b.jsx(w$,{...e});default:return b.jsx(E$,{...e})}},E$=({attributes:e,children:t,element:n})=>{const r={textAlign:n.align};return b.jsx("div",{style:r,...e,children:t})},P$=({children:e,leaf:t,attributes:n})=>(t.bold&&(e=b.jsx("strong",{children:e})),t.code&&(e=b.jsx("code",{children:e})),t.italic&&(e=b.jsx("em",{children:e})),t.underlined&&(e=b.jsx("u",{children:e})),b.jsx("span",{style:{color:t.color},...n,children:e})),S$=e=>{const t=e;return t.renderText=(n,r)=>{const i=Tm.createRoot(n);let o;const s=b.jsx(aC,{...r,afterInit:h=>{o=h,r.afterInit&&r.afterInit(h)}});i.render(s);let a={...r};return{destroy:()=>{setTimeout(()=>{i.unmount()},0)},update:h=>{if(!(h&&a&&!Object.keys(h).every(v=>h[v]===a[v])))return;const p=Te.isReadOnly(o);a={...a,...h},i.render(b.jsx(aC,{...a})),p===!0&&a.readonly===!1?setTimeout(()=>{Te.focus(o)},0):p===!1&&a.readonly===!0&&(Te.blur(o),Te.deselect(o))}}},t},D$=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:i}=e,o=[];let s=!1;return e.pointerDown=a=>{const f=[a.clientX,a.clientY];o.length<2&&(e.viewport.zoom,o.push({pointerId:a.pointerId,lastPoint:f,currentPoint:f,hasMoved:!1})),t(a)},e.pointerMove=a=>{const f=[a.clientX,a.clientY];if(o.length>=2){const h=o.find(d=>d.pointerId===a.pointerId);if(h&&(h.currentPoint=f,h.hasMoved=!0,o.length===2&&o.every(d=>d.hasMoved))){const[d,p]=o,v=r9(...d.lastPoint,...p.lastPoint),w=r9(...d.currentPoint,...p.currentPoint),E=w[0]-v[0],y=w[1]-v[1],S=I.getBoardContainer(e).getBoundingClientRect(),A=S.width/2,B=S.height/2,R=e.viewport.zoom,_=S0(e);let F=_[0]+A/R-E/R,j=_[1]+B/R-y/R,z=[F-S.width/2/R,j-S.height/2/R],Q=R;const se=Et(...d.lastPoint,...p.lastPoint),Ee=Et(...d.currentPoint,...p.currentPoint)/se,ie=[d.currentPoint[0]-d.lastPoint[0],d.currentPoint[1]-d.lastPoint[1]],ce=[p.currentPoint[0]-p.lastPoint[0],p.currentPoint[1]-p.lastPoint[1]],me=ie[0]*ce[0]+ie[1]*ce[1],Ce=Math.sqrt(ie[0]*ie[0]+ie[1]*ie[1]),Fe=Math.sqrt(ce[0]*ce[0]+ce[1]*ce[1]),Ae=me/(Ce*Fe||1);if(Ae<-.7||Ae<=.8&&s&&Ee>=.01?s=!0:s=!1,s){Q=Math.min(Math.max(e.viewport.zoom*Ee,CE),xE);const ue=I.getBoardContainer(e).getBoundingClientRect(),ye=w[0]-ue.x,X=w[1]-ue.y;F=z[0]+ye/R,j=z[1]+X/R,z=[F-ye/Q,j-X/Q]}Ln.updateViewport(e,z,Q),o.forEach(pe=>{pe.lastPoint=pe.currentPoint,pe.hasMoved=!1})}return}n(a)},e.pointerUp=a=>{const f=o.findIndex(h=>h.pointerId===a.pointerId);f!==-1&&o.splice(f,1),r(a)},e.globalPointerUp=a=>{const f=o.findIndex(h=>h.pointerId===a.pointerId);f!==-1&&o.splice(f,1),i(a)},e},MS=({value:e,children:t,options:n,plugins:r,viewport:i,theme:o,onChange:s,onSelectionChange:a,onValueChange:f,onViewportChange:h,onThemeChange:d})=>{const[p,v]=$.useState(()=>{const A=T$(e,n,r,i,o),B=A$(A);return{v:0,board:A,listRender:B}}),{board:w,listRender:E}=p,y=$.useCallback(()=>{if(s){const F={children:w.children,operations:w.operations,viewport:w.viewport,selection:w.selection,theme:w.theme};s(F)}const A=w.operations.some(F=>Wl.isSetSelectionOperation(F)),B=w.operations.some(F=>Wl.isSetViewportOperation(F)),R=w.operations.some(F=>Wl.isSetThemeOperation(F)),_=w.operations.length>0&&!w.operations.every(F=>Wl.isSetSelectionOperation(F)||Wl.isSetViewportOperation(F)||Wl.isSetThemeOperation(F));f&&_&&f(w.children),a&&A&&a(w.selection),h&&B&&h(w.viewport),d&&R&&d(w.theme.themeColorMode),v(F=>({v:F.v+1,board:w,listRender:E}))},[w,s,a,f]);$.useEffect(()=>(G3.set(w,()=>{if(w.operations.length&&w.operations.every(_=>_.type==="set_selection")){E.update(w.children,{board:w,parent:w,parentG:I.getElementHost(w)});return}const B=w.operations.length&&w.operations.some(_=>_.type==="set_viewport");if(B&&DI(w)){VE(w,!1),E.update(w.children,{board:w,parent:w,parentG:I.getElementHost(w)});return}E.update(w.children,{board:w,parent:w,parentG:I.getElementHost(w)}),B?B4(w):EI(w),V3(w),Ye(w).forEach(_=>{pn.getElementRef(_).updateActiveSection()})}),$3.set(w,()=>{y()}),()=>{G3.delete(w),$3.delete(w)}),[w]);const S=$.useRef(!0);return $.useEffect(()=>{if(S.current){S.current=!1;return}e!==p.board.children&&!y3.get(w)&&(w.children=e,E.update(w.children,{board:w,parent:w,parentG:I.getElementHost(w)}),Ln.fitViewport(w))},[e]),b.jsx(H4.Provider,{value:p,children:t})},T$=(e,t,n,r,i)=>{let o=xF(lF(uF(aF(EF(yF(sF(PF(CF(S$(g$(d$(oF(e,t)))))))))))));return n.forEach(s=>{o=s(o)}),D$(o),r&&(o.viewport=r),i&&(o.theme=i),o},A$=e=>new wP(e);function B$(e,t){return Math.sqrt(R$(e,t))}function R$(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Id(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function M$(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let a=3*r[1]-2*n[1]-o[1];a*=a;let f=3*i[0]-2*o[0]-n[0];f*=f;let h=3*i[1]-2*o[1]-n[1];return h*=h,s<f&&(s=f),a<h&&(a=h),s+a}function M6(e,t,n,r){const i=r||[];if(M$(e,t)<n){const o=e[t+0];i.length?B$(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],a=e[t+1],f=e[t+2],h=e[t+3],d=Id(s,a,.5),p=Id(a,f,.5),v=Id(f,h,.5),w=Id(d,p,.5),E=Id(p,v,.5),y=Id(w,E,.5);M6([s,d,w,y],0,n,i),M6([y,E,v,h],0,n,i)}return i}function yo(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;M6(e,s,t,r)}return r}var vt;(function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.diamond="diamond",e.roundRectangle="roundRectangle",e.parallelogram="parallelogram",e.text="text",e.triangle="triangle",e.leftArrow="leftArrow",e.trapezoid="trapezoid",e.rightArrow="rightArrow",e.cross="cross",e.star="star",e.pentagon="pentagon",e.hexagon="hexagon",e.octagon="octagon",e.pentagonArrow="pentagonArrow",e.processArrow="processArrow",e.twoWayArrow="twoWayArrow",e.comment="comment",e.roundComment="roundComment",e.cloud="cloud"})(vt||(vt={}));var ht;(function(e){e.process="process",e.decision="decision",e.data="data",e.connector="connector",e.terminal="terminal",e.manualInput="manualInput",e.preparation="preparation",e.manualLoop="manualLoop",e.merge="merge",e.delay="delay",e.storedData="storedData",e.or="or",e.summingJunction="summingJunction",e.predefinedProcess="predefinedProcess",e.offPage="offPage",e.document="document",e.multiDocument="multiDocument",e.database="database",e.hardDisk="hardDisk",e.internalStorage="internalStorage",e.noteCurlyRight="noteCurlyRight",e.noteCurlyLeft="noteCurlyLeft",e.noteSquare="noteSquare",e.display="display"})(ht||(ht={}));var at;(function(e){e.actor="actor",e.useCase="useCase",e.container="container",e.note="note",e.simpleClass="simpleClass",e.activityClass="activityClass",e.branchMerge="branchMerge",e.port="port",e.package="package",e.combinedFragment="combinedFragment",e.class="class",e.interface="interface",e.object="object",e.component="component",e.componentBox="componentBox",e.template="template",e.activation="activation",e.deletion="deletion",e.assembly="assembly",e.providedInterface="providedInterface",e.requiredInterface="requiredInterface"})(at||(at={}));var Xo;(function(e){e.name="name",e.content="content"})(Xo||(Xo={}));var go;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal"})(go||(go={}));var nu;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal",e.swimlaneVerticalWithHeader="swimlaneVerticalWithHeader",e.swimlaneHorizontalWithHeader="swimlaneHorizontalWithHeader"})(nu||(nu={}));var g0;(function(e){e.table="table"})(g0||(g0={}));const $g={isTable:e=>e.type==="table",isVerticalText:e=>{var t;return((t=e.text)==null?void 0:t.direction)==="vertical"}},bS="plait-draw-plugin-key";var nm;(function(e){e.lineText="line-text",e.geometryText="geometry-text"})(nm||(nm={}));const it={rectangleAndText:4},Zm={strokeWidth:2,fill:sS},b$={selectionStrokeWidth:hr},Wg={width:100,height:100,strokeColor:qr,strokeWidth:2},lC={width:120,height:50},O$={width:138,height:80},cC={width:100,height:80},I$={width:120,height:100},Qm={height:20,text:""},OS={defaultTextMaxWidth:34*14},ov={width:44,height:44},Iu={width:120,height:60},k$={width:70,height:80},F$={width:80,height:80},L$={width:140,height:70},_$={width:124,height:60},IS={width:120,height:70},sv={width:160,height:100},b6={width:120,height:80},N$={width:117,height:59},H$={width:47,height:33},G$={width:68,height:100},$$={width:300,height:240},W$={width:210,height:150,texts:[{id:Xo.name,text:"",align:hi.left},{id:Xo.content,text:"",align:hi.left}]},j$={width:18,height:80},n3={width:120,height:60},z$={width:200,height:150},fC={width:40,height:40},V$={width:20,height:20},U$={width:70,height:56},X$={width:120,height:56},K$={width:70,height:34},Y$={width:400,height:280,texts:[{id:Xo.name,text:"Opt | Alt | Loop",align:hi.left},{id:Xo.content,text:"[Condition]",align:hi.left}]},q$={width:230,height:180,texts:[{text:"Class",align:hi.center},{text:`+ attribute1:type  defaultValue
+ attribute2:type
- attribute3:type`,align:hi.left},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:hi.left}]},Z$={width:230,height:140,texts:[{text:`<<interface>>
Interface`,align:hi.center},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:hi.left}]},kS={[vt.pentagonArrow]:lC,[vt.processArrow]:lC,[vt.cloud]:I$,[vt.twoWayArrow]:O$,[vt.leftArrow]:cC,[vt.rightArrow]:cC},FS={[ht.connector]:ov,[ht.process]:Iu,[ht.decision]:L$,[ht.data]:_$,[ht.terminal]:Iu,[ht.manualInput]:N$,[ht.preparation]:Iu,[ht.manualLoop]:Iu,[ht.merge]:H$,[ht.delay]:Iu,[ht.storedData]:Iu,[ht.or]:ov,[ht.summingJunction]:ov,[ht.predefinedProcess]:Iu,[ht.offPage]:Iu,[ht.document]:IS,[ht.multiDocument]:b6,[ht.database]:k$,[ht.hardDisk]:Iu,[ht.internalStorage]:F$,[ht.noteCurlyLeft]:sv,[ht.noteCurlyRight]:sv,[ht.noteSquare]:sv,[ht.display]:Iu},LS={[at.actor]:G$,[at.useCase]:IS,[at.container]:$$,[at.note]:n3,[at.package]:W$,[at.combinedFragment]:Y$,[at.class]:q$,[at.interface]:Z$,[at.activation]:j$,[at.object]:n3,[at.deletion]:fC,[at.activityClass]:n3,[at.simpleClass]:n3,[at.component]:b6,[at.template]:b6,[at.componentBox]:z$,[at.port]:V$,[at.branchMerge]:fC,[at.assembly]:X$,[at.providedInterface]:K$,[at.requiredInterface]:U$},Q$={[at.package]:Object.keys(Xo),[at.combinedFragment]:Object.keys(Xo)},rm=10,J$=6,eW=8,_S=[ht.or,ht.summingJunction,at.activation,at.deletion,at.port,at.branchMerge,at.assembly,at.providedInterface,at.requiredInterface],tW=[at.package,at.combinedFragment],nW=[ht.noteCurlyLeft,ht.noteCurlyRight,ht.noteSquare,at.requiredInterface,at.deletion],i8=()=>[...Object.keys(vt),...Object.keys(ht),...Object.keys(at)],NS=()=>Object.keys(nu),rW=()=>Object.keys(ht),iW=()=>Object.keys(at),oW=()=>Object.keys(Vn),sW=()=>Object.keys(lm),uW=1e3,HS={[cr.default]:{strokeColor:qr,fill:"#FFFFFF"},[cr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[cr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[cr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[cr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[cr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}},sg=42,aW={width:580,height:524},lW={width:524,height:580},cW={width:580,height:524},fW={width:524,height:580},GS={[nu.swimlaneHorizontal]:fW,[nu.swimlaneVertical]:cW,[nu.swimlaneHorizontalWithHeader]:lW,[nu.swimlaneVerticalWithHeader]:aW},im=5,$S={strokeWidth:2},hW=4,dW=6,gW=.6,pW=.8,mW=10,Ud=3,vW="",gc=e=>he.isImage(e)?vt.rectangle:he.isTable(e)?g0.table:e.shape,yW=6,uv=new WeakMap,M0=e=>{let t="";switch(!0){case he.isText(e):{t=Ho.text;break}case he.isBasicShape(e):{t=Ho.basicShape;break}case he.isFlowchart(e):{t=Ho.flowchart;break}case he.isArrowLine(e):{t=Ho.arrowLine;break}case he.isUML(e):t=Ho.UML}return t},WS=()=>({...Km(Ho.arrowLine)}),pc=e=>{let t="";he.isBasicShape({shape:e})?t=e===vt.text?Ho.text:Ho.basicShape:he.isUML({shape:e})?t=Ho.UML:t=Ho.flowchart;const n={...Km(t)},r={...n.text};return delete n.text,{textProperties:r,geometryProperties:n}},o8=(e,t)=>{var o;const n=M0(e);let r=((o=Km(n))==null?void 0:o.text)||{};const i=t.find(s=>s.type==="set_node");if(i){const{properties:s,newProperties:a}=i;for(const f in a){const h=a[f];h==null?delete r[f]:r[f]=h}for(const f in s)a.hasOwnProperty(f)||delete r[f];n8(n,"text",r)}},wW=(e,t)=>{const n=uv.has(e)?uv.get(e):[],r=n.indexOf(t);t===vt.text||r===0||(r!==-1?n.splice(r,1):n.length===yW&&n.pop(),n.unshift(t),uv.set(e,n))},jg=new WeakMap,hC=(e,t,n,r)=>{const i=jg.get(e);return jg.set(e,{...i,[hD(t,n)]:r})},Eg=(e,t,n)=>jg.get(e)[hD(t,n)],dC=(e,t)=>{const n=jg.get(e);delete n[t],jg.set(e,n)};class s8{get shape(){return this.element.shape||this.element.type}constructor(t,n,r,i){this.board=t,this.texts=r,this.element=n,this.options=i}initialize(){const t=(this.board.getPluginOptions(D6)||{}).textPlugins;this.textManages=this.texts.map(r=>{const i=this.createTextManage(r,t);return hC(this.board,this.element,r,i),i}),pn.getElementRef(this.element).initializeTextManage(this.textManages)}draw(t){const n=M.getCenterPoint(this.board.getRectangle(this.element));this.texts.forEach(r=>{const i=Eg(this.board,this.element,r);r.text&&i&&(i.draw(r.text),t.append(i.g),(this.element.angle||this.element.angle===0)&&i.updateAngle(n,this.element.angle))})}update(t,n,r,i){this.element=t;const o=M.getCenterPoint(this.board.getRectangle(this.element)),s=(this.board.getPluginOptions(D6)||{}).textPlugins,a=n.filter(f=>!r.find(h=>h.id===f.id));a.length&&a.forEach(f=>{const h=Eg(this.board,t,f),d=this.textManages.findIndex(p=>p===h);d>-1&&f.text&&f.textHeight&&this.textManages.splice(d,1),h==null||h.destroy(),dC(this.board,f.id)}),r.forEach(f=>{if(f.text){let h=Eg(this.board,this.element,f);h?(h.updateText(f.text),h.updateRectangle()):(h=this.createTextManage(f,s),hC(this.board,t,f,h),h.draw(f.text),i.append(h.g),this.textManages.push(h)),(this.element.angle||this.element.angle===0)&&h.updateAngle(o,this.element.angle)}})}createTextManage(t,n){return new hp(this.board,{getRectangle:()=>this.getRectangle(t),onChange:i=>this.options.onChange(this.element,i,t),getMaxWidth:()=>this.getMaxWidth(t),getRenderRectangle:()=>this.options.getRenderRectangle?this.options.getRenderRectangle(this.element,t):this.getRectangle(t),textPlugins:n})}getRectangle(t){const n=gi(this.shape).getTextRectangle;return n?n(this.element,t):Sr(this.element)}getMaxWidth(t){return this.options.getMaxWidth?this.options.getMaxWidth():this.getRectangle(t).width}destroy(){pn.getElementRef(this.element).destroyTextManage(),this.textManages=[],this.texts.forEach(n=>{dC(this.board,n.id)})}}const O6=e=>{const t=Ye(e);return t&&t.length===1&&he.isElementByTable(t[0])},CW=(e,t)=>(t!=null&&t.length?t:Ye(e)).filter(r=>he.isElementByTable(r)),u8=new WeakMap;function Xd(e){return u8.get(e)}function jS(e,t){return u8.set(e,t)}function gC(e){return u8.delete(e)}function dp(e,t){const n=e==null?void 0:e.buildTable(t);if(!n||!n.points||!n.columns||!n.rows)throw new Error("can not get table cells points");const r=M.getRectangleByPoints(n.points),i=n.columns.length,o=n.rows.length,s=pC(n.columns,r.width,i,!0),a=pC(n.rows,r.height,o,!1);return n.cells.map(h=>{const d=n.rows.findIndex(B=>B.id===h.rowId),p=n.columns.findIndex(B=>B.id===h.columnId);let v=r.x;for(let B=0;B<p;B++)v+=s[B];let w=r.y;for(let B=0;B<d;B++)w+=a[B];const E=mC(h,s,p,!0),y=v+E,S=mC(h,a,d,!1),A=w+S;return{...h,points:[[v,w],[y,A]]}})}function Jf(e,t,n){try{const r=dp(e,t),i=r&&t.cells.findIndex(o=>o.id===n);return r[i]}catch{throw new Error("can not get table cell points")}}function pC(e,t,n,r){const i=[],o=r?"width":"height";let s=t;e.forEach((h,d)=>{h[o]&&(i[d]=h[o],s-=h[o])});const a=n-i.filter(h=>!!h).length,f=a>0?s/a:0;for(let h=0;h<n;h++)i[h]||(i[h]=f);return i}function mC(e,t,n,r){const i=r?e.colspan||1:e.rowspan||1;let o=0;for(let s=0;s<i;s++){const a=n+s;o+=t[a]}return o}function vC(e,t,n){const r=e.buildTable(t),i=dp(e,r),o=M.getRectangleByPoints([n,n]),s=i.find(a=>{const f=M.getRectangleByPoints(a.points);return M.isHit(o,f)});return s?r.cells.find(a=>a.id===s.id):null}function yC(e,t){const n=zS(e,t);n&&n.edit()}function zS(e,t){return Eg(e,void 0,t)}const VS=(e,t,n,r)=>{const i=e.columns.map(s=>s.id===t?{...s,width:n}:s),o=[e.points[0],[e.points[1][0]+r,e.points[1][1]]];return{columns:i,points:o}},US=(e,t,n,r)=>{const i=e.rows.map(s=>s.id===t?{...s,height:n}:s),o=[e.points[0],[e.points[1][0],e.points[1][1]+r]];return{rows:i,points:o}};function xW(e,t,n,r){const i=`${r}Id`;e.forEach(o=>{o[i]===t&&(o[i]=n)})}function wC(e,t){e[`${t}s`].forEach(n=>{const r=yn();xW(e.cells,n.id,r,t),n.id=r})}function EW(e){e.forEach(t=>{const n=yn();t.id=n})}function XS(e){return e.text&&e.textHeight}function PW(e,t,n){const r=dp(e,t),i=n.map(o=>r.find(a=>a.id===o.id).points);return M.getRectangleByPoints(i)}const av=(e,t,n=null)=>{const r={id:yn(),rowId:e,columnId:t};return n!==null&&(r.textHeight=BS,r.text={children:[{text:n}],align:hi.center}),r},b0=(e,t)=>{const n=yj(e.theme.themeColorMode);return t.strokeColor||n},Jm=(e,t)=>{const n=he.isFlowchart(t)&&gp(t)?wj(e.theme.themeColorMode):Zm.fill;return t.fill||n},e7=(e,t)=>t.strokeStyle||Es.solid,SW="debug:plait:line-mirror",r3=C0(SW),a8=(e,t)=>{const n=[...t];return dt.isVertical(n,e,Ud)&&(n[0]=e[0]),dt.isHorizontal(n,e,Ud)&&(n[1]=e[1]),n};function DW(e,t,n,r){const i={previous:null,next:null},o=e[r],s=e[r+1],a=dt.isHorizontal(o,s),f=dt.isVertical(o,s),h=e[r-1]??e[0],d=e[r-2]??t;(a&&dt.isHorizontal(d,h)||f&&dt.isVertical(d,h))&&(i.previous=h);const p=e[r+2]??e[e.length-1],v=e[r+3]??n;return(a&&dt.isHorizontal(p,v)||f&&dt.isVertical(p,v))&&(i.next=p),i}function TW(e,t,n,r){let i=e,o=t;if(dt.isHorizontal(e,t)){const s=dt.getOffsetY(n.startPoint,n.endPoint);let a=e[1]+s;r.previous&&Math.abs(r.previous[1]-a)<Ud?a=r.previous[1]:r.next&&Math.abs(r.next[1]-a)<Ud&&(a=r.next[1]),i=[e[0],a],o=[t[0],a]}if(dt.isVertical(e,t)){const s=dt.getOffsetX(n.startPoint,n.endPoint);let a=e[0]+s;r.previous&&Math.abs(r.previous[0]-a)<Ud?a=r.previous[0]:r.next&&Math.abs(r.next[0]-a)<Ud&&(a=r.next[0]),i=[a,e[1]],o=[a,t[1]]}return[i,o]}function KS(e,t,n,r,i){let o=null,s=null;const a=r[i],f=r[i+1];if(!a||!f)return{index:o,deleteCount:s};const h=n.slice(1,-1),d=h.findIndex(v=>dt.isEquals(v,a)),p=h.findIndex(v=>dt.isEquals(v,f));if(Math.max(d,p)>-1){if(d>-1&&p>-1)return{index:d,deleteCount:2};if(d>-1&&p===-1)return d<h.length-1&&dt.isAlign([h[d],h[d+1],a,f])?{index:d,deleteCount:2}:{index:d,deleteCount:1};if(d===-1&&p>-1)return p>0&&dt.isAlign([h[p],h[p-1],a,f])?{index:p-1,deleteCount:2}:{index:p,deleteCount:1}}else for(let v=0;v<h.length-1;v++){const w=h[v],E=h[v+1];if(dt.isAlign([w,E,a,f])){o=v,s=2;break}if(dt.isAlign([w,E,a])){o=Math.min(v+1,h.length-1),s=1;break}if(dt.isAlign([w,E,f])){o=Math.max(v-1,0),s=1;break}}if(o===null)if(s=0,h.length>0){const v=vp(e,t),w=yp(e,t,v),E=f0(ES(w,e)),y=Oa(E.slice(1,E.length-1)),S=[r[0],...h,r[r.length-1]],A=YS(e,S,y,w);for(let B=i-1;B>=0;B--){const R=A.slice(1,-1).findIndex(_=>dt.isEquals(_,r[B]));if(R>-1){o=R+1;break}}o===null&&(o=0,dt.isAlign(r)&&(s=h.length))}else o=0;return{index:o,deleteCount:s}}function YS(e,t,n,r){for(let i=1;i<t.length-2;i++)AW(e,i,t,n,r);return t}const AW=(e,t,n,r,i)=>{const o=n[t-1],s=n[t],a=n[t+1],f=n[t+2],h=[o,s],d=[a,f],p=dt.isAlign(h),v=dt.isAlign(d);let w=!1,E=!1;if(!p||!v){const y=I6(r,h[0],h[1]),S=I6(r,d[0],d[1]),A=y.length>0&&S.length>0;w=!p&&!A,E=!v&&!A}if(w||E){const y=[s,a],S=RW(y,r),A=MW(e,y,S,i.sourceRectangle,i.targetRectangle);if(A.length===1){const B=A[0];w&&n.splice(t,1,B[0]),E&&n.splice(t+1,1,B[1])}else{const R=dt.isHorizontal(s,a)?0:1;if(w){const _=[s[0],s[1]];_[R]=o[R],n.splice(t,1,_)}if(E){const _=[a[0],a[1]];_[R]=f[R],n.splice(t+1,1,_)}}}};function BW(e,t,n,r,i){const{deleteCount:o}=KS(e,t,n,r,i);return o!==null&&o>1}function I6(e,t,n){let r=[],i=-1,o=-1;for(let s=0;s<e.length;s++)if(dt.isAlign([e[s],t])&&(i=s),i>-1&&dt.isAlign([e[s],n])){o=s;break}return i>-1&&o>-1&&(r=e.slice(i,o+1)),r}function RW(e,t){const n=dt.isHorizontal(e[0],e[1]),r=[];for(let i=0;i<t.length-1;i++){const o=t[i],s=t[i+1],a=dt.isHorizontal(o,s,.1);n&&a&&r.push([o,s]),!n&&!a&&r.push([o,s])}return r}function MW(e,t,n,r,i){r3.isDebug()&&r3.clear();const o=[];for(let s=0;s<n.length;s++){const a=n[s],f=[t[0][0],t[0][1]],h=[t[1][0],t[1][1]],p=dt.isHorizontal(f,h)?0:1;f[p]=a[0][p],h[p]=a[1][p];const v=M.getRectangleByPoints([f,h,...a]);!M.isHit(v,r)&&!M.isHit(v,i)&&(o.push([f,h]),r3.isDebug()&&r3.drawPolygon(e,M.getCornerPoints(v)))}return o}const qS=e=>e.length===1?!0:e.some((t,n)=>{const r=e[n-1],i=e[n+1],o=r&&[r,t],s=i&&[t,i],a=o&&dt.isAlign(o),f=s&&dt.isAlign(s);return n===0?!f:n===e.length-1?!a:!a&&!f}),CC=20,bW=(e,t,n)=>{const r=Gt();if(Yr.isSourceMark(e,Vr.none)&&Yr.isTargetMark(e,Vr.none))return null;const i=Wt(e),o=i*i/3;if(t.length===1&&(t=[t[0],[t[0][0]+.1,t[0][1]]]),!Yr.isSourceMark(e,Vr.none)){const s=Gg(t[0],t[1],CC+o),a=xC(e,{marker:e.source.marker,source:s,target:t[0],isSource:!0},n);a&&r.appendChild(a)}if(!Yr.isTargetMark(e,Vr.none)){const s=Gg(t[t.length-1],t[t.length-2],CC+o),a=xC(e,{marker:e.target.marker,source:s,target:t[t.length-1],isSource:!1},n);a&&r.appendChild(a)}return r},xC=(e,t,n)=>{const{marker:r,target:i,source:o,isSource:s}=t;let a;switch(r){case Vr.openTriangle:{a=FW(e,o,i,n);break}case Vr.solidTriangle:{a=kW(o,i,n);break}case Vr.arrow:{a=IW(e,o,i,n);break}case Vr.sharpArrow:{a=OW(o,i,n);break}case Vr.oneSideUp:{a=EC(o,i,s?"down":"up",n);break}case Vr.oneSideDown:{a=EC(o,i,s?"up":"down",n);break}case Vr.hollowTriangle:{a=_W(o,i,n);break}case Vr.singleSlash:{a=LW(o,i,s,n);break}}return a},OW=(e,t,n)=>{const r=t,{pointLeft:i,pointRight:o}=P0(e,t,20),s=Gt(),a=E4();let f=`M${o[0]},${o[1]}A25,25,20,0,1,${i[0]},${i[1]}L${r[0]},${r[1]}Z`;return a.setAttribute("d",f),a.setAttribute("stroke",`${n==null?void 0:n.stroke}`),a.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),a.setAttribute("fill",`${n==null?void 0:n.stroke}`),s.appendChild(a),s},IW=(e,t,n,r)=>{const i=zn(t,n),o=Wt(e),s=[n[0]+o*i[0]/2,n[1]+o*i[1]/2],a=Et(...t,...s),f=[s[0]-(a*3/5+o)/2*i[0],s[1]-(a*3/5+o)/2*i[1]],{pointLeft:h,pointRight:d}=P0(t,s,30),p=Uo([h,s,d,f],{...r,fill:r.stroke},!0);return p.querySelector("path").setAttribute("stroke-linejoin","round"),p},kW=(e,t,n)=>{const r=t,{pointLeft:i,pointRight:o}=P0(e,r,30);return Uo([i,r,o],{...n,fill:n.stroke},!0)},FW=(e,t,n,r)=>{const i=zn(t,n),o=Wt(e),s=[n[0]+o*i[0]/2,n[1]+o*i[1]/2],{pointLeft:a,pointRight:f}=P0(t,s,40);return Uo([a,s,f],r)},EC=(e,t,n,r)=>{const{pointLeft:i,pointRight:o}=P0(e,t,40);return Uo([n==="up"?o:i,t],r)},LW=(e,t,n,r)=>{const i=Et(...e,...t),o=Gg(t,e,i/2),s=n?120:60,a=s0(...e,...o,s*Math.PI/180),f=s0(...t,...o,s*Math.PI/180);return Uo([a,f],r)},_W=(e,t,n)=>{const{pointLeft:r,pointRight:i}=P0(e,t,30);return Uo([r,i,t],{...n,fill:"white"},!0)};class ZS extends xo{canDraw(t){return!0}draw(t){let n;return n=HW(this.board,t),n}}const NW=(e,t,n,r,i,o)=>({id:yn(),type:"arrow-line",shape:e,source:n,texts:i||[],target:r,opacity:1,points:t,...o}),Gi=(e,t)=>{switch(t.shape){case Vn.elbow:return n7(e,t);case Vn.curve:return QS(e,t);default:{const n=Yr.getPoints(e,t),r=vp(e,t);return n[0]=r.source.point,n[n.length-1]=r.target.point,n}}},QS=(e,t)=>{if(t.points.length===2){const n=vp(e,t),{source:r,target:i}=n,o=n.source.boundElement,s=n.target.boundElement;let a=[r.point];const h=12+Et(...r.point,...i.point)/3;if(o&&a.push(Vd(r.point,r.vector,h)),s&&a.push(Vd(i.point,i.vector,h)),o&&!s||!o&&s){a.push(i.point);const p=jW(a);return yo(p)}return!o&&!s&&(a.push(Vd(r.point,r.vector,h)),a.push(Vd(i.point,i.vector,h))),a.push(i.point),yo(a)}else{let n=Yr.getPoints(e,t);n=f0(n);const r=up(n);return yo(r)}},HW=(e,t)=>{const n=Wt(t),r=b0(e,t),i=e7(e,t),o=hc(i,n),s={stroke:r,strokeWidth:n,strokeLineDash:o},a=Gt();let f=Gi(e,t),h;t.shape===Vn.curve?h=I.getRoughSVG(e).curve(f,s):h=Uo(f,s);const d=yn();h.setAttribute("mask",`url(#${d})`),t.strokeStyle===Es.dotted&&Kt(h,"round"),a.appendChild(h);const{mask:p,maskTargetFillRect:v}=zW(e,t,d);a.appendChild(p),h.appendChild(v);const w=bW(t,f,{stroke:r,strokeWidth:n});return w&&a.appendChild(w),a},zg=(e,t,n)=>{const r=g8(e,n,t),i=r.connectorPoint||r.edgePoint;return GW(i,n)},GW=(e,t)=>{let n=M.getRectangleByPoints(t.points);return[(e[0]-n.x)/n.width,(e[1]-n.y)/n.height]},$W=(e,t)=>{const n=M.getRectangleByPoints(t.points),r=gc(t);return gi(r).getConnectorPoints(n).find(o=>Et(...o,...e)<=eW)},l8=(e,t,n)=>{const r=t.texts[n],i=Gi(e,t),o=fS(i,r.position);return{x:o[0]-r.width/2,y:o[1]-r.height/2,width:r.width,height:r.height}},WW=e=>D0(e,{match:t=>he.isArrowLine(t),recursion:t=>he.isDrawElement(t)}),jW=e=>{const t=[],n=e.length/3;for(let r=0;r<n;r++){const i=e[r],o=e[r+1],s=e[r+2],a=Et(...i,...o),f=Et(...s,...o),h=Gg(i,o,a*2/3),d=Gg(s,o,f*2/3);t.push(i,h,d,s)}return t},JS=(e,t,n,r,i,o)=>{const s=d8(e,r),a=s?zg(e,r,s):void 0,f=i?zg(e,n,i):void 0,h=s?s.id:void 0,d=new ZS(e),p=WS();let v,w;v=p.source,w=p.target,v&&delete p.source,w&&delete p.target;const E=NW(t,[n,r],{marker:v||Vr.none,connection:f,boundId:i==null?void 0:i.id},{marker:w||Vr.arrow,connection:a,boundId:h},[],{strokeWidth:$S.strokeWidth,...p}),S=Gi(e,E)[0];return E.points[1]=a8(S,r),d.processDrawing(E,o),I.getElementTopHost(e).append(o),E};function zW(e,t,n){const r=$O();r.setAttribute("id",n);const i=Gi(e,t);let o=M.getRectangleByPoints(i);o=M.getOutlineRectangle(o,-30);const s=b5(o,{fill:"white"});r.appendChild(s),t.texts.forEach((h,d)=>{let p=l8(e,t,d);p=M.inflate(p,hW*2);const v=b5(p,{fill:"black"});r.appendChild(v)});const f=b5(o);return f.setAttribute("opacity","0"),f.setAttribute("fill","none"),{mask:r,maskTargetFillRect:f}}const c8=(e,t,n)=>{const r=t.texts;if(!r.length)return-1;const i=Gi(e,t);return r.findIndex(o=>{const s=fS(i,o.position),a={x:s[0]-o.width/2,y:s[1]-o.height/2,width:o.width,height:o.height};return M.isHit(a,M.getRectangleByPoints([n,n]))})},f8=e=>tW.includes(e),Ha=e=>he.isGeometry(e)&&f8(e.shape),VW=e=>Q$[e],UW=(e,t,n={})=>{const r=yn(),i=XW(e);return{id:r,type:"geometry",shape:e,angle:0,opacity:1,texts:i,points:t,...n}},XW=e=>{var a;const n={...pc(e).textProperties},r=n==null?void 0:n.align,i=(n==null?void 0:n.textHeight)||Qm.height;n==null||delete n.align,n==null||delete n.textHeight;const o=((a=v8(e))==null?void 0:a.texts)||[];return(VW(e)||[]).map(f=>{const h=o==null?void 0:o.find(d=>(d==null?void 0:d.key)===f);return{id:f,text:Qa((h==null?void 0:h.text)||"",r||(h==null?void 0:h.align)||hi.center,n),textHeight:i}})},KW=(e,t)=>{const n=gi(e.shape),r=M.getRectangleByPoints([t,t]);let i;return n.getTextRectangle&&(i=e.texts.find(o=>{const s=n.getTextRectangle(e,{id:o.id});return M.isHit(r,s)})),i};class eD extends xo{canDraw(t){return!0}draw(t){let n;return n=ZW(this.board,t),n}}const Yl=(e,t)=>{switch(t.shape){case Xg.straight:return t.points;case Xg.curve:{if(t.points.length===2)return yo(t.points);{let n=t.points;const r=up(n);return yo(r)}}default:return null}},YW=(e,t,n)=>({id:yn(),type:"vector-line",shape:e,opacity:1,points:t,...n}),qW=(e,t,n,r,i)=>{const o=new eD(e),s=WS(),a=YW(t,[...n,r],{strokeWidth:$S.strokeWidth,...s}),f=n[n.length-1];return a.points[a.points.length-1]=a8(f,r),o.processDrawing(a,i),I.getElementTopHost(e).append(i),a},ZW=(e,t)=>{const n=Wt(t),r=b0(e,t),i=e7(e,t),o=hc(i,n),s=Jm(e,t),a={stroke:r,strokeWidth:n,strokeLineDash:o,fill:s},f=Gt();let h=Yl(e,t);const d=Uo(h,a),p=yn();return d.setAttribute("mask",`url(#${p})`),t.strokeStyle===Es.dotted&&Kt(d,"round"),f.appendChild(d),f},O0=e=>{const t=[];for(let n=0;n<e.length;n++){let r=n==e.length-1?0:n+1;t.push([(e[n][0]+e[r][0])/2,(e[n][1]+e[r][1])/2])}return t},tD=(e,t)=>{const n=[];for(let r=1;r<=e.length;r++){let i=e[r-1],o=r===e.length?e[0]:e[r];const s=BG(t,i,o);n.push(...s)}return n},Qr=(e,t)=>{for(let n=1;n<=e.length;n++){let r=e[n-1],i=n===e.length?e[0]:e[n];if(cS(t,r,i))return[r,i]}return null};function k6(e){const t=e.width/7,n=e.height/3.2,r=t/8.5,i=n/20,o=[e.x+t,e.y+n],s=[{rx:r,ry:i*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*2,endY:e.y+n/2},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*4.2,endY:e.y+n/2.2},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*5.8,endY:e.y+n},{rx:r,ry:i*1.3,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*6,endY:e.y+n*2.2},{rx:r,ry:i*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*5,endY:e.y+n*2.8},{rx:r,ry:i/1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*2.8,endY:e.y+n*2.8},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t,endY:e.y+n*2.2},{rx:r,ry:i*1.42,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t,endY:e.y+n}];return{startPoint:o,arcCommands:s}}const nD={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,arcCommands:o}=k6(t),s=`M ${i[0]} ${i[1]} `+o.map(f=>`A ${f.rx} ${f.ry} ${f.xAxisRotation} ${f.largeArcFlag} ${f.sweepFlag} ${f.endX} ${f.endY}`).join(`
`)+" Z",a=r.path(s,{...n,fillStyle:"solid"});return GO(a,"round"),a},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,arcCommands:r}=k6(e);let i=1/0,o=t,s=n;for(const a of r){const f=Lm(t,s,a),h=Et(t[0],t[1],f[0],f[1]);h<i&&(i=h,o=f),s=[a.endX,a.endY]}return o},getEdgeByConnectionPoint(e,t){const n=nD.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2,o=i/1.5;return{height:r,width:o>0?o:0,x:t.x+it.rectangleAndText+n+i/6,y:t.y+t.height/6+(t.height*4/6-r)/2}}},rD=(e,t,n)=>c8(e,t,n)!==-1,Vg=(e,t)=>RE(t,e)<=g4,iD=(e,t,n)=>{const r=Gi(e,t);return rD(e,t,n)||Vg(r,n)},oD=(e,t,n)=>{const r=Yl(e,t);return pp(t.points)&&Jl(n,r)||Vg(r,n)},QW=(e,t)=>{const n=gi(e.shape);if(Ha(e))return e.texts.some(i=>{const o=n.getTextRectangle(e,{id:i.id});return om(t,M.getCornerPoints(o),e.angle)});{const r=n.getTextRectangle?n.getTextRectangle(e):Sr(e);return om(t,M.getCornerPoints(r),e.angle)}},sD=(e,t)=>{const n=gi(e.shape);if(Ha(e))return e.texts.some(i=>{const o=n.getTextRectangle(e,{id:i.id});return M.isPointInRectangle(o,t)});{const r=n.getTextRectangle?n.getTextRectangle(e):Sr(e);return M.isPointInRectangle(r,t)}},uD=e=>{if(!h8(e))return!0;const t=Xm(e);return k.isEmpty(t,t.children[0])},JW=(e,t,n)=>{const r=M.getRectangleByPoints([n.anchor,n.focus]);if(he.isGeometry(t)){const i=PC(e,r,t);return i||!uD(t)&&QW(t,r)}if(he.isImage(t))return PC(e,r,t);if(he.isArrowLine(t)){const i=Gi(e,t);return W3(i,r)}if(he.isVectorLine(t)){const i=Yl(e,t);return W3(i,r)}return null},PC=(e,t,n)=>{const r=M.getRectangleByPoints(n.points);return om(t,M.getCornerPoints(r),n.angle)},om=(e,t,n)=>{let r=Nk(t,n)||t;return W3(r,e)},aD=(e,t)=>{let n=lD(e,t),r=t.length;n&&(r=t.indexOf(n)+1);const i=t.slice(0,r),o=tj(i);return o?o[0]:QG(e,i,"asc")[0]},lD=(e,t)=>{let n=null;for(let r=0;r<t.length;r++){const i=t[r];if(t7(e,i)||gp(i)){const o=Jm(e,i);if(JG(o)){n=i;break}}}return n},ej=(e,t)=>lD(e,[t])!==null,tj=e=>{const t=e.filter(n=>he.isText(n)||he.isLine(n)||he.isImage(n));return t.length?t:null},nj="debug:plait:hit:shape:edge:sample-points",kd=C0(nj),rj=[vt.cloud],ij=(e,t,n,r=!0)=>{const i=e.getRectangle(t);if(n=tc(e,n,t)||n,he.isGeometry(t)&&i){if(kd.isDebug()&&rj.includes(t.shape)){kd.clear();const{startPoint:a,arcCommands:f}=k6(i),h=[a,...f.map(w=>[w.endX,w.endY])];kd.drawCircles(e,h,5,!1);let d=1/0,p=n,v=a;for(const w of f){const E=Lm(n,v,w),y=Et(n[0],n[1],E[0],E[1]),{center:S}=ME(v,w);kd.drawCircles(e,[S],8,!1,{fill:"yellow"}),y<d&&(d=y,p=E),v=[w.endX,w.endY]}kd.drawCircles(e,[n],12,!1,{fill:"black",stroke:"black"}),kd.drawCircles(e,[p],12,!1,{fill:"green",stroke:"green"})}if(cD(e,t,n,g4))return!0;const o=gi(gc(t));if(he.isText(t)){const a=Sr(t);return M.isPointInRectangle(a,n)}return r&&uD(t)&&!ej(e,t)?!1:sD(t,n)||o.isInsidePoint(i,n)}if(he.isImage(t)){const o=M.getRectangleByPoints(t.points);return M.isPointInRectangle(o,n)}return he.isArrowLine(t)?iD(e,t,n):he.isVectorLine(t)?oD(e,t,n):null},cD=(e,t,n,r)=>{const i=dD(t,n);return Et(i[0],i[1],n[0],n[1])<=r},oj=(e,t,n,r)=>{const i=M.inflate(M.getRectangleByPoints(t.points),r);return gi(gc(t)).isInsidePoint(i,n)},sj=(e,t,n)=>{const r=e.getRectangle(t);if(n=tc(e,n,t)||n,he.isGeometry(t)&&!he.isGeometryByTable(t)){const i=gi(gc(t)),o=i.isInsidePoint(r,n);if(o)return o;if(i.getTextRectangle){const s=sD(t,n);if(s)return s}}if(he.isImage(t)){const i=M.getRectangleByPoints(t.points);return M.isPointInRectangle(i,n)}return he.isArrowLine(t)?iD(e,t,n):he.isVectorLine(t)?oD(e,t,n):null},Sr=e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+(t.height-r)/2}},Wt=e=>he.isText(e)?0:e.strokeWidth||Zm.strokeWidth,rc=(e,t)=>{wW(e,t.shape),Ve.insertNode(e,t,[e.children.length]),x0(e),Kf(e,t),Ln.updatePointerType(e,en.selection)},h8=e=>he.isText(e)?!0:he.isImage(e)?!1:he.isGeometry(e)?w8(e):he.isArrowLine(e)?Zf(e).length>0:he.isElementByTable(e)?e.cells.some(t=>XS(t)):!0,uj=e=>e.some(t=>h8(t)),gp=e=>he.isDrawElement(e)?he.isText(e)||he.isArrowLine(e)||he.isImage(e)?!1:he.isVectorLine(e)?pp(e.points):he.isGeometry(e)?Ej(e):!0:!1,t7=(e,t)=>he.isCustomGeometryElement(e,t)&&pp(t.points),d8=(e,t)=>{let n=fD(e,t);if(n){const r=g8(e,n,t);if(r.isHitConnector||r.isHitEdge)return n}return null},g8=(e,t,n)=>{const r=tc(e,n,t)||n,i=$W(r,t),o=dD(t,r);return{isHitEdge:cD(e,t,r,J$),isHitConnector:!!i,connectorPoint:i,edgePoint:o}},fD=(e,t,n=rm)=>{let r=null;return aj(e,i=>{r===null&&oj(e,i,tc(e,t,i)||t,n*2)&&(r=i)}),r},aj=(e,t)=>{di(e,n=>{!I.isBoard(n)&&he.isShapeElement(n)&&t(n)},Xf(e),!0)},SC=(e,t,n,r,i)=>gi(n).draw(e,t,r,i),lj=(e,t,n={hasMask:!0,hasConnector:!0})=>{const r=Gt(),i=M.getRectangleByPoints(t.points),o=M.inflate(i,qv),s=gc(t);let a;he.isElementByTable(t)&&(a={element:t});const f=SC(e,o,s,{stroke:mo,strokeWidth:qv},a);if(r.appendChild(f),n.hasMask){const h=SC(e,o,s,{stroke:mo,strokeWidth:0,fill:gp(t)?S4:Zm.fill,fillStyle:"solid"},a);r.appendChild(h)}return n.hasConnector&&gi(s).getConnectorPoints(i).forEach(d=>{const p=Yf(I.getRoughSVG(e),d,8,{stroke:mo,strokeWidth:hr,fill:"#FFF",fillStyle:"solid"});r.appendChild(p)}),r},hD=(e,t)=>e&&Ha(e)?`${e.id}-${t.id}`:t.id,pp=e=>{const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]},Ug=e=>Wm(e,nm.geometryText,Qm.text),cj=(e,t,n)=>{const r=pc(t),i={id:yn(),type:"geometry",angle:0,opacity:1,points:n,strokeWidth:Wg.strokeWidth,...r.geometryProperties};let o,s;return t===at.class?(o=[{id:yn(),height:30},{id:yn()},{id:yn()}],s=[{id:yn()}]):(o=[{id:yn(),height:50},{id:yn()}],s=[{id:yn()}]),{...i,shape:t,rows:o,columns:s,cells:fj(e,o,s,t)}},fj=(e,t,n,r)=>{var f;const i=pc(r),o=t.length*n.length,s=((f=v8(r))==null?void 0:f.texts)||[],a=s.map(h=>mp(e,h.text||Ug(e),i.textProperties["font-size"]).height);return new Array(o).fill("").map((h,d)=>{const p=Math.floor(d/n.length),v=d%n.length;return{id:yn(),rowId:t[p].id,columnId:n[v].id,textHeight:a[d],text:{children:[{text:s[d].text}],align:s[d].align}}})},p8=(e,t,n,r={},i={})=>_S.includes(e)?dj(e,t,r):hj(e,t,n,r,i),hj=(e,t,n,r={},i={})=>{let o={},s=hi.center,a=Qm.height;return e===vt.text&&(o={autoSize:!0},s=void 0),i={...i},i!=null&&i.align&&(s=i==null?void 0:i.align),i!=null&&i.textHeight&&(a=i==null?void 0:i.textHeight),i==null||delete i.align,i==null||delete i.textHeight,{id:yn(),type:"geometry",shape:e,angle:0,opacity:1,textHeight:a,text:Qa(n,s,i),points:t,...o,...r}},dj=(e,t,n={})=>({id:yn(),type:"geometry",shape:e,angle:0,opacity:1,points:t,...n}),gj=(e,t,n,r)=>gi(n).draw(e,t,r),dD=(e,t)=>{const n=M.getRectangleByPoints(e.points),r=gc(e);return gi(r).getNearestPoint(n,t)},pj=e=>FS[e],mj=e=>kS[e]||Wg,vj=e=>LS[e],m8=(e,t,n=!1)=>{const r=(12+tu/2)*2,i=M.getRectangleByPoints(t.points),o=Ti(e,i),s=n?o:i;return M.getEdgeCenterPoints(M.inflate(s,r))},gD=(e,t)=>t.findIndex(n=>{const r=M.getRectangleByPoints([e]);let i=M.getRectangleByPoints([n]);return i=M.inflate(i,tu),M.isHit(r,i)}),yj=e=>HS[e].strokeColor,wj=e=>HS[e].fill,mp=(e,t,n)=>{n=n?Number(n):qm;const r=Ym(Qa(t),{fontSize:n,fontFamily:xg});return{width:r.width+it.rectangleAndText*2,height:r.height}},pD=(e,t)=>{const n=v8(e);return M.getPoints(M.getRectangleByCenterPoint(t,n.width,n.height))},v8=e=>{const t=rW().includes(e),n=iW().includes(e);return t?pj(e):n?vj(e):mj(e)},y8=(e,t,n,r)=>{const i=pc(vt.text);return r=r||M.getRectangleByPoints(t).height,p8(vt.text,t,n,i.geometryProperties,{...i.textProperties,textHeight:r})},sm=(e,t,n)=>{const r=pc(n),i=mp(e,Qm.text,r.textProperties["font-size"]).height;return he.isUMLClassOrInterface({shape:n})?cj(e,n,t):f8(n)?UW(n,t,{strokeWidth:Wg.strokeWidth,...r.geometryProperties}):p8(n,t,"",{strokeWidth:Wg.strokeWidth,...r.geometryProperties},{...r.textProperties,textHeight:i})},lv=(e,t,n)=>{const r=n?Eg(e,t,n):qf(t);r&&r.edit(()=>{})},w8=e=>xj(e)||Ha(e),Cj=e=>!_S.includes(e)&&!f8(e),xj=e=>he.isGeometry(e)&&Cj(e.shape),Ej=e=>!nW.includes(e.shape),Pj=e=>e.source.boundId&&e.source.boundId===e.target.boundId,C8=(e,t)=>YG(t)&&!Pj(e),n7=(e,t)=>{const n=vp(e,t),r=yp(e,t,n);if(C8(t,r))return Oa(bG(n.source.point,n.source.direction,n.target.point,n.target.direction,oS));const i=f0(ES(r,e)),o=i.slice(1,i.length-1);if(t.points.length===2)return Oa(i);{const s=Oa(o),f=f0(Yr.getPoints(e,t)).slice(1,-1);if(qS(f))return Oa(i);const h=[s[0],...f,s[s.length-1]],d=YS(e,h,s,r),p=[i[0]];for(let w=0;w<d.length-1;w++){let E=d[w],y=d[w+1];if(dt.isAlign([E,y]))p.push(E);else{const A=I6(s,E,y);A.length?(p.push(E),p.push(...A)):(p.push(E),console.log("unknown data points"))}}return p.push(i[i.length-2],i[i.length-1]),Oa(p)}},mD=(e,t)=>{const n=yp(e,t);return[n.nextSourcePoint,n.nextTargetPoint]},Sj=(e,t,n)=>{let r=t.source.boundId?ys(e,t.source.boundId):void 0,i=t.target.boundId?ys(e,t.target.boundId):void 0;if(!r){const h=n.source;r=DC(h.point,h.vector)}if(!i){const h=n.target;i=DC(h.point,h.vector)}let o=M.getRectangleByPoints(r.points);const s=ec(M.getCornerPoints(o),r)||M.getCornerPoints(o);o=M.getRectangleByPoints(s),o=M.inflate(o,Wt(r)*2);let a=M.getRectangleByPoints(i.points);const f=ec(M.getCornerPoints(a),i)||M.getCornerPoints(a);return a=M.getRectangleByPoints(f),a=M.inflate(a,Wt(i)*2),{sourceRectangle:o,targetRectangle:a}},DC=(e,t)=>{const n=Vd(e,t,-25),r=M.getPoints(M.getRectangleByCenterPoint(n,50,50));return p8(vt.rectangle,r,"")};function vD(e,t,n){let r=n??n7(e,t);const[i,o]=mD(e,t);return r.splice(0,1,i),r.splice(-1,1,o),f0(r)}const um=(e,t)=>(t!=null&&t.length?t:Ye(e)).filter(r=>he.isDrawElement(r)),x8=e=>Ye(e).filter(n=>he.isArrowLine(n)),yD=e=>Ye(e).filter(n=>he.isVectorLine(n)),Dj=e=>{const t=Ye(e);return t&&t.length===1&&he.isSwimlane(t[0])},Tj=e=>{const t=Ye(e);return t&&t.length===1&&he.isLine(t[0])},wD=(e,t,n)=>{const r=sm(e,t,n);return rc(e,r),r},Aj=(e,t,n)=>{const r=pc(vt.text),i=mp(e,n,r.textProperties["font-size"]),o=[t,[t[0]+i.width,t[1]+i.height]],s=y8(e,o,n);rc(e,s)},Bj=(e,t,n,r)=>{const i=$f(t),o=Vt.get(e,r),s={points:i,textHeight:n};he.isText(o)&&o.autoSize&&(s.autoSize=!1),Ve.setNode(e,s,r)},Rj=(e,t)=>{const n=Ye(e),r=[];n.forEach(i=>{if(he.isGeometry(i)&&!he.isText(i)){const o=I.findPath(e,i);Ve.setNode(e,{shape:t},o),mV(e,{...i,shape:t},r)}}),r.length&&r.forEach(i=>{$i.resizeArrowLine(e,i.property,i.path)})},CD=(e,t,n,r)=>{let i=t.points,o=t.autoSize;const s=it.rectangleAndText;if(o){const a=n<im?im:n,f=Xm(t);if(B6.isActive(f,hi.right))i=[[i[1][0]-(a+s*2),i[0][1]],[i[1][0],i[0][1]+r]];else if(B6.isActive(f,hi.center)){const h=Math.abs(i[0][0]-i[1][0]),d=(a-h)/2;i=[[i[0][0]-d-s,i[0][1]],[i[1][0]+d+s,i[0][1]+r]]}else i=[i[0],[i[0][0]+a+s*2,i[0][1]+r]];zu(t)&&(i=Z4(M.getRectangleByPoints(t.points),M.getRectangleByPoints(i),M.getCenterPoint(M.getRectangleByPoints(t.points)),M.getCenterPoint(M.getRectangleByPoints(i)),t.angle))}return{points:i}},Mj=(e,t,n,r,i)=>{const o={text:n,textHeight:i,...CD(e,t,r,i)},s=e.children.findIndex(a=>a===t);Ve.setNode(e,o,[s])},bj=(e,t,n,r)=>{if(t.autoSize){const i={textHeight:r,...CD(e,t,n,r)},o=dt.isEquals(t.points[0],i.points[0])&&dt.isEquals(t.points[1],i.points[1]),s=Math.round(r)===Math.round(t.textHeight);if(!o||!s){const a=e.children.findIndex(f=>f===t);Ve.setNode(e,i,[a])}}},Oj=(e,t,n)=>{const{width:r,height:i,url:o}=t,s=I.getBoardContainer(e).clientWidth,a=I.getBoardContainer(e).clientHeight,f=Bt(e,Ot(e,s/2,a/2)),h=n?[n,[n[0]+r,n[1]+i]]:[[f[0]-r/2,f[1]-i/2],[f[0]+r/2,f[1]+i/2]],d={id:yn(),type:"image",points:h,url:o};Ve.insertNode(e,d,[e.children.length]),Ve.addSelectionWithTemporaryElements(e,[d])},xD=(e,t,n)=>{Ve.setNode(e,t,n)},Ij=(e,t,n)=>{const r=I.findPath(e,t);Ve.setNode(e,{texts:n},r)},kj=(e,t,n)=>{var s;const r=I.findPath(e,t),o=[...(s=t.texts)!=null&&s.length?[...t.texts]:[]];o.splice(n,1),Ve.setNode(e,{texts:o},r)},Fj=(e,t,n)=>{n8(Ho.arrowLine,t,n),x8(e).forEach(i=>{const o=I.findPath(e,i);let s=t===ws.source?i.source:i.target;s={...s,marker:n},Ve.setNode(e,{[t]:s},o)})},Lj=(e,t)=>{x8(e).map(r=>{const i={...t};if(r.shape===t.shape)return;const o=I.findPath(e,r);Ve.setNode(e,i,o)})},_j=(e,t,n,r)=>{const i=Yr.getPoints(e,t),o=n===ws.source?i[0]:i[i.length-1],s=zg(e,o,r);if(s){let a=t.source,f=t.target;n===ws.source?a={...a,boundId:r.id,connection:s}:f={...f,boundId:r.id,connection:s};const h=I.findPath(e,t);xD(e,{source:a,target:f},h)}};function Nj(e){const t={...e};return he.isHorizontalSwimlane(e)?(t.cells=e.cells.map((n,r)=>(r===0&&e.header&&(n={...e.cells[0],rowspan:e.rows.length}),n.text&&n.textHeight&&!n.text.direction&&(n={...n,text:{...n.text,direction:"vertical"}}),n)),t):(e.header&&(t.cells=[{...e.cells[0],colspan:e.columns.length},...e.cells.slice(1,e.cells.length)]),t)}const ED=(e,t)=>{const n=GS[e];return M.getPoints(M.getRectangleByCenterPoint(t,n.width,n.height))},am=(e,t)=>{const n=$j(e),r=Wj(e),i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=TC(r,"row",n,o),a=TC(r,"column",n,i);return{id:yn(),type:"swimlane",shape:r,points:t,rows:s,columns:a,header:n,cells:Hj(r,s,a,n)}},TC=(e,t,n,r)=>{const i=s=>new Array(s).fill("").map(()=>({id:yn()}));let o=i(3);if(t==="row"&&e===go.swimlaneVertical||t==="column"&&e===go.swimlaneHorizontal){o=n?o:i(2);const s=t==="row"?"height":"width";let a=sg;r<sg*o.length&&(a=Math.min(r/o.length/sg*sg,sg)),o=o.map((f,h)=>h===0||h===1&&n?{...f,[s]:a}:f)}return o},Hj=(e,t,n,r)=>{let i=[],o=0;r&&(i=[av(t[0].id,n[0].id,"New Swimlane")],o=1);const s=new Array(6).fill("").map((a,f)=>{if(f<3){const p=e===go.swimlaneVertical?t[o].id:t[f].id,v=e===go.swimlaneVertical?n[f].id:n[o].id;return av(p,v,r?"Lane":"New Swimlane")}const h=e===go.swimlaneVertical?t[o+1].id:t[f-3].id,d=e===go.swimlaneVertical?n[f-3].id:n[o+1].id;return av(h,d)});return[...i,...s]},Gj=e=>he.isHorizontalSwimlane(e)?e.rows.length:he.isVerticalSwimlane(e)?e.columns.length:0,$j=e=>[nu.swimlaneHorizontalWithHeader,nu.swimlaneVerticalWithHeader].includes(e),Wj=e=>[nu.swimlaneHorizontalWithHeader,nu.swimlaneHorizontal].includes(e)?go.swimlaneHorizontal:go.swimlaneVertical,PD=e=>I.isInPointer(e,NS()),jj=(e,t,n)=>{if(n>0&&he.isSwimlane(t)){const r=Gj(t);if(he.isHorizontalSwimlane(t))if(n>r)SD(e,t,t.rows.length,n-r);else{const i=t.rows.length-(r-n);TD(e,t,i,r-n)}if(he.isVerticalSwimlane(t))if(n>r)DD(e,t,t.columns.length,n-r);else{const i=t.columns.length-(r-n);AD(e,t,i,r-n)}}},SD=(e,t,n,r=1)=>{if(he.isHorizontalSwimlane(t)){const i=[...t.rows],o=[];for(let d=0;d<r;d++)o.push({id:yn()});i.splice(n,0,...o);const s=[...t.cells];o.forEach(d=>{s.push(...BD(t,d.id,"column"))});const a=Jf(e,t,t.cells[t.cells.length-1].id).points,f=M.getRectangleByPoints(a).height,h=[t.points[0],[t.points[1][0],t.points[1][1]+f*r]];r7(e,t,t.columns,i,s,h)}},DD=(e,t,n,r=1)=>{if(he.isVerticalSwimlane(t)){const i=[...t.columns],o=[];for(let d=0;d<r;d++)o.push({id:yn()});i.splice(n,0,...o);const s=[...t.cells];o.forEach(d=>{s.push(...BD(t,d.id,"row"))});const a=Jf(e,t,t.cells[t.cells.length-1].id).points,f=M.getRectangleByPoints(a).width,h=[t.points[0],[t.points[1][0]+f*r,t.points[1][1]]];r7(e,t,i,t.rows,s,h)}},TD=(e,t,n,r=1)=>{if(he.isHorizontalSwimlane(t)){if(r>t.rows.length)return;const i=[...t.rows];if(i.splice(n,r),i.length===0){const o=I.findPath(e,t);Ve.removeNode(e,o)}else{let o=[...t.cells];const s=[];for(let h=n;h<r+n;h++){const d=t.rows[h];s.push(d),o=o.filter(p=>p.rowId!==d.id)}let a=0;s.forEach(h=>{if(h.height)a+=h.height;else{const d=t.cells.find(v=>v.rowId===h.id),p=Jf(e,t,d.id).points;a+=M.getRectangleByPoints(p).height}});const f=[t.points[0],[t.points[1][0],t.points[1][1]-a]];r7(e,t,t.columns,i,o,f)}}},AD=(e,t,n,r=1)=>{if(he.isVerticalSwimlane(t)){if(r>t.columns.length)return;const i=[...t.columns];if(i.splice(n,r),i.length===0){const o=I.findPath(e,t);Ve.removeNode(e,o)}else{let o=[...t.cells];const s=[];for(let h=n;h<r+n;h++){const d=t.columns[h];s.push(d),o=o.filter(p=>p.columnId!==d.id)}let a=0;s.forEach(h=>{if(h.width)a+=h.width;else{const d=t.cells.find(v=>v.columnId===h.id),p=Jf(e,t,d.id).points;a+=M.getRectangleByPoints(p).width}});const f=[t.points[0],[t.points[1][0]-a,t.points[1][1]]];r7(e,t,i,t.rows,o,f)}}},BD=(e,t,n)=>{const r=e[`${n}s`].map(i=>({id:yn(),rowId:n==="row"?i.id:t,columnId:n==="row"?t:i.id}));return e.header&&r.shift(),r[0]={...r[0],text:{children:[{text:e.header?"Lane":"New Swimlane"}],align:hi.center,direction:n==="row"?void 0:"vertical"},textHeight:20},r},r7=(e,t,n,r,i,o)=>{const s=I.findPath(e,t);Ve.setNode(e,{columns:n,rows:r,cells:i,points:o},s)},zj=(e,t,n)=>{var s;const i={texts:(s=t.texts)==null?void 0:s.map(a=>a.id===n.id?{...a,...n}:a)},o=e.children.findIndex(a=>a===t);Ve.setNode(e,i,[o])},Vj=(e,t,n,r,i)=>{const o=Vt.get(e,t),s=Jf(e,o,n),a=o.cells.findIndex(y=>y.id===s.id);let f=[...o.rows],h=[...o.columns],d=[...o.cells],p=[...o.points];const{width:v,height:w}=M.getRectangleByPoints(s.points),E=it.rectangleAndText;if($g.isVerticalText(s)){const y=o.columns.findIndex(S=>S.id===s.columnId);if(i>v){const S=i+E*2,A=S-v,B=VS(o,o.columns[y].id,S,A);p=B.points,h=B.columns}}else{const y=o.rows.findIndex(B=>B.id===s.rowId),A=o.rows[y].height??Math.max(w,s.textHeight||0);if(i>A){const B=i+E*2,R=B-A,_=US(o,o.rows[y].id,B,R);p=_.points,f=_.rows}}d[a]={...d[a],textHeight:i,text:r},Ve.setNode(e,{rows:f,columns:h,cells:d,points:p},t)},Uj=(e,t,n,r)=>{const i=Xd(t);let o=t.cells;i!=null&&i.length?o=t.cells.map(s=>i.map(a=>a.id).includes(s.id)?AC(s,n):s):o=t.cells.map(s=>s.text&&s.textHeight?AC(s,n):s),Ve.setNode(e,{cells:o},r)},AC=(e,t)=>{const n={...e};return t?n.fill=t:delete n.fill,n},Xj=(e,t)=>{yD(e).map(r=>{if(r.shape===t.shape)return;const i=I.findPath(e,r);Ve.setNode(e,{...t},i)})},Kj=(e,t,n,r)=>{const o=NS().includes(n);let s=FS[n]||kS[n]||LS[n]||Wg;o&&(s=GS[n]);const a=Nd(r);if(a){let f=0;[rn.left,rn.right].includes(a)?f=-s.width/2:f=-s.height/2;const h=Vd(t,r,f),d=M.getPoints(M.getRectangleByCenterPoint(h,s.width,s.height));if(o){const p=am(n,d);return rc(e,p),p}return wD(e,d,n)}return null},$i={setText:Mj,setDrawTexts:zj,insertGeometry:wD,resizeGeometry:Bj,insertText:Aj,setTextSize:bj,resizeArrowLine:xD,setArrowLineTexts:Ij,removeArrowLineText:kj,setArrowLineMark:Fj,setArrowLineShape:Lj,setVectorLineShape:Xj,insertImage:Oj,connectArrowLineToDraw:_j,switchGeometryShape:Rj,setTableText:Vj,addSwimlaneRow:SD,addSwimlaneColumn:DD,removeSwimlaneRow:TD,removeSwimlaneColumn:AD,updateSwimlaneCount:jj,setTableFill:Uj,insertDrawByVector:Kj},F6=(e,t,n,r=0)=>{const i=M.getCenterPoint(t),o=lS(t,tu);if(r){const s=Ir([n],i,-r)[0];let a=o.find(f=>M.isHit(M.getRectangleByPoints([s,s]),f.rectangle));return a&&(a.cursorClass=EG(a.cursorClass,r)),a}else return o.find(s=>M.isHit(M.getRectangleByPoints([n,n]),s.rectangle))},Yj=e=>({x:e.x-Z3-Cg,y:e.y+e.height+Z3,width:Cg,height:Cg}),qj="debug:plait:resize-for-rotation",ps=C0(qj);function Zj(e){const{afterChange:t,drawSelectionRectangle:n}=e;let r,i,o=!1,s=null;const a=()=>{const h=Ye(e);return h.length>=1&&h.every(d=>(he.isDrawElement(d)||he.isCustomGeometryElement(e,d)&&d.points.length>1)&&!Tj(e)&&!Dj(e))};return Qf(e,{key:"draw-elements",canResize:a,hitTest:h=>{const d=Ye(e),p=sn(e,d,!1),v=ho(d),w=F6(e,p,h,v);return w?{element:[...d],rectangle:p,handle:w.handle,cursorClass:w.cursorClass}:null},onResize:(h,d)=>{r==null||r.remove(),ps.isDebug()&&ps.clear();const p=D3(e,h.handle),v=d.isShift||h.element.length===1&&he.isImage(h.element[0]),w=M.getCenterPoint(h.rectangle),E=em(h.handle),{originPoint:y,handlePoint:S}=L6(e,E,h.rectangle),A=ho(h.element);let B;if(A){B={angle:A,offsetX:0,offsetY:0,newCenterPoint:[0,0]};const[F,j]=Ir([d.startPoint,d.endPoint],w,-B.angle);d.startPoint=F,d.endPoint=j}const R=RD(e,h,d,{originPoint:y,handlePoint:S},v,p),_=i7(e,h.element,R);if(s=_.activePoints,r=_.snapG,I.getElementTopHost(e).append(r),B){const F=M.getPoints(h.rectangle),j=F.map(Ee=>Fa(Ee,y,_.xZoom,_.yZoom)),z=M.getRectangleByPoints(j);ps.isDebug()&&ps.drawRectangle(e,z,{stroke:"blue"});const Q=M.getCenterPoint(z),se=Z4(M.getRectangleByPoints(F),M.getRectangleByPoints(j),w,Q,B.angle),te=M.getCenterPoint(M.getRectangleByPoints(se));B=Object.assign(B,{offsetX:te[0]-Q[0],offsetY:te[1]-Q[1],newCenterPoint:te}),ps.isDebug()&&ps.drawRectangle(e,se)}h.element.forEach(F=>{const j=I.findPath(e,F);let z;if(B){z=g6(F.points,w,-B.angle).map(te=>Fa(te,y,_.xZoom,_.yZoom));const se=z.map(te=>[te[0]+B.offsetX,te[1]+B.offsetY]);z=g6(se,B.newCenterPoint,B.angle)}else zu(F)&&(o=!0),zu(F)&&Hk(F.angle)?z=Qj(e,F.points,y,_.xZoom,_.yZoom):z=F.points.map(Q=>Fa(Q,y,_.xZoom,_.yZoom));if(he.isGeometry(F))if(he.isGeometry(F)&&w8(F)){const{height:Q}=qf(F).getSize();$i.resizeGeometry(e,z,Q,j)}else z=$f(z),Ve.setNode(e,{points:z},j);else if(he.isLine(F)||he.isCustomGeometryElement(e,F)||he.isVectorLine(F))Ve.setNode(e,{points:z},j);else if(he.isImage(F))if(v)Ve.setNode(e,{points:z},j);else{const Q=M.getRectangleByPoints(F.points),se=M.getCenterPoint(Q),te=Fa(se,y,_.xZoom,_.yZoom),Ee=M.getRectangleByCenterPoint(te,Q.width,Q.height);Ve.setNode(e,{points:M.getPoints(Ee)},j)}})},afterResize:h=>{if(r==null||r.remove(),r=null,o){o=!1,s=null;const d=Ye(e);Ve.addSelectionWithTemporaryElements(e,d)}}}),e.afterChange=()=>{t(),i&&(i.remove(),i=null);const h=Ye(e);a()&&!Wi(e)&&h.length>1&&(i=Jj(e,s,o),I.getActiveHost(e).append(i))},e.drawSelectionRectangle=()=>{if(o){const h=M.getRectangleByPoints(s),d=Ti(e,h);return su(e,M.inflate(d,hr),{stroke:mo,strokeWidth:hr})}return n()},e}const L6=(e,t,n)=>{const r=xG(e,t),i=Kw(n,r),o=Kw(n,t);return{originPoint:i,handlePoint:o}},E8=(e,t,n,r,i)=>{const[o,s]=e;let a=0,f=0;if(r)if(i)a=dt.getOffsetX(o,s)/(n[0]-t[0]),f=a;else{let h=dt.getOffsetX(o,s),d=dt.getOffsetY(o,s);a=h/(n[0]-t[0]),f=d/(n[1]-t[1])}else{const h=dt.isHorizontal(t,n,.1)||!1;let d=h?dt.getOffsetX(o,s):dt.getOffsetY(o,s),p=h?n[0]-t[0]:n[1]-t[1];const v=d/p;i?(a=v,f=v):h?a=v:f=v}return{xZoom:a,yZoom:f}},Fa=(e,t,n,r)=>{const i=(e[0]-t[0])*n,o=(e[1]-t[1])*r;return[e[0]+i,e[1]+o]},Qj=(e,t,n,r,i)=>{const o=M.getRectangleByPoints(t);ps.isDebug()&&ps.drawRectangle(e,o,{stroke:"black"});let s=t;s=Ir(s,M.getCenterPoint(o),1/2*Math.PI),ps.isDebug()&&ps.drawRectangle(e,s,{stroke:"blue"}),s=s.map(f=>Fa(f,n,r,i)),ps.isDebug()&&ps.drawRectangle(e,s);const a=M.getRectangleByPoints(s);return Ir(s,M.getCenterPoint(a),-.5*Math.PI)},Jj=(e,t,n)=>{const r=Gt(),i=Ye(e),o=n?M.getRectangleByPoints(t):sn(e,i,!1),s=Ti(e,o);let a=M.getCornerPoints(s);const f=ho(i);if(f){const h=M.getCenterPoint(s);a=Ir(a,h,f)}return a.forEach(h=>{const d=aS(e,h);r.append(d)}),r},ez="debug:plait:point-for-geometry",BC=C0(ez),i3=10;function RD(e,t,n,r,i,o){const{originPoint:s,handlePoint:a}=r,f=[n.startPoint,n.endPoint],{xZoom:h,yZoom:d}=E8(f,s,a,o,i);let p,v=[];if(Array.isArray(t.element)){p=t.element;const R=sn(e,t.element,!1);v=M.getPoints(R)}else p=[t.element],v=t.element.points;const w=v.map(R=>Fa(R,s,h,d)),E=M.getRectangleByPoints(w),y=lp(E,ho(p)),S=Fa(a,s,h,d),[A,B]=zn(s,S);return{resizePoints:f,resizeOriginPoint:v,activeRectangle:y,originPoint:s,handlePoint:a,directionFactors:[h0(A),h0(B)],isAspectRatio:i,isFromCorner:o}}function i7(e,t,n){const r=Gt(),i=nP(e,t);let o=rz(i,n);o.deltaX===0&&o.deltaY===0&&(o=tz(i,n));const s=ho(t),a=nz(o,n,s),f=oz(e,a.activePoints,i,n,s),h=iz(e,a.activePoints,i,n,s);return r.append(f,h),{...a,...o,snapG:r}}function tz(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:i,directionFactors:o}=t,s=o[0]!==0||r,a=o[1]!==0||r;if(s){const f=Hf(i,!0),h=o[0]===-1?f[0]:f[2],d=mg(e,h,!0);if(Math.abs(d)<Na&&(n.deltaX=d,n.deltaX!==0&&r))return n.deltaY=n.deltaX/(i.width/i.height),n}if(a){const f=Hf(i,!1),h=o[1]===-1?f[0]:f[2],d=mg(e,h,!1);if(Math.abs(d)<Na&&(n.deltaY=d,n.deltaY!==0&&r))return n.deltaX=n.deltaY*(i.width/i.height),n}return n}function nz(e,t,n){const{deltaX:r,deltaY:i}=e,{resizePoints:o,isCreate:s}=t,a=[o[0],[o[1][0]+r,o[1][1]+i]];let f=a,h=0,d=0;if(!s){const{originPoint:p,handlePoint:v,isFromCorner:w,isAspectRatio:E,resizeOriginPoint:y}=t,S=E8(a,p,v,w,E);h=S.xZoom,d=S.yZoom,f=y.map(A=>Fa(A,p,h,d)),n&&(f=Z4(M.getRectangleByPoints(y),M.getRectangleByPoints(f),M.getCenterPoint(M.getRectangleByPoints(y)),M.getCenterPoint(M.getRectangleByPoints(f)),n))}return{xZoom:h,yZoom:d,activePoints:f}}function rz(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:i}=t,o=e.find(a=>Math.abs(a.width-i.width)<Na);if(o){const a=o.width-i.width;if(n.deltaX=a*t.directionFactors[0],r){const f=a/(i.width/i.height);return n.deltaY=f*t.directionFactors[1],n}}const s=e.find(a=>Math.abs(a.height-i.height)<Na);if(s){const a=s.height-i.height;if(n.deltaY=a*t.directionFactors[1],r){const f=a*(i.width/i.height);return n.deltaX=f*t.directionFactors[0],n}}return n}function o3(e,t){return t?[[e.x,e.y-i3],[e.x+e.width,e.y-i3]]:[[e.x-i3,e.y],[e.x-i3,e.y+e.height]]}function iz(e,t,n,r,i){BC.isDebug()&&BC.clear();const o=M.getRectangleByPoints(t),s=lp(o,i),{isAspectRatio:a,directionFactors:f}=r,h=f[0]!==0||a,d=f[1]!==0||a;return rP(e,s,n,h,d)}function oz(e,t,n,r,i){let o=[],s=[];const a=r.directionFactors[0]!==0||r.isAspectRatio,f=r.directionFactors[1]!==0||r.isAspectRatio,h=M.getRectangleByPoints(t),d=lp(h,i);for(let v of n)d.width===v.width&&a&&o.push(o3(v,!0)),d.height===v.height&&f&&s.push(o3(v,!1));o.length&&a&&o.push(o3(d,!0)),s.length&&f&&s.push(o3(d,!1));const p=[...o,...s];return iP(e,p)}function MD(e,t){const n=[],r=t.shape,i=10;if(r===Vn.straight){const o=he.isArrowLine(t)?Yr.getPoints(e,t):t.points;for(let s=0;s<o.length-1;s++)Et(...o[s],...o[s+1])<i||n.push([(o[s][0]+o[s+1][0])/2,(o[s][1]+o[s+1][1])/2])}if(r===Vn.curve){const o=he.isArrowLine(t)?Yr.getPoints(e,t):t.points,s=he.isArrowLine(t)?QS(e,t):Yl(e,t);if(o.length===2){const f=s.length-1,h=Math.round((0+f)/2);n.push(s[h])}else for(let a=0;a<o.length-1;a++){const f=s.findIndex(v=>v[0]===o[a][0]&&v[1]===o[a][1]),h=s.findIndex(v=>v[0]===o[a+1][0]&&v[1]===o[a+1][1]),d=Math.round((f+h)/2);Et(...o[a],...o[a+1])<i||n.push(s[d])}}if(r===Vn.elbow){const o=n7(e,t),s=yp(e,t);if(!C8(t,s)){const[a,f]=mD(e,t);for(let h=0;h<o.length-1;h++){if(h==0&&dt.isEquals(o[h+1],a)||h===o.length-2&&dt.isEquals(o[o.length-2],f))continue;const[d,p]=o[h],[v,w]=o[h+1],E=[(d+v)/2,(p+w)/2];n.push(E)}}}return n}const sz=(e,t,n)=>SS(e,t,n,r=>{if(he.isArrowLine(r)){let i={...r.source},o={...r.target},s=[...r.points];return r.source.boundId&&(s[0]=Kl(ys(e,r.source.boundId),r.source.connection),ys(e,r.source.boundId,t)||(delete i.boundId,delete i.connection)),r.target.boundId&&(s[s.length-1]=Kl(ys(e,r.target.boundId),r.target.connection),ys(e,r.target.boundId,t)||(delete o.boundId,delete o.connection)),s=s.map(a=>[a[0]-n[0],a[1]-n[1]]),{...r,points:s,source:i,target:o}}}),uz=(e,t,n)=>{DS(e,t,n,(r,i)=>{he.isArrowLine(r)&&(r.source.boundId&&t.find(s=>[r.source.boundId,i[r.source.boundId]].includes(s.id))&&(r.source.boundId=i[r.source.boundId]),r.target.boundId&&t.find(s=>[r.target.boundId,i[r.target.boundId]].includes(s.id))&&(r.target.boundId=i[r.target.boundId])),he.isElementByTable(r)&&(wC(r,"row"),wC(r,"column"),EW(r.cells))})},hg=3/4,az={draw(e,t,n){const r=ug(t),o=I.getRoughSVG(e).polygon(r,{...n,fillStyle:"solid"});return Kt(o,"round"),o},isInsidePoint(e,t){const n=ug(e);return Jl(t,n)},getCornerPoints(e){return ug(e)},getNearestPoint(e,t){return On(t,ug(e))},getEdgeByConnectionPoint(e,t){const n=ug(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+(t.height*hg-r)/2}}},ug=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*hg],[e.x+e.width*3/5,e.y+e.height*hg],[e.x+e.width/2,e.y+e.height],[e.x+e.width*2/5,e.y+e.height*hg],[e.x,e.y+e.height*hg]];function kr(e){const t=e.getPolygonPoints,n={draw(r,i,o){const s=t(i),f=I.getRoughSVG(r).polygon(s,{...o,fillStyle:"solid"});return Kt(f,"round"),f},isInsidePoint(r,i){const o=t(r);return Jl(i,o)},getCornerPoints(r){return t(r)},getNearestPoint(r,i){return On(i,t(r))},getNearestCrossingPoint(r,i){const o=t(r),s=tD(o,i);let a=s[0],f=Et(i[0],i[1],a[0],a[1]);return s.filter((h,d)=>d>0).forEach(h=>{let d=Et(i[0],i[1],h[0],h[1]);d<f&&(f=d,a=h)}),a},getEdgeByConnectionPoint(r,i){const o=t(r),s=M.getConnectionPoint(r,i);return Qr(o,s)},getConnectorPoints(r){return e.getConnectorPoints?e.getConnectorPoints(r):t(r)}};return e.getTextRectangle&&(n.getTextRectangle=e.getTextRectangle),n}const lz=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width*3/4,e.y+e.height/4],[e.x+e.width,e.y+e.height/4],[e.x+e.width,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*3/4],[e.x,e.y+e.height*3/4],[e.x,e.y+e.height/4],[e.x+e.width/4,e.y+e.height/4]],cz=kr({getPolygonPoints:lz,getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Sr(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),cv=kr({getPolygonPoints:M.getEdgeCenterPoints,getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Sr(e);return t.width=t.width/2,t.x+=t.width/2,t}});function P8(e){const t={draw(n,r,i){const o=[r.x+r.width/2,r.y+r.height/2],a=I.getRoughSVG(n).ellipse(o[0],o[1],r.width,r.height,{...i,fillStyle:"solid"});return Kt(a,"round"),a},isInsidePoint(n,r){const i=[n.x+n.width/2,n.y+n.height/2];return Ga(r,i,n.width/2,n.height/2)},getCornerPoints(n){return M.getEdgeCenterPoints(n)},getNearestPoint(n,r){const i=[n.x+n.width/2,n.y+n.height/2];return Ai(r,i,n.width/2,n.height/2)},getTangentVectorByConnectionPoint(n,r){const i=M.getConnectionPoint(n,r),o=[n.x+n.width/2,n.y+n.height/2],s=[i[0]-o[0],-(i[1]-o[1])],a=n.width/2,f=n.height/2,h=Xu(s[0],s[1],a,f);return Ku(s[0],s[1],h)},getConnectorPoints(n){return M.getEdgeCenterPoints(n)},getTextRectangle(n){const r=Sr(n),i=r.width;return r.width=r.width*3/4,r.x+=i/8,r}};return e!=null&&e.draw&&(t.draw=e.draw),e!=null&&e.getTextRectangle&&(t.getTextRectangle=e.getTextRectangle),t}const fv=P8(),fz=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x,e.y+e.height/2]],hz=kr({getPolygonPoints:fz,getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Sr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),dz=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.32,e.y],[e.x+e.width*.32,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height]],gz=kr({getPolygonPoints:dz,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=Sr(e),n=t.width;return t.width=t.width*(1-.32),t.x+=n*.32,t}}),pz=e=>[[e.x+e.width*3/10,e.y],[e.x+e.width*7/10,e.y],[e.x+e.width,e.y+e.height*3/10],[e.x+e.width,e.y+e.height*7/10],[e.x+e.width*7/10,e.y+e.height],[e.x+e.width*3/10,e.y+e.height],[e.x,e.y+e.height*7/10],[e.x,e.y+e.height*3/10]],mz=kr({getPolygonPoints:pz,getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Sr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),RC=e=>[[e.x+e.width/4,e.y],[e.x+e.width,e.y],[e.x+e.width*3/4,e.y+e.height],[e.x,e.y+e.height]],MC=kr({getPolygonPoints:RC,getConnectorPoints:e=>{const t=RC(e);return O0(t)},getTextRectangle(e){const t=Sr(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),vz=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height*2/5],[e.x+e.width*4/5,e.y+e.height],[e.x+e.width/5,e.y+e.height],[e.x,e.y+e.height*2/5]],yz=kr({getPolygonPoints:vz,getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2,o=i*3/5;return{height:r,width:o>0?o:0,x:t.x+it.rectangleAndText+n+i/5,y:t.y+t.height/5+(t.height*4/5-r)/2}}}),wz=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height]]},Cz=kr({getPolygonPoints:wz,getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Sr(e),r=t.width>t.height/2+20;return n.width=r?t.width-t.height/2:n.width,n}}),xz=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height],[e.x+(t?e.height/2:e.width),e.y+e.height/2]]},Ez=kr({getPolygonPoints:xz,getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Sr(e),r=t.width>t.height+20;return n.width=r?t.width-t.height:n.width,n.x=r?t.x+t.height/2:n.x,n}}),Pz=e=>[[e.x,e.y+e.height*.2],[e.x+e.width*.68,e.y+e.height*.2],[e.x+e.width*.68,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*.68,e.y+e.height],[e.x+e.width*.68,e.y+e.height*.8],[e.x,e.y+e.height*.8]],Sz=kr({getPolygonPoints:Pz,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=Sr(e);return t.width=t.width*.68,t}}),on={draw(e,t,n){return su(e,t,{...n,fillStyle:"solid"})},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return On(t,on.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},Dz={draw(e,t,n){return E0(I.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,Qd(t))},isInsidePoint(e,t){return w4(t,e,Qd(e))},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return bD(t,e,Qd(e))},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},Qd=e=>Math.min(e.width*.1,e.height*.1);function bD(e,t,n){const{x:r,y:i,width:o,height:s}=t,a=M.getCornerPoints(t);let f=On(e,a),h=null;return e[0]>=r&&e[0]<=r+n&&e[1]>=i&&e[1]<=i+n&&(h=[r+n,i+n]),e[0]>=r&&e[0]<=r+n&&e[1]>=i+s&&e[1]<=i+s-n&&(h=[r+n,i+s-n]),e[0]>=r+o-n&&e[0]<=r+o&&e[1]>=i&&e[1]<=i+n&&(h=[r+o-n,i+n]),e[0]>=r+o-n&&e[0]<=r+o&&e[1]>=i+s-n&&e[1]<=i+s&&(h=[r+o-n,i+s-n]),h&&(f=Ai(e,h,n,n)),f}const Df=3/4,Tz={draw(e,t,n){const r=I.getRoughSVG(e),i=t.x,o=t.y,s=t.x+t.width,a=t.y+t.height*Df,f=Qd(t),h=[i+f,o],d=[s-f,o],p=[s,o+f],v=[s,a-f],w=[s-f,a],E=[i+f,a],y=[i,a-f],S=[i,o+f],A=[i+t.width/4,a],B=[i+t.width/4,t.y+t.height],R=[i+t.width/2,a],_=r.path(`M${d[0]} ${d[1]} A ${f} ${f}, 0, 0, 1, ${p[0]} ${p[1]} L ${v[0]} ${v[1]} A ${f} ${f}, 0, 0, 1, ${w[0]} ${w[1]} L    ${R[0]} ${R[1]}  ${B[0]} ${B[1]}   ${A[0]} ${A[1]}   ${E[0]} ${E[1]} A ${f} ${f}, 0, 0, 1, ${y[0]} ${y[1]} L ${S[0]} ${S[1]} A ${f} ${f}, 0, 0, 1, ${h[0]} ${h[1]} Z`,{...n,fillStyle:"solid"});return Kt(_,"round"),_},isInsidePoint(e,t){const n=[[e.x+e.width/4,e.y+e.height*3/4],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height*3/4]];return e.height=e.height*3/4,Jl(t,n)||w4(t,e,Qd(e))},getCornerPoints(e){return hv(e)},getNearestPoint(e,t){return On(t,hv(e))},getEdgeByConnectionPoint(e,t){const n=hv(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height*Df],[e.x,e.y+e.height/2]]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+(t.height*Df-r)/2}}},hv=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Df],[e.x+e.width/2,e.y+e.height*Df],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*Df],[e.x,e.y+e.height*Df]],bC=e=>[[e.x+e.width*.15,e.y],[e.x+e.width*.85,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],Az=kr({getPolygonPoints:bC,getConnectorPoints(e){const t=bC(e);return O0(t)},getTextRectangle(e){const t=Sr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),OC=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],Bz=kr({getPolygonPoints:OC,getConnectorPoints(e){const t=OC(e);return[...O0(t),...t]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2,o=i*2/3;return{height:r,width:o>0?o:0,x:t.x+it.rectangleAndText+n+i/6,y:t.y+t.height*3/5+(t.height*2/5-r)/2}}}),Rz=e=>[[e.x,e.y+e.height/2],[e.x+e.width*8/25,e.y],[e.x+e.width*8/25,e.y+e.height/5],[e.x+e.width*17/25,e.y+e.height/5],[e.x+e.width*17/25,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*17/25,e.y+e.height],[e.x+e.width*17/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height]],Mz=kr({getPolygonPoints:Rz,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]}),IC=e=>[[e.x+e.width/2,e.y+e.height*75/91],[e.x+e.width*18.61/96,e.y+e.height],[e.x+e.width*24.2235871/96,e.y+e.height*57.7254249/91],[e.x,e.y+e.height*34.5491503/91],[e.x+e.width*33.3053687/96,e.y+e.height*29.7745751/91],[e.x+e.width/2,e.y],[e.x+e.width*62.6946313/96,e.y+e.height*29.7745751/91],[e.x+e.width,e.y+e.height*34.5491503/91],[e.x+e.width*71.7764129/96,e.y+e.height*57.7254249/91],[e.x+e.width*77.3892626/96,e.y+e.height]],bz=kr({getPolygonPoints:IC,getConnectorPoints:e=>{const t=IC(e);return[t[1],t[3],t[5],t[7],t[9]]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2,o=i/2;return{height:r,width:o>0?o:0,x:t.x+it.rectangleAndText+n+i/4,y:t.y+t.height*1/6+(t.height*4/5-r)/2}}}),Oz={draw(e,t,n){return E0(I.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,s3(t))},isInsidePoint(e,t){return w4(t,e,s3(e))},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return Iz(t,e,s3(e))},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=s3(e),i=OD(e,r,n);if(i){const o=[n[0]-i[0],-(n[1]-i[1])],s=r,a=r,f=Xu(o[0],o[1],s,a);return Ku(o[0],o[1],f)}return null},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},s3=e=>Math.min(e.width/2,e.height/2);function Iz(e,t,n){let r=null,i=OD(t,n,e);if(i)r=Ai(e,i,n,n);else{const o=M.getCornerPoints(t);r=On(e,o)}return r}function OD(e,t,n){const{x:r,y:i,width:o,height:s}=e;let a=null;return n[0]>=r&&n[0]<=r+t&&n[1]>=i&&n[1]<=i+t&&(a=[r+t,i+t]),n[0]>=r&&n[0]<=r+t&&n[1]>=i+s-t&&n[1]<=i+s&&(a=[r+t,i+s-t]),n[0]>=r+o-t&&n[0]<=r+o&&n[1]>=i&&n[1]<=i+t&&(a=[r+o-t,i+t]),n[0]>=r+o-t&&n[0]<=r+o&&n[1]>=i+s-t&&n[1]<=i+s&&(a=[r+o-t,i+s-t]),a}const kC=e=>[[e.x,e.y+e.height/4],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],kz=kr({getPolygonPoints:kC,getConnectorPoints:e=>{const t=kC(e);return O0(t)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+t.height/4+(t.height*3/4-r)/2}}}),Fz=e=>[[e.x,e.y+e.height/2],[e.x+e.width/6,e.y],[e.x+e.width*5/6,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*5/6,e.y+e.height],[e.x+e.width/6,e.y+e.height]],Lz=kr({getPolygonPoints:Fz,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle(e){const t=Sr(e),n=t.width;return t.width=t.width*2/3,t.x+=n/6,t}}),FC=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width*7/8,e.y+e.height],[e.x+e.width/8,e.y+e.height]],_z=kr({getPolygonPoints:FC,getConnectorPoints:e=>{const t=FC(e);return O0(t)},getTextRectangle(e){const t=Sr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),LC=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width/2,e.y+e.height]],Nz=kr({getPolygonPoints:LC,getConnectorPoints:e=>{const t=LC(e);return[...O0(t),...t]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2,o=i*2/3;return{height:r,width:o>0?o:0,x:t.x+it.rectangleAndText+n+i/6,y:t.y+(t.height*2/3-r)/2}}}),Hz={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} L${t.x+t.width*3/4} ${t.y} A  ${t.width/4} ${t.height/2}, 0, 0, 1,${t.x+t.width*3/4} ${t.y+t.height} L${t.x} ${t.y+t.height} Z`,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,width:e.width*3/4},n),i=Ga(t,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2);return r||i},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=On(t,on.getCornerPoints(e));return n[0]>e.x+e.width*3/4?Ai(t,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width/4,s=e.height/2,a=Xu(i[0],i[1],o,s);return Ku(i[0],i[1],a)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},Gz={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x+t.width/10} ${t.y} L${t.x+t.width} ${t.y} A  ${t.width/10} ${t.height/2}, 0, 0, 0,${t.x+t.width} ${t.y+t.height} L${t.x+t.width/10} ${t.y+t.height}A  ${t.width/10} ${t.height/2}, 0, 0, 1,${t.x+t.width/10} ${t.y}`,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,x:e.x+e.width/10,width:e.width*9/10},n),i=Ga(t,[e.x+e.width/10,e.y+e.height/2],e.width/10,e.height/2),o=!Ga(t,[e.x+e.width,e.y+e.height/2],e.width/10,e.height/2);return r&&o||i},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=On(t,on.getCornerPoints(e));if(n[0]<e.x+e.width/10){const r=[e.x+e.width/10,e.y+e.height/2],i=Ai(t,r,e.width/10,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}if(n[0]>e.x+e.width*9/10){const r=[e.x+e.width,e.y+e.height/2],i=Ai(t,r,e.width/10,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}return n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);let r=[e.x+e.width/10,e.y+e.height/2],i=e.width/10,o=e.height/2;const s=n[0]>e.x+e.width*9/10&&n[1]>e.y;s&&(r=[e.x+e.width,e.y+e.height/2]);const a=[n[0]-r[0],-(n[1]-r[1])],f=Xu(a[0],a[1],i,o),h=Ku(a[0],a[1],f);return s?h.map(d=>-d):h},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width*9/10,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]]},getTextRectangle(e){const t=Sr(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}},$z={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+t.width*.06} ${t.y} L${t.x+t.width*.06} ${t.y+t.height} M${t.x+t.width-t.width*.06} ${t.y} L${t.x+t.width-t.width*.06} ${t.y+t.height}`,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return On(t,on.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},Wz=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],jz=kr({getPolygonPoints:Wz,getConnectorPoints:e=>M.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2;return{width:i>0?i:0,height:r,x:t.x+it.rectangleAndText+n,y:t.y+(t.height-t.height/2-r)/2}}}),zz=P8({draw(e,t,n){const r=I.getRoughSVG(e),i=t.width/2,o=t.height/2,s=[t.x+t.width,t.y+t.height/2],a=r.path(`M${s[0]} ${s[1]}
        A${i},${o} 0 1,1 ${s[0]} ${s[1]-.01}
        M${t.x} ${t.y+t.height/2}
        L${t.x+t.width} ${t.y+t.height/2}
        M${t.x+t.width/2} ${t.y}
        L${t.x+t.width/2} ${t.y+t.height}
        `,{...n,fillStyle:"solid"});return Kt(a,"round"),a}}),Vz=P8({draw(e,t,n){const r=I.getRoughSVG(e),i=t.width/2,o=t.height/2,s=[t.x+t.width,t.y+t.height/2],a=[t.x+t.width/2,t.y+t.height/2],f=n9([t.x,t.y],[t.x+t.width,t.y+t.height],a[0],a[1],i,o),h=n9([t.x+t.width,t.y],[t.x,t.y+t.height],a[0],a[1],i,o),d=r.path(`M${s[0]} ${s[1]}
        A${i},${o} 0 1,1 ${s[0]} ${s[1]-.01}
        M${f[0][0]} ${f[0][1]}
        L${f[1][0]} ${f[1][1]}
        M${h[0][0]} ${h[0][1]}
        L${h[1][0]} ${h[1][1]}
        `,{...n,fillStyle:"solid"});return Kt(d,"round"),d}}),Uz={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9}
            Q${t.x+t.width-t.width/4} ${t.y+t.height-t.height/9*3}, ${t.x+t.width/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}           
            `,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){let n=On(t,on.getCornerPoints(e)),r=up([[e.x,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x+e.width/4*3,e.y+e.height-e.height/9*2],[e.x+e.width,e.y+e.height-e.height/9]]);if(r=yo(r),n[1]>e.y+e.height-e.height/9){if(n[0]===e.x+e.width/2)return n[1]=e.y+e.height-e.height/9,n;n=On(t,r,!1)}return n},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x,e.y+e.height/2]]},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);return n[0]>e.x&&n[0]<e.x+e.width/4?zn([e.x+e.width/4,e.y+e.height],n):n[0]>e.x+e.width/4&&n[0]<e.x+e.width/4*3?zn([e.x+e.width/4*3,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height]):n[0]>e.x+e.width/4*3?zn([e.x+e.width,e.y+e.height-e.height/9],n):zn(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},_C=e=>{const t=[[e.x,e.y+10],[e.x+5,e.y+10],[e.x+5,e.y+5],[e.x+10,e.y+5],[e.x+10,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height-e.height/9-10-3],[e.x+e.width-5,e.y+e.height-e.height/9-10-3-4],[e.x+e.width-5,e.y+e.height-e.height/9-5-3],[e.x+e.width-10,e.y+e.height-e.height/9-5-3-4],[e.x+e.width-10,e.y+e.height-e.height/9]];let n=up([[e.x+e.width-10,e.y+e.height-e.height/9],[e.x+e.width-10-(e.width-10)/4,e.y+e.height-e.height/9*2],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x,e.y+e.height-e.height/9]]);return n=yo(n),[...t,...n]},Xz={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y+10} H${t.x+5} V${t.y+5} H${t.x+10} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9-10-3} L${t.x+t.width-5} ${t.y+t.height-t.height/9-10-3-4} V${t.y+t.height-t.height/9-5-3}
                 L${t.x+t.width-10} ${t.y+t.height-t.height/9-5-3-4} V${t.y+t.height-t.height/9}
                
             Q${t.x+t.width-10-(t.width-10)/4} ${t.y+t.height-t.height/9*3}, ${t.x+(t.width-10)/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}
              
                M${t.x+5} ${t.y+10} H${t.x+t.width-10} V${t.y+t.height-t.height/9} 
                    
                M${t.x+10} ${t.y+5} H${t.x+t.width-5} V${t.y+t.height-t.height/9-10-3}
            `,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return On(t,_C(e),!1)},getConnectorPoints(e){let t=up([[e.x,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4*3,e.y+e.height-e.height/9*2],[e.x+e.width-10,e.y+e.height-e.height/9]]);t=yo(t);const n=On([e.x+e.width/2,e.y+e.height],t);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[n[0],n[1]],[e.x,e.y+e.height/2]]},getNearestCrossingPoint(e,t){const n=tD(_C(e),t);let r=n[0],i=Et(t[0],t[1],r[0],r[1]);return n.filter((o,s)=>s>0).forEach(o=>{let s=Et(t[0],t[1],o[0],o[1]);s<i&&(i=s,r=o)}),r},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);if(n[0]>e.x&&n[0]<e.x+(e.width-10)/4)return zn([e.x+(e.width-10)/4,e.y+e.height],n);if(n[0]>e.x+(e.width-10)/4&&n[0]<e.x+(e.width-10)/4*3)return zn([e.x+(e.width-10)/4*3,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height]);if(n[0]>e.x+(e.width-10)/4*3&&n[0]<e.x+e.width-10)return zn([e.x+(e.width-10),e.y+e.height-e.height/9],n);const r=gS(t)||rn.bottom,i=Gf(r);return[i.x,i.y]},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i-10:0,x:t.x+it.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},Kz={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y+t.height*.15}  
            A${t.width/2} ${t.height*.15}, 0, 0, 0,${t.x+t.width} ${t.y+t.height*.15} 
            A${t.width/2} ${t.height*.15}, 0, 0, 0,${t.x} ${t.y+t.height*.15} 
            V${t.y+t.height-t.height*.15}
            A${t.width/2} ${t.height*.15}, 0, 0, 0, ${t.x+t.width} ${t.y+t.height-t.height*.15}
            V${t.y+t.height*.15}`,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,y:e.y+e.height*.15,height:e.height-e.height*.3},n),i=Ga(t,[e.x+e.width/2,e.y+e.height*.15],e.width/2,e.height*.15),o=Ga(t,[e.x+e.width/2,e.y+e.height-e.height*.15],e.width/2,e.height*.15);return r||i||o},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=On(t,on.getCornerPoints(e));if(n[1]<e.y+e.height*.15){const r=[e.x+e.width/2,e.y+e.height*.15],i=Ai(t,r,e.width/2,e.height*.15);return i[1]>r[1]&&(i[1]=r[1]*2-i[1]),i}if(n[1]>e.y+e.height-e.height*.15){const r=[e.x+e.width/2,e.y+e.height-e.height*.15],i=Ai(t,r,e.width/2,e.height*.15);return i[1]<r[1]&&(i[1]=r[0]*2-i[1]),i}return n},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);let r=[e.x+e.width/2,e.y+e.height-e.height*.15],i=e.width/2,o=e.height*.15;n[1]<e.y+e.height*.15&&n[0]>e.x&&(r=[e.x+e.width/2,e.y+e.height*.15]);const a=[n[0]-r[0],-(n[1]-r[1])],f=Xu(a[0],a[1],i,o);return Ku(a[0],a[1],f)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+t.height*.3+(t.height-t.height*.45-r)/2}}},Yz={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x+t.width-t.width*.15} ${t.y}  
            A${t.width*.15} ${t.height/2}, 0, 0, 0,${t.x+t.width-t.width*.15} ${t.y+t.height} 
            A${t.width*.15} ${t.height/2}, 0, 0, 0,${t.x+t.width-t.width*.15} ${t.y} 
            H${t.x+t.width*.15}
            A${t.width*.15} ${t.height/2}, 0, 0, 0, ${t.x+t.width*.15} ${t.y+t.height}
            H${t.x+t.width-t.width*.15}`,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]),r=M.isHit({...e,x:e.x+e.width*.15,width:e.width-e.width*.3},n),i=Ga(t,[e.x+e.width*.15,e.y+e.height/2],e.width*.15,e.height/2),o=Ga(t,[e.x+e.width-e.width*.15,e.y+e.height/2],e.width*.15,e.height/2);return r||i||o},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=On(t,on.getCornerPoints(e));if(n[0]<e.x+e.width*.15){const r=[e.x+e.width*.15,e.y+e.height/2],i=Ai(t,r,e.width*.15,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}if(n[0]>e.x+e.width-e.width*.15){const r=[e.x+e.width-e.width*.15,e.y+e.height/2],i=Ai(t,r,e.width*.15,e.height/2);return i[0]<r[0]&&(i[0]=r[0]*2-i[0]),i}return n},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);let r=[e.x+e.width*.15,e.y+e.height/2],i=e.width*.15,o=e.height/2;n[0]>e.x+e.width-e.width*.15&&n[1]>e.y&&(r=[e.x+e.width-e.width*.15,e.y+e.height/2]);const a=[n[0]-r[0],-(n[1]-r[1])],f=Xu(a[0],a[1],i,o);return Ku(a[0],a[1],f)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-t.width*.45-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.15+it.rectangleAndText+n,y:t.y+(t.height-r)/2}}},qz={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} h${t.width} v${t.height} h${-t.width} v${-t.height}
            M${t.x} ${t.y+t.height/10} h${t.width}
            M${t.x+t.width/10} ${t.y} v${t.height}
            `,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return On(t,on.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-t.width*.1-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.1+it.rectangleAndText+n,y:t.y+t.height*.1+(t.height-t.height*.1-r)/2}}};function NC(e){const t=e.width*.09,n=e.x+e.width,r=e.y+e.height/2;return{startPoint:[n,e.y],upperCurve:{controlPoint1:[n-t,e.y],controlPoint2:[n,r],endPoint:[n-t,r]},lowerCurve:{controlPoint1:[n,r],controlPoint2:[n-t,e.y+e.height],endPoint:[n,e.y+e.height]}}}const Zz={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,upperCurve:o,lowerCurve:s}=NC(t),a=[`M${i[0]} ${i[1]}`,`C${o.controlPoint1[0]} ${o.controlPoint1[1]},
            ${o.controlPoint2[0]} ${o.controlPoint2[1]},
            ${o.endPoint[0]} ${o.endPoint[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`].join(" "),f=r.path(a,{...n,fillStyle:"solid",fill:"transparent"});return Kt(f,"round"),f},getNearestPoint(e,t){const{startPoint:n,upperCurve:r,lowerCurve:i}=NC(e),o=yo([n,r.controlPoint1,r.controlPoint2,r.endPoint],.001),s=yo([r.endPoint,i.controlPoint1,i.controlPoint2,i.endPoint],.001),a=[...o,...s];let f=1/0,h=t;for(const d of a){const p=Et(t[0],t[1],d[0],d[1]);p<f&&(f=p,h=[...d])}return h},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-t.width*.09-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function HC(e){const t=e.width*.09,n=e.y+e.height/2;return{startPoint:[e.x,e.y],upperCurve:{controlPoint1:[e.x+t,e.y],controlPoint2:[e.x,n],endPoint:[e.x+t,n]},lowerCurve:{controlPoint1:[e.x,n],controlPoint2:[e.x+t,e.y+e.height],endPoint:[e.x,e.y+e.height]}}}const Qz={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,upperCurve:o,lowerCurve:s}=HC(t),a=[`M${i[0]} ${i[1]}`,`C${o.controlPoint1[0]} ${o.controlPoint1[1]},
            ${o.controlPoint2[0]} ${o.controlPoint2[1]},
            ${o.endPoint[0]} ${o.endPoint[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`].join(" "),f=r.path(a,{...n,fillStyle:"solid",fill:"transparent"});return Kt(f,"round"),f},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,upperCurve:r,lowerCurve:i}=HC(e),o=yo([n,r.controlPoint1,r.controlPoint2,r.endPoint],.001),s=yo([r.endPoint,i.controlPoint1,i.controlPoint2,i.endPoint],.001),a=[...o,...s];let f=1/0,h=[...t];for(const d of a){const p=Et(t[0],t[1],d[0],d[1]);p<f&&(f=p,h=[...d])}return h},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-t.width*.09-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.09+it.rectangleAndText+n,y:t.y+(t.height-r)/2}}},Jz={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x+t.width*.075} ${t.y+t.height} H${t.x} V${t.y} H${t.x+t.width*.075}
           `,{...n,fillStyle:"solid",fill:"transparent"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return On(t,on.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+(t.height-r)/2}}},eV=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],tV={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x+t.width*.15} ${t.y} 
            H${t.x+t.width-t.width*.1} 
            A ${t.width*.1} ${t.height/2}, 0, 0, 1,${t.x+t.width-t.width*.1} ${t.y+t.height}
            H${t.x+t.width*.15}
            L${t.x} ${t.y+t.height/2}
            Z
            `,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width-e.width*.1,e.y],[e.x+e.width-e.width*.1,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],r=Jl(t,n),i=Ga(t,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2);return r||i},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=On(t,eV(e));return n[0]>e.x+e.width-e.width*.1?Ai(t,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+e.width-e.width*.1,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width*.1,s=e.height/2,a=Xu(i[0],i[1],o,s);return Ku(i[0],i[1],a)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-n*2-t.width*.25;return{width:i>0?i:0,height:r,x:t.x+n+t.width*.15,y:t.y+(t.height-r)/2}}},Hd={draw(e,t,n,r){const i=Gt();try{const o=dp(e,{...r==null?void 0:r.element});if(o){const s=I.getRoughSVG(e),{x:a,y:f,width:h,height:d}=t,p=X2(s,[a,f],[a+h,f],n),v=X2(s,[a,f],[a,f+d],n);i.append(p,v),o.forEach(w=>{const E=M.getRectangleByPoints(w.points),{x:y,y:S,width:A,height:B}=E,R=su(e,{x:y+hr,y:S+hr,width:A-hr*2,height:B-hr*2},{fill:w.fill,fillStyle:"solid",strokeWidth:0}),_=X2(s,[y+A,S],[y+A,S+B],n),F=X2(s,[y,S+B],[y+A,S+B],n);i.append(R,_,F)}),Kt(i,"round")}}catch(o){console.error(o)}return i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return bD(t,e,Qd(e))},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e,t){try{if(t&&t.id){const n=Jf(t==null?void 0:t.board,e,t.id);if(n)return $g.isVerticalText(n)?nV(n):ID(n)}}catch(n){console.error(n)}return{x:0,y:0,width:0,height:0}}};function nV(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight||0,i=t.height-it.rectangleAndText*2-n*2;return{width:i>0?i:0,height:r,x:t.x-i/2+t.width/2,y:t.y+(t.height-r)/2}}function ID(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight||0,i=t.width-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+(t.height-r)/2}}function GC(e){const t=e.x+e.width/2,n={width:e.width/3/2,height:e.height/4/2};return e.y+e.height/4/2,{headArcCommand:{rx:n.width,ry:n.height,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:t,endY:e.y},bodyLine:[[t,e.y+e.height/4],[t,e.y+e.height/4*3]],armsLine:[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],leftLegLine:[[t,e.y+e.height/4*3],[e.x+e.width/12,e.y+e.height]],rightLegLine:[[t,e.y+e.height/4*3],[e.x+e.width/12*11,e.y+e.height]]}}const rV={draw(e,t,n){const r=I.getRoughSVG(e),{headArcCommand:i,bodyLine:o,armsLine:s,leftLegLine:a,rightLegLine:f}=GC(t),h=[`M${o[0][0]} ${o[0][1]}`,`A${i.rx} ${i.ry} ${i.xAxisRotation} ${i.largeArcFlag} ${i.sweepFlag} ${i.endX} ${i.endY}`,`A${i.rx} ${i.ry} ${i.xAxisRotation} ${i.largeArcFlag} ${i.sweepFlag} ${o[0][0]} ${o[0][1]}`,`V${o[1][1]}`,`M${s[0][0]} ${s[0][1]} H${s[1][0]}`,`M${a[0][0]} ${a[0][1]} L${a[1][0]} ${a[1][1]}`,`M${f[0][0]} ${f[0][1]} L${f[1][0]} ${f[1][1]}`].join(" "),d=r.path(h,{...n,fillStyle:"solid"});return Kt(d,"round"),d},getNearestPoint(e,t){const{headArcCommand:n,bodyLine:r,armsLine:i,leftLegLine:o,rightLegLine:s}=GC(e),a=[e.x+e.width/2,e.y+e.height/4/2],f=Ai(t,a,n.rx,n.ry),h=Et(...t,...f),p=y4(t,[r,i,o,s]),v=Et(...t,...p);return h<v?f:p},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);if(n[1]>=e.y&&n[1]<=e.y+e.height/4){const r=[e.x+e.width/2,e.y+e.height/4/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width/2,s=e.height/2,a=Xu(i[0],i[1],o,s);return Ku(i[0],i[1],a)}return n[1]>=e.y+e.height/4&&n[1]<e.y+e.height/4*3?n[0]<e.x+e.width/2?Hg(zn([e.x,e.y+e.height/2],n),-(Math.PI/2)):Hg(zn([e.x+e.width,e.y+e.height/2],n),-(Math.PI/2)):n[1]>=e.y+e.height/4*3?n[0]<e.x+e.width/2?zn(n,[e.x+e.width/12,e.y+e.height]):zn([e.x+e.width/12*11,e.y+e.height],n):zn(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=e.textHeight,r=t.width+40;return{height:n,width:r>0?r:0,x:t.x-20,y:t.y+t.height+4}}},iV={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+40} ${t.y} L${t.x+40} ${t.y+t.height} `,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return On(t,on.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=40-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function $C(e){const n=e.width*.7,r=e.x+e.width*.8;return{headerHeight:25,points:{leftTop:[e.x,e.y+25],topStart:[e.x,e.y],topEnd:[e.x+n,e.y],cornerPoint:[r,e.y+25],rightTop:[e.x+e.width,e.y+25],rightBottom:[e.x+e.width,e.y+e.height],leftBottom:[e.x,e.y+e.height],leftMiddle:[e.x,e.y+25],middlePoint:[r,e.y+25]}}}const oV={draw(e,t,n){const r=I.getRoughSVG(e),{points:i}=$C(t),o=[`M${i.leftTop[0]} ${i.leftTop[1]}`,`V${i.topStart[1]}`,`H${i.topEnd[0]}`,`L${i.cornerPoint[0]} ${i.cornerPoint[1]}`,`H${i.rightTop[0]}`,`V${i.rightBottom[1]}`,`H${i.leftBottom[0]}`,`V${i.leftMiddle[1]}`,`H${i.middlePoint[0]}`].join(" "),s=r.path(o,{...n,fillStyle:"solid"});return Kt(s,"round"),s},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const{points:n}=$C(e),r=[[n.topStart,n.leftTop],[n.leftTop,n.leftBottom],[n.leftBottom,n.rightBottom],[n.rightBottom,n.rightTop],[n.topStart,n.topEnd],[n.topEnd,n.cornerPoint],[n.cornerPoint,n.rightTop],[n.leftMiddle,n.middlePoint]];return y4(t,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);return n[0]>e.x+e.width*.7&&n[1]<e.y+25?zn([e.x+e.width*.7,e.y],n):zn([e.x+e.width*.8,e.y+25],n)},getTextRectangle(e,t){var o,s;const n=M.getRectangleByPoints(e.points),r=Wt(e),i=(s=(o=e.texts)==null?void 0:o.find(a=>a.id===(t==null?void 0:t.id)))==null?void 0:s.textHeight;if((t==null?void 0:t.id)===Xo.name){const a=n.width*.7-it.rectangleAndText-r;return{height:i,width:a>0?a:0,x:n.x+it.rectangleAndText+r,y:n.y+(25-i)/2}}if((t==null?void 0:t.id)===Xo.content){const a=n.width-it.rectangleAndText*2-r*2;return{height:i,width:a>0?a:0,x:n.x+it.rectangleAndText+r,y:n.y+25+(n.height-25-i)/2}}return n}},sV={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y+25} 
            V${t.y}
            H${t.x+t.width} 
            V${t.y+t.height}
            H${t.x}
            V${t.y+25}
            H${t.x+t.width/3-8}
            L${t.x+t.width/3} ${t.y+16}
            V${t.y}
            `,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return On(t,on.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e,t){var o,s;const n=M.getRectangleByPoints(e.points),r=Wt(e),i=(s=(o=e.texts)==null?void 0:o.find(a=>a.id===(t==null?void 0:t.id)))==null?void 0:s.textHeight;if((t==null?void 0:t.id)===Xo.name){const a=n.width/3-8-it.rectangleAndText-r;return{height:i,width:a>0?a:0,x:n.x+it.rectangleAndText+r,y:n.y+(25-i)/2}}if((t==null?void 0:t.id)===Xo.content){const a=n.width-it.rectangleAndText*2-r*2;return{height:i,width:a>0?a:0,x:n.x+it.rectangleAndText+r,y:n.y+25+it.rectangleAndText+r}}return n}};function WC(e){return[[[e.x,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y],[e.x,e.y+e.height]]]}const uV={draw(e,t,n){const r=I.getRoughSVG(e),i=WC(t),o=r.path(i.map(([s,a])=>`M${s[0]} ${s[1]} L${a[0]} ${a[1]}`).join(" "),{...n,fillStyle:"solid",strokeWidth:4});return Kt(o,"round"),o},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=WC(e);let r=1/0,i=t;return n.forEach(o=>{const s=Fm(t,o),a=Et(t[0],t[1],s[0],s[1]);a<r&&(r=a,i=s)}),i},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},aV={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+t.width*.125} ${t.y} L${t.x+t.width*.125} ${t.y+t.height} M${t.x+t.width-t.width*.125} ${t.y} L${t.x+t.width-t.width*.125} ${t.y+t.height}`,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return On(t,on.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2-t.width*.125*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n+t.width*.125,y:t.y+(t.height-r)/2}}},lV={draw(e,t,n){const i=I.getRoughSVG(e).path(`M${t.x} ${t.y} 
            h${t.width-16}
            v16
            h16
            v${t.height-16}
            h${-t.width}
            Z
            M${t.x+t.width-16} ${t.y} 
            A16 16, 0,0,1, ${t.x+t.width} ${t.y+16}
            `,{...n,fillStyle:"solid"});return Kt(i,"round"),i},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const n=On(t,on.getCornerPoints(e));return n[0]>e.x+e.width-16&&n[1]<e.y+16?Ai(t,[e.x+e.width-16,e.y+16],16,16):n},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=Xu(i[0],i[1],16,16);return Ku(i[0],i[1],o)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n-15;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function jC(e){const t=e.y+e.height/2,n=e.x+e.width*.3,r=e.width*.13,i=e.height*.285,o=n+r,s=e.width*.233;return{startPoint:[e.x,t],line1:[[e.x,t],[n,t]],circleArcCommand:{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:n,endY:t},verticalArcCommand:{rx:s,ry:e.height/2,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:o,endY:e.y+e.height},line2:[[o+s,t],[e.x+e.width,t]]}}const cV={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,line1:o,circleArcCommand:s,verticalArcCommand:a,line2:f}=jC(t),h=[`M${i[0]} ${i[1]}`,`H${o[1][0]}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${o[1][0]+s.rx*2} ${s.endY}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${s.endX} ${s.endY}`,`M${a.endX} ${t.y}`,`A${a.rx} ${a.ry} ${a.xAxisRotation} ${a.largeArcFlag} ${a.sweepFlag} ${a.endX} ${a.endY}`,`M${f[0][0]} ${f[0][1]} H${f[1][0]}`].join(" "),d=r.path(h,{...n,fillStyle:"solid"});return Kt(d,"round"),d},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getNearestPoint(e,t){const{line1:n,line2:r,circleArcCommand:i,verticalArcCommand:o}=jC(e),s=On(t,[...n,...r]),a=Et(...t,...s),f=[n[1][0]+i.rx,n[1][1]],h=Ai(t,f,i.rx,i.ry),d=Et(...t,...h),p=[o.endX,e.y],v=Lm(t,p,o),w=Et(...t,...v),E=Math.min(a,d,w);return E===a?s:E===d?h:v},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t);return n[0]>e.x+e.width*.43&&n[1]<e.y+e.height/2?Hg(zn(n,[e.x,e.y+e.height/2]),-Math.PI):n[0]>e.x+e.width*.43&&n[1]>e.y+e.height/2?zn(n,[e.x,e.y+e.height/2]):zn(n,[e.x,e.y+e.height/2])}};function zC(e){const t=e.width*.39,n=e.height/2;return{startPoint:[e.x,e.y],leftArcCommand:{rx:t,ry:n,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:e.x,endY:e.y+e.height},line:{startX:e.x+e.width*.41,startY:e.y+e.height/2,endX:e.x+e.width,endY:e.y+e.height/2}}}const fV={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,leftArcCommand:o,line:s}=zC(t),a=[`M${i[0]} ${i[1]}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${o.endX} ${o.endY}`,`M${s.startX} ${s.startY} H${s.endX}`].join(" "),f=r.path(a,{...n,fillStyle:"solid",fill:"transparent"});return Kt(f,"round"),f},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,leftArcCommand:r,line:i}=zC(e);let o=1/0,s=t;const a=Lm(t,n,r),f=Et(t[0],t[1],a[0],a[1]);f<o&&(o=f,s=a);const h=[i.startX,i.startY],d=[i.endX,i.endY],p=Fm(t,[h,d]),v=Et(t[0],t[1],p[0],p[1]);return v<o&&(o=v,s=p),s},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)}},VC=.54;function UC(e){const t=e.y+e.height/2,n=e.width*(1-VC)/2,r=e.height/2,i=[e.x,t],o=e.x+e.width*VC;return{startPoint:i,line:{startX:i[0],startY:t,endX:o,endY:t},arcCommands:[{rx:n,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+e.width,endY:t},{rx:n,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:o,endY:t}]}}const hV={draw(e,t,n){const r=I.getRoughSVG(e),{startPoint:i,line:o,arcCommands:s}=UC(t),a=[`M${i[0]} ${i[1]}`,`H${o.endX}`,...s.map(h=>`A${h.rx} ${h.ry} ${h.xAxisRotation} ${h.largeArcFlag} ${h.sweepFlag} ${h.endX} ${h.endY}`)].join(" "),f=r.path(a,{...n,fillStyle:"solid"});return Kt(f,"round"),f},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getNearestPoint(e,t){const{line:n,arcCommands:r}=UC(e),i=[n.startX,n.startY],o=[n.endX,n.endY],s=On(t,[i,o]),a=Et(...t,...s),f=[e.x+3*e.width/4,n.startY],h=Ai(t,f,r[0].rx,r[0].ry),d=Et(...t,...h);return a<d?s:h},getTangentVectorByConnectionPoint(e,t){const n=M.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2];if(n[0]>e.x+e.width*.54){const i=[n[0]-r[0],-(n[1]-r[1])],o=e.width*.46/2,s=e.height/2,a=Xu(i[0],i[1],o,s);return Ku(i[0],i[1],a)}return zn(n,[e.x,e.y+e.height/2])}};function u3(e){const t=e.x+12,n=e.width>70?24:e.width*.2,r=e.height-28-e.height*.35>1?14:e.height*.175,i=e.y+e.height*.175,o=e.y+e.height-e.height*.175-r;return{boxSize:{width:n,height:r},points:{mainStart:[t,e.y],topBoxStart:[t,i],topBoxEnd:[t,i+r],bottomBoxStart:[t,o],bottomBoxEnd:[t,o+r],mainEnd:[t,e.y+e.height],rightTop:[e.x+e.width,e.y],rightBottom:[e.x+e.width,e.y+e.height]}}}const kD={draw(e,t,n){const r=I.getRoughSVG(e),{boxSize:i,points:o}=u3(t),s=[`M${o.mainStart[0]} ${o.mainStart[1]}`,`H${o.rightTop[0]}`,`V${o.rightBottom[1]}`,`H${o.mainEnd[0]}`,`M${o.topBoxStart[0]} ${o.topBoxStart[1]}`,`h${i.width/2} v${i.height} h${-i.width} v${-i.height} h${i.width/2}`,`M${o.bottomBoxStart[0]} ${o.bottomBoxStart[1]}`,`h${i.width/2} v${i.height} h${-i.width} v${-i.height} h${i.width/2}`,`M${o.mainStart[0]} ${o.mainStart[1]}`,`V${o.topBoxStart[1]}`,`M${o.topBoxEnd[0]} ${o.topBoxEnd[1]}`,`V${o.bottomBoxStart[1]}`,`M${o.bottomBoxEnd[0]} ${o.bottomBoxEnd[1]}`,`V${o.mainEnd[1]}`].join(" "),a=r.path(s,{...n,fillStyle:"solid"});return Kt(a,"round"),a},getNearestPoint(e,t){const{boxSize:n,points:r}=u3(e),i=[[r.mainStart,[r.rightTop[0],r.mainStart[1]]],[[r.rightTop[0],r.mainStart[1]],r.rightBottom],[r.rightBottom,[r.mainEnd[0],r.rightBottom[1]]],[[r.mainEnd[0],r.rightBottom[1]],r.mainStart],[r.topBoxStart,[r.topBoxStart[0]+n.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]+n.width/2,r.topBoxStart[1]],[r.topBoxStart[0]+n.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]+n.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-n.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]-n.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-n.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]-n.width/2,r.topBoxStart[1]],r.topBoxStart],[r.bottomBoxStart,[r.bottomBoxStart[0]+n.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]+n.width/2,r.bottomBoxStart[1]],[r.bottomBoxStart[0]+n.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]+n.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-n.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]-n.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-n.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]-n.width/2,r.bottomBoxStart[1]],r.bottomBoxStart],[r.mainStart,r.topBoxStart],[r.topBoxEnd,r.bottomBoxStart],[r.bottomBoxEnd,r.mainEnd]];return y4(t,i)},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getTangentVectorByConnectionPoint(e,t){const{points:n}=u3(e),r=M.getConnectionPoint(e,t);return zn(n.mainStart,r)},getConnectorPoints(e){const{points:t}=u3(e);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[t.mainStart[0],e.y+e.height/2]]},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-24-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+24+it.rectangleAndText+n,y:t.y+(t.height-r)/2}}},dV={draw(e,t,n){const r=I.getRoughSVG(e),i=t.width-45*2-18>1?45:t.width*.25,o=t.height-30-8*2>1?30:t.height*.2,s={x:t.x+t.width-18-i,y:t.y+8,width:i,height:o},a=r.path(`M${t.x} ${t.y} 
            H${t.x+t.width} 
            V${t.y+t.height} 
            H${t.x} Z

            `,{...n,fillStyle:"solid"}),f=kD.draw(e,s,n);return a.append(f),Kt(a,"round"),a},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return On(t,on.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-45*2-18>1?45:t.width*.25,o=t.width-18-i-it.rectangleAndText-n*2;return{height:r,width:o>0?o:0,x:t.x+it.rectangleAndText+n,y:t.y+(t.height-r)/2}}},gV={draw(e,t,n){const r=I.getRoughSVG(e);return E0(r,t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid",dashGap:10,strokeLineDash:[10,10]},!1,4)},isInsidePoint(e,t){const n=M.getRectangleByPoints([t,t]);return M.isHit(e,n)},getCornerPoints(e){return M.getCornerPoints(e)},getNearestPoint(e,t){return On(t,on.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=on.getCornerPoints(e),r=M.getConnectionPoint(e,t);return Qr(n,r)},getConnectorPoints(e){return M.getEdgeCenterPoints(e)},getTextRectangle(e){const t=M.getRectangleByPoints(e.points),n=Wt(e),r=e.textHeight,i=t.width-it.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+it.rectangleAndText+n,y:t.y+(t.height-r)/2}}},pV={[vt.rectangle]:on,[vt.diamond]:cv,[vt.ellipse]:fv,[vt.parallelogram]:MC,[vt.roundRectangle]:Dz,[vt.text]:on,[vt.triangle]:Bz,[vt.leftArrow]:gz,[vt.trapezoid]:Az,[vt.rightArrow]:Sz,[vt.cross]:cz,[vt.star]:bz,[vt.pentagon]:yz,[vt.hexagon]:hz,[vt.octagon]:mz,[vt.pentagonArrow]:Cz,[vt.processArrow]:Ez,[vt.twoWayArrow]:Mz,[vt.comment]:az,[vt.roundComment]:Tz,[vt.cloud]:nD,[ht.process]:on,[ht.decision]:cv,[ht.connector]:fv,[ht.data]:MC,[ht.terminal]:Oz,[ht.database]:Kz,[ht.hardDisk]:Yz,[ht.internalStorage]:qz,[ht.manualInput]:kz,[ht.preparation]:Lz,[ht.manualLoop]:_z,[ht.merge]:Nz,[ht.delay]:Hz,[ht.storedData]:Gz,[ht.or]:zz,[ht.summingJunction]:Vz,[ht.predefinedProcess]:$z,[ht.offPage]:jz,[ht.document]:Uz,[ht.multiDocument]:Xz,[ht.noteCurlyLeft]:Zz,[ht.noteCurlyRight]:Qz,[ht.noteSquare]:Jz,[ht.display]:tV,[go.swimlaneHorizontal]:Hd,[go.swimlaneVertical]:Hd,[g0.table]:Hd,[at.actor]:rV,[at.useCase]:fv,[at.container]:iV,[at.note]:lV,[at.package]:oV,[at.combinedFragment]:sV,[at.class]:Hd,[at.interface]:Hd,[at.activation]:on,[at.object]:on,[at.deletion]:uV,[at.activityClass]:aV,[at.simpleClass]:on,[at.component]:kD,[at.componentBox]:dV,[at.template]:gV,[at.port]:on,[at.branchMerge]:cv,[at.assembly]:cV,[at.requiredInterface]:fV,[at.providedInterface]:hV},gi=e=>pV[e],vp=(e,t)=>{const n=Wt(t),r=t.source.boundId?ys(e,t.source.boundId):void 0,i=t.target.boundId?ys(e,t.target.boundId):void 0;let o=r?Kl(r,t.source.connection):t.points[0],s=i?Kl(i,t.target.connection):t.points[t.points.length-1],a=Nd([s[0]-o[0],s[1]-o[1]])||rn.right,f=MG(a);const h=Gf(a),d=Gf(f),p={key:ws.source,point:o,direction:a,vector:[h.x,h.y]},v={key:ws.target,point:s,direction:f,vector:[d.x,d.y]};if(r){const w=Yr.isSourceMarkOrTargetMark(t,Vr.none,ws.source)?0:n,E=XC(r,t.source.connection);if(p.vector=E,p.boundElement=r,zu(r)){const y=Nd(Hg(E,r.angle));a=y||a}else{const y=Nd(E);a=y||a}p.direction=a,o=Kl(r,t.source.connection,a,w),p.point=ec(o,r)||o}if(i){const w=Yr.isSourceMarkOrTargetMark(t,Vr.none,ws.target)?0:n,E=XC(i,t.target.connection);if(v.vector=E,v.boundElement=i,zu(i)){const y=Nd(Hg(E,i.angle));f=y||f}else{const y=Nd(E);f=y||f}v.direction=f,s=Kl(i,t.target.connection,f,w),v.point=ec(s,i)||s}return{source:p,target:v}},Kl=(e,t,n,r)=>{const i=M.getRectangleByPoints(e.points);if(n&&r){const o=Gf(n),s=M.getConnectionPoint(i,t);return[s[0]+o.x*r,s[1]+o.y*r]}else return M.getConnectionPoint(i,t)},XC=(e,t)=>{const n=M.getRectangleByPoints(e.points),r=gc(e),i=gi(r);let o=[0,0];const s=gS(t);if(s&&e.shape!==vt.ellipse){const a=Gf(s);return[a.x,a.y]}if(i.getEdgeByConnectionPoint){const a=i.getEdgeByConnectionPoint(n,t);if(a){const f=[a[1][0]-a[0][0],a[1][1]-a[0][1]];return qw(f)}}if(i.getTangentVectorByConnectionPoint){const a=i.getTangentVectorByConnectionPoint(n,t);if(a)return qw(a)}return o},yp=(e,t,n)=>{n=n??vp(e,t);const{sourceRectangle:r,targetRectangle:i}=Sj(e,t,n),{sourceOuterRectangle:o,targetOuterRectangle:s}=KG(r,i),a=n.source.point,f=n.target.point,h=eC(a,o,n.source.direction),d=eC(f,s,n.target.direction);return{sourcePoint:a,nextSourcePoint:h,sourceRectangle:r,sourceOuterRectangle:o,targetPoint:f,nextTargetPoint:d,targetRectangle:i,targetOuterRectangle:s}},mV=(e,t,n)=>{const r=D0(e,{match:i=>he.isArrowLine(i)?i.source.boundId===i.id||i.target.boundId===i.id:!1,recursion:i=>!0});r.length&&r.forEach(i=>{const o=i.source.boundId===t.id,s=o?"source":"target",a={...i[s]},f=Gi(e,i),h=o?f[0]:f[f.length-1];a.connection=zg(e,h,t);const d=I.findPath(e,i),p=n.findIndex(v=>pt.equals(v.path,d));p===-1?n.push({property:{[s]:a},path:d}):n[p].property={...n[p].property,[s]:a}})};var Vr;(function(e){e.arrow="arrow",e.none="none",e.openTriangle="open-triangle",e.solidTriangle="solid-triangle",e.sharpArrow="sharp-arrow",e.oneSideUp="one-side-up",e.oneSideDown="one-side-down",e.hollowTriangle="hollow-triangle",e.singleSlash="single-slash"})(Vr||(Vr={}));var Vn;(function(e){e.straight="straight",e.curve="curve",e.elbow="elbow"})(Vn||(Vn={}));var ws;(function(e){e.source="source",e.target="target"})(ws||(ws={}));const Yr={isSourceMarkOrTargetMark(e,t,n){return n===ws.source?e.source.marker===t:e.target.marker===t},isSourceMark(e,t){return Yr.isSourceMarkOrTargetMark(e,t,ws.source)},isTargetMark(e,t){return Yr.isSourceMarkOrTargetMark(e,t,ws.target)},isBoundElementOfSource(e,t){return e.source.boundId===t.id},isBoundElementOfTarget(e,t){return e.target.boundId===t.id},getPoints(e,t){let n;if(t.source.boundId){const o=ys(e,t.source.boundId),s=Kl(o,t.source.connection);n=ec(s,o)||s}else n=t.points[0];let r;if(t.target.boundId){const o=ys(e,t.target.boundId),s=Kl(o,t.target.connection);r=ec(s,o)||s}else r=t.points[t.points.length-1];const i=t.points.length>2?t.points.slice(1,t.points.length-1):[];return[n,...i,r]}};var Ho;(function(e){e.basicShape="basicShape",e.flowchart="flowchart",e.text="text",e.arrowLine="arrow-line",e.UML="UML"})(Ho||(Ho={}));var lm;(function(e){e.vectorLine="vectorLine"})(lm||(lm={}));var Xg;(function(e){e.straight="straight",e.curve="curve"})(Xg||(Xg={}));const he={isGeometry:e=>e.type==="geometry",isArrowLine:e=>e.type==="arrow-line"||e.type==="line",isVectorLine:e=>e.type==="vector-line",isLine:e=>he.isArrowLine(e)||he.isVectorLine(e),isText:e=>e.type==="geometry"&&e.shape===vt.text,isImage:e=>e.type==="image",isTable:e=>$g.isTable(e),isDrawElement:e=>!!(he.isGeometry(e)||he.isLine(e)||he.isImage(e)||he.isTable(e)||he.isSwimlane(e)),isCustomGeometryElement:(e,t)=>{const n=e.getPluginOptions(bS);return!!((n==null?void 0:n.customGeometryTypes)||[]).includes(t.type)},isShapeElement:e=>he.isImage(e)||he.isGeometry(e)||he.isTable(e)||he.isSwimlane(e),isBasicShape:e=>Object.keys(vt).includes(e.shape),isFlowchart:e=>Object.keys(ht).includes(e.shape),isUML:e=>Object.keys(at).includes(e.shape),isSwimlane:e=>e.type==="swimlane",isVerticalSwimlane:e=>he.isSwimlane(e)&&e.shape===go.swimlaneVertical,isHorizontalSwimlane:e=>he.isSwimlane(e)&&e.shape===go.swimlaneHorizontal,isUMLClassOrInterface:e=>Object.keys(at).includes(e.shape)&&[at.class,at.interface].includes(e.shape),isGeometryByTable:e=>he.isUMLClassOrInterface(e),isElementByTable:e=>he.isTable(e)||he.isSwimlane(e)||he.isGeometryByTable(e)};class FD extends xo{canDraw(t,n){return!0}draw(t,n){const r=M.getRectangleByPoints(t.points),i=t.shape;if(i===vt.text)return;const o=Jm(this.board,t),s=Wt(t),a=b0(this.board,t),f=e7(this.board,t),h=hc(f,s);return gj(this.board,M.inflate(r,-s),i,{stroke:a,strokeWidth:s,fill:o,strokeLineDash:h})}}const ny=class ny extends xo{constructor(t){super(t,{active:!0}),this.board=t,this.hoverElement=null}canDraw(t,n){const r=Ye(this.board);return!!(n.selected&&r.length===1&&!Wi(this.board))}draw(t,n){return this.autoCompleteG=Gt(),m8(this.board,t,!0).forEach((i,o)=>{const s=Yf(I.getRoughSVG(this.board),i,dW,{stroke:"none",fill:AE(A0,gW),fillStyle:"solid"});s.classList.add(`line-auto-complete-${o}`),this.autoCompleteG.appendChild(s)}),this.autoCompleteG}removeAutoCompleteG(t){this.hoverElement=this.autoCompleteG.querySelector(`.line-auto-complete-${t}`),this.hoverElement.style.visibility="hidden"}recoverAutoCompleteG(){this.hoverElement&&(this.hoverElement.style.visibility="visible",this.hoverElement=null)}};ny.key="line-auto-complete-generator";let za=ny;class vV extends s8{get textManage(){return this.textManages[0]}constructor(t,n,r,i){super(t,n,[{id:n.id,text:r,textHeight:n.textHeight}],i)}update(t,n,r,i){Ha(t)||super.update(t,[{text:n,id:t.id,textHeight:t.textHeight}],[{text:r,id:t.id,textHeight:t.textHeight}],i)}}class KC extends dc{constructor(){super()}initializeGenerator(){this.activeGenerator=cp(this.board,{getStrokeWidth:()=>(Ye(this.board).length===1&&!Wi(this.board),hr),getStrokeOpacity:()=>Ye(this.board).length===1&&!Wi(this.board)?1:.5,getRectangle:t=>M.getRectangleByPoints(t.points),hasResizeHandle:()=>Vm(this.board,this.element)}),this.lineAutoCompleteGenerator=new za(this.board),this.shapeGenerator=new FD(this.board),w8(this.element)&&this.initializeTextManage(),this.getRef().addGenerator(za.key,this.lineAutoCompleteGenerator),this.getRef().addGenerator(Q3.key,this.activeGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getElementTopHost(this.board),{selected:this.selected}),this.textGenerator&&this.textGenerator.draw(this.getElementG())}onContextChanged(t,n){t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.updateText(n.element,t.element)):(!(t.selected===n.selected)||t.selected)&&(this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}))}updateText(t,n){Ha(this.element)?this.textGenerator.update(this.element,t.texts,n.texts,this.getElementG()):this.textGenerator.update(this.element,t.text,n.text,this.getElementG())}initializeTextManage(){const t=(n,r,i)=>{r.newText?Ha(n)?$i.setDrawTexts(this.board,n,{id:i.id,text:r.newText,textHeight:r.height}):$i.setText(this.board,n,r.newText,r.width,r.height):$i.setTextSize(this.board,n,r.width,r.height),r.operations&&o8(n,r.operations)};Ha(this.element)?this.textGenerator=new s8(this.board,this.element,this.element.texts,{onChange:t}):this.textGenerator=new vV(this.board,this.element,this.element.text,{onChange:t,getMaxWidth:()=>{var i;let n=Sr(this.element).width;const r=gi(this.element.shape).getTextRectangle;return r&&(n=r(this.element).width),(i=this.element)!=null&&i.autoSize?OS.defaultTextMaxWidth:n}}),this.textGenerator.initialize()}destroy(){var t;super.destroy(),this.activeGenerator.destroy(),this.lineAutoCompleteGenerator.destroy(),(t=this.textGenerator)==null||t.destroy()}}var Xr;(function(e){e.source="source",e.target="target",e.addHandle="addHandle"})(Xr||(Xr={}));const LD=(e,t,n)=>{let r=he.isArrowLine(t)?Yr.getPoints(e,t):t.points;const i=_6(r,n);if(i!==-1){const a=i;if(i===0)return{handle:Xr.source,handleIndex:a};if(i===r.length-1)return{handle:Xr.target,handleIndex:a};if(t.shape!==Vn.elbow)return{handleIndex:a}}const o=MD(e,t),s=_6(o,n);if(s!==-1)return{handle:Xr.addHandle,handleIndex:s}};function _6(e,t){const n=e.map(i=>({x:i[0]-tu/2,y:i[1]-tu/2,width:tu,height:tu})),r=n.find(i=>M.isHit(M.getRectangleByPoints([t,t]),i));return r?n.indexOf(r):-1}class _D extends xo{constructor(t,n={active:!0}){super(t,n),this.board=t,this.onlySelectedCurrentLine=!1}canDraw(t,n){return!!n.selected}draw(t,n){const r=Gt(),i=Ye(this.board);if(this.onlySelectedCurrentLine=i.length===1,this.onlySelectedCurrentLine){r.classList.add(op);const o=he.isArrowLine(t)?Yr.getPoints(this.board,t):t.points;let s=[...o],a=[];t.shape===Vn.elbow&&(s=o.slice(0,1).concat(o.slice(-1)),a=vD(this.board,t,n.linePoints)),s.map(p=>Og(this.board,p)).forEach(p=>{const v=Vw(this.board,p);r.appendChild(v)});const d=MD(this.board,t).map(p=>Og(this.board,p));if(!I.hasBeenTextEditing(this.board))for(let p=0;p<d.length;p++){const v=d[p];if(t.shape===Vn.elbow&&a.length){const E=_6(d,v);if(BW(this.board,t,[...o],a,E)){const S=Vw(this.board,v);r.appendChild(S);continue}}const w=CG(this.board,v);r.appendChild(w)}}else{const o=this.board.getRectangle(t);if(o){const s=Ti(this.board,o);let a="0.5";(s.height===0||s.width===0)&&(a="0.8");const f=su(this.board,s,{stroke:A0,strokeWidth:b$.selectionStrokeWidth});f.style.opacity=a,r.appendChild(f)}}return r}needUpdate(){return Ye(this.board).length===1!==this.onlySelectedCurrentLine}}const yV="debug:plait:line-turning",YC=C0(yV);class wV extends dc{constructor(){super(),this.boundedElements={}}initializeGenerator(){this.shapeGenerator=new ZS(this.board),this.activeGenerator=new _D(this.board),this.initializeTextManages()}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const t=Gi(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:t}),super.initialize(),this.boundedElements=this.getBoundedElements(),this.drawText(),this.getRef().updateActiveSection=()=>{const n=Gi(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:n})},YC.isDebug()&&YC.drawCircles(this.board,this.element.points.slice(1,-1),4,!0)}getBoundedElements(){const t={};if(this.element.source.boundId){const n=ys(this.board,this.element.source.boundId);n&&(t.source=n)}if(this.element.target.boundId){const n=ys(this.board,this.element.target.boundId);n&&(t.target=n)}return t}onContextChanged(t,n){const r=this.getBoundedElements(),i=r.source!==this.boundedElements.source||r.target!==this.boundedElements.target;this.boundedElements=r;const o=Gi(this.board,this.element);if(t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateText(n.element.texts,t.element.texts),this.updateTextRectangle()):(t.selected!==n.selected||this.activeGenerator.needUpdate()||t.selected)&&this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:o}),i){this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateTextRectangle();return}}initializeTextManages(){var t;if((t=this.element.texts)!=null&&t.length){const n=[];this.element.texts.forEach((r,i)=>{const o=this.createTextManage(r,i);n.push(o)}),this.getRef().initializeTextManage(n)}}drawText(){var t;(t=this.element.texts)!=null&&t.length&&this.getRef().getTextManages().forEach((n,r)=>{n.draw(this.element.texts[r].text),this.getElementG().append(n.g)})}createTextManage(t,n){return new hp(this.board,{getRectangle:()=>l8(this.board,this.element,n),onChange:r=>{const i=I.findPath(this.board,this.element),s=[...Vt.get(this.board,i).texts],a=r.width<im?im:r.width;s.splice(n,1,{text:r.newText?r.newText:this.element.texts[n].text,position:this.element.texts[n].position,width:a,height:r.height}),$i.setArrowLineTexts(this.board,this.element,s),r.operations&&o8(this.element,r.operations)},getMaxWidth:()=>OS.defaultTextMaxWidth,textPlugins:[]})}updateText(t,n){if(t===n)return;const r=t.length,i=n.length,o=this.getRef().getTextManages();if(i===r)for(let s=0;s<r;s++)t[s].text!==n[s].text&&o[s].updateText(n[s].text);else this.getRef().destroyTextManage(),this.initializeTextManages(),this.drawText()}updateTextRectangle(){this.getRef().getTextManages().forEach(n=>{n.updateRectangle()})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.getRef().destroyTextManage()}}class CV extends dc{constructor(){super()}initializeGenerator(){this.shapeGenerator=new eD(this.board),this.activeGenerator=new _D(this.board),this.getRef().updateActiveSection=()=>{const t=Yl(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:t})}}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const t=Yl(this.board,this.element);this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:t}),super.initialize()}onContextChanged(t,n){const r=Yl(this.board,this.element);t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:r})):(t.selected!==n.selected||this.activeGenerator.needUpdate()||t.selected)&&this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected,linePoints:r})}destroy(){super.destroy(),this.activeGenerator.destroy()}}const xV=e=>{const{keyDown:t,dblClick:n}=e;return e.keyDown=r=>{const i=Ye(e),o=i.length===1,s=i[0];if(!I.isReadonly(e)&&!Q4(r)&&!e8(r)&&!J4(r)&&o&&he.isGeometry(s)){r.preventDefault(),lv(e,s);return}t(r)},e.dblClick=r=>{if(r.preventDefault(),!I.isReadonly(e)){const i=Bt(e,Ot(e,r.x,r.y)),o=qa(e,i,void 0,!1);if(o&&he.isGeometry(o)&&h8(o))if(Ha(o)){const s=KW(o,i)||o.texts.find(a=>a.id.includes(Xo.content))||o.texts[0];lv(e,o,s)}else lv(e,o)}n(r)},e};class o7 extends xo{canDraw(t,n){return!0}draw(t,n){const r=M.getRectangleByPoints(t.points),i=Wt(t),o=b0(this.board,t),s=e7(this.board,t),a=hc(s,i);return gi(g0.table).draw(this.board,r,{strokeWidth:i,stroke:o,strokeLineDash:a},{element:t})}}const qC=e=>{const t=i8();return I.isInPointer(e,t)&&Um(e)},dv=e=>{const t=i8();return I.isInPointer(e,t)&&B0(e)},ND=(e,t)=>he.isUMLClassOrInterface({shape:t})?new o7(e):new FD(e),EV=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let i=null,o=null,s=null;return e.pointerMove=a=>{i==null||i.remove(),i=Gt();const f=i8(),d=I.isInPointer(e,f)&&Um(e),p=Bt(e,Ot(e,a.x,a.y)),v=I.getPointer(e),w=ND(e,v);if(d){const E=pc(v);if(v===vt.text){const y=mp(e,Ug(e),E.textProperties["font-size"]),S=M.getPoints(M.getRectangleByCenterPoint(p,y.width,y.height));if(o=y8(e,S,Ug(e)),s)s.textManage.updateRectangle(),s.g.append(s.textManage.g);else{const A=new hp(e,{getRectangle:()=>Sr(o)});A.draw(o.text),s={g:Gt(),textManage:A},I.getHost(e).append(s.g),s.g.append(A.g)}}else{const y=pD(v,p);o=sm(e,y,v),w.processDrawing(o,i),I.getElementTopHost(e).append(i)}}t(a)},e.pointerUp=a=>{qC(e)&&o||r(a)},e.globalPointerUp=a=>{qC(e)&&o&&(rc(e,o),s==null||s.textManage.destroy(),s==null||s.g.remove(),s=null),o=null,i==null||i.remove(),i=null,n(a)},e},PV=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:i,keyUp:o}=e;let s=null,a=null,f=null,h=!1,d;return e.keyDown=p=>{h=cn.isKeyHotkey("shift",p),i(p)},e.keyUp=p=>{h=!1,o(p)},e.pointerDown=p=>{if(!I.isReadonly(e)&&dv(e)){const v=Bt(e,Ot(e,p.x,p.y));s=v;const w=I.getPointer(e);if(w===vt.text){const E=pc(w),y=mp(e,Ug(e),E.textProperties["font-size"]),S=M.getPoints(M.getRectangleByCenterPoint(v,y.width,y.height)),A=y8(e,S,Ug(e));rc(e,A),s=null}}t(p)},e.pointerMove=p=>{a==null||a.remove(),a=Gt();const v=Bt(e,Ot(e,p.x,p.y)),w=I.getPointer(e),E=ND(e,w);if(d==null||d.remove(),s&&dv(e)){let y=$f([s,v],h);const S=M.getRectangleByPoints(y),[A,B]=zn(s,v),R=i7(e,[],{resizePoints:y,activeRectangle:S,directionFactors:[h0(A),h0(B)],isAspectRatio:h,isFromCorner:!0,isCreate:!0});d=R.snapG,I.getElementTopHost(e).append(d),y=$f(R.activePoints,h),f=sm(e,y,w),E.processDrawing(f,a),I.getElementTopHost(e).append(a)}n(p)},e.pointerUp=p=>{if(dv(e)&&s){const v=Bt(e,Ot(e,p.x,p.y)),{width:w,height:E}=M.getRectangleByPoints([s,v]);if(Math.hypot(w,E)<8){const y=I.getPointer(e);if(y!==vt.text){const S=pD(y,v);f=sm(e,S,y)}}f&&rc(e,f),d==null||d.remove(),a==null||a.remove(),a=null,s=null,f=null;return}r(p)},e},SV=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:i}=t;return t.getDeletedFragment=o=>{const s=um(t);if(s.length){const a=s.filter(E=>he.isGeometry(E)),f=s.filter(E=>he.isArrowLine(E)),h=s.filter(E=>he.isVectorLine(E)),d=s.filter(E=>he.isImage(E)),p=s.filter(E=>he.isTable(E)),v=s.filter(E=>he.isSwimlane(E)),w=[...ag(t,a),...ag(t,d),...ag(t,p),...ag(t,v)].filter(E=>!f.includes(E));o.push(...a,...f,...h,...d,...p,...v,...w.filter(E=>!f.includes(E)))}return n(o)},t.buildFragment=(o,s,a,f)=>{const h=um(t,f);let d=[];if(h.length){if(a===ru.cut){const y=h.filter(A=>he.isGeometry(A)),S=h.filter(A=>he.isArrowLine(A));d=ag(t,y).filter(A=>!S.includes(A))}const p=[...h,...d],v=sz(t,p,s?[s.x,s.y]:[0,0]),E={text:vS(p),type:$a.elements,elements:v};o=$m(o,E)}return r(o,s,a,f)},t.insertFragment=(o,s,a)=>{var h,d,p;const f=Ye(t);if((h=o==null?void 0:o.files)!=null&&h.length){const v=uS.map(E=>"image/"+E),w=!No(t)&&!(f.length===1&&t.isImageBindingAllowed(f[0]));if(v.includes(o.files[0].type)&&w){const E=o.files[0];wS(t,E,uW,y=>{$i.insertImage(t,y,s)});return}}if((d=o==null?void 0:o.elements)!=null&&d.length){const v=(p=o.elements)==null?void 0:p.filter(w=>he.isDrawElement(w));o.elements&&o.elements.length>0&&v.length>0&&uz(t,v,s)}if(o!=null&&o.text&&(!o.elements||o.elements.length===0)&&!(f.length===1&&f[0].children)){$i.insertText(t,s,o.text);return}i(o,s,a)},t},ag=(e,t)=>WW(e).filter(r=>t.find(i=>Yr.isBoundElementOfSource(r,i)||Yr.isBoundElementOfTarget(r,i))),DV=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=null,o,s=null,a=null;return e.pointerDown=f=>{const h=oW(),d=I.isInPointer(e,h);if(!I.isReadonly(e)&&d&&B0(e)){const p=Bt(e,Ot(e,f.x,f.y));i=p;const v=d8(e,p);v&&(o=v)}t(f)},e.pointerMove=f=>{s==null||s.remove(),s=Gt();let h=Bt(e,Ot(e,f.x,f.y));if(i){const d=I.getPointer(e);a=JS(e,d,i,h,o,s)}n(f)},e.globalPointerUp=f=>{a&&(Ve.insertNode(e,a,[e.children.length]),x0(e),Kf(e,a),Ln.updatePointerType(e,en.selection)),s==null||s.remove(),s=null,o=null,i=null,a=null,r(f)},e},TV=e=>{let t,n,r,i,o;return Qf(e,{key:"draw-line",canResize:()=>!0,hitTest:a=>{const f=x8(e);if(f.length>0){let h=null;return f.forEach(d=>{const p=LD(e,d,a);p&&(h={element:d,handle:p.handle,handleIndex:p.handleIndex})}),h}return null},beforeResize:a=>{if(a.element.shape===Vn.elbow&&a.handle!==Xr.source&&a.handle!==Xr.target){const f=yp(e,a.element);if(C8(a.element,f))return;const h=[...a.element.points],d=a.handleIndex,p=n7(e,a.element);r=p[0],i=p[p.length-1],o=vD(e,a.element,p);const v=KS(e,a.element,[...h],o,d);t=v.index,n=v.deleteCount}},onResize:(a,f)=>{let h=[...a.element.points],d={...a.element.source},p={...a.element.target},v=a.handleIndex;const w=d8(e,f.endPoint);if(a.handle===Xr.source||a.handle===Xr.target){const E=a.handle===Xr.source?d:p;h[v]=f.endPoint,w?(E.connection=zg(e,f.endPoint,w),E.boundId=w.id):(E.connection=void 0,E.boundId=void 0)}else if(a.element.shape===Vn.elbow){if(o&&r&&i){const E=DW(o,r,i,v),y=o[v],S=o[v+1],[A,B]=TW(y,S,f,E);let R=[...h].slice(1,h.length-1);t!==null&&n!==null&&(qS(R)?R=[A,B]:R.splice(t,n,A,B),h=[r,...R,i])}}else a.handle===Xr.addHandle?h.splice(v+1,0,f.endPoint):h[v]=f.endPoint;if(!w){v=a.handle===Xr.addHandle?v+1:v;const E=Gi(e,a.element),y=[...h];y[0]=E[0],y[y.length-1]=E[E.length-1],(a.element.shape!==Vn.elbow||a.element.shape===Vn.elbow&&y.length===2)&&y.forEach((S,A)=>{A!==v&&h[v]&&(h[v]=a8(S,h[v]))})}$i.resizeArrowLine(e,{points:h,source:d,target:p},a.path)},afterResize:a=>{if(a.element.shape===Vn.elbow){const f=Vt.get(e,a.path);let h=f&&[...f.points];if(h.length>2&&o&&r&&i){const d=o[0],p=o[o.length-1];h.splice(0,1,d),h.splice(-1,1,p),h=Oa(h),dt.isEquals(h[0],d)&&h.splice(0,1),dt.isEquals(h[h.length-1],p)&&h.pop(),h.length===1&&(h=[]),h=[r,...h,i],$i.resizeArrowLine(e,{points:h},a.path)}}t=null,n=null,r=null,i=null,o=null}}),e},AV=e=>{const{pointerMove:t,pointerUp:n}=e;let r=null;return e.pointerMove=i=>{if(r==null||r.remove(),I.isReadonly(e)){t(i);return}const o=Object.keys(Vn),s=I.isInPointer(e,o),a=Bt(e,Ot(e,i.x,i.y)),f=SG(e,h=>{const{element:d,handle:p}=h,v=p===Xr.target||p===Xr.source;return he.isArrowLine(d)&&v});if(s||f){const h=fD(e,a);if(h){const d=g8(e,h,a),p=d.isHitEdge||d.isHitConnector;if(r=lj(e,h,{hasMask:p,hasConnector:!0}),p){const v=Yf(I.getRoughSVG(e),d.connectorPoint||d.edgePoint,6,{stroke:mo,strokeWidth:qv,fill:mo,fillStyle:"solid"});r.appendChild(v)}zu(h)&&Cs(r,M.getCenterPointByPoints(h.points),h.angle),I.getElementTopHost(e).append(r)}}t(i)},e.pointerUp=i=>{r==null||r.remove(),r=null,n(i)},e},HD=e=>Wm(e,nm.lineText,vW),BV=e=>{const{dblClick:t}=e;return e.dblClick=n=>{var r,i;if(!I.isReadonly(e)){const o=Bt(e,Ot(e,n.x,n.y)),s=qa(e,o);if(s&&he.isArrowLine(s)){const a=s&&I.findPath(e,s),f=Gi(e,s),h=On(o,f),d=(r=s.texts)!=null&&r.length?[...s.texts]:[],p=c8(e,s,o);if(rD(e,s,o))ZC(e,s,p);else{const w=HD(e),E=((i=Km("arrow-line"))==null?void 0:i.text)||{},y=Qa(w,void 0,E),{width:S,height:A}=Ym(y,{fontSize:qm,fontFamily:xg}),B=dS(f,h);d.push({text:y,position:B,width:S,height:A}),$i.setArrowLineTexts(e,s,d),setTimeout(()=>{if(a){const R=Vt.get(e,a),_=R0(R);ZC(e,R,_.length-1,!0)}})}}}t(n)},e};function ZC(e,t,n,r=!1){const o=R0(t)[n];o.edit(()=>{const s=We.string(o.getText()),a=HD(e);(!s||r&&s===a)&&$i.removeArrowLineText(e,t,n)})}class RV extends dc{constructor(){super()}initializeGenerator(){this.imageGenerator=new ja(this.board,{getRectangle:t=>({x:t.points[0][0],y:t.points[0][1],width:t.points[1][0]-t.points[0][0],height:t.points[1][1]-t.points[0][1]}),getImageItem:t=>({url:t.url,width:t.points[1][0]-t.points[0][0],height:t.points[1][1]-t.points[0][1]})}),this.lineAutoCompleteGenerator=new za(this.board),this.getRef().addGenerator(za.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.imageGenerator.processDrawing(this.element,this.getElementG()),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}onContextChanged(t,n){t.element!==n.element?(this.imageGenerator.updateImage(this.getElementG(),n.element,t.element),this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})):(!(t.selected===n.selected)||t.selected)&&(this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}))}destroy(){super.destroy(),this.imageGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const MV=e=>{const{pointerMove:t}=e;let n=null;return e.pointerMove=r=>{n==null||n.remove(),I.getBoardContainer(e).classList.remove(H3.crosshair);const i=um(e),o=i.length===1&&i[0],s=_f(e,r.x,r.y);if(!I.isReadonly(e)&&!Wi(e)&&o&&he.isShapeElement(o)){const a=m8(e,o,!0),f=gD(tc(e,s,o,!0)||s,a),h=a[f],p=pn.getElementRef(o).getGenerator(za.key);if(p.recoverAutoCompleteG(),h&&(p==null||p.removeAutoCompleteG(f),n=Yf(I.getRoughSVG(e),h,mW,{stroke:"none",fill:AE(A0,pW),fillStyle:"solid"}),I.getActiveHost(e).append(n),I.getBoardContainer(e).classList.add(H3.crosshair),zu(o))){const v=e.getRectangle(o),w=Ti(e,v);Cs(n,M.getCenterPoint(w),o.angle)}}t(r)},e},bV="plait-arrow-line-auto-complete-plugin-key",OV=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=null,o=null,s,a;return e.pointerDown=f=>{const h=um(e),d=h.length===1&&h[0],p=_f(e,f.x,f.y);if(!I.isReadonly(e)&&d&&he.isShapeElement(d)){const v=m8(e,d,!0),w=gD(tc(e,p,d,!0)||p,v),E=v[w];if(E){s6(e);const y=yI(e,E);i=Bt(e,Ot(e,y[0],y[1])),s=d,Ln.updatePointerType(e,Vn.elbow)}}t(f)},e.pointerMove=f=>{o==null||o.remove(),o=Gt();let h=Bt(e,Ot(e,f.x,f.y));if(i&&s&&Et(...tc(e,h,s)||h,...i)>d4){const p=M.getRectangleByPoints(s.points),v=gc(s),w=gi(v);let E=i;w.getNearestCrossingPoint&&(E=w.getNearestCrossingPoint(p,i));const y=ec(E,s)||E;a=JS(e,Vn.elbow,y,h,s,o),Ve.addSelectionWithTemporaryElements(e,[])}n(f)},e.globalPointerUp=f=>{var h;if(a){Ve.insertNode(e,a,[e.children.length]),x0(e),Kf(e,a);const d=(h=e.getPluginOptions(bV))==null?void 0:h.afterComplete;d&&d(a)}i&&(Ln.updatePointerType(e,en.selection),i=null),o==null||o.remove(),o=null,s=null,a=null,r(f)},e},IV=e=>{let t=0;const n=100;return Qf(e,{key:"line-text",canResize:()=>!0,hitTest:i=>{let o=null;const s=qa(e,i,a=>he.isArrowLine(a));if(s){const a=c8(e,s,i),h=R0(s)[a];if(a!==-1&&!h.isEditing)return t=a,{element:s,handle:T6.e}}return o},onResize:(i,o)=>{const s=i.element;if(s){const a=o.endPoint,f=Gi(e,s);if(RE(a,f)<=n){const d=On(a,f,!1),p=dS(f,d),v=[...s.texts];v[t]={...v[t],position:p},$i.setArrowLineTexts(e,s,v)}}}}),e},kV=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r,afterChange:i,drawSelectionRectangle:o}=e;let s=null,a,f=!1;const h=()=>{const d=Ye(e);return d.length>0&&d.every(p=>he.isDrawElement(p)&&!he.isArrowLine(p)||he.isCustomGeometryElement(e,p))};return e.pointerDown=d=>{if(!h()||I.isReadonly(e)||I.hasBeenTextEditing(e)||!Wu(d)){t(d);return}const p=_f(e,d.x,d.y),v=Ye(e),w=sn(e,v,!1),E=Ti(e,w),y=Yj(E),S=ho(v),A=S?Ir(p,M.getCenterPoint(E),-S):p;y&&M.isHit(M.getRectangleByPoints([A,A]),y)&&(s={elements:[...v],startPoint:p}),t(d)},e.pointerMove=d=>{if(s){d.preventDefault();const p=!!d.shiftKey;qG(e,s);const v=_f(e,d.x,d.y),w=sn(e,s.elements,!1),E=Ti(e,w),y=M.getCenterPoint(E);!ho(s.elements)&&s.elements.length>1&&(f=!0),ju(e,"with-common-rotate",()=>{if(s&&s.startPoint){let S=$k(s.startPoint,v,y);const A=ho(s.elements);S=Ig(A+S),p&&(S+=Math.PI/12/2,S-=S%(Math.PI/12));let B=S%(Math.PI/2);if(Math.PI/2-B<=p6(5)){const R=Math.PI/2-B;S+=R}if(B<=p6(5)){const R=-B;S+=R}s.angle=Ig(S-A)||0,Gk(e,s.elements,s.angle),Or.set(e,!0),I.getBoardContainer(e).classList.add("element-rotating")}});return}n(d)},e.globalPointerUp=d=>{if(r(d),f){f=!1;const p=Ye(e);Ve.addSelectionWithTemporaryElements(e,p)}I.getBoardContainer(e).classList.remove("element-rotating"),ZG(e),s=null,Or.set(e,!1)},e.afterChange=()=>{if(i(),a&&(a.remove(),a=null),h()&&!Wi(e)){if(f&&s){const d=sn(e,s.elements,!1),p=Ti(e,d);a=Uw(e,p),a.classList.add(Jy),s.angle&&Cs(a,M.getCenterPoint(p),s.angle)}else{const d=Ye(e),p=sn(e,d,!1),v=Ti(e,p);a=Uw(e,v),a.classList.add(Jy),Cs(a,M.getCenterPoint(v),ho(d))}I.getActiveHost(e).append(a)}},e.drawSelectionRectangle=()=>{if(f&&s){const d=sn(e,s.elements,!1),p=Ti(e,d),v=su(e,M.inflate(p,hr),{stroke:mo,strokeWidth:hr});return v.classList.add(op),s.angle&&Cs(v,M.getCenterPoint(p),s.angle),v}return o()},e};class GD extends dc{constructor(){super()}initializeGenerator(){this.activeGenerator=cp(this.board,{getStrokeWidth:()=>hr,getStrokeOpacity:()=>1,getRectangle:t=>{const n=Xd(t);return n!=null&&n.length?PW(this.board,this.element,n):M.getRectangleByPoints(t.points)},hasResizeHandle:()=>{const t=Xd(this.element);return t!=null&&t.length?!1:Vm(this.board,this.element)}}),this.tableGenerator=new o7(this.board),this.initializeTextManage(),this.lineAutoCompleteGenerator=new za(this.board),this.getRef().addGenerator(za.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.draw()}draw(){this.tableGenerator.processDrawing(this.element,this.getElementG()),this.textGenerator.draw(this.getElementG()),this.rotateVerticalText(),this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}rotateVerticalText(){this.board.buildTable(this.element).cells.forEach(n=>{if($g.isVerticalText(n)){const r=zS(this.board,n);if(r){const o=gi(g0.table).getTextRectangle(this.element,{id:n.id,board:this.board});r.g.classList.add("vertical-cell-text"),Cs(r.g,M.getCenterPoint(o),p6(-90))}}})}getDrawShapeTexts(t){return t.filter(n=>XS(n)).map(n=>({id:n.id,text:n.text,textHeight:n.textHeight,board:this.board}))}initializeTextManage(){const t=this.getDrawShapeTexts(this.element.cells);this.textGenerator=new s8(this.board,this.element,t,{onChange:(n,r,i)=>{const o=I.findPath(this.board,n);r.newText&&$i.setTableText(this.board,o,i.id,r.newText,r.height),r.operations&&o8(n,r.operations)},getRenderRectangle:(n,r)=>{const i=Jf(this.board,n,r.id);if($g.isVerticalText(i)){const o=M.getRectangleByPoints(i.points),s=Wt(i),a=i.textHeight||0,f=o.height-it.rectangleAndText*2-s*2;return{width:a,height:f>0?f:0,x:o.x+it.rectangleAndText+s,y:o.y+(o.height-f)/2}}else return ID(i)}}),this.textGenerator.initialize()}onContextChanged(t,n){if(t.element!==n.element||t.hasThemeChanged){const r=Xd(n.element);r!=null&&r.length&&(gC(n.element),jS(t.element,r)),this.tableGenerator.processDrawing(t.element,this.getElementG()),this.activeGenerator.processDrawing(t.element,I.getActiveHost(this.board),{selected:this.selected});const i=this.getDrawShapeTexts(n.element.cells),o=this.getDrawShapeTexts(t.element.cells);this.textGenerator.update(t.element,i,o,this.getElementG()),this.rotateVerticalText()}else{const r=t.selected===n.selected,i=Xd(t.element);(!r||i!=null&&i.length||t.selected)&&this.activeGenerator.processDrawing(t.element,I.getActiveHost(this.board),{selected:this.selected}),this.selected||gC(t.element)}this.lineAutoCompleteGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.tableGenerator.destroy(),this.textGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const QC=20;function FV(e){let t;return Qf(e,{key:"draw-table",canResize:()=>{const r=Ye(e);return O6(e)&&!zu(r[0])},hitTest:r=>{const o=Ye(e)[0];if(o&&he.isElementByTable(o)){let s=e.getRectangle(o),a=F6(e,s,r,o.angle);if(a){const h=o6(e,o);if(h&&O6(e)||!h&&!D3(e,a.handle))return{element:o,handle:a.handle,cursorClass:a.cursorClass,rectangle:s}}const f=dp(e,o);for(let h=0;h<f.length;h++)if(s=M.getRectangleByPoints(f[h].points),a=F6(e,s,r,0),a&&!D3(e,a.handle))return{element:o,handle:a.handle,cursorClass:a.cursorClass,rectangle:s,options:{cell:f[h]}}}return null},onResize:(r,i)=>{var s,a,f,h;t==null||t.remove();const o=I.findPath(e,r.element);if((s=r.options)!=null&&s.cell&&r.rectangle){const d=em(r.handle),{originPoint:p,handlePoint:v}=L6(e,d,r.rectangle),w=[i.startPoint,i.endPoint],{xZoom:E,yZoom:y}=E8(w,p,v,!1,!1),S=(a=r.options)==null?void 0:a.cell.points,A=S.map(j=>Fa(j,p,E,y)),B=A[1][0]-S[1][0],R=A[1][1]-S[1][1],_=A[1][0]-A[0][0],F=A[1][1]-A[0][1];if(B!==0&&_>=QC){const{columns:j,points:z}=VS(r.element,(f=r.options)==null?void 0:f.cell.columnId,_,B);Ve.setNode(e,{columns:j,points:z},o)}else if(R!==0&&F>=QC){const{rows:j,points:z}=US(r.element,(h=r.options)==null?void 0:h.cell.rowId,F,R);Ve.setNode(e,{rows:j,points:z},o)}}else{const d=D3(e,r.handle),p=i.isShift,v=em(r.handle),{originPoint:w,handlePoint:E}=L6(e,v,r.rectangle),y=RD(e,r,i,{originPoint:w,handlePoint:E},p,d),S=i7(e,[r.element],y);t=S.snapG,I.getElementTopHost(e).append(t);const A=S.activePoints,B=r.element.points,R=M.getRectangleByPoints(B),_=M.getRectangleByPoints(A),F=_.width-R.width,j=_.height-R.height;let z=[...r.element.columns],Q=[...r.element.rows];F!==0&&(z=z.map(se=>se.width?{...se,width:se.width+F*(se.width/R.width)}:se)),j!==0&&(Q=Q.map(se=>se.height?{...se,height:se.height+j*(se.height/R.height)}:se)),Ve.setNode(e,{points:$f(A),columns:z,rows:Q},o)}},afterResize:r=>{t==null||t.remove(),t=null}}),e}const LV=e=>{const t=e,{drawElement:n,getRectangle:r,isRectangleHit:i,isHit:o,isMovable:s,dblClick:a,keyDown:f,pointerUp:h}=t;return t.drawElement=d=>he.isElementByTable(d.element)?GD:n(d),t.isHit=(d,p,v)=>{if(he.isElementByTable(d)){const w=M.getRectangleByPoints(d.points),E=Hd.getNearestPoint(w,p);return Et(E[0],E[1],p[0],p[1])<=g4||M.isPointInRectangle(w,p)}return o(d,p,v)},t.getRectangle=d=>he.isElementByTable(d)?M.getRectangleByPoints(d.points):r(d),t.isMovable=d=>he.isElementByTable(d)?!0:s(d),t.isRectangleHit=(d,p)=>{if(he.isElementByTable(d)){const v=M.getRectangleByPoints([p.anchor,p.focus]),w=M.getRectangleByPoints(d.points);return W3(M.getCornerPoints(w),v)}return i(d,p)},t.keyDown=d=>{const p=Ye(e),v=p.length===1,w=p[0];if(!I.isReadonly(e)&&!I.hasBeenTextEditing(t)&&!Q4(d)&&!e8(d)&&!J4(d)&&v&&(d.preventDefault(),he.isElementByTable(w))){const E=Xd(w);let y=w.cells.find(S=>S.text&&S.textHeight);if(E!=null&&E.length&&(y=E.find(S=>S.text&&S.textHeight)),y){yC(e,y);return}}f(d)},t.dblClick=d=>{if(d.preventDefault(),!I.isReadonly(e)){const p=Bt(e,Ot(e,d.x,d.y)),v=qa(e,p);if(v&&he.isElementByTable(v)){const w=vC(t,v,p);if(w&&w.text&&w.textHeight){yC(e,w);return}}}a(d)},t.pointerUp=d=>{const p=I.isPointer(t,en.selection)||I.isPointer(t,en.hand);if(!Wu(d)||a0(t)||!p){h(d);return}if(O6(t)){const w=Bt(t,Ot(t,d.x,d.y)),E=CW(t)[0],y=vC(t,E,w);y&&y.text&&y.textHeight&&jS(E,[y])}h(d)},t.buildTable=d=>d,FV(t)},gv=e=>PD(e)&&Um(e),pv=e=>PD(e)&&B0(e),_V=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let i=null,o=null;return e.pointerMove=s=>{i==null||i.remove(),i=Gt();const a=new o7(e),f=gv(e),h=Bt(e,Ot(e,s.x,s.y)),d=I.getPointer(e);if(f){const p=ED(d,h);o=am(d,p),a.processDrawing(o,i),I.getElementTopHost(e).append(i)}t(s)},e.pointerUp=s=>{gv(e)&&o||r(s)},e.globalPointerUp=s=>{gv(e)&&o&&rc(e,o),o=null,i==null||i.remove(),i=null,n(s)},e},NV=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:i,keyUp:o}=e;let s=null,a=null,f=null,h=!1,d;return e.keyDown=p=>{h=cn.isKeyHotkey("shift",p),i(p)},e.keyUp=p=>{h=!1,o(p)},e.pointerDown=p=>{!I.isReadonly(e)&&pv(e)&&(s=Bt(e,Ot(e,p.x,p.y))),t(p)},e.pointerMove=p=>{a==null||a.remove(),a=Gt();const v=new o7(e),w=Bt(e,Ot(e,p.x,p.y)),E=I.getPointer(e);if(d==null||d.remove(),s&&pv(e)){let y=$f([s,w],h);const S=M.getRectangleByPoints(y),[A,B]=zn(s,w),R=i7(e,[],{resizePoints:y,activeRectangle:S,directionFactors:[h0(A),h0(B)],isAspectRatio:h,isFromCorner:!0,isCreate:!0});d=R.snapG,I.getElementTopHost(e).append(d),y=$f(R.activePoints,h),f=am(E,y),v.processDrawing(f,a),I.getElementTopHost(e).append(a)}n(p)},e.pointerUp=p=>{if(pv(e)&&s){const v=Bt(e,Ot(e,p.x,p.y)),{width:w,height:E}=M.getRectangleByPoints([s,v]);if(Math.hypot(w,E)<8){const y=I.getPointer(e),S=ED(y,v);f=am(y,S)}f&&rc(e,f),d==null||d.remove(),a==null||a.remove(),a=null,s=null,f=null;return}r(p)},e},HV=e=>{const{drawElement:t,buildTable:n,pointerUp:r}=e;return e.drawElement=i=>he.isSwimlane(i.element)?GD:t(i),e.buildTable=i=>he.isSwimlane(i)?Nj(i):n(i),NV(_V(e))},GV=e=>{const{pointerDown:t,pointerMove:n,dblClick:r,globalKeyDown:i}=e;let o=null,s=null,a=[];const f=()=>{s&&Ve.insertNode(e,s,[e.children.length]),I.getBoardContainer(e).classList.remove("vector-line-closed"),o==null||o.remove(),o=null,s=null,a=[]};return e.pointerDown=h=>{const d=sW(),p=I.isInPointer(e,d);if(!I.isReadonly(e)&&p&&B0(e)){let v=Bt(e,Ot(e,h.x,h.y));if(a.length>1&&Et(...v,...a[0])<=rm){a.push(a[0]),f();return}a.push(v);return}t(h)},e.pointerMove=h=>{o==null||o.remove(),o=Gt();let d=Bt(e,Ot(e,h.x,h.y));I.getPointer(e)===lm.vectorLine&&a.length>0&&(Et(...d,...a[0])<=rm?(d=a[0],I.getBoardContainer(e).classList.add("vector-line-closed")):I.getBoardContainer(e).classList.remove("vector-line-closed"),s=qW(e,Xg.straight,a,d,o)),n(h)},e.dblClick=h=>{if(!I.isReadonly(e)&&s){f(),Ln.updatePointerType(e,en.selection);return}r(h)},e.globalKeyDown=h=>{if(!I.isReadonly(e)){const d=cn.isKeyHotkey("esc",h),p=cn.isKeyHotkey("v",h);(d||p)&&s&&(f(),p&&Ln.updatePointerType(e,en.selection))}i(h)},e},$V=e=>(Qf(e,{key:"draw-vector-line",canResize:()=>!0,hitTest:n=>{const r=yD(e);if(r.length>0){let i=null;return r.forEach(o=>{const s=LD(e,o,n);s&&(i={element:o,handle:s.handle,handleIndex:s.handleIndex})}),i}return null},onResize:(n,r)=>{let i=[...n.element.points],o=n.handleIndex;if(n.handle===Xr.source||n.handle===Xr.target)if(i[o]=r.endPoint,pp(n.element.points))i[i.length-1]=r.endPoint;else{const s=n.handle===Xr.source?i[i.length-1]:i[0];Et(...r.endPoint,...s)<=rm&&(i[o]=s)}else n.handle===Xr.addHandle?i.splice(o+1,0,r.endPoint):i[o]=r.endPoint;Ve.setNode(e,{points:i},n.path)}}),e),$D=e=>{const{drawElement:t,getRectangle:n,isRectangleHit:r,isHit:i,isInsidePoint:o,isMovable:s,isAlign:a,getRelatedFragment:f,getOneHitElement:h}=e;return e.drawElement=d=>he.isGeometry(d.element)?(he.isUML(d.element),KC):he.isArrowLine(d.element)?wV:he.isVectorLine(d.element)?CV:he.isImage(d.element)?RV:t(d),e.getRectangle=d=>{if(he.isGeometry(d))return M.getRectangleByPoints(d.points);if(he.isArrowLine(d)){const p=Gi(e,d),v=d.texts.map((E,y)=>l8(e,d,y)),w=M.getRectangleByPoints(p);return M.getBoundingRectangle([w,...v])}if(he.isVectorLine(d)){const p=Yl(e,d),v=M.getRectangleByPoints(p);return M.getBoundingRectangle([v])}return he.isImage(d)?M.getRectangleByPoints(d.points):n(d)},e.isRectangleHit=(d,p)=>{const v=JW(e,d,p);return v!==null?v:r(d,p)},e.isHit=(d,p,v)=>{const w=ij(e,d,p,v);return w!==null?w:i(d,p,v)},e.getOneHitElement=d=>d.every(v=>he.isDrawElement(v))?aD(e,d):h(d),e.isInsidePoint=(d,p)=>{const v=sj(e,d,p);return v!==null?v:o(d,p)},e.isMovable=d=>{if(he.isGeometry(d)||he.isImage(d)||he.isVectorLine(d))return!0;if(he.isArrowLine(d)){const p=Ye(e),v=w=>!!p.find(E=>E.id===w);return!!(!d.source.boundId&&!d.target.boundId||d.source.boundId&&v(d.source.boundId)&&p.includes(d)||d.target.boundId&&v(d.target.boundId)&&p.includes(d))}return s(d)},e.isAlign=d=>he.isGeometry(d)||he.isImage(d)?!0:a(d),e.getRelatedFragment=(d,p)=>{const v=p!=null&&p.length?p:Ye(e),E=e.children.filter(y=>he.isArrowLine(y)).filter(y=>{const S=v.find(R=>R.id===y.source.boundId),A=v.find(R=>R.id===y.target.boundId),B=v.includes(y);return S&&A&&!B});return f([...d,...E],p)},HV(LV(Zj(GV(MV(AV($V(TV(IV(BV(kV(DV(OV(EV(PV(SV(xV(e)))))))))))))))))},gt={isAbstract(e){return typeof e.start=="number"&&typeof e.end=="number"}};var qe;(function(e){e.right="right",e.left="left",e.standard="standard",e.upward="upward",e.downward="downward",e.rightBottomIndented="right-bottom-indented",e.rightTopIndented="right-top-indented",e.leftTopIndented="left-top-indented",e.leftBottomIndented="left-bottom-indented"})(qe||(qe={}));var po;(function(e){e.logic="logic",e.indented="indented",e.fishBone="fish-bone"})(po||(po={}));function N6(e){return e.origin.layout?e.origin.layout:gt.isAbstract(e.origin)?S8(N6(e.parent)):e.parent?N6(e.parent):null}const ou=e=>e===qe.rightBottomIndented||e===qe.rightTopIndented||e===qe.leftBottomIndented||e===qe.leftTopIndented,WV=e=>e===qe.right||e===qe.left||e===qe.downward||e===qe.upward,wo=e=>e===qe.standard,ci=e=>e===qe.right||e===qe.left||e===qe.standard||ou(e),Kg=e=>e===qe.right||e===qe.left||e===qe.standard,H6=e=>e===qe.upward||e===qe.downward,La=e=>e===qe.leftTopIndented||e===qe.rightTopIndented||e===qe.upward,jV=e=>e===qe.leftBottomIndented||e===qe.rightBottomIndented||e===qe.downward,Yg=e=>e===qe.left||e===qe.leftTopIndented||e===qe.leftBottomIndented,cm=e=>e===qe.right||e===qe.rightTopIndented||e===qe.rightBottomIndented,mv=e=>ou(e)?po.indented:(wo(e)||WV(e),po.logic),S8=e=>ou(e)?cm(e)?qe.right:qe.left:e;class qg{constructor(t,n,r,i){this.x=0,this.y=0,this.vGap=0,this.hGap=0,this.width=0,this.height=0,this.depth=0,this.children=[],this.left=!1,this.up=!1;const o=n.getHorizontalGap(t,i),s=n.getVerticalGap(t,i);this.origin=t,this.width=n.getWidth(t),this.height=n.getHeight(t),this.x=this.y=0,i&&(this.parent=i);const a=N6(this);this.layout=a&&a!==qe.standard?a:r.rootLayoutType;const f=n.getVerticalConnectingPosition(t,i);f&&(this.verticalConnectingPosition=f),this.addGap(o,s)}isRoot(){return this.depth===0}addGap(t,n){const r=this;r.hGap+=t,r.vGap+=n,r.width+=2*t,r.height+=2*n}eachNode(t){WD(this,t)}getBoundingBox(){const t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE,width:0,height:0};return this.eachNode(n=>{t.left=Math.min(t.left,n.x),t.top=Math.min(t.top,n.y),t.right=Math.max(t.right,n.x+n.width),t.bottom=Math.max(t.bottom,n.y+n.height)}),t.width=t.right-t.left,t.height=t.bottom-t.top,t}translate(t=0,n=0){this.eachNode(r=>{r.x+=t,r.y+=n})}right2left(){const t=this,n=t.getBoundingBox();t.eachNode(r=>{r.x=r.x-(r.x-n.left)*2-r.width,r.left=!0}),t.translate(n.width,0)}down2up(){const t=this,n=t.getBoundingBox();t.eachNode(r=>{r.y=r.y-(r.y-n.top)*2-r.height,r.up=!0}),t.translate(0,n.height)}}function WD(e,t){var n;(n=e.children)==null||n.forEach(r=>{WD(r,t)}),t(e)}class zV{constructor(t,n,r,i,o,s,a,f,h,d){this.left=t,this.right=n,this.top=r,this.bottom=i,this.width=o,this.height=s,this.rootX=a,this.rootY=f,this.rootWidth=h,this.rootHeight=d}}function VV(e){return{left:e.top,right:e.bottom,top:e.left,bottom:e.right,width:e.height,height:e.width,rootX:e.rootY,rootY:e.rootX,rootWidth:e.rootHeight,rootHeight:e.rootWidth}}var G6;(function(e){e.middle="middle",e.bottom="bottom"})(G6||(G6={}));class Wf{constructor(t,n,r,i,o){this.width=t,this.height=n,this.y=r,this.children=i,this.childrenCount=i.length,this.x=0,this.preliminary=0,this.modifier=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.origin=o}}const mc=e=>{var t;return e.children?(t=e.children)==null?void 0:t.filter(n=>n instanceof qg?!gt.isAbstract(n.origin):n instanceof Wf?!gt.isAbstract(n.origin.origin):!gt.isAbstract(n)):[]},jD=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(r=>{if(r instanceof qg)return gt.isAbstract(r.origin)&&r.origin.end===n;if(r instanceof Wf&&e instanceof Wf){if(gt.isAbstract(r.origin.origin)){const{end:i}=ql(r.origin.origin,e.origin);return i===n}return!1}return gt.isAbstract(r)&&r.end===n})},UV=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(r=>{if(r instanceof qg)return gt.isAbstract(r.origin)&&r.origin.start===n;if(r instanceof Wf&&e instanceof Wf){if(gt.isAbstract(r.origin.origin)){const{start:i}=ql(r.origin.origin,e.origin);return i===n}return!1}return gt.isAbstract(r)&&r.start===n})},ql=(e,t)=>{let n=e.start,r=e.end;if(wo(t.layout)){const i=t.origin.rightNodeCount;n>=i&&(r-=i,n-=i)}return{start:n,end:r}};function fm(e,t,n){e.children[t].modifier+=n}function XV(e){return e.childrenCount===0?null:e.children[0]}function zD(e){let t=mc(e);return e.childrenCount===0?null:t[t.length-1]}function KV(e,t){if(gt.isAbstract(e.children[t].origin.origin))return;let n=e.children[t-1],r=e.children[t],i=n.modifier+n.preliminary+n.width,o=r.modifier+r.preliminary,s=0,a=e,f=e;for(;n||r;){if(n){let d=s+n.modifier+n.preliminary+n.width;d>i&&(i=d),i=UD(a,n,i,s),a=n,s=n.modifier+s,n=zD(n)}if(r){let d=r.modifier+r.preliminary;d<o&&(o=d),o=ZV(f,r,o),f=r,r=XV(r)}}const h=i-o;h>0&&fm(e,t,h)}function YV(e){const t=e.children[0];let n=t.preliminary+t.modifier;const r=mc(e),i=r[r.length-1];let o=i.modifier+i.preliminary+i.width;t.origin.blackNode&&t.origin.blackNode.rootX>t.origin.blackNode.left&&(n=n+(t.origin.blackNode.rootX-t.origin.blackNode.left)),i.origin.blackNode&&i.origin.blackNode.rootX+i.origin.blackNode.rootWidth<i.origin.blackNode.right&&(o=o-(i.origin.blackNode.right-(i.origin.blackNode.rootX+i.origin.blackNode.rootWidth))),t.origin.verticalConnectingPosition&&i.origin.verticalConnectingPosition&&(n=n+t.width-t.origin.vGap,o=o-i.origin.vGap);let s=e.width/2;e.origin.verticalConnectingPosition&&(s=e.width-e.origin.vGap);const a=(n+o)/2-s;a>0?e.preliminary=a:e.children.forEach((f,h)=>{fm(e,h,Math.abs(a))})}function $6(e){if(e.childrenCount!==0){$6(e.children[0]);for(let t=1;t<e.childrenCount;t++){const n=e.children.find(r=>{let i=null;if(gt.isAbstract(r.origin.origin)){let{end:o}=ql(r.origin.origin,e.origin);i=o}return i===t-1});n&&qV(e,n),$6(e.children[t]),KV(e,t)}YV(e)}}function VD(e,t){t+=e.modifier,e.x=e.preliminary+t;for(let n=0;n<e.childrenCount;n++)VD(e.children[n],t)}function qV(e,t,n){const{start:r,end:i}=ql(t.origin.origin,e.origin),o=e.children.indexOf(t),s=e.children[r];let a=e.children[i];const f=s.modifier;let h=a.modifier+a.preliminary+a.width,d=a.modifier,p=e;for(e.children[o].modifier=s.modifier;a.childrenCount;){p=a;const E=zD(a);a=E||a;let y=d+a.modifier+a.preliminary+a.width;h=UD(p,a,h,d),d+=a.modifier,y>h&&(h=y)}const v=t.origin.blackNode?t.origin.blackNode.rootX*2+t.origin.blackNode.rootWidth:t.width,w=h-f;if(w>v){const E=(w-v)/2;fm(e,o,E)}else{const E=(v-w)/2;for(let y=r;y<i+1;y++)fm(e,y,E)}}function UD(e,t,n,r){const i=jD(e,t);return i?Math.max(i.modifier+i.width+r,n):n}function ZV(e,t,n){const r=UV(e,t);return r?Math.min(r.modifier+r.preliminary,n):n}function QV(e){$6(e),VD(e,0)}function W6(e,t=0){e.x=t,e.children.forEach(n=>{if(gt.isAbstract(n.origin)){let r=0;for(let i=n.origin.start;i<=n.origin.end;i++){const o=e.children[i].getBoundingBox();r=Math.max(o.width,r)}W6(n,e.x+e.width/2+r)}else W6(n,e.x+e.width/2)})}function JV(e,t){let n=e.y+e.height,r=null;i(e);function i(o){o.children.forEach((s,a)=>{const f=o.children.find(d=>gt.isAbstract(d.origin)&&d.origin.end===a-1);if(f){const d=r!=null&&r.origin.isCollapsed?t.getExtendHeight(s.origin):0;n=eU(o,f)+d}if(gt.isAbstract(s.origin))return;let h=n+s.vGap;r&&!Kg(r.layout)&&r.origin.children.length>0&&(r.origin.isCollapsed?h=h+t.getExtendHeight(s.origin):h=h+t.getIndentedCrossLevelGap()),s.y=h,r=s,n=s.y+s.height,i(s)})}}function eU(e,t){const n=t.origin,r=e.children.indexOf(t),i=e.children[n.start],o=e.children[n.end];e.children[r].y=i.y;const s=i.y;let a=o.y+o.height,f=o,h=e;for(;f!=null&&f.children.length;){h=f;const w=mc(h);f=w[w.length-1];const E=jD(h,f);a=E?Math.max(E.y+E.height,f.y+f.height):f.y+f.height}const d=a-s,p=t.blackNode?t.blackNode.height:t.height,v=t.blackNode?t.blackNode.rootY*2+t.blackNode.rootHeight:t.height;if(v>d){const w=(v-d)/2;for(let E=n.start;E<=n.end;E++)e.children[E].eachNode(y=>{y.y+=w})}else{const w=(d-v)/2;e.children[r].y+=w}return Math.max(t.y+p,i.y+d)}function XD(e,t,n){n?t.y=e.x:t.x=e.x,e.children.forEach((r,i)=>{XD(r,t.children[i],n)})}function KD(e,t,n=0){var r,i;if(t){if(gt.isAbstract(e.origin)){const{start:o,end:s}=ql(e.origin,e.parent);for(let a=o;a<=s;a++){const f=(r=e.parent)==null?void 0:r.children[a].getBoundingBox().right;n=Math.max(f,n)}}e.x=n,n+=e.width}else{if(gt.isAbstract(e.origin))for(let o=e.origin.start;o<=e.origin.end;o++){const s=(i=e.parent)==null?void 0:i.children[o].getBoundingBox().bottom;n=Math.max(s,n)}e.y=n,n+=e.height}e.children.forEach(o=>{KD(o,t,n)})}const YD=(e,t)=>{const n=[];return e.children.forEach(r=>{n.push(YD(r,t))}),t?(e.blackNode&&(e.blackNode=VV(e.blackNode)),new Wf(e.height,e.width,e.x,n,e)):new Wf(e.width,e.height,e.y,n,e)};class tU{constructor(){}layout(t,n,r,i,o=!1,s){const a=[],f=[],h=this.buildLayoutNode(t,r,i,a,s);switch(a.filter(p=>p.origin.children.length>0).forEach(p=>{const v=p.layout,w=i.toTop||ci(i.rootLayoutType)&&La(v),E=i.toLeft||!ci(i.rootLayoutType)&&Yg(v),y=ci(v),S=this.layout(p.origin,mv(v),r,{toTop:w,toLeft:E,rootLayoutType:i.rootLayoutType},y,p.parent);!i.toTop&&w&&n!==po.indented&&S.down2up(),!i.toLeft&&E&&S.right2left();const A=S.getBoundingBox();p.width=A.width,p.height=A.height,p.blackNode=new zV(A.left,A.right,A.top,A.bottom,A.width,A.height,S.x,S.y,S.width,S.height),f.push(S)}),n){case po.indented:W6(h),JV(h,r);break;case po.fishBone:break;case po.logic:default:KD(h,o);const p=YD(h,o);QV(p),XD(p,h,o);break}const d=[];return a.filter(p=>p.origin.children.length>0).forEach((p,v)=>{if(p.parent){const w=f[v];w.parent=p.parent;let E,y;ci(p.parent.layout)?(E=w.x,y=0):(E=0,y=w.y),w.translate(p.x-E,p.y-y);const A=p.parent.children.indexOf(p),B=p.parent.children[A];p.parent.children[A]=Object.assign(B,w);const R=d.find(_=>_.parent===p.parent&&!gt.isAbstract(p.origin));R?(R.offsetX<E&&(R.offsetX=E),R.offsetX<y&&(R.offsetX=y)):gt.isAbstract(p.origin)||d.push({parent:p.parent,offsetX:E,offsetY:y})}}),d.forEach(p=>{p.parent.children.forEach(v=>v.translate(p.offsetX,p.offsetY))}),h}buildLayoutNode(t,n,r,i,o){const s=new qg(t,n,r,o);if(!s.origin.isCollapsed){const a=[s];let f;for(;f=a.pop();)if(!f.origin.isCollapsed){const h=f.origin.children,d=h?h.length:0;if(f.children=[],h&&d)for(let p=0;p<d;p++){const v=new qg(h[p],n,r,f);f.children.push(v),v.depth=f.depth+1,(f.layout!==v.layout&&(mv(f.layout)!==mv(v.layout)||ci(f.layout)!==ci(v.layout))||gt.isAbstract(v.origin))&&!v.origin.isCollapsed?i.push(v):a.push(v)}}}return s}}class nU{static layout(t,n,r){const i=new tU;if(wo(r)){const p=t.children.length,v=[],w=[],E={...t};for(let B=0;B<p;B++){const R=t.children[B];if(gt.isAbstract(R)&&R.end<t.rightNodeCount){v.push(R);continue}if(gt.isAbstract(R)&&R.start>=t.rightNodeCount){w.push(R);continue}B<t.rightNodeCount?v.push(R):w.push(R)}E.children=v;const y=i.layout(E,po.logic,n,{toLeft:!1,toTop:!1,rootLayoutType:r},!0);E.children=w;const S=i.layout(E,po.logic,n,{toLeft:!0,toTop:!1,rootLayoutType:r},!0);S.right2left(),y.translate(S.x-y.x,S.y-y.y);const A=y.children.filter(B=>gt.isAbstract(B.origin));return y.children=y.children.filter(B=>!gt.isAbstract(B.origin)),S.children.forEach(B=>{y.children.push(B),B.parent=y}),y.children=y.children.concat(A),y.x=S.x,y.origin=t,y}const o=ou(r),s=o?po.indented:po.logic,a=o?!0:ci(r),f=La(r),h=Yg(r),d=i.layout(t,s,n,{toTop:f,toLeft:h,rootLayoutType:r},a);return f&&d.down2up(),h&&d.right2left(),d}}const hm=new WeakMap;var Lt;(function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"})(Lt||(Lt={}));const dm={[qe.right]:[Lt.right],[qe.left]:[Lt.left],[qe.upward]:[Lt.top],[qe.downward]:[Lt.bottom],[qe.rightBottomIndented]:[Lt.right,Lt.bottom],[qe.rightTopIndented]:[Lt.right,Lt.top],[qe.leftBottomIndented]:[Lt.left,Lt.bottom],[qe.leftTopIndented]:[Lt.left,Lt.top]};var Tf;(function(e){e.mind="mind"})(Tf||(Tf={}));const rU=["#A287E0","#6E80DB","#6DC4C4","#E0B75E","#B1C675","#77C386","#C18976","#E48484","#E582D4","#6AB1E4"],iU=["#F94239","#FF8612","#F3D222","#B3D431","#00BC7B","#06ADBF","#476BFF","#4E49BE","#8957E5","#FE5DA1"],oU=["#6D89C1","#F2BDC7","#B796D9","#5BA683","#B3D431 ","#F2DC6C","#F7C98D","#60B4D1","#838F9E","#C1A381"],sU=["#459476","#9A894F","#D48444","#E9C358 ","#4B9D9D","#C14C41","#827086 ","#60718D","#D38183","#9DC19D"],uU=["#3DD1AE","#F6C659","#A9E072","#FF877B ","#F693E7","#5DCFFF","#868AF6","#4C6DC7","#D97C26","#268FAC"],aU=["#E46C57","#579360","#B98339","#3A62D1 ","#B883B7","#42ABE5","#2B9D8F","#A4705E","#265833","#787865"],qD={...dP,branchColors:rU,rootFill:"#f5f5f5",rootTextColor:qr},lU={...gP,branchColors:iU,rootFill:qr,rootTextColor:"#FFFFFF"},cU={...pP,branchColors:oU,rootFill:"#FFFFFF",rootTextColor:qr},fU={...mP,branchColors:sU,rootFill:"#153D5D",rootTextColor:"#FFFFFF"},hU={...vP,branchColors:uU,rootFill:"#FFFFFF",rootTextColor:qr},dU={...yP,branchColors:aU,rootFill:"#FFFFFF",rootTextColor:qr},ZD=[qD,lU,cU,fU,hU,dU],gU={isMindThemeColor(e){return!!(e.branchColors&&e.rootFill&&e.rootTextColor)}},s7="plait-mind-plugin-key",br=4,Jd="#6698FF",JC="#AAAAAA",j6=3,z6=8,Pg=16,ex="#6698FF",tx="white",pU=240;var gm;(function(e){e.mindCentralText="mind-center-text",e.abstractNodeText="abstract-node-text"})(gm||(gm={}));function V6(e,t){const n=e.getPluginOptions(s7),r=t.data.emojis.length;return{width:QD(t)*r+r*2*n.emojiPadding+(r-1)*n.spaceBetweenEmojis,height:t.height}}function QD(e){return qt.isMind(e)?20:16}const jf=(e,t,n)=>t[n],p0={branch:{color:JC,width:2},shape:{strokeColor:JC,strokeWidth:2}},u7={shape:{rectangleRadius:4,strokeWidth:3,fill:"none"}},mU=e=>{const t=e.rightNodeCount,n=e.children;let r=[],i=[];for(let o=0;o<n.length;o++){const s=n[o];if(gt.isAbstract(s)&&s.end<t){r.push(s);continue}if(gt.isAbstract(s)&&s.start>=t){i.push(s);continue}o<t?r.push(s):i.push(s)}return{leftChildren:i,rightChildren:r}},wp=e=>{const t=ke.findParent(e);if(!t)return;const n=t.children.indexOf(e);return t.children.find(r=>gt.isAbstract(r)&&n>=r.start&&n<=r.end)},JD=e=>{const t=ke.findParent(e);if(!t)return[];const n=t.children.indexOf(e);return t.children.filter(r=>gt.isAbstract(r)&&r.start>n)},eT=(e,t)=>{const n=[];return t.filter(r=>!gt.isAbstract(r)&&!qt.isMind(r)).forEach(r=>{const i=wp(r);if(i&&t.indexOf(i)===-1&&n.indexOf(i)===-1){const{start:o,end:s}=i;ke.getParent(r).children.slice(o,s+1).every(h=>t.indexOf(h)>-1)&&n.push(i)}}),n},tT=(e,t)=>{const n=[];return t.filter(r=>!gt.isAbstract(r)&&!qt.isMind(r)).forEach(r=>{const i=wp(r);if(i&&t.indexOf(i)>0){const o=n.findIndex(s=>s.abstract===i);o===-1?n.push({abstract:i,references:[r]}):n[o].references.push(r)}}),n};function nT(e,t){const n=t.indexOf(e.references[0]),r=t.indexOf(e.references[e.references.length-1]);return{start:n,end:r}}const rT=(e,t,n=1,r=!0,i=new Map)=>{const o=Vt.parent(e,t),s=t[t.length-1]!==0;let a;if(!s)a=o.children.filter(p=>gt.isAbstract(p));else{const p=Vt.get(e,pt.previous(t));a=JD(p)}if(a.length&&a.forEach(p=>{let v=i.get(p);v||(v={start:0,end:0},i.set(p,v)),v.start=v.start+n,v.end=v.end+n}),!s)return i;const f=Vt.get(e,pt.previous(t)),h=wp(f),d=!r&&h&&h.end===t[t.length-1]-1;if(h&&!d){let p=i.get(h);p||(p={start:0,end:0},i.set(h,p)),p.end=p.end+n}return i},iT=(e,t,n=new Map)=>(t.forEach(r=>{if(!qt.isMind(r)){const i=JD(r).filter(s=>!t.includes(s));i.length&&i.forEach(s=>{let a=n.get(s);a||(a={start:0,end:0},n.set(s,a)),a.start=a.start-1,a.end=a.end-1});const o=wp(r);if(o&&!t.includes(o)){let s=n.get(o);s||(s={start:0,end:0},n.set(o,s)),s.end=s.end-1}}}),n),oT=(e,t)=>!!ke.getAncestors(e,t).find(r=>gt.isAbstract(r)),a7=(e,t)=>gt.isAbstract(t)||oT(e,t)?sT(e,t):jf(e,t,"branchColor")||jf(e,t,"strokeColor")||uT(e,t),D8=(e,t)=>jf(e,t,"branchShape")||zf.bight,l7=(e,t)=>jf(e,t,"branchWidth")||jf(e,t,"strokeWidth")||j6,vU=(e,t)=>Vo(t.branchWidth)?p0.branch.width:t.branchWidth,sT=(e,t)=>t.branchColor||t.strokeColor?t.branchColor||t.strokeColor:p0.branch.color,yU=(e,t)=>{const n=t.children.length;return aT(e,n)},uT=(e,t)=>{const n=I.findPath(e,t);return aT(e,n[1])},aT=(e,t)=>{const n=T8(e),r=n.branchColors.length,i=t%r;return n.branchColors[i]},T8=e=>{const n=I.getThemeColors(e).find(r=>r.mode===e.theme.themeColorMode);return n&&gU.isMindThemeColor(n)?n:qD},A8=(e,t)=>{if(qt.isMind(t)){const n=T8(e).rootFill;return t.strokeColor||n}return gt.isAbstract(t)||oT(e,t)?t.strokeColor||p0.shape.strokeColor:jf(e,t,"strokeColor")||uT(e,t)},c7=(e,t)=>t.strokeStyle||Es.solid,Cp=(e,t)=>t.strokeWidth||(gt.isAbstract(t)?p0.shape.strokeWidth:u7.shape.strokeWidth),lT=(e,t)=>{if(t.fill)return t.fill;const n=T8(e).rootFill;return t.isRoot?n:u7.shape.fill},m0=(e,t)=>jf(e,t,"shape")||Uu.roundRectangle;function B8(e){const t=qf(e);t==null||t.edit(()=>{},n=>{const r=n;return r.key==="Enter"&&!r.shiftKey})}const vv=(e,t)=>(t!=null&&t.length?t:Ye(e)).filter(r=>ke.isMindElement(e,r)),nx=e=>{const t=[];return e.forEach(n=>{dm[n].forEach(i=>{!t.includes(i)&&!t.includes(M8(i))&&t.push(i)})}),t},wU=(e,t)=>{const n=dm[e],r=dm[t];if(!r)throw new Error(`unexpected layout: ${t} on correct layout`);return r.find(i=>n.includes(M8(i)))},CU=(e,t)=>{const n=t===Lt.left||t===Lt.right;let r=qe.standard;switch(e){case qe.left:r=qe.right;break;case qe.right:r=qe.left;break;case qe.downward:r=qe.upward;break;case qe.upward:r=qe.downward;break;case qe.rightBottomIndented:r=n?qe.leftBottomIndented:qe.rightTopIndented;break;case qe.leftBottomIndented:r=n?qe.rightBottomIndented:qe.leftTopIndented;break;case qe.rightTopIndented:r=n?qe.leftTopIndented:qe.rightBottomIndented;break;case qe.leftTopIndented:r=n?qe.rightTopIndented:qe.leftBottomIndented;break}return r},R8=()=>qe.standard,rx=e=>{const t=[],n=e.map(M8);for(const r in qe){const i=qe[r],o=dm[i];if(o){const s=o.some(f=>e.includes(f)),a=o.some(f=>n.includes(f));s&&!a&&t.push(i)}}return t},M8=e=>{let t=Lt.right;switch(e){case Lt.top:t=Lt.bottom;break;case Lt.bottom:t=Lt.top;break;case Lt.right:t=Lt.left;break;case Lt.left:t=Lt.right;break}return t},ic=e=>e.layout||R8(),xU=e=>{function t(r,i){return r.isRoot?br*12:(i&&i.isRoot(),br*3)}function n(r,i){return r.isRoot?br*10:br*6}return{getHeight(r){return Bn.getNodeHeight(e,r)},getWidth(r){return Bn.getNodeWidth(e,r)},getHorizontalGap(r,i){const o=i&&i.layout||ic(r),s=ci(o);return ou(o)?br*4:s?n(r):t(r,i)},getVerticalGap(r,i){const o=i&&i.layout||ic(r);return ou(o)?br:ci(o)?t(r,i):n(r)},getVerticalConnectingPosition(r,i){if(r.shape===Uu.underline&&i&&Kg(i.layout))return G6.bottom},getExtendHeight(r){return br*6},getIndentedCrossLevelGap(){return br*2}}},b8=14,cT=18,EU=34,PU={defaultTextMaxWidth:34*14},SU="#6698FF80",$l=3.5,ix=10,a3=8,DU="",TU="",AU=e=>Wm(e,gm.mindCentralText,DU),BU=e=>Wm(e,gm.abstractNodeText,TU),f7=(e,t,n,r)=>{let i=xg,o=b8;e?(i=xg,o=cT):t&&(i=xg);const s=o*EU;return Ym(n,{fontSize:o,fontFamily:i},r||s)},ox=(e,t)=>{const n=AU(e),r=f7(!0,!1,Qa(n)),i=h7(n,r.width,r.height,{layout:qe.right});i.isRoot=!0,i.type="mindmap";const o=Bn.getNodeWidth(e,i),s=Bn.getNodeHeight(e,i);return i.points=[[t[0]-o/2,t[1]-s/2]],i},h7=(e,t,n,r)=>{const i={id:yn(),data:{topic:Qa(e)},children:[],width:t,height:n};let o;for(o in r)Vo(r[o])||(i[o]=r[o]);return i},RU=["fill","strokeColor","strokeWidth","strokeStyle","shape","layout","branchColor","branchWidth","branchShape"],A3=e=>e.children.reduce((n,r)=>n+A3(r),0)+e.children.length,fT=(e,t)=>{let n=ke.findParent(t);for(;n;){if(n===e)return!0;n=ke.findParent(n)}return!1},Sg=e=>{let t=[];return e.forEach(n=>{e.some(i=>fT(i,n))||t.push(n)}),t},sx=(e,t)=>e.y>t.y,hT=e=>{const t={...e};t.id=yn(),t.children=[];for(const n of e.children)t.children.push(hT(n));return t},O8=(e,t,n)=>{const r={};t.isRoot||(RU.forEach(o=>{r[o]=t[o]}),delete r.layout);const i=h7("",b8,BS,r);Ve.insertNode(e,i,n),x0(e),Kf(e,i),setTimeout(()=>{B8(i)})},MU=e=>{const t=[],n=[];for(let r=0;r<e.length;r++){const i=ke.getParent(e[r]),o=n.indexOf(i);o===-1?(n.push(i),t.push([e[r]])):t[o].push(e[r])}return{parentElements:n,abstractIncludedGroups:t}},bU=(e,t)=>{if(qt.isMind(t))return cT;if(ke.isMindElement(e,t))return b8;throw new Error("can not find default font-size")},Zg={horizontal:{nodeAndText:br*2.5,emojiAndText:br*1.5},vertical:{nodeAndText:br,nodeAndImage:br,imageAndText:br*1.5}},I8={horizontal:{nodeAndText:br*4,emojiAndText:br*2},vertical:{nodeAndText:br*2}},yv=(e,t)=>{const r=qt.isMind(t)?I8.horizontal.nodeAndText:Zg.horizontal.nodeAndText,i=Cp(e,t);return r+i},wv=(e,t)=>{const n=qt.isMind(t),r=Cp(e,t);return(n?I8.vertical.nodeAndText:Zg.vertical.nodeAndText)+r},ux=e=>qt.isMind(e)?I8.horizontal.emojiAndText:Zg.horizontal.emojiAndText,Bn={getNodeWidth(e,t){const n=yv(e,t);return ke.hasEmojis(t)?Bn.getEmojiLeftSpace(e,t)+V6(e,t).width+ux(t)+Bn.getNodeDynamicWidth(e,t)+n:n+Bn.getNodeDynamicWidth(e,t)+n},getNodeHeight(e,t){const n=wv(e,t);return ke.hasImage(t)?Bn.getTextTopSpace(e,t)+t.height+n:n+t.height+n},getNodeDynamicWidth(e,t){var i;const n=t.manualWidth||t.width,r=ke.hasImage(t)?(i=t.data.image)==null?void 0:i.width:0;return Math.max(n,r)},getNodeNewDynamicWidth(e,t,n){const r=t.manualWidth||t.width;return Math.max(r,n)},getNodeResizableMinWidth(e,t){const n=Bn.getNodeTopicMinWidth(e,t);return ke.hasImage(t)&&t.data.image.width>n?t.data.image.width:n},getNodeTopicMinWidth(e,t){const n=bU(e,t),r=Xm(t);return Hu.getMarks(r)[li.fontSize]||n},getTextLeftSpace(e,t){const n=yv(e,t);return ke.hasEmojis(t)?Bn.getEmojiLeftSpace(e,t)+V6(e,t).width+ux(t):n},getTextTopSpace(e,t){const n=wv(e,t);return ke.hasImage(t)?Bn.getImageTopSpace(e,t)+t.data.image.height+Zg.vertical.imageAndText:n},getImageTopSpace(e,t){return Cp(e,t)+Zg.vertical.nodeAndImage},getEmojiLeftSpace(e,t){const n=e.getPluginOptions(s7);return yv(e,t)-n.emojiPadding},getEmojiTopSpace(e,t){return wv(e,t)}},OU=e=>{const t=qm;return typeof e=="string"?t:Hu.getMarksByElement(e)[li.fontSize]||t};function Un(e){const t=e.x+e.hGap;let n=e.y+e.vGap;const r=e.width-e.hGap*2,i=e.height-e.vGap*2;return{x:t,y:n,width:r,height:i}}function IU(e,t){const n=Bn.getNodeWidth(e,t),r=Bn.getNodeHeight(e,t);return{x:t.points[0][0],y:t.points[0][1],width:n,height:r}}function dT(e,t,n){const r=ke.getNode(n);return!!(r&&sp(t[0],t[1],Un(r))===0)}function gT(e,t){let{x:n,y:r}=Un(ke.getNode(t));n=n+Bn.getEmojiLeftSpace(e,t);const{width:i}=V6(e,t);return{x:n,y:r,width:i,height:Bn.getNodeHeight(e,t)}}function pT(e,t){let n=Un(t);const r=mT(e,n,t.origin);return r.width=r.width,r}function mT(e,t,n){const r=t.x+Bn.getTextLeftSpace(e,n),i=t.y+Bn.getTextTopSpace(e,n),o=Bn.getNodeDynamicWidth(e,n);return{height:Math.ceil(n.height),width:o,x:r,y:i}}function d7(e,t){let{x:n,y:r}=Un(ke.getNode(t));const i=t.manualWidth||t.width;n=i>t.data.image.width?n+Bn.getTextLeftSpace(e,t)+(i-t.data.image.width)/2:n+Bn.getTextLeftSpace(e,t),r=Bn.getImageTopSpace(e,t)+r;const{width:o,height:s}=t.data.image;return{x:n,y:r,width:o,height:s}}const kU=(e,t,n)=>{const r=d7(e,t),i=M.getOutlineRectangle(r,-9/2);return M.isPointInRectangle(i,n)},FU=(e,t,n)=>{const r=d7(e,t);return lS(r,tu).find(s=>M.isHit(M.getRectangleByPoints([n,n]),s.rectangle))},LU=(e,t)=>{const n={...t};return delete n.isRoot,delete n.rightNodeCount,delete n.type,n.layout===qe.standard&&delete n.layout,n},U6=e=>{const t={...e};return delete t.start,delete t.end,t},_U=(e,t)=>{const n={...t};return We.string(n.data.topic)||(n.data.topic={children:[{text:""}]}),n==null||delete n.strokeColor,n==null||delete n.fill,n==null||delete n.shape,n==null||delete n.strokeWidth,n==null||delete n.isCollapsed,{...n,layout:n.layout??qe.right,isRoot:!0,type:"mindmap"}},NU=(e,t)=>{CS(e,t),pn.getElementRef(t).getGenerator(ja.key).setFocus(t,!0)},B3=(e,t)=>{HG(e),pn.getElementRef(t).getGenerator(ja.key).setFocus(t,!1)},vT=(e,t,n)=>{const r=qf(t),{height:i}=r.getSize(void 0,n);if(Math.abs(i-t.height)>2)return i},yT=e=>{pn.getElementG(e).classList.add("dragging-node"),!e.isCollapsed&&e.children.forEach(t=>{yT(t)})},wT=e=>{pn.getElementG(e).classList.remove("dragging-node"),!e.isCollapsed&&e.children.forEach(t=>{wT(t)})},ax=(e,t)=>{Za(e,t),t?I.getBoardContainer(e).classList.add("mind-node-dragging"):I.getBoardContainer(e).classList.remove("mind-node-dragging")},HU=(e,t,n)=>{let r=mc(e);if(qt.isMind(e)&&wo(ic(e))){const s=CT(e,t);s&&(r=r.slice(0,e.rightNodeCount)),s||(r=r.slice(e.rightNodeCount,r.length),n=[...n,n[n.length-1]-e.rightNodeCount])}let i=n[n.length-1]!==0,o=n[n.length-1]!==((r==null?void 0:r.length)||0);return e.isCollapsed&&(o=!1,i=!1),{hasPreviousNode:i,hasNextNode:o}},CT=(e,t)=>{const n=t.target;return qt.isMind(e)&&wo(ic(e))&&e.children.indexOf(n)!==-1&&e.children.indexOf(n)<e.rightNodeCount||qt.isMind(n)&&wo(ic(n))&&t.detectResult==="right"},GU=(e,t,n)=>{if(!t.origin.isRoot&&!gt.isAbstract(t.origin)){const r=Co.getCorrectLayoutByElement(e,t==null?void 0:t.parent.origin);if(wo(r)){const o=t.parent.children.findIndex(s=>s===t)>=(t.parent.origin.rightNodeCount||0);return ku(n,[o?"right":"left"])}if(Yg(r))return ku(n,["right"]);if(cm(r))return ku(n,["left"]);if(r===qe.upward)return ku(n,["bottom"]);if(r===qe.downward)return ku(n,["top"])}else{const r=Co.getCorrectLayoutByElement(e,t==null?void 0:t.origin);if(wo(r))return ku(n,["top","bottom"]);if(r===qe.upward)return ku(n,["left","right","bottom"]);if(r===qe.downward)return ku(n,["left","right","top"]);if(Yg(r))return ku(n,["right","top","bottom"]);if(cm(r))return ku(n,["left","top","bottom"])}return null},ku=(e,t)=>{const n=e;return t.forEach(r=>{const i=n.findIndex(o=>o===r);i!==-1&&n.splice(i,1)}),n.length?n:null},$U=(e,t,n,r)=>{let i=null;return di(e,o=>{if(!ke.isMindElement(e,o)||i)return;const s=ke.getNode(o),a=WU(s,t);a&&(i=GU(e,s,a)),n=null;const f=r.every(h=>jU(h,s.origin));i&&f&&(n={target:s.origin,detectResult:i[0]})},Xf(e)),n},WU=(e,t)=>{const{x:n,y:r,width:i,height:o}=Un(e),s=r+o/2,a=n+i/2,f=e.y,h=e.y+e.height,d=e.x,p=e.x+e.width,v=[];return t[1]>r&&t[1]<r+o?(t[0]>d&&t[0]<a&&v.push("left"),t[0]>a&&t[0]<p&&v.push("right"),(t[0]>n&&t[0]<a||t[0]>a&&t[0]<n+i)&&(t[1]<s?v.push("top"):v.push("bottom")),v.length?v:null):t[0]>n&&t[0]<n+i?(t[1]>f&&t[1]<s&&v.push("top"),t[1]>s&&t[1]<h&&v.push("bottom"),(t[1]>r&&t[1]<r+o||t[1]>s&&t[1]<r+o)&&(t[0]<a?v.push("left"):v.push("right")),v.length?v:null):null},jU=(e,t)=>e!==t&&!fT(e,t),zU=(e,t)=>{let n=I.findPath(e,t==null?void 0:t.target);const r=qt.isMind(t==null?void 0:t.target)?ic(t==null?void 0:t.target):Co.getCorrectLayoutByElement(e,ke.getParent(t==null?void 0:t.target)),i=mc(t.target);return H6(r)&&((t.detectResult==="top"||t.detectResult==="bottom")&&n.push(i.length),t.detectResult==="right"&&(n=pt.next(n))),Kg(r)&&(t.detectResult==="right"&&(qt.isMind(t==null?void 0:t.target)&&wo(r)?n.push(t==null?void 0:t.target.rightNodeCount):n.push(i.length)),t.detectResult==="left"&&n.push(i.length),t.detectResult==="bottom"&&(n=pt.next(n))),ou(r)&&(La(r)&&t.detectResult==="top"&&(n=pt.next(n)),jV(r)&&t.detectResult==="bottom"&&(n=pt.next(n)),Yg(r)&&t.detectResult==="left"&&n.push(i.length),cm(r)&&t.detectResult==="right"&&n.push(i.length)),n};function VU(e,t){const n=Un(t);return k8(e,n,t.origin)}function k8(e,t,n){const r=lT(e,n),i=A8(e,n),o=Cp(e,n),s=c7(e,n),a=hc(s,o),f=M.inflate(t,-o);return E0(I.getRoughSVG(e),f.x,f.y,f.x+f.width,f.y+f.height,{stroke:i,strokeWidth:o,fill:r,fillStyle:"solid",strokeLineDash:a},!1,u7.shape.rectangleRadius)}var bn;(function(e){e.left="left",e.center="center",e.right="right"})(bn||(bn={}));var gn;(function(e){e.top="top",e.middle="middle",e.bottom="bottom"})(gn||(gn={}));const Ni=(e,t)=>{let n=e.x,r=e.y;return t[0]===bn.center&&(n=e.x+e.width/2),t[0]===bn.right&&(n=e.x+e.width),t[1]===gn.middle&&(r=e.y+e.height/2),t[1]===gn.bottom&&(r=e.y+e.height),[n,r]},UU=(e,t,n)=>Math.abs(n?e[0]-t[0]:e[1]-t[1]),_a=(e,t)=>t?e.left?Lt.left:Lt.right:e.up?Lt.top:Lt.bottom,Xn=(e,t,n=Lt.right)=>n===Lt.left?[e[0]-t,e[1]]:n===Lt.bottom?[e[0],e[1]+t]:n===Lt.top?[e[0],e[1]-t]:[e[0]+t,e[1]],Kd=(e,t,n=Lt.right)=>n===Lt.bottom?[e[0]+t,e[1]]:n===Lt.top?[e[0]+t,e[1]]:[e[0],e[1]+t],fo=(e,t)=>{if(t===Lt.left&&(e[0]===bn.right?e[0]=bn.left:e[0]===bn.left&&(e[0]=bn.right)),t===Lt.bottom||t===Lt.top){let n=bn.center,r=gn.middle;e[1]===gn.top&&(n=bn.left),e[1]===gn.bottom&&(n=bn.right),e[0]===bn.left&&(r=gn.top),e[0]===bn.right&&(r=gn.bottom),e[0]=n,e[1]=r}t===Lt.top&&(e[1]===gn.bottom?e[1]=gn.top:e[1]===gn.top&&(e[1]=gn.bottom))};function XU(e,t,n,r=!0,i=null,o,s){const a=D8(e,t.origin),f=o||l7(e,n.origin),h=i||a7(e,n.origin),d=c7(e,n.origin),p=m0(e,n.origin)===Uu.underline;let v,w,E,y,S=t,A=n;const B=Un(S),R=Un(A);v=S.x+S.width/2,w=sx(t,n)?B.y:B.y+B.height,E=t.left?A.x+A.hGap+R.width:A.x+A.hGap,y=p?A.y+A.height-A.vGap:A.y+A.height/2;let _=sx(t,n)?t.left?[-1,-1]:[1,-1]:t.left?[-1,1]:[1,1],F=[[v,w],[v,w],[v,w],[v,y-A.hGap*3*_[1]/5],[v,y-A.hGap*_[1]/5],[v+A.hGap*_[0]/4,y],[v+A.hGap*_[0]*3/5,y],p&&r?[E+(A.width-A.hGap*2)*_[0],y]:[E,y],p&&r?[E+(A.width-A.hGap*2)*_[0],y]:[E,y],p&&r?[E+(A.width-A.hGap*2)*_[0],y]:[E,y]];const j=hc(d,f);if(a===zf.polyline){const Q=[[v,w],[v,y],[E,y],p&&r?[E+(A.width-A.hGap*2)*_[0],y]:[E,y]];return Uo(Q,{stroke:h,strokeWidth:f,strokeLineDash:j})}const z=yo(F,.001);return lI(z,{stroke:h,strokeWidth:f})}function KU(e,t,n,r,i=null,o,s){const a=D8(e,t.origin),f=i||a7(e,n.origin),h=o||l7(e,n.origin),d=c7(e,n.origin),p=a===zf.polyline?!0:!t.origin.isRoot,v=m0(e,t.origin),E=m0(e,n.origin)===Uu.underline,y=v===Uu.underline,S=Un(n),A=Un(t),B=_a(n,r),R=[bn.right,gn.middle],_=[bn.left,gn.middle];fo(R,B),fo(_,B),r&&y&&!t.origin.isRoot&&(R[1]=gn.bottom),r&&E&&(_[1]=gn.bottom);let F=Ni(A,R),j=Ni(S,_);const Q=p?Xn(F,8,B):F;let se=p?[F,Q,Q]:[];const te=(t.hGap+n.hGap)/3,Ee=-(t.hGap+n.hGap)/2.4;let ie=[Q,Xn(Q,te,B),Xn(j,Ee,B),j];const ce=Xn(j,S.width,B),me=E&&r?[ce,ce,ce]:[],Ce=yo([...se,...ie,...me]),Fe=hc(d,h);let Ae;if(a===zf.polyline){const ue=Xn(Q,8,B),ye=[...se,ue,r?[ue[0],j[1]]:[j[0],ue[1]],j,...me];Ae=Uo(ye,{stroke:f,strokeWidth:h,strokeLineDash:Fe})}else Ae=I.getRoughSVG(e).curve(Ce,{stroke:f,strokeWidth:h,strokeLineDash:Fe});return d===Es.dotted&&Kt(Ae,"round"),Ae}function xT(e,t,n,r,i,o,s,a){return ke.isIndentedLayout(t.origin)?XU(e,t,n,i,o,s):KU(e,t,n,r,o,s)}const YU="foreign-object-emoji";class qU{constructor(t){this.board=t,this.emojiComponentRef=null}draw(t,n,r){this.destroy();const i={board:this.board,emojiItem:n,element:r,fontSize:QD(r)};this.emojiComponentRef=this.board.renderEmoji(t,i)}destroy(){this.emojiComponentRef&&(this.emojiComponentRef.destroy(),this.emojiComponentRef=null)}}const ry=class ry{constructor(t){this.board=t,this.emojiGenerators=[]}drawEmojis(t){if(this.destroy(),ke.hasEmojis(t)){this.g=Gt(),this.g.classList.add("emojis");const n=gT(this.board,t),r=P4(n.x,n.y,n.width,n.height);r.classList.add(YU),this.g.append(r);const i=document.createElement("div");return i.classList.add("node-emojis-container"),r.append(i),this.emojiGenerators=t.data.emojis.map(o=>{const s=new qU(this.board);return s.draw(i,o,t),s}),this.g}}destroy(){this.g&&this.g.remove(),this.emojiGenerators.forEach(t=>t.destroy()),this.emojiGenerators=[]}};ry.key="node-emojis-generator";let Qg=ry;const ZU=(e,t,n,r)=>{const i=pn.getElementRef(t),o=ke.getNode(t),s=Gt();s.classList.add("dragging","fake-node","plait-board-attached");const a={...o,x:o.x+n,y:o.y+r},f=pT(e,o),h=VU(e,a),d=qf(t).g.cloneNode(!0);if(pg(d,f.width,f.height,f.x+n,f.y+r),s==null||s.append(h),s==null||s.append(d),ke.hasEmojis(t)){const v=i.getGenerator(Qg.key).g.cloneNode(!0),w=gT(e,t);pg(v,w.width,w.height,w.x+n,w.y+r),s==null||s.append(v)}if(ke.hasImage(t)){const v=i.getGenerator(ja.key).g.cloneNode(!0),w=d7(e,t);pg(v,w.width,w.height,w.x+n,w.y+r),s==null||s.append(v)}return s},QU=(e,t,n)=>{const r=t.target,i=Gt(),o=Vt.get(e,pt.parent(n)),s=Co.getLayoutByElement(o),a=ci(s),{hasNextNode:f,hasPreviousNode:h}=HU(o,t,n),d=30,p=12;let v,w,E,y;if(!h&&!f){const Q=ke.getNode(o),se=Un(Q);y=_a(Q,a),E=Q,qt.isMind(r)&&wo(s)&&(t.detectResult==="left"?(y=Lt.left,E.left=!0):(y=Lt.right,E.left=!1));const te=[bn.right,gn.middle];fo(te,y);const Ee=Ni(se,te);if(ou(s)){const ie=[bn.center,La(s)?gn.top:gn.bottom],ce=Ni(se,ie);w=Xn(ce,p,y),w[1]=La(s)?w[1]-p:w[1]+p}else w=Xn(Ee,d,y)}else if(!h&&f){const Q=Vt.get(e,n);E=ke.getNode(Q);const se=Un(E);y=_a(E,a);const te=[bn.left,gn.top];fo(te,y);let Ee=-12;ke.isIndentedLayout(o)&&(Ee=La(s)?Ee/2+E.height-E.vGap:0),w=Ni(se,te),w=Kd(w,Ee,y)}else if(h&&!f){const Q=Vt.get(e,pt.previous(n));E=ke.getNode(Q);const se=Un(E);y=_a(E,a);const te=[bn.left,gn.bottom];fo(te,y);let Ee=p;ke.isIndentedLayout(o)&&(Ee=La(s)?-Ee-(E.height-E.vGap):Ee),w=Ni(se,te),w=Kd(w,Ee,y)}else{const Q=Vt.get(e,pt.previous(n));E=ke.getNode(Q);const se=Un(E),te=Vt.get(e,n),Ee=ke.getNode(te),ie=Un(Ee),ce=[bn.left,gn.bottom],me=[bn.left,gn.top];y=_a(E,a),fo(ce,y),fo(me,y);const Ce=Ni(se,ce),Fe=Ni(ie,me);w=[(Ce[0]+Fe[0])/2,(Ce[1]+Fe[1])/2]}let S=w,A=w;const B=a?p:d,R=a?d:p;S=Kd(S,-B/2,y),A=Kd(A,B/2,y),A=Xn(A,R,y);const _=Math.min(S[0],A[0]),F=Math.min(S[1],A[1]);v={...E,x:_,y:F,width:d,height:p,hGap:ke.isIndentedLayout(o)?br*4+(E.origin.strokeWidth||j6):0,vGap:ke.isIndentedLayout(o)?br:0};const j=E0(I.getRoughSVG(e),v.x,v.y,v.x+d,v.y+p,{stroke:Jd,strokeWidth:2,fill:Jd,fillStyle:"solid"}),z=xT(e,ke.getNode(o),v,a,!1,Jd,j6);return i==null||i.appendChild(z),i==null||i.appendChild(j),i};var fi;(function(e){e.start="start",e.end="end"})(fi||(fi={}));var Dg;(function(e){e.start="start",e.resizing="resizing",e.end="end"})(Dg||(Dg={}));function lx(e,t,n,r,i){const o=Gt(),s=ke.getParent(n),a=Co.getCorrectLayoutByElement(e,n),f=ci(a),h=s.children.slice(n.start,n.end+1),d=sn(e,h,!0),p=Ti(e,d);let v=M.getOutlineRectangle(p,-3.5);i&&(v=dg(v,i,r,f));const w=eX(t,v.x,v.y,v.x+v.width,v.y+v.height,f,{stroke:Jd,strokeWidth:1,fillStyle:"solid"}),E=[bn.center,gn.top],y=[bn.center,gn.bottom],S=_a(ke.getNode(n),f);fo(E,S),fo(y,S);let A=Ni(v,E),B=Ni(v,y);const R=Xn(A,-10/2,S),_=Xn(A,ix/2,S),F=Xn(B,-10/2,S),j=Xn(B,ix/2,S),z=t.line(R[0],R[1],_[0],_[1],cx(r===fi.start)),Q=t.line(F[0],F[1],j[0],j[1],cx(r===fi.end));return JU(e,r,f),Kt(z,"round"),Kt(Q,"round"),o.append(z),o.append(Q),o.append(w),o}function cx(e){return e?{stroke:Jd,strokeWidth:4,fillStyle:"solid"}:{stroke:SU,strokeWidth:3,fillStyle:"solid"}}function JU(e,t,n){t?n?I.getBoardContainer(e).classList.add("abstract-resizing-horizontal"):I.getBoardContainer(e).classList.add("abstract-resizing-vertical"):(I.getBoardContainer(e).classList.remove("abstract-resizing-horizontal"),I.getBoardContainer(e).classList.remove("abstract-resizing-vertical"))}function eX(e,t,n,r,i,o,s){const a=Math.abs(t-r),f=Math.abs(n-i),h=5,v=10+4*2;if(o){const w=(a-v-h*2)/2,E=f-h*2;return e.path(`M${t+h},${n}
            l${w},0
            m${v},0
            l${w},0
            a${h},${h},0,0,1,${h},${h}
            l0,${E}
            a${h},${h},0,0,1,-${h},${h}
            l-${w},0
            m-${v},0
            l-${w},0
            a${h},${h},0,0,1,-${h},-${h}
            l0,-${E}
            a${h},${h},0,0,1,${h},-${h}`,s)}else{const w=(f-v-h*2)/2,E=a-h*2;return e.path(`M${t+h},${n}
            l${E},0
            a${h},${h},0,0,1,${h},${h}
            l0,${w}
            m0,${v}
            l0,${w}
            a${h},${h},0,0,1,-${h},${h}
            l-${E},0
            a${h},${h},0,0,1,-${h},-${h}
            l0,-${w}
            m0,-${v}
            l0,-${w}
            a${h},${h},0,0,1,${h},-${h}`,s)}}const iy=class iy extends xo{canDraw(t,n){return!!n.selected}draw(t,n){const r=Gt(),i=ke.getNode(t),o=Un(i),s=Ti(this.board,o),a=Cp(this.board,t),f=hr,h=M.inflate(s,f),d=E0(I.getRoughSVG(this.board),h.x,h.y,h.x+h.width,h.y+h.height,{stroke:Jd,strokeWidth:f,fill:""},!0,u7.shape.rectangleRadius+(f+a)/2);return gt.isAbstract(t)&&(this.abstractOutlineG=lx(this.board,I.getRoughSVG(this.board),t),r.append(this.abstractOutlineG),d.classList.add("abstract-element")),r.appendChild(d),r.classList.add(op),r}updateAbstractOutline(t,n,r){const i=lx(this.board,I.getRoughSVG(this.board),t,n,r);this.abstractOutlineG&&(this.abstractOutlineG.replaceWith(i),this.abstractOutlineG=i)}};iy.key="mind-node-active";let oc=iy;const dg=(e,t,n,r)=>r?n===fi.start?{...e,y:t,height:e.height+e.y-t}:{...e,height:t-e.y}:n===fi.start?{...e,x:t,width:e.width+e.x-t}:{...e,width:t-e.x},tX=(e,t,n,r,i,o)=>{const s=ke.getNode(r),{start:a,end:f}=ql(s.origin,i),h=n[a],d=n[f];if(t===fi.start){const p=n.filter(y=>gt.isAbstract(y)&&y.end<r.start);let v;if(p.length){const y=p.map(S=>{const{end:A}=ql(S,i);return A}).sort((S,A)=>A-S)[0];v=n[y+1]}else v=n[0];const w=sn(e,[v],!0),E=sn(e,[d],!1);return o?{max:E.y-$l,min:w.y-$l}:{max:E.x-$l,min:w.x-$l}}else{const p=n.filter(y=>gt.isAbstract(y)&&y.start>r.end);let v;if(p.length){const y=p.map(S=>{const{start:A}=ql(S,i);return A}).sort((S,A)=>S-A)[0];v=n[y-1]}else{const y=n.filter(S=>!gt.isAbstract(S));v=n[y.length-1]}const w=sn(e,[v],!0),E=sn(e,[h],!1);return o?{max:w.y+w.height+$l,min:E.y+E.height+$l}:{max:w.x+w.width+$l,min:E.x+E.width+$l}}},ET=(e,t,n)=>{const r=Co.getCorrectLayoutByElement(e,t),i=ci(r),s=ke.getParent(t).children.slice(t.start,t.end+1);let a=sn(e,s,!0);a=M.getOutlineRectangle(a,-3.5);const f=fx(a,i,fi.start),h=fx(a,i,fi.end),d=M.getRectangleByPoints([n,n]);if(M.isHit(d,f))return fi.start;if(M.isHit(d,h))return fi.end},fx=(e,t,n)=>{let r;if(n===fi.start){const i=t?e.y:e.x;r=dg(e,i+a3/2,fi.end,t),r=dg(r,i-a3/2,n,t)}else{const i=t?e.y+e.height:e.x+e.width;r=dg(e,i-a3/2,fi.start,t),r=dg(r,i+a3/2,n,t)}return r};function nX(e,t,n,r){const i=t.filter(d=>!gt.isAbstract(d)),o=i.map(d=>sn(e,[d],!1)),s=sn(e,[i[0]],!0),a={x:s.x-s.width,y:s.y-s.height,width:s.width,height:s.height},f=sn(e,[i[i.length-1]],!0),h={x:f.x+f.width,y:f.y+f.height,width:f.width,height:f.height};o.push(h),o.unshift(a);for(let d=0;d<o.length-1;d++){const p=r?o[d].y:o[d].x,v=r?o[d].height:o[d].width;if(n>=p+v/2&&n<=o[d+1][r?"y":"x"]+o[d+1][r?"height":"width"]/2)return d-1}return 0}function rX(e,t,n){let r;const i=Ye(e).filter(o=>gt.isAbstract(o)).find(o=>(r=ET(e,o,n),r));return t===i||(t&&(pn.getElementRef(t).getGenerator(oc.key).updateAbstractOutline(t),t=void 0),i&&(t=i,pn.getElementRef(t).getGenerator(oc.key).updateAbstractOutline(t,r))),t}const PT=e=>{const t=ke.findParent(e);if(t){const n=t.children.findIndex(r=>r.id===e.id);if(t.isRoot&&ic(t)===qe.standard&&t.rightNodeCount&&n<=t.rightNodeCount-1)return!0}return!1},ST=(e,t,n,r=[])=>{let i=r.findIndex(s=>pt.equals(s.path,t));const o=Vt.get(e,t);return i===-1?r.push({path:t,rightNodeCount:o.rightNodeCount+n}):r[i].rightNodeCount+=n,r},DT=(e,t,n=[])=>(t.forEach(r=>{if(PT(r)){const i=ke.getParent(r),o=I.findPath(e,i);let s=n.findIndex(a=>pt.equals(a.path,o));s===-1?n.push({path:o,rightNodeCount:i.rightNodeCount-1}):n[s].rightNodeCount-=1}}),n);function F8(e,t){const n=mc(t);return I.findPath(e,t).concat(n.length)}function iX(e,t){const n=I.findPath(e,t);return q.next(n)}const L8=(e,t)=>{const n=ke.getAncestors(e,t);n.unshift(t);const r=n[n.length-1];let i=ic(r);if(qt.isMind(t))return i;const o=ke.getNode(t);let s=i;i===qe.standard&&(s=o.left?qe.left:qe.right);let a=null;const f=n.find(h=>h.layout||gt.isAbstract(h));if(f)if(gt.isAbstract(f)){const h=ke.getParent(f),d=L8(e,h);a=S8(d)}else a=f==null?void 0:f.layout;if(a===qe.standard||!a)return s;{const h=wU(s,a);return h?CU(a,h):a}},TT=(e,t)=>{const n=[];t.layout&&n.unshift(L8(e,t));let r=ke.findParent(t);for(;r;)r.layout&&n.unshift(r.layout),r=ke.findParent(r);return n},oX=(e,t)=>{const n=ke.findParent(t);if(n){const r=TT(e,n);if(r[0]===qe.standard){const h=ke.getNode(t);r[0]=h.left?qe.left:qe.right}const i=nx(r);let o=rx(i);const s=[r[r.length-1]],a=nx(s),f=rx(a);return o=o.filter(h=>f.some(d=>d===h)),o}},X6=e=>{const t=e.layout;if(t)return t;const n=!qt.isMind(e)&&ke.getParent(e);return gt.isAbstract(e)&&n?S8(X6(n)):n?X6(n):R8()},Co={getAvailableSubLayoutsByElement:oX,getBranchLayouts:TT,getLayoutByElement:X6,getCorrectLayoutByElement:L8},qt={isMind:e=>e.type==="mindmap"},ke={hasLayout(e,t){return Co.getLayoutByElement(e)===t},isIndentedLayout(e){const t=Co.getLayoutByElement(e);return ou(t)},isMindElement(e,t){return!!(t.data&&t.data.topic&&!Vo(t.width)&&!Vo(t.height))},getParent(e){if(qt.isMind(e))throw new Error("mind root node can not get parent");return Bf.get(e)},findParent(e){return qt.isMind(e)?void 0:Bf.get(e)},getRoot(e,t){const n=I.findPath(e,t);return Vt.get(e,n.slice(0,1))},getAncestors(e,t){const n=I.findPath(e,t),r=[];for(const i of pt.ancestors(n,{reverse:!0})){const o=Vt.get(e,i);o&&!I.isBoard(o)&&r.push(o)}return r},getNode(e){const t=hm.get(e);if(!t)throw new Error(`can not get node from ${JSON.stringify(e)}`);return t},findParentNode(e){if(qt.isMind(e))return;const t=ke.getParent(e);return ke.getNode(t)},hasEmojis(e){return!!e.data.emojis},hasImage(e){return!!e.data.image},getEmojis(e){return e.data.emojis}};var Uu;(function(e){e.roundRectangle="round-rectangle",e.underline="underline"})(Uu||(Uu={}));var zf;(function(e){e.bight="bight",e.polyline="polyline"})(zf||(zf={}));function sX(e,t,n){const i=vU(e,t.origin),o=sT(e,t.origin),s=c7(e,t.origin),a=t.parent,f=D8(e,t.origin),h=Un(t);let d=a.children.slice(t.origin.start,t.origin.end+1).map(se=>se.origin);const p=sn(e,d,!0),v=_a(t,n),w=[bn.right,gn.top],E=[bn.right,gn.bottom],y=[bn.left,gn.middle];fo(w,v),fo(E,v),fo(y,v);let S=Ni(p,w),A=Ni(p,E),B=Ni(h,y),R=UU(B,S,n)-15*2;S=Xn(S,15,v);let _=Xn(S,R,v);A=Xn(A,15,v);let F=Xn(A,R,v),j=Xn(B,-15,v);const z=hc(s,i);if(f===zf.polyline){const se=Gt(),te=Uo([S,_,j,F,A],{stroke:o,strokeWidth:i}),Ee=Uo([B,j],{stroke:o,strokeWidth:i,strokeLineDash:z});return se.appendChild(te),se.appendChild(Ee),se}return I.getRoughSVG(e).path(`M${S[0]},${S[1]} Q${_[0]},${_[1]} ${j[0]},${j[1]} Q${F[0]},${F[1]} ${A[0]},${A[1]} M${B[0]},${B[1]} L${j[0]},${j[1]}`,{stroke:o,strokeWidth:i,strokeLineDash:z})}const AT=(e,t)=>{t.forEach((n,r)=>{const i=r.start+n.start,o=r.end+n.end,s=I.findPath(e,r);i>o?Ve.removeNode(e,s):Ve.setNode(e,{start:i,end:o},s)})},BT=(e,t)=>{const n=t.rightNodeCount,r=t.children.find(i=>gt.isAbstract(i)&&i.end>=n&&i.start<n);if(r){const i=I.findPath(e,r);Ve.setNode(e,{end:n-1},i)}},uX=(e,t)=>{let n=Sg(t);const{parentElements:r,abstractIncludedGroups:i}=MU(n);i.forEach((o,s)=>{const a=r[s];aX(e,a,o)})},aX=(e,t,n)=>{const r=n.map(a=>t.children.indexOf(a)).sort((a,f)=>a-f),i=t==null?void 0:t.rightNodeCount,o=r[0],s=r[r.length-1];if(wo(Co.getLayoutByElement(t))&&i&&o<i&&s>=i){const a=t.children.length,f=[...I.findPath(e,t),a],h=r.filter(p=>p>=i),d=r.filter(p=>p<i);Cv(e,f,d[0],d[d.length-1]),Cv(e,pt.next(f),h[0],h[h.length-1])}else{const a=[...I.findPath(e,t),t.children.length];Cv(e,a,o,s)}},Cv=(e,t,n,r)=>{const i=BU(e),{width:o,height:s}=f7(!1,!1,Qa(i)),a=h7(i,o,s,{strokeWidth:p0.branch.width,branchWidth:p0.branch.width});a.start=n,a.end=r,Ve.insertNode(e,a,t),x0(e),Kf(e,a)},_8=(e,t,n,r)=>{const i=Bn.getNodeTopicMinWidth(e,t),o=n<i?i:n;return{width:Math.ceil(o),height:r}},lX=(e,t,n,r,i)=>{const o={data:{...t.data,topic:n},..._8(e,t,r,i)},s=I.findPath(e,t);Ve.setNode(e,o,s)},cX=(e,t,n,r)=>{const i=I.findPath(e,t),{width:o,height:s}=_8(e,t,n,r),a={manualWidth:o,height:s};Ve.setNode(e,a,i)},fX=(e,t,n,r)=>{const i={..._8(e,t,n,r)};let o=Math.ceil(t.width)===Math.ceil(i.width),s=Math.ceil(t.height)===Math.ceil(i.height);if(t.manualWidth&&(o=!0),!o||!s){const a=I.findPath(e,t);Ve.setNode(e,i,a)}},RT=(e,t,n)=>{const r=e.pathRef(n);t.forEach(i=>{r.current&&Ve.insertNode(e,i,r.current)}),r.unref()},hX=(e,t,n,r)=>{var a;const i=Vt.get(e,q.parent(r)),o=[...q.parent(r),(a=i.children)==null?void 0:a.length],s=t.map(f=>{const{start:h,end:d}=nT(f,n);return{...f.abstract,start:h+r[r.length-1],end:d+r[r.length-1]}});RT(e,s,o)},MT=(e,t)=>{t.forEach(n=>{Ve.setNode(e,{rightNodeCount:n.rightNodeCount},n.path)})},dX=(e,t)=>{if(ke.isMindElement(e,t)){Nm(e,t);const n=I.findPath(e,t);if(t.isCollapsed){const r={isCollapsed:!1};gs.withoutSaving(e,()=>{Ve.setNode(e,r,n)})}O8(e,t,F8(e,t))}},gX=(e,t)=>{if(ke.isMindElement(e,t)&&!qt.isMind(t)&&!gt.isAbstract(t)){const n=I.findPath(e,t);if(PT(t)){const i=ST(e,n.slice(0,1),1);MT(e,i)}const r=rT(e,q.next(n));AT(e,r),O8(e,t,iX(e,t))}},pX=(e,t)=>{Ve.insertNode(e,t,[e.children.length]),Ve.addSelectionWithTemporaryElements(e,[t])},mX=(e,t,n)=>{const i=[...t.data.emojis||[]];i.push(n);const o={data:{...t.data,emojis:i}},s=I.findPath(e,t);Ve.setNode(e,o,s)},vX=(e,t,n)=>{const r=t.data.emojis.filter(s=>s!==n),i={data:{topic:t.data.topic}};ke.hasImage(t)&&(i.data.image=t.data.image),r.length>0&&(i.data.emojis=r);const o=I.findPath(e,t);Ve.setNode(e,i,o)},yX=(e,t,n,r)=>{const i={data:{...t.data}},o=t.data.emojis.map(a=>a===n?r:a);i.data.emojis=o;const s=I.findPath(e,t);Ve.setNode(e,i,s)},wX=(e,t)=>{B3(e,t);const n={data:{...t.data}};delete n.data.image;const r=I.findPath(e,t),i=Bn.getNodeNewDynamicWidth(e,t,0),o=vT(e,t,i);o&&(n.height=o),Ve.setNode(e,n,r)},CX=(e,t,n)=>{const r={data:{...t.data,image:n}},i=Bn.getNodeNewDynamicWidth(e,t,n.width),o=vT(e,t,i);o&&(r.height=o);const s=I.findPath(e,t);Ve.setNode(e,r,s)},bT=(e,t,n)=>{var i;const r=Vt.get(e,n);r&&t&&((i=r.children)==null||i.forEach((o,s)=>{var a;o.layout&&((Kg(t)&&H6(o.layout)||H6(t)&&Kg(o.layout))&&Ve.setNode(e,{layout:null},[...n,s]),(a=o.children)!=null&&a.length&&bT(e,t,[...n,s]))}))},xX=(e,t)=>{const n=(r,i)=>{if(ke.isMindElement(e,r)){bT(e,t,i);const o=Vt.get(e,i);if(qt.isMind(o)&&wo(t)){let s={rightNodeCount:o.children.length/2};Ve.setNode(e,s,i),BT(e,o)}Ve.setNode(e,{layout:t},i)}};Yu.setProperty(e,{},{callback:n})},EX=(e,t)=>{Yu.setProperty(e,{shape:t})},PX=(e,t)=>{Yu.setProperty(e,{branchShape:t})},SX=(e,t)=>{Yu.setProperty(e,{branchWidth:t})},DX=(e,t)=>{Yu.setProperty(e,{branchColor:t})},Pr={setLayout:xX,setShape:EX,setBranchShape:PX,setBranchWidth:SX,setBranchColor:DX,setTopic:lX,setTopicSize:fX,setNodeManualWidth:cX,addEmoji:mX,removeEmoji:vX,replaceEmoji:yX,insertAbstract:uX,setAbstractsByRefs:AT,setAbstractByStandardLayout:BT,insertNodes:RT,insertAbstractNodes:hX,setRightNodeCountByRefs:MT,removeImage:wX,setImage:CX,insertChildNode:dX,insertSiblingNode:gX,insertMind:pX};class TX extends xo{canDraw(t){return!(I.isReadonly(this.board)||t!=null&&t.isCollapsed)}draw(t){const n=Gt();n.classList.add("plus");const r=ke.getNode(t),i=Co.getLayoutByElement(t),o=ci(i);let s=_a(r,o);ou(i)&&(s=La(i)?Lt.top:Lt.bottom);const a=m0(this.board,t)===Uu.underline,f=Un(r),h=l7(this.board,t),d=qt.isMind(t)?yU(this.board,t):a7(this.board,t);let p=8,v=[bn.right,gn.middle];fo(v,s),o&&a&&!t.isRoot&&(v[1]=gn.bottom);let w=Ni(f,v);t.children.length>0&&!t.isRoot&&(w=Xn(w,Pg+8,s),p=5);const E=Xn(w,p,s),y=Xn(E,8,s),S=I.getRoughSVG(this.board).line(w[0],w[1],E[0],E[1],{stroke:d,strokeWidth:h}),A=I.getRoughSVG(this.board).circle(y[0],y[1],Pg,{fill:ex,stroke:ex,fillStyle:"solid"}),B=[y[0]-5,y[1]],R=[y[0]+5,y[1]],_=[y[0],y[1]-5],F=[y[0],y[1]+5],j=I.getRoughSVG(this.board).line(B[0],B[1],R[0],R[1],{stroke:tx,strokeWidth:2}),z=I.getRoughSVG(this.board).line(_[0],_[1],F[0],F[1],{stroke:tx,strokeWidth:2});return n.appendChild(S),n.appendChild(A),n.appendChild(j),n.appendChild(z),n}afterDraw(t){if(!this.g)throw new Error("can not find quick insert g");Lf(this.g,"pointerdown").pipe(Yv(1)).subscribe(n=>{n.preventDefault()}),Lf(this.g,"pointerup").pipe(Yv(1)).subscribe(n=>{setTimeout(()=>{const r=F8(this.board,t);O8(this.board,t,r)},0)})}}class AX extends xo{canDraw(t){return!!(t.children.length&&!qt.isMind(t))}draw(t){const n=Gt();n.classList.add("collapse");const r=ke.getNode(t),i=a7(this.board,t),o=l7(this.board,t),s=Co.getLayoutByElement(t),a=m0(this.board,t)===Uu.underline,f=ci(s),h=Un(r);let d=_a(r,f);ou(s)&&(d=La(s)?Lt.top:Lt.bottom);let p=[bn.right,gn.middle];fo(p,d),f&&a&&!t.isRoot&&(p[1]=gn.bottom);let v=Ni(h,p);const w=Xn(v,z6,d),E=Xn(w,Pg/2,d),y=this.getArrowPoints(E,d),S=Uo(y,{stroke:i,strokeWidth:2}),A=I.getRoughSVG(this.board).line(v[0],v[1],w[0],w[1],{strokeWidth:o,stroke:i}),B=I.getRoughSVG(this.board).circle(E[0],E[1],Pg,{fill:i,stroke:i,fillStyle:"solid"}),R=I.getRoughSVG(this.board).circle(E[0],E[1],Pg,{fill:"#fff",stroke:i,strokeWidth:o>3?3:o,fillStyle:"solid"});if(t.isCollapsed){let _=0;A3(t)>=10&&(_=-2),A3(t)===1&&(_=1);const F=WO(E[0]-4+_,E[1]+4,i,`${A3(t)}`);B.setAttribute("style","opacity: 0.15"),F.setAttribute("style","font-size: 12px"),n.appendChild(B),n.appendChild(F),n.appendChild(A)}else n.appendChild(R),n.appendChild(S);return n.appendChild(A),n}afterDraw(t){if(!this.g)throw new Error("can not find quick insert g");Lf(this.g,"pointerdown").pipe(CO(()=>!I.isPointer(this.board,en.hand)||!!I.isReadonly(this.board)),Yv(1)).subscribe(n=>{n.preventDefault();const i={isCollapsed:!t.isCollapsed},o=I.findPath(this.board,t);Ve.setNode(this.board,i,o)})}getArrowPoints(t,n){let r=Xn(t,2,n);r=Kd(r,4,n);const i=Xn(t,-2,n);let o=Xn(t,2,n);return o=Kd(o,-4,n),[r,i,o]}}class BX extends xo{constructor(t){super(t,{prepend:!0})}canDraw(t,n){return m0(this.board,t)===Uu.roundRectangle}draw(t,n){const r=Un(n.node);return k8(this.board,r,n.node.origin)}}class OT extends dc{get textManage(){return this.getRef().getTextManages()[0]}constructor(){super(),this.shapeG=null,this.trackBy=(t,n)=>n.origin.id}initializeGenerator(){this.nodeShapeGenerator=new BX(this.board),this.nodeEmojisGenerator=new Qg(this.board),this.activeGenerator=new oc(this.board),this.nodePlusGenerator=new TX(this.board),this.collapseGenerator=new AX(this.board),this.imageGenerator=new ja(this.board,{getRectangle:r=>d7(this.board,r),getImageItem:r=>r.data.image});const t=(this.board.getPluginOptions(D6)||{}).textPlugins,n=new hp(this.board,{getRectangle:()=>pT(this.board,this.node),onChange:r=>{const i=r.width,o=r.height;r.newText?Pr.setTopic(this.board,this.element,r.newText,i,o):Pr.setTopicSize(this.board,this.element,i,o)},getMaxWidth:()=>this.element.manualWidth?Bn.getNodeDynamicWidth(this.board,this.element):Math.max(Bn.getNodeDynamicWidth(this.board,this.element),PU.defaultTextMaxWidth),textPlugins:t||[]});this.getRef().addGenerator(oc.key,this.activeGenerator),this.getRef().addGenerator(Qg.key,this.nodeEmojisGenerator),this.getRef().addGenerator(ja.key,this.imageGenerator),this.getRef().initializeTextManage(n),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.node=ke.getNode(this.element),this.index=qd.get(this.element)||0,this.roughSVG=I.getRoughSVG(this.board),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawTopic(),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.drawEmojis(),this.drawExtend(),this.imageGenerator.processDrawing(this.element,this.getElementG()),qt.isMind(this.context.parent)&&this.getElementG().classList.add("branch")}onContextChanged(t,n){const r=ke.getNode(t.element),i=M.isEqual(this.node,r);if(this.node=r,!i||t.element!==n.element||t.hasThemeChanged)this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawEmojis(),this.drawExtend(),!ke.hasImage(n.element)&&ke.hasImage(this.element)&&this.imageGenerator.processDrawing(this.element,this.getElementG()),ke.hasImage(n.element)&&ke.hasImage(this.element)&&this.imageGenerator.updateImage(this.getElementG(),n.element,t.element),ke.hasImage(n.element)&&!ke.hasImage(this.element)&&this.imageGenerator.destroy(),this.updateTopic();else{const o=t.selected===n.selected,s=t.parent===n.parent;(!o||t.selected)&&this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected}),s||this.drawLink()}}drawEmojis(){const t=this.nodeEmojisGenerator.drawEmojis(this.element);t&&this.getElementG().append(t)}drawLink(){if(qt.isMind(this.element))return;const t=ke.getParent(this.element),n=ke.getNode(t);this.linkG&&this.linkG.remove();const r=Co.getLayoutByElement(t);gt.isAbstract(this.node.origin)?this.linkG=sX(this.board,this.node,ci(r)):this.linkG=xT(this.board,n,this.node,ci(r)),this.getElementG().append(this.linkG)}drawExtend(){this.extendG||(this.extendG=Gt(),this.extendG.classList.add("extend"),this.getElementG().append(this.extendG)),this.element.isCollapsed?this.getElementG().classList.add("collapsed"):this.getElementG().classList.remove("collapsed"),this.nodePlusGenerator.processDrawing(this.element,this.extendG),this.collapseGenerator.processDrawing(this.element,this.extendG)}drawTopic(){this.textManage.draw(this.element.data.topic),this.getElementG().append(this.textManage.g)}updateTopic(){this.textManage.updateText(this.element.data.topic),this.textManage.updateRectangle()}destroy(){super.destroy(),this.nodeEmojisGenerator.destroy(),this.imageGenerator.destroy(),this.activeGenerator.destroy(),hm.get(this.element)===this.node&&hm.delete(this.element),this.getRef().destroyTextManage()}}class RX extends OT{initialize(){this.updateMindLayout(),super.initialize(),this.getElementG().classList.add("root")}beforeContextChange(t){t.element!==this.element&&this.initialized&&this.updateMindLayout(t.element)}updateMindLayout(t=this.element){const n=t.layout||R8();this.root=nU.layout(t,xU(this.board),n),this.updateMindNodeLocation(t)}updateMindNodeLocation(t){const{x:n,y:r,hGap:i,vGap:o}=this.root,s=n+i,a=r+o;di(this.root,f=>{f.x=f.x-s+t.points[0][0],f.y=f.y-a+t.points[0][1],hm.set(f.origin,f)})}}const MX=5,bX=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=[],o=[],s,a,f,h=null,d;return e.pointerDown=p=>{if(I.isReadonly(e)||I.hasBeenTextEditing(e)||!I.isPointer(e,en.selection)||!Wu(p)){t(p);return}const v=Bt(e,Ot(e,p.x,p.y)),w=Ye(e),E=qa(e,v);if(E&&ke.isMindElement(e,E)&&!qt.isMind(E)&&!gt.isAbstract(E)){const y=w.filter(A=>ke.isMindElement(e,A)&&!A.isRoot&&!gt.isAbstract(A));w.length>0&&w.includes(E)?(i=y,s=v):(i=[E],s=v)}i.length&&(o=eT(e,i)),t(p)},e.pointerMove=p=>{if(!e.options.readonly&&i.length&&s){const v=Bt(e,Ot(e,p.x,p.y));if(Et(s[0],s[1],v[0],v[1])<MX)return;ax(e,!0),f==null||f.remove();const E=Bt(e,Ot(e,p.x,p.y));h=$U(e,E,h,[...i,...o]),h!=null&&h.target&&(d=zU(e,h),f=QU(e,h,d),I.getHost(e).appendChild(f));const y=v[0]-s[0],S=v[1]-s[1];a==null||a.remove(),a=Gt(),[...i,...o].forEach(A=>{yT(A)}),i.forEach(A=>{const B=ZU(e,A,y,S);a==null||a.appendChild(B)}),I.getHost(e).appendChild(a);return}n(p)},e.globalPointerUp=p=>{const v=Sg(i);if(!e.options.readonly&&v.length){if(v.push(...o),a0(e)&&v.forEach(w=>{wT(w)}),h){const w=e.pathRef(d),E=pt.hasPrevious(d)&&e.pathRef(pt.previous(d)),y=e.pathRef(I.findPath(e,h.target));let S=tT(e,v);const A=v.filter(te=>!S.some(Ee=>Ee.abstract===te)).map(te=>gt.isAbstract(te)?U6(te):te);if(d[d.length-1]!==0){const te=Vt.get(e,pt.previous(d)),Ee=wp(te);if(Ee&&Ee.end!==d[d.length-1]-1){const ce=S.map(me=>U6(me.abstract));A.push(...ce),S=[]}}const R=iT(e,v);rT(e,d,A.length,!1,R),Pr.setAbstractsByRefs(e,R);let _=DT(e,v);const F=Vt.get(e,pt.parent(d));CT(F,h)&&y.current&&(_=ST(e,y.current.slice(0,1),A.length,_)),Pr.setRightNodeCountByRefs(e,_),fP.removeElements(e,v);let z=w.current;const Q=pt.parent(w.current||d);if(!z){const te=E&&E.unref();if(te)z=pt.next(te);else{const Ee=Vt.get(e,Q),ie=mc(Ee);z=[...Q,ie.length||0]}}Pr.insertNodes(e,A,z),S.length&&Pr.insertAbstractNodes(e,S,A,z),y.current&&w.current&&pt.isAncestor(y.current,w.current)&&h.target.isCollapsed&&Ve.setNode(e,{isCollapsed:!1},y.current),y.unref(),w.unref();let se=[];di(e,te=>{i.some(ie=>ie.id===te.id)&&se.push(te)}),Ve.addSelectionWithTemporaryElements(e,se)}ax(e,!1),i=[],a==null||a.remove(),a=void 0,f==null||f.remove(),f=void 0,h=null}r(p)},e},OX=e=>{const t=e,{pointerDown:n,pointerMove:r,pointerUp:i}=e;let o,s,a,f;return e.pointerDown=h=>{if(!Wu(h)||I.isReadonly(e)){n(h);return}const d=Ye(e).filter(v=>gt.isAbstract(v)),p=Bt(e,Ot(e,h.x,h.y));if(o=d.find(v=>(s=ET(e,v,p),s)),o){t!=null&&t.onAbstractResize&&t.onAbstractResize(Dg.start);return}n(h)},e.pointerMove=h=>{Ye(e);const d=Bt(e,Ot(e,h.x,h.y));if(a=rX(e,a,d),s&&o){const p=Co.getCorrectLayoutByElement(e,o),v=ci(p),w=ke.getParent(o);let E=w.children;const y=Co.getLayoutByElement(w);if(wo(y)){const se=w.rightNodeCount,{leftChildren:te,rightChildren:Ee}=mU(w);o.end<se&&(E=Ee),o.start>=se&&(E=te)}t!=null&&t.onAbstractResize&&t.onAbstractResize(Dg.resizing);const S=v?d[1]:d[0],A=ke.getNode(w),B=tX(e,s,E,o,A,v),R=Math.min(B.max,Math.max(B.min,S));let _=nX(e,E,R,v);if(s===fi.start&&_+1===o.start||s===fi.end&&_===o.end)f=void 0;else{if(wo(A.layout)){const se=A.origin.rightNodeCount;o.start>=se&&(_+=se)}f=s===fi.start?{start:_+1}:{end:_}}const z=pn.getElementRef(o).getGenerator(oc.key),Q=Og(e,[R,R]);z.updateAbstractOutline(o,s,v?Q[1]:Q[0])}r(h)},e.pointerUp=h=>{if(s=void 0,o){if(t!=null&&t.onAbstractResize&&t.onAbstractResize(Dg.end),f){const d=I.findPath(e,o);Ve.setNode(e,f,d)}else pn.getElementRef(o).getGenerator(oc.key).updateAbstractOutline(o);o=void 0;return}i(h)},e},IX=e=>{const t=e;return e.setPluginOptions(s7,{spaceBetweenEmojis:4,emojiPadding:0}),t},kX="m",FX=e=>{const t=e,{keyDown:n,pointerDown:r,pointerMove:i,pointerUp:o}=e;let s=null,a=null;t.pointerDown=h=>{const d=I.isPointer(e,Tf.mind);if(!I.isReadonly(e)&&B0(e)&&d){const p=Bt(e,Ot(e,h.x,h.y)),v=ox(t,p);Pr.insertMind(e,v),Ln.updatePointerType(e,en.selection);return}r(h)},t.pointerMove=h=>{if(I.isReadonly(e)){i(h);return}const d=I.isPointer(e,Tf.mind);Um(e)&&d?ju(e,"with-mind-create",()=>{let p=I.getMovingPointInBoard(e);if(p){p=Bt(t,Ot(e,p[0],p[1])),a=ox(t,p);const v=IU(t,a),w=k8(e,v,a),E=mT(t,v,a);if(s)s.textManage.updateRectangle(E),s.nodeG.remove(),s.nodeG=w,s.g.append(w),s.g.append(s.textManage.g);else{const y=new hp(e,{getRectangle:()=>E});y.draw(a.data.topic),s={g:Gt(),nodeG:w,textManage:y},s.g.classList.add("root"),s.g.setAttribute("plait-mind-temporary","true"),I.getHost(e).append(s.g),s.g.append(s.nodeG,y.g)}}}):f(),i(h)},t.pointerUp=h=>{if(a){Pr.insertMind(e,a),Ln.updatePointerType(e,en.selection),a=null,f();return}o(h)},e.keyDown=h=>{if(I.isReadonly(e)||Ye(e).length>0){n(h);return}if(h.key===kX&&!I.isPointer(e,Tf.mind)){Ln.updatePointerType(e,Tf.mind),d0(e,Vu.drawing),h.preventDefault();return}n(h)};function f(){s&&(s.textManage.destroy(),s.g.remove(),s=null)}return t},LX=e=>{const t=e,{keyDown:n,globalKeyDown:r}=t;return t.keyDown=i=>{const o=Ye(t),s=o.length===1,a=o.length===1&&ke.isMindElement(t,o[0]),f=o[0];if(kG(i)&&a&&!qt.isMind(f)&&f.children&&f.children.length>0){Ve.setNode(t,{isCollapsed:!f.isCollapsed},I.findPath(t,f));return}if(!I.isReadonly(t)){if(FG(i)&&a){i.preventDefault(),Pr.insertChildNode(t,f);return}if(LG(i)&&a&&!qt.isMind(f)&&!gt.isAbstract(f)){Pr.insertSiblingNode(t,f);return}if(!Q4(i)&&!e8(i)&&!J4(i)&&s&&ke.isMindElement(t,f)){i.preventDefault(),B8(f);return}}n(i)},t.globalKeyDown=i=>{if(I.isFocus(t)&&I.hasBeenTextEditing(t)&&cn.isHotkey("mod+z",i)){const{history:o}=t,{undos:s}=o,a=s.length>0?s[s.length-1][0]:void 0;a&&a.type==="insert_node"&&ke.isMindElement(t,a.node)&&qf(a.node).isEditing&&t.undo()}r(i)},t},_X=(e,t,n)=>{let r=null;const i=Bt(e,Ot(e,t.x,t.y));return di(e,o=>{if(r||!ke.isMindElement(e,o))return;dT(e,i,o)&&(r=o)},Xf(e),!0),n&&r&&n.element===r||(n&&IT(n.element),r?(HX(r),n?n.element=r:n={element:r}):n=null),n},NX=(e,t,n)=>{n&&IT(n.element)},HX=e=>{pn.getElementG(e).classList.add("hovered")},IT=e=>{var t,n;(n=(t=pn.getElementG(e))==null?void 0:t.classList)==null||n.remove("hovered")},GX=e=>{const{pointerMove:t,pointerLeave:n}=e;let r=null;return e.pointerMove=i=>{ju(e,"with-mind-node-hover-hit-test",()=>{r&&!pn.hasMounted(r.element)&&(r=null),r=_X(e,i,r)}),t(i)},e.pointerLeave=i=>{NX(e,i,r),r=null,n(i)},e},$X=e=>{const{keyDown:t,pointerUp:n,globalPointerUp:r,buildFragment:i,insertFragment:o,deleteFragment:s,afterChange:a}=e;return e.pointerUp=f=>{const h=No(e);if(h&&ke.isMindElement(e,h)&&!BO(f)&&(I.isReadonly(e)||!Wu(f)||!I.isPointer(e,en.selection))){B3(e,h),n(f);return}if(I.isReadonly(e)){n(f);return}const d=Bt(e,Ot(e,f.x,f.y)),p=qa(e,d),v=p&&ke.isMindElement(e,p)&&ke.hasImage(p)&&kU(e,p,d);if(v&&h&&p===h){s6(e),n(f);return}h&&ke.isMindElement(e,h)&&B3(e,h),v&&p&&(s6(e),NU(e,p)),n(f)},e.keyDown=f=>{const h=No(e);if(!I.isReadonly(e)&&h&&(Di.isDeleteBackward(f)||Di.isDeleteForward(f))){Kf(e,h),Pr.removeImage(e,h);return}t(f)},e.globalPointerUp=f=>{if(I.isFocus(e)){const h=f.target instanceof Node&&I.getBoardContainer(e).contains(f.target),d=No(e);d&&ke.isMindElement(e,d)&&!h&&B3(e,d)}r(f)},e.buildFragment=(f,h,d,p)=>{const v=No(e);return v&&(f=jI($a.medias,[v.data.image],"")),i(f,h,d,p)},e.deleteFragment=f=>{const h=No(e);h&&Pr.removeImage(e,h),s(f)},e.insertFragment=(f,h,d)=>{var E,y;const p=Ye(e),v=!!No(e),w=p.length===1&&ke.isMindElement(e,p[0]);if(v||w){if((E=f==null?void 0:f.files)!=null&&E.length){const S=uS.map(B=>"image/"+B),A=p[0]||No(e);if(S.includes(f.files[0].type)){const B=f.files[0];wS(e,B,pU,R=>{Pr.setImage(e,A,R)});return}}if((y=f==null?void 0:f.medias)!=null&&y.length){const S=p[0]||No(e);Pr.setImage(e,S,f.medias[0]);return}}o(f,h,d)},e.afterChange=()=>{a();const f=No(e);f&&ke.isMindElement(e,f)&&pn.getElementRef(f).getGenerator(ja.key).setFocus(f,!0)},e},WX=e=>{let t=null;return Qf(e,{key:"mind-node",canResize:()=>!0,hitTest:r=>{const i=jX(e,r);return i?{element:i,handle:null,cursorClass:Js.ew}:null},beforeResize:r=>{t={minWidth:Bn.getNodeResizableMinWidth(e,r.element),currentWidth:Bn.getNodeDynamicWidth(e,r.element),path:I.findPath(e,r.element),textManage:qf(r.element)}},onResize:(r,i)=>{let o=t.currentWidth+dt.getOffsetX(i.startPoint,i.endPoint);o<=t.minWidth&&(o=t.minWidth);const s=Vt.get(e,t.path);if(s&&Bn.getNodeTopicMinWidth(e,s)!==o){t.textManage.updateRectangleWidth(o);const{height:a}=t.textManage.getSize(void 0,o);Pr.setNodeManualWidth(e,s,o,a)}},afterResize:r=>{t=null}}),e},jX=(e,t)=>{const n=Ye(e).filter(r=>ke.isMindElement(e,r));if(n.length>0){const r=n.find(i=>{const o=zX(e,i);return sp(t[0],t[1],o)<=0});return r||null}return null},zX=(e,t)=>{const n=ke.getNode(t),r=Un(n);return{x:r.x+r.width-z6,y:r.y,width:z6*2,height:r.height}},VX=e=>(Qf(e,{key:"mind-node-image",canResize:()=>!0,hitTest:n=>{const r=No(e),i=r&&ke.isMindElement(e,r)?r:void 0;if(i){const o=FU(e,i,n);if(o)return{element:i,handle:o.handle,cursorClass:o.cursorClass}}return null},onResize:(n,r)=>{const i=dt.getOffsetX(r.startPoint,r.endPoint),o=n.element.data.image.width,s=n.element.data.image.height,a=n.path;let f=o+i;f<=100&&(f=100);const h=o/s,d=f/h,p={...n.element.data.image,width:f,height:d};Pr.setImage(e,Vt.get(e,a),p),CS(e,Vt.get(e,a))}}),e),UX=(e,t,n)=>{let r=[];const i=eT(e,t),o=tT(e,[...t,...i]),s=t.filter(f=>!o.find(h=>h.abstract===f));s.push(...o.map(f=>f.abstract));const a=s.map(f=>ke.getNode(f));return s.forEach((f,h)=>{const d=Un(a[h]),p=[[d.x-n[0],d.y-n[1]]],v=o.find(w=>w.abstract===f);if(gt.isAbstract(f)&&v){const{start:w,end:E}=nT(v,s);r.push({...f,points:p,start:w,end:E})}else if(gt.isAbstract(f)){let w={...f,points:p};delete w.start,delete w.end,r.push(w)}else r.push({...f,points:p})}),r},XX=(e,t,n,r)=>{let i,o;const s=Ye(e);let a=[];const f=s.length===1,h=s[0],d=h&&I.findPath(e,h),p=h&&mc(h).length;t.forEach((v,w)=>{if(i=hT(v),f&&r!==ru.duplicate){if(v.isRoot){i=LU(e,i);const{width:E,height:y}=hx(i,h);i.width=E,i.height=y}gt.isAbstract(i)&&(i.start=i.start+p,i.end=i.end+p),o=[...d,p+w]}else{const E=[n[0]+v.points[0][0],n[1]+v.points[0][1]];if(i.points=[E],gt.isAbstract(v)&&(i=U6(i)),!v.isRoot){i=_U(e,i);const{width:y,height:S}=hx(i);i.width=y,i.height=S}o=[e.children.length]}a.push(i),Ve.insertNode(e,i,o)}),Ve.addSelectionWithTemporaryElements(e,a)},KX=(e,t,n)=>{const{width:r,height:i}=f7(!1,qt.isMind(t),Qa(n)),o=h7(n,Math.max(r,OU(n)),i,{});Ve.insertNode(e,o,F8(e,t)),Ve.addSelectionWithTemporaryElements(e,[o])},hx=(e,t)=>f7(qt.isMind(e),t&&qt.isMind(t)||!1,e.data.topic,e.manualWidth),YX=e=>{const t=e;let n;const{getDeletedFragment:r,insertFragment:i,buildFragment:o,deleteFragment:s}=t;return t.getDeletedFragment=a=>{const f=vv(t);if(f.length){n=Sg(f).reverse();const h=iT(t,n);Pr.setAbstractsByRefs(t,h);const d=DT(t,f);Pr.setRightNodeCountByRefs(t,d);const p=Sg(f);a.push(...p)}return r(a)},t.deleteFragment=a=>{if(s(a),n){const f=qX(t,n);f&&Kf(t,f),n=null}},t.buildFragment=(a,f,h,d)=>{const p=vv(t,d),v=Sg(p);if(v.length){const w=UX(t,v,f?[f.x,f.y]:[0,0]),y={text:vS(p),type:$a.elements,elements:w};a=$m(a,y)}return o(a,f,h,d)},t.insertFragment=(a,f,h)=>{var d,p;if((d=a==null?void 0:a.elements)!=null&&d.length){const v=(p=a.elements)==null?void 0:p.filter(w=>ke.isMindElement(t,w));v&&v.length>0&&XX(t,v,f,h)}if(a!=null&&a.text){const v=vv(t);if(v.length===1){KX(t,v[0],Qa(a.text));return}}i(a,f,h)},t},qX=(e,t)=>{let n;const r=t[0],i=I.findPath(e,r);let o=i;if(pt.hasPrevious(i)&&(o=pt.previous(i)),gt.isAbstract(r)){const h=ke.getParent(r);t.includes(h.children[r.start])||(n=h.children[r.start])}try{n||(n=Vt.get(e,o))}catch{}const s=t[0],a=ke.findParent(s),f=t.every(h=>ke.findParent(h)===a);return a&&f&&!n&&(n=a),n},ZX=e=>{const t=e;return t.renderEmoji=(n,r)=>{throw new Error("No implementation for renderEmoji method.")},t},QX=e=>!(!e.data||!e.data.topic),JX=e=>!(Vo(e.width)||Vo(e.height)),eK=e=>{const t={children:[{text:""}]};if(e.data)e.data.topic||(e.data.topic=t);else{const n={topic:t};e.data=n}},tK=e=>{Vo(e.width)&&(e.width=56),Vo(e.height)&&(e.width=20)},kT=e=>{const t=e,{drawElement:n,dblClick:r,isRectangleHit:i,isHit:o,getRectangle:s,isMovable:a,isRecursion:f,isAlign:h,isImageBindingAllowed:d,canAddToGroup:p,canSetZIndex:v,isExpanded:w,getOneHitElement:E,normalizeElement:y}=t;return t.normalizeElement=S=>{qt.isMind(S.element)&&di(S.element,A=>{QX(A)||eK(A),JX(A)||tK(A)}),y(S)},t.drawElement=S=>qt.isMind(S.element)?RX:ke.isMindElement(t,S.element)?OT:n(S),t.applyTheme=S=>{const A=S,B=!I.isBoard(S)&&((A==null?void 0:A.branchColor)||(A==null?void 0:A.fill)||(A==null?void 0:A.strokeColor));if(qt.isMind(S)&&B){const R=I.findPath(t,S);Ve.setNode(t,{fill:null,strokeColor:null,branchColor:null},R)}},t.getRectangle=S=>ke.isMindElement(t,S)?(pn.hasMounted(S)||console.error("mind element has not been mounted"),Un(ke.getNode(S))):s(S),t.canAddToGroup=S=>ke.isMindElement(t,S)&&!S.isRoot?!1:p(S),t.canSetZIndex=S=>ke.isMindElement(t,S)&&!S.isRoot?!1:v(S),t.isRecursion=S=>ke.isMindElement(t,S)&&S.isCollapsed?!1:f(S),t.isRectangleHit=(S,A)=>{if(ke.isMindElement(t,S)){const B=Un(ke.getNode(S));return M.isHit(M.getRectangleByPoints([A.anchor,A.focus]),B)}return i(S,A)},t.isHit=(S,A,B)=>{if(ke.isMindElement(t,S)){const R=Un(ke.getNode(S));return M.isHit(M.getRectangleByPoints([A,A]),R)}return o(S,A,B)},t.getOneHitElement=S=>S.every(B=>ke.isMindElement(t,B))?S[0]:E(S),t.isMovable=S=>qt.isMind(S)&&S.isRoot?!0:a(S),t.isImageBindingAllowed=S=>ke.isMindElement(t,S)?!0:d(S),t.isAlign=S=>qt.isMind(S)&&S.isRoot?!0:h(S),t.isExpanded=S=>ke.isMindElement(t,S)&&!qt.isMind(S)?!S.isCollapsed:w(S),t.dblClick=S=>{if(I.isReadonly(t)){r(S);return}const A=Bt(t,Ot(t,S.x,S.y));t.children.filter(B=>qt.isMind(B)).forEach(B=>{di(B,R=>{!I.hasBeenTextEditing(t)&&dT(t,A,R)&&B8(R)},Xf(t))}),!I.hasBeenTextEditing(t)&&r(S)},ZX(WX(VX($X(GX(YX(LX(IX(FX(OX(bX(t)))))))))))};var xv={exports:{}},dx;function nK(){return dx||(dx=1,function(e){/*!mobile-detect v1.4.5 2021-03-13*//*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/(function(t,n){t(function(){var r={};r.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},r.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var i=Object.prototype.hasOwnProperty,o;r.FALLBACK_PHONE="UnknownPhone",r.FALLBACK_TABLET="UnknownTablet",r.FALLBACK_MOBILE="UnknownMobile",o="isArray"in Array?Array.isArray:function(p){return Object.prototype.toString.call(p)==="[object Array]"};function s(p,v){return p!=null&&v!=null&&p.toLowerCase()===v.toLowerCase()}function a(p,v){var w,E,y=p.length;if(!y||!v)return!1;for(w=v.toLowerCase(),E=0;E<y;++E)if(w===p[E].toLowerCase())return!0;return!1}function f(p){for(var v in p)i.call(p,v)&&(p[v]=new RegExp(p[v],"i"))}function h(p){return(p||"").substr(0,500)}(function(){var v,w,E,y,S,A,B=r.mobileDetectRules;for(v in B.props)if(i.call(B.props,v)){for(w=B.props[v],o(w)||(w=[w]),S=w.length,y=0;y<S;++y)E=w[y],A=E.indexOf("[VER]"),A>=0&&(E=E.substring(0,A)+"([\\w._\\+]+)"+E.substring(A+5)),w[y]=new RegExp(E,"i");B.props[v]=w}f(B.oss),f(B.phones),f(B.tablets),f(B.uas),f(B.utils),B.oss0={WindowsPhoneOS:B.oss.WindowsPhoneOS,WindowsMobileOS:B.oss.WindowsMobileOS}})(),r.findMatch=function(p,v){for(var w in p)if(i.call(p,w)&&p[w].test(v))return w;return null},r.findMatches=function(p,v){var w=[];for(var E in p)i.call(p,E)&&p[E].test(v)&&w.push(E);return w},r.getVersionStr=function(p,v){var w=r.mobileDetectRules.props,E,y,S,A;if(i.call(w,p)){for(E=w[p],S=E.length,y=0;y<S;++y)if(A=E[y].exec(v),A!==null)return A[1]}return null},r.getVersion=function(p,v){var w=r.getVersionStr(p,v);return w?r.prepareVersionNo(w):NaN},r.prepareVersionNo=function(p){var v;return v=p.split(/[a-z._ \/\-]/i),v.length===1&&(p=v[0]),v.length>1&&(p=v[0]+".",v.shift(),p+=v.join("")),Number(p)},r.isMobileFallback=function(p){return r.detectMobileBrowsers.fullPattern.test(p)||r.detectMobileBrowsers.shortPattern.test(p.substr(0,4))},r.isTabletFallback=function(p){return r.detectMobileBrowsers.tabletPattern.test(p)},r.prepareDetectionCache=function(p,v,w){if(p.mobile===n){var E,y,S;if(y=r.findMatch(r.mobileDetectRules.tablets,v),y){p.mobile=p.tablet=y,p.phone=null;return}if(E=r.findMatch(r.mobileDetectRules.phones,v),E){p.mobile=p.phone=E,p.tablet=null;return}r.isMobileFallback(v)?(S=d.isPhoneSized(w),S===n?(p.mobile=r.FALLBACK_MOBILE,p.tablet=p.phone=null):S?(p.mobile=p.phone=r.FALLBACK_PHONE,p.tablet=null):(p.mobile=p.tablet=r.FALLBACK_TABLET,p.phone=null)):r.isTabletFallback(v)?(p.mobile=p.tablet=r.FALLBACK_TABLET,p.phone=null):p.mobile=p.tablet=p.phone=null}},r.mobileGrade=function(p){var v=p.mobile()!==null;return p.os("iOS")&&p.version("iPad")>=4.3||p.os("iOS")&&p.version("iPhone")>=3.1||p.os("iOS")&&p.version("iPod")>=3.1||p.version("Android")>2.1&&p.is("Webkit")||p.version("Windows Phone OS")>=7||p.is("BlackBerry")&&p.version("BlackBerry")>=6||p.match("Playbook.*Tablet")||p.version("webOS")>=1.4&&p.match("Palm|Pre|Pixi")||p.match("hp.*TouchPad")||p.is("Firefox")&&p.version("Firefox")>=12||p.is("Chrome")&&p.is("AndroidOS")&&p.version("Android")>=4||p.is("Skyfire")&&p.version("Skyfire")>=4.1&&p.is("AndroidOS")&&p.version("Android")>=2.3||p.is("Opera")&&p.version("Opera Mobi")>11&&p.is("AndroidOS")||p.is("MeeGoOS")||p.is("Tizen")||p.is("Dolfin")&&p.version("Bada")>=2||(p.is("UC Browser")||p.is("Dolfin"))&&p.version("Android")>=2.3||p.match("Kindle Fire")||p.is("Kindle")&&p.version("Kindle")>=3||p.is("AndroidOS")&&p.is("NookTablet")||p.version("Chrome")>=11&&!v||p.version("Safari")>=5&&!v||p.version("Firefox")>=4&&!v||p.version("MSIE")>=7&&!v||p.version("Opera")>=10&&!v?"A":p.os("iOS")&&p.version("iPad")<4.3||p.os("iOS")&&p.version("iPhone")<3.1||p.os("iOS")&&p.version("iPod")<3.1||p.is("Blackberry")&&p.version("BlackBerry")>=5&&p.version("BlackBerry")<6||p.version("Opera Mini")>=5&&p.version("Opera Mini")<=6.5&&(p.version("Android")>=2.3||p.is("iOS"))||p.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||p.version("Opera Mobi")>=11&&p.is("SymbianOS")?"B":(p.version("BlackBerry")<5||p.match("MSIEMobile|Windows CE.*Mobile")||p.version("Windows Mobile")<=5.2,"C")},r.detectOS=function(p){return r.findMatch(r.mobileDetectRules.oss0,p)||r.findMatch(r.mobileDetectRules.oss,p)},r.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height};function d(p,v){this.ua=h(p),this._cache={},this.maxPhoneWidth=v||600}return d.prototype={constructor:d,mobile:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===n&&(this._cache.userAgent=r.findMatch(r.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===n&&(this._cache.userAgents=r.findMatches(r.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===n&&(this._cache.os=r.detectOS(this.ua)),this._cache.os},version:function(p){return r.getVersion(p,this.ua)},versionStr:function(p){return r.getVersionStr(p,this.ua)},is:function(p){return a(this.userAgents(),p)||s(p,this.os())||s(p,this.phone())||s(p,this.tablet())||a(r.findMatches(r.mobileDetectRules.utils,this.ua),p)},match:function(p){return p instanceof RegExp||(p=new RegExp(p,"i")),p.test(this.ua)},isPhoneSized:function(p){return d.isPhoneSized(p||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===n&&(this._cache.grade=r.mobileGrade(this)),this._cache.grade}},typeof window<"u"&&window.screen?d.isPhoneSized=function(p){return p<0?n:r.getDeviceSmallerSide()<=p}:d.isPhoneSized=function(){},d._impl=r,d.version="1.4.5 2021-03-13",d})})(function(t){if(e.exports)return function(n){e.exports=n()};if(typeof window<"u")return function(n){window.MobileDetect=n()};throw new Error("unknown environment")}())}(xv)),xv.exports}var rK=nK();const iK=uc(rK),gx=e=>b.jsx("span",{className:"mind-node-emoji",style:{fontSize:`${e.fontSize}px`},children:e.emojiItem.name}),oK=e=>{const t=e;return e.setPluginOptions(s7,{emojiPadding:0,spaceBetweenEmojis:4}),t.renderEmoji=(n,r)=>{const i=document.createElement("span");n.appendChild(i);const o=Tm.createRoot(i);o.render(b.jsx(gx,{...r}));let s={...r};return{destroy:()=>{setTimeout(()=>{o.unmount()},0)},update:f=>{s={...s,...f},o.render(b.jsx(gx,{...s}))}}},t},px=e=>b.jsx("div",{children:b.jsx("img",{src:e.imageItem.url,draggable:"false",width:"100%"})});var Jg=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(Jg||{});const N8={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},H8={json:"application/json",drawnix:"application/vnd.drawnix+json",...N8},sK={drawnix:1},G8=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),uK=G8?Promise.resolve().then(function(){return dK}):Promise.resolve().then(function(){return wK});async function aK(...e){return(await uK).default(...e)}G8?Promise.resolve().then(function(){return pK}):Promise.resolve().then(function(){return xK});const lK=G8?Promise.resolve().then(function(){return vK}):Promise.resolve().then(function(){return PK});async function cK(...e){return(await lK).default(...e)}const fK=async e=>{const t=await e.getFile();return t.handle=e,t};var hK=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach((i,o)=>{t[o]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(s=>{t[o].accept[s]=i.extensions||[]}):t[o].accept["*/*"]=i.extensions||[]});const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),r=await Promise.all(n.map(fK));return e[0].multiple?r:r[0]},dK={__proto__:null,default:hK};function R3(e){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(i){return{value:i,done:r}})}return R3=function(n){this.s=n,this.n=n.next},R3.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return r===void 0?Promise.resolve({value:n,done:!0}):t(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return r===void 0?Promise.reject(n):t(r.apply(this.s,arguments))}},new R3(e)}const FT=async(e,t,n=e.name,r)=>{const i=[],o=[];var s,a=!1,f=!1;try{for(var h,d=function(p){var v,w,E,y=2;for(typeof Symbol<"u"&&(w=Symbol.asyncIterator,E=Symbol.iterator);y--;){if(w&&(v=p[w])!=null)return v.call(p);if(E&&(v=p[E])!=null)return new R3(v.call(p));w="@@asyncIterator",E="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());a=!(h=await d.next()).done;a=!1){const p=h.value,v=`${n}/${p.name}`;p.kind==="file"?o.push(p.getFile().then(w=>(w.directoryHandle=e,w.handle=p,Object.defineProperty(w,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>v})))):p.kind!=="directory"||!t||r&&r(p)||i.push(FT(p,t,v,r))}}catch(p){f=!0,s=p}finally{try{a&&d.return!=null&&await d.return()}finally{if(f)throw s}}return[...(await Promise.all(i)).flat(),...await Promise.all(o)]};var gK=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await t.values()).next()).done?[t]:FT(t,e.recursive,void 0,e.skipDirectory)},pK={__proto__:null,default:gK},mK=async(e,t=[{}],n=null,r=!1,i=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const o=[];let s=null;if(e instanceof Blob&&e.type?s=e.type:e.headers&&e.headers.get("content-type")&&(s=e.headers.get("content-type")),t.forEach((h,d)=>{o[d]={description:h.description||"Files",accept:{}},h.mimeTypes?(d===0&&s&&h.mimeTypes.push(s),h.mimeTypes.map(p=>{o[d].accept[p]=h.extensions||[]})):s?o[d].accept[s]=h.extensions||[]:o[d].accept["*/*"]=h.extensions||[]}),n)try{await n.getFile()}catch(h){if(n=null,r)throw h}const a=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:o,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&i&&i(a);const f=await a.createWritable();return"stream"in e?(await e.stream().pipeTo(f),a):"body"in e?(await e.body.pipeTo(f),a):(await f.write(await e),await f.close(),a)},vK={__proto__:null,default:mK},yK=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((t,n)=>{const r=document.createElement("input");r.type="file";const i=[...e.map(f=>f.mimeTypes||[]),...e.map(f=>f.extensions||[])].join();r.multiple=e[0].multiple||!1,r.accept=i||"",r.style.display="none",document.body.append(r);const o=f=>{typeof s=="function"&&s(),t(f)},s=e[0].legacySetup&&e[0].legacySetup(o,()=>s(n),r),a=()=>{window.removeEventListener("focus",a),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",a)}),r.addEventListener("change",()=>{window.removeEventListener("focus",a),r.remove(),o(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),wK={__proto__:null,default:yK},CK=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((t,n)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const i=s=>{typeof o=="function"&&o(),t(s)},o=e[0].legacySetup&&e[0].legacySetup(i,()=>o(n),r);r.addEventListener("change",()=>{let s=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(s=s.filter(a=>a.webkitRelativePath.split("/").every(f=>!e[0].skipDirectory({name:f,kind:"directory"})))):s=s.filter(a=>a.webkitRelativePath.split("/").length===2),i(s)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),xK={__proto__:null,default:CK},EK=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let r=e;"body"in e&&(r=await async function(s,a){const f=s.getReader(),h=new ReadableStream({start:v=>async function w(){return f.read().then(({done:E,value:y})=>{if(!E)return v.enqueue(y),w();v.close()})}()}),d=new Response(h),p=await d.blob();return f.releaseLock(),new Blob([p],{type:a})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await r);const i=()=>{typeof o=="function"&&o()},o=t.legacySetup&&t.legacySetup(i,()=>o(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),i()}),n.click(),null},PK={__proto__:null,default:EK};const LT=e=>{var r,i;const t=(r=e.extensions)==null?void 0:r.reduce((o,s)=>(o.push(H8[s]),o),[]),n=(i=e.extensions)==null?void 0:i.reduce((o,s)=>s==="jpg"?o.concat(".jpg",".jpeg"):o.concat(`.${s}`),[]);return aK({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1})},SK=(e,t)=>cK(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`]},t.fileHandle);var $8=(e=>(e.drawnix="drawnix",e))($8||{});const DK=()=>new Date().getTime().toString(),_T=async(e,t=DK())=>{const n=BK(e),r=new Blob([n],{type:H8.drawnix});return{fileHandle:await SK(r,{name:t,extension:"drawnix",description:"Drawnix file"})}},TK=async e=>{const t=await LT({description:"Drawnix files"});return RK(e,await OK(t))},AK=e=>e&&e.type===$8.drawnix&&Array.isArray(e.elements)&&typeof e.viewport=="object",BK=e=>{const t={type:$8.drawnix,version:sK.drawnix,source:"web",elements:e.children,viewport:e.viewport};return JSON.stringify(t,null,2)},RK=async(e,t)=>{const n=await IK(t);let r;try{if(r=JSON.parse(n),AK(r))return r;throw new Error("Error: invalid file")}catch{throw new Error("Error: invalid file")}},MK=(e,t,n)=>new File([e],n||"",{type:t}),bK=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const r=new FileReader;r.onload=i=>{var o;if(!((o=i.target)!=null&&o.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(i.target.result)},r.readAsArrayBuffer(e)}),OK=async e=>{var t;return e.type||(t=e==null?void 0:e.name)!=null&&t.endsWith(".drawnix")&&(e=MK(await bK(e),H8.drawnix,e.name)),e},IK=async e=>{let t;return"text"in Blob?t=await e.text():t=await new Promise(n=>{const r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&n(r.result)}}),t},kK=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),mx=e=>!!e&&Object.values(N8).includes(e),FK=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),LK=(e,t,n)=>{const r=e.width>n?n:e.width,i=r/e.width*e.height;return{url:t,width:r,height:i}},K6=async(e,t,n,r)=>{const i=Ye(e)[0]||No(e),o=i?240:400,s=await kK(t),a=await FK(s),f=LK(a,s,o),h=n&&qa(e,n);if(r&&h&&ke.isMindElement(e,h)){Pr.setImage(e,h,f);return}i&&ke.isMindElement(e,i)&&!r?Pr.setImage(e,i,f):$i.insertImage(e,f,n)},_K=e=>{const t=e,{insertFragment:n,drop:r}=t;return t.insertFragment=(i,o,s)=>{var a;if((a=i==null?void 0:i.files)!=null&&a.length&&mx(i.files[0].type)){const f=i.files[0];K6(e,f,o,!1);return}n(i,o,s)},t.drop=i=>{var o,s;if((s=(o=i.dataTransfer)==null?void 0:o.files)!=null&&s.length){const a=i.dataTransfer.files[0];if(mx(a.type)){const f=Bt(e,Ot(e,i.x,i.y));return K6(e,a,f,!0),!0}}return r(i)},t},NT=e=>{const t=e;return t.renderImage=(n,r)=>{const i=Tm.createRoot(n);i.render(b.jsx(px,{...r}));let o={...r};return{destroy:()=>{setTimeout(()=>{i.unmount()},0)},update:a=>{o={...o,...a},i.render(b.jsx(px,{...o}))}}},_K(t)},Ts=Pt.forwardRef(({children:e,padding:t,className:n,style:r,...i},o)=>b.jsx("div",{className:Dn("island",n),style:{"--padding":t,...r},ref:o,...i,children:e})),NK=$.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>b.jsx("div",{className:Dn("stack stack_horizontal",i),style:{"--gap":t,alignItems:n,justifyContent:r,...o},ref:s,children:e})),HK=$.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>b.jsx("div",{className:Dn("stack stack_vertical",i),style:{"--gap":t,justifyItems:n,justifyContent:r,...o},ref:s,children:e})),$o={Row:NK,Col:HK};class GK extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}const $K=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,WK=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(i){if(e==null||e(i),!n||!(i!=null&&i.defaultPrevented))return t==null?void 0:t(i)},jK=e=>{const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]);let i=r.length;const o=new Uint8Array(i);for(;i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})},zK=(e,t={})=>$I(e,{fillStyle:"transparent",inlineStyleClassNames:".extend,.emojis,.text",padding:20,ratio:4,...t});function VK(e,t){const n=document.createElement("a"),r=window.URL.createObjectURL(e);n.href=r,n.download=t,document.body.append(n),n.click(),window.URL.revokeObjectURL(r),n.remove()}const HT=(e,t)=>{const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},vx=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),j3||KO?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),Kn=Pt.forwardRef((e,t)=>{const{id:n}={id:"drawnix"},r=Pt.useRef(null);Pt.useImperativeHandle(t,()=>r.current);const i=`tool-icon_size_${e.size||"medium"}`,[o,s]=$.useState(!1),a=$.useRef(!0),f=async d=>{var v;const p="onClick"in e&&((v=e.onClick)==null?void 0:v.call(e,d));if($K(p))try{s(!0),await p}catch(w){if(w instanceof GK)console.warn(w);else throw w}finally{a.current&&s(!1)}};$.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]);const h=$.useRef(null);if(e.type==="button"||e.type==="icon"||e.type==="submit"){const d=e.type==="icon"?"button":e.type;return b.jsxs("button",{className:Dn("tool-icon_type_button",i,e.className,e.visible&&!e.hidden?"tool-icon_type_button--show":"tool-icon_type_button--hide",{"tool-icon":!e.hidden,"tool-icon--selected":e.selected}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:d,onClick:f,onPointerDown:p=>{var v;(v=e.onPointerDown)==null||v.call(e,{pointerType:p.pointerType||null,event:p})},onPointerUp:p=>{var v;(v=e.onPointerUp)==null||v.call(e,{pointerType:p.pointerType||null})},ref:r,disabled:o||!!e.disabled,children:[(e.icon||e.label)&&b.jsxs("div",{className:"tool-icon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&b.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]}),e.showAriaLabel&&b.jsx("div",{className:"tool-icon__label",children:e["aria-label"]}),e.children&&b.jsx("div",{className:"tool-icon__icon",children:e.children})]})}return b.jsxs("label",{className:Dn("tool-icon",e.className),title:e.title,onPointerDown:d=>{var p;h.current=d.pointerType||null,(p=e.onPointerDown)==null||p.call(e,{pointerType:d.pointerType||null,event:d})},onPointerUp:d=>{var p;(p=e.onPointerUp)==null||p.call(e,{pointerType:d.pointerType||null}),requestAnimationFrame(()=>{h.current=null})},children:[b.jsx("input",{className:`tool-icon_type_radio ${i}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${n}-${e.id}`,onChange:()=>{var d;(d=e.onChange)==null||d.call(e,{pointerType:h.current})},checked:e.checked,ref:r}),b.jsxs("div",{className:"tool-icon__icon",children:[e.icon,e.keyBindingLabel&&b.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]})]})});Kn.displayName="ToolButton";const Ut=e=>e,UK=Ut(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"Hand",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.44583468,0.500225887 C9.07406934,0.510185679 9.54739531,0.839591366 9.86192311,1.34305279 C9.89696656,1.39914649 9.92878401,1.45492964 9.9576026,1.50991157 L9.9576026,1.50991157 L10.0210033,1.64201027 L10.061978,1.62350755 C10.1972891,1.56834247 10.3444107,1.53218464 10.5027907,1.51755353 L10.5027907,1.51755353 L10.6649031,1.51019133 C11.4883708,1.51019133 12.0208782,1.99343346 12.3023042,2.66393278 C12.3903714,2.87392911 12.4344191,3.10047818 12.4339446,3.3257952 L12.4339446,3.3257952 L12.4360033,3.80501027 L12.5160535,3.78341501 C12.6124478,3.76124046 12.7138812,3.74739854 12.820201,3.74250274 L12.820201,3.74250274 L12.9833264,3.74194533 C13.6121166,3.7657478 14.0645887,4.0801724 14.3087062,4.56112689 C14.4521117,4.8436609 14.4987984,5.11349437 14.4999262,5.33449618 L14.4999262,5.33449618 L14.3922653,12.049414 C14.3784752,12.909177 14.0717787,13.7360948 13.5212406,14.3825228 C13.4055676,14.5183496 13.2843697,14.643961 13.1582361,14.7596335 C12.4634771,15.3967716 11.755103,15.6538706 11.1897396,15.7000055 L11.1897396,15.7000055 L7.4723083,15.6798158 C7.14276373,15.634268 6.81580098,15.5154267 6.49455235,15.3472501 C6.25643701,15.2225944 6.06881706,15.0975452 5.88705731,14.9494308 L5.88705731,14.9494308 L2.55198782,11.500873 C2.39559475,11.3769079 2.17626793,11.1748532 1.9548636,10.9139403 C1.57867502,10.4706225 1.33501976,10.0139923 1.30330257,9.52833025 C1.28093191,9.18578476 1.37200912,8.85641102 1.5826788,8.56872564 C1.82538833,8.23725279 2.12881965,8.02107162 2.47470569,7.92957033 C2.95807982,7.80169771 3.42705723,7.92468989 3.86509644,8.18731167 C4.04431391,8.29475961 4.1816109,8.40304483 4.26225571,8.47866867 L4.26225571,8.47866867 L4.61400328,8.79701027 L4.57247249,3.59275349 L4.57628524,3.46204923 C4.5897691,3.23444442 4.64087578,2.95701848 4.75937106,2.66961597 C5.01017272,2.06131302 5.49670227,1.64692543 6.21363856,1.60818786 C6.44223508,1.59583681 6.65042099,1.62176802 6.83696985,1.68057551 L6.83696985,1.68057551 L6.86400328,1.69001027 C6.88501862,1.63593052 6.90764242,1.58175442 6.9331867,1.52672633 L6.9331867,1.52672633 L7.01883595,1.35955614 C7.31549194,0.832047939 7.79476072,0.48993549 8.44583468,0.500225887 Z M8.42684173,1.70001476 C8.26825412,1.69756905 8.16339456,1.77242008 8.06478367,1.94776814 C8.03967773,1.99241107 8.01831703,2.03811495 8.00083464,2.07855067 L8.00083464,2.07855067 L7.94879157,2.2035905 L7.94354455,2.20731401 L7.943,3.161 L7.97170661,3.16123746 L7.97170661,7.60991883 L6.77170661,7.60991883 L6.771,3.338 L6.74362358,3.33880359 C6.74284189,3.29064626 6.73014163,3.20282206 6.7002616,3.11094408 L6.66446012,3.01903385 C6.58982025,2.85766739 6.49843292,2.79455071 6.27838133,2.80644008 C6.07001018,2.81769881 5.95642108,2.91444507 5.86877664,3.12702089 C5.79792279,3.29887224 5.77228127,3.48655908 5.77246879,3.58977183 L5.77246879,3.58977183 L5.83613619,11.5252021 L3.41863956,9.33477657 L3.31637296,9.25979571 L3.24805011,9.21651224 C3.06096922,9.10434987 2.89279975,9.06024641 2.78159879,9.0896637 C2.71007735,9.10858411 2.63607367,9.1613084 2.55086305,9.27768211 C2.51020424,9.33320478 2.49638061,9.38319687 2.50075171,9.4501283 C2.51206889,9.62341997 2.64503022,9.87260054 2.86983366,10.1375191 C3.03268834,10.3294345 3.19762053,10.4813781 3.35554956,10.6131022 L3.35554956,10.6131022 L6.68454317,14.0569073 C6.71106575,14.0773808 6.74806086,14.1037158 6.79369091,14.1335929 L6.79369091,14.1335929 L6.95464838,14.2315311 L7.05111031,14.2841211 C7.25978123,14.3933622 7.46253523,14.4670573 7.55685495,14.4854708 L7.55685495,14.4854708 L11.1407985,14.5022108 C11.1503576,14.5013899 11.1627905,14.4997539 11.1779002,14.4971772 L11.1779002,14.4971772 L11.2991076,14.4694224 C11.3491682,14.4557375 11.4083624,14.437284 11.4751158,14.4130563 C11.769383,14.3062543 12.066676,14.1324596 12.3471758,13.8752234 C12.4371203,13.7927386 12.5240597,13.7026333 12.607654,13.6044743 C12.9760464,13.1719172 13.183059,12.6137678 13.1924195,12.030173 L13.1924195,12.030173 L13.3000132,5.32832551 C13.2997939,5.29016685 13.2826117,5.19085946 13.2386527,5.10425262 C13.1843838,4.99733326 13.1129774,4.94771265 12.9379578,4.94108739 C12.6814739,4.93138871 12.534132,5.11189595 12.4756792,5.39480062 L12.4768718,7.52734922 L11.2768718,7.52734922 L11.276,5.688 L11.2462883,5.6883208 L11.2339541,3.32771285 C11.2341,3.2560396 11.2209054,3.18817621 11.1957482,3.12818892 C11.0820579,2.85732094 10.9199288,2.71019133 10.6649031,2.71019133 C10.456829,2.71019133 10.3197487,2.87378067 10.2524297,3.11264939 L10.2530225,7.512783 L9.05302254,7.512783 L9.053,3.288 L9.01554331,3.28724203 L8.98800328,2.29901027 L8.9629175,2.22263368 C8.94515567,2.17417174 8.92167756,2.11937748 8.8924232,2.06330056 L8.8924232,2.06330056 L8.84420197,1.9788544 C8.72758855,1.79219249 8.59915015,1.70280728 8.42684173,1.70001476 Z"})})})),XK=Ut(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"selection",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M1.38232686,2.38218266 L5.4143451,14.2246629 L5.45540179,14.3136477 C5.6738376,14.7029541 6.25143564,14.7273637 6.49230627,14.3232393 L8.11486037,11.5990854 L10.8833927,14.4351257 C11.1162256,14.673686 11.4988798,14.6767204 11.7354668,14.4418826 L14.1933351,12.0021862 L14.263123,11.9192708 C14.4260847,11.6858139 14.4039042,11.3621027 14.1959502,11.1531274 L11.3598604,8.30408543 L14.0003903,6.44278167 C14.4042341,6.15799031 14.3099422,5.5344405 13.8399491,5.38178897 L2.13023795,1.60291226 C1.65322163,1.44797961 1.20794286,1.91192855 1.38232686,2.38218266 Z M2.93689198,3.12556703 L12.3288604,6.15308543 L10.0883903,7.73315528 L10.0121747,7.79676991 C9.78025886,8.02517222 9.77056424,8.40723513 10.0088753,8.64671667 L12.9218604,11.5730854 L11.3198604,13.1630854 L8.42938714,10.2026992 L8.35682877,10.1391916 C8.07802132,9.93187508 7.66955488,10.0042813 7.48460396,10.3145856 L6.10286037,12.6310854 L2.93689198,3.12556703 Z"})})})),KK=Ut(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"Mind",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M14.5,1.5 C15.3284271,1.5 16,2.17157288 16,3 L16,4.5 C16,5.32842712 15.3284271,6 14.5,6 L10.5,6 C9.70541385,6 9.05512881,5.38217354 9.00332687,4.60070262 L7.75,4.6 C6.70187486,4.6 5.75693372,5.0417832 5.09122946,5.7492967 L5.5,5.75 C6.32842712,5.75 7,6.42157288 7,7.25 L7,8.75 C7,9.57842712 6.32842712,10.25 5.5,10.25 L4.69703093,10.2512226 C5.3493111,11.2442937 6.47308134,11.9 7.75,11.9 L9.004,11.9 L9.00686658,11.85554 C9.07955132,11.0948881 9.72030388,10.5 10.5,10.5 L14.5,10.5 C15.3284271,10.5 16,11.1715729 16,12 L16,13.5 C16,14.3284271 15.3284271,15 14.5,15 L10.5,15 C9.67157288,15 9,14.3284271 9,13.5 L9,13.1 L7.75,13.1 C5.78479628,13.1 4.09258608,11.9311758 3.33061658,10.2507745 L1.5,10.25 C0.671572875,10.25 0,9.57842712 0,8.75 L0,7.25 C0,6.42157288 0.671572875,5.75 1.5,5.75 L3.5932906,5.74973863 C4.44206161,4.34167555 5.98606075,3.4 7.75,3.4 L9,3.4 L9,3 C9,2.17157288 9.67157288,1.5 10.5,1.5 L14.5,1.5 Z M14.5,11.7 L10.5,11.7 C10.3343146,11.7 10.2,11.8343146 10.2,12 L10.2,13.5 C10.2,13.6656854 10.3343146,13.8 10.5,13.8 L14.5,13.8 C14.6656854,13.8 14.8,13.6656854 14.8,13.5 L14.8,12 C14.8,11.8343146 14.6656854,11.7 14.5,11.7 Z M5.5,6.95 L1.5,6.95 C1.33431458,6.95 1.2,7.08431458 1.2,7.25 L1.2,8.75 C1.2,8.91568542 1.33431458,9.05 1.5,9.05 L5.5,9.05 C5.66568542,9.05 5.8,8.91568542 5.8,8.75 L5.8,7.25 C5.8,7.08431458 5.66568542,6.95 5.5,6.95 Z M14.5,2.7 L10.5,2.7 C10.3343146,2.7 10.2,2.83431458 10.2,3 L10.2,4.5 C10.2,4.66568542 10.3343146,4.8 10.5,4.8 L14.5,4.8 C14.6656854,4.8 14.8,4.66568542 14.8,4.5 L14.8,3 C14.8,2.83431458 14.6656854,2.7 14.5,2.7 Z"})})})),YK=Ut(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"geometry",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M9.3,6.7 L1.7,6.7 L1.7,14.3 L9.3,14.3 L9.3,6.7 Z M10.5,9.8 C12.8748244,9.8 14.8,7.87482442 14.8,5.5 C14.8,3.12517558 12.8748244,1.2 10.5,1.2 C8.12517558,1.2 6.2,3.12517558 6.2,5.5 L9.5,5.5 C10.0522847,5.5 10.5,5.94771525 10.5,6.5 L10.5,9.8 Z M10.5,14.5 C10.5,15.0522847 10.0522847,15.5 9.5,15.5 L1.5,15.5 C0.94771525,15.5 0.5,15.0522847 0.5,14.5 L0.5,6.5 C0.5,5.94771525 0.94771525,5.5 1.5,5.5 L5,5.5 C5,2.46243388 7.46243388,0 10.5,0 C13.5375661,0 16,2.46243388 16,5.5 C16,8.53756612 13.5375661,11 10.5,11 L10.5,14.5 Z"})})})),qK=Ut(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"font",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M4.75,14.5069828 C4.41862915,14.5069828 4.15,14.2383536 4.15,13.9069828 C4.15,13.5756119 4.41862915,13.3069828 4.75,13.3069828 L7.3993606,13.306 L7.3993606,2.7 L2.7113606,2.7 L2.7113606,4.10415313 C2.7113606,4.40238689 2.49377099,4.64979988 2.20868371,4.69630014 L2.1113606,4.70415313 C1.77998975,4.70415313 1.5113606,4.43552397 1.5113606,4.10415313 L1.5113606,2.1 C1.5113606,1.76862915 1.77998975,1.5 2.1113606,1.5 L13.8810378,1.5 C14.2124087,1.5 14.4810378,1.76862915 14.4810378,2.1 L14.4810378,4.10415313 C14.4810378,4.43552397 14.2124087,4.70415313 13.8810378,4.70415313 C13.549667,4.70415313 13.2810378,4.43552397 13.2810378,4.10415313 L13.2810378,2.7 L8.5993606,2.7 L8.5993606,13.306 L11.25,13.3069828 C11.5813708,13.3069828 11.85,13.5756119 11.85,13.9069828 C11.85,14.2383536 11.5813708,14.5069828 11.25,14.5069828 L4.75,14.5069828 Z"})})})),ZK=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"straight-line",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",id:"",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),QK=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:b.jsx("path",{d:"M3 3h18v18H3z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})),JK=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:b.jsx("g",{id:"terminal",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),eY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"ellipse",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M8,2.2 C4.79674845,2.2 2.2,4.79674845 2.2,8 C2.2,11.2032515 4.79674845,13.8 8,13.8 C11.2032515,13.8 13.8,11.2032515 13.8,8 C13.8,4.79674845 11.2032515,2.2 8,2.2 Z"})})})),tY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{id:"triangle",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.23125547,1.21366135 C8.3114266,1.25857939 8.37766784,1.32472334 8.42270367,1.40482837 L15.6471754,14.2549655 C15.7825042,14.4956743 15.6970768,14.800513 15.456368,14.9358418 C15.3815505,14.977905 15.2971646,15 15.2113335,15 L0.787227066,15 C0.511084691,15 0.287227066,14.7761424 0.287227066,14.5 C0.287227066,14.414418 0.309194147,14.3302684 0.351025556,14.2556064 L7.55066033,1.40546924 C7.6856352,1.1645618 7.99034802,1.07868648 8.23125547,1.21366135 Z M7.98695902,3.07926294 L1.98095902,13.7992629 L14.014959,13.7992629 L7.98695902,3.07926294 Z"})})})),nY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M13.7636471,2.6449804 C13.7716713,2.69552516 13.7718878,2.74700226 13.7642892,2.79761274 L12.3875778,11.9671885 C12.3550099,12.1841069 12.184864,12.3544698 11.9679874,12.3873141 L2.78433018,13.7781116 C2.511301,13.8194599 2.25644773,13.6316454 2.21509947,13.3586162 C2.20737253,13.307594 2.20759072,13.2556831 2.21574631,13.2047277 L3.67471119,4.08923146 C3.70888725,3.87570215 3.87646006,3.70834166 4.09003253,3.67443635 L13.1914362,2.22955927 C13.4641633,2.18626298 13.7203508,2.37225335 13.7636471,2.6449804 Z M12.4355704,3.5645263 L4.77957044,4.7795263 L3.55157044,12.4485263 L11.2775704,11.2775263 L12.4355704,3.5645263 Z",transform:"translate(7.989647, 8.003560) rotate(-315.000000) translate(-7.989647, -8.003560) "})})})),rY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M15.3062871,3.5 C15.5824294,3.5 15.8062871,3.72385763 15.8062871,4 C15.8062871,4.05374105 15.7976231,4.10713065 15.7806287,4.15811388 L13.113962,12.1581139 C13.045905,12.362285 12.8548356,12.5 12.6396204,12.5 L0.693712943,12.5 C0.417570568,12.5 0.193712943,12.2761424 0.193712943,12 C0.193712943,11.946259 0.202376883,11.8928694 0.219371294,11.8418861 L2.88603796,3.84188612 C2.95409498,3.63771505 3.14516441,3.5 3.36037961,3.5 L15.3062871,3.5 Z M14.335,4.7 L3.864,4.7 L1.664,11.3 L12.134,11.3 L14.335,4.7 Z"})})})),iY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),oY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),sY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51458753,6.62591207 L6.16858753,6.62651279 L6.16914066,12.0061269 C6.16914066,12.3043606 5.95155104,12.5517736 5.66646377,12.5982739 L5.56914066,12.6061269 L0.534587532,12.6061269 C0.203216682,12.6061269 -0.0654124678,12.3374977 -0.0654124678,12.0061269 C-0.0654124678,11.674756 0.203216682,11.4061269 0.534587532,11.4061269 L4.96858753,11.4055128 L4.96914066,6.02651279 C4.96914066,5.72827903 5.18673027,5.48086604 5.47181754,5.43436578 L5.56914066,5.42651279 L9.51458753,5.42591207 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),uY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51423005,6.39035523 C5.97984781,6.85936966 3.21691607,9.08498364 1.18879108,13.1285821 C1.04022695,13.4247836 0.679673152,13.5444674 0.383471635,13.3959033 C0.0872701176,13.2473391 -0.0324136308,12.8867853 0.116150501,12.5905838 C2.34388813,8.14900524 5.48945543,5.65776043 9.51468497,5.18078677 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),aY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:b.jsxs("g",{strokeWidth:"1.5",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),b.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),b.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),b.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})),lY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:b.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"})})),cY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:b.jsxs("g",{strokeWidth:"1.25",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),b.jsx("path",{d:"M15 8h.01"}),b.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),b.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),b.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),b.jsx("path",{d:"M19 16v6"}),b.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})})),fY=Ut(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"zoom-out",stroke:"none",fill:"currentColor",strokeWidth:"1",children:b.jsx("path",{fillRule:"nonzero",d:"M6.85,2.73225886e-13 C10.6331505,2.73225886e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.58522109e-14,10.6331505 4.58522109e-14,6.85 C4.58522109e-14,3.06684946 3.06684946,2.73225886e-13 6.85,2.73225886e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M4.6,6.2 L9.12944565,6.2 C9.4608165,6.2 9.72944565,6.46862915 9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L4.6,7.4 C4.26862915,7.4 4,7.13137085 4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L9.12944565,6.2 Z"})})})),hY=Ut(b.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"zoom-in",stroke:"none",fill:"currentColor",strokeWidth:"1",children:b.jsx("path",{fillRule:"nonzero",d:"M6.85,-1.81188398e-13 C10.6331505,-1.81188398e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.61852778e-14,10.6331505 4.61852778e-14,6.85 C4.61852778e-14,3.06684946 3.06684946,-1.81188398e-13 6.85,-1.81188398e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M6.86472282,3.93527718 C7.16295659,3.93527718 7.41036958,4.15286679 7.45686984,4.43795406 L7.46472282,4.53527718 L7.464,6.19927718 L9.12944565,6.2 C9.42767941,6.2 9.6750924,6.41758961 9.72159266,6.70267688 L9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L7.464,7.39927718 L7.46472282,9.06472282 C7.46472282,9.36295659 7.24713321,9.61036958 6.96204594,9.65686984 L6.86472282,9.66472282 C6.56648906,9.66472282 6.31907607,9.44713321 6.27257581,9.16204594 L6.26472282,9.06472282 L6.264,7.39927718 L4.6,7.4 C4.30176624,7.4 4.05435325,7.18241039 4.00785299,6.89732312 L4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L6.264,6.19927718 L6.26472282,4.53527718 C6.26472282,4.2701805 6.43664548,4.0452385 6.67507642,3.96586557 L6.76739971,3.94313016 L6.86472282,3.93527718 Z"})})})),dY=Ut(b.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:b.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),gY=Ut(b.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"save-file",stroke:"currentColor",fill:"none",children:b.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"})})})),pY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"background-color-icon",children:b.jsxs("g",{transform:"translate(1 1)",fillRule:"evenodd",fill:"#000",stroke:"none",children:[b.jsx("circle",{fillOpacity:".04",r:"11",cy:"11",cx:"11"}),b.jsx("path",{d:"M17 20.221V17h3.221A11.06 11.06 0 0 1 17 20.221zm-12 0A11.06 11.06 0 0 1 1.779 17H5v3.221zM20.221 5H17V1.779A11.06 11.06 0 0 1 20.221 5zM9 .181V1H6.411A10.919 10.919 0 0 1 9 .181zM15.589 1H13V.181c.907.167 1.775.445 2.589.819zM13 21.819V21h2.589c-.814.374-1.682.652-2.589.819zm-4 0A10.919 10.919 0 0 1 6.411 21H9v.819zm-8-6.23A10.919 10.919 0 0 1 .181 13H1v2.589zm0-9.178V9H.181C.348 8.093.626 7.225 1 6.411zM21.819 9H21V6.411c.374.814.652 1.682.819 2.589zM21 15.589V13h.819A10.919 10.919 0 0 1 21 15.589zM5 1.779V5H1.779A11.06 11.06 0 0 1 5 1.779zM5 13h4v4H5v-4zm8 0h4v4h-4v-4zM5 5h4v4H5V5zm8 0h4v4h-4V5zm0 12v4H9v-4h4zm8-8v4h-4V9h4zm-8 0v4H9V9h4zM5 9v4H1V9h4zm8-8v4H9V1h4z",fillOpacity:".12"})]})})),mY=Ut(b.jsx("svg",{viewBox:"0 0 32 32",className:"no-color-icon",children:b.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",fillRule:"nonzero",fill:"currentColor",stroke:"none",children:[b.jsx("path",{d:"M2 16c0 7.733 6.267 14 14 14s14-6.267 14-14S23.733 2 16 2 2 8.267 2 16zm-1 0C1 7.716 7.714 1 16 1c8.284 0 15 6.714 15 15 0 8.284-6.714 15-15 15-8.284 0-15-6.714-15-15z"}),b.jsx("path",{d:"M6.354 26.354l-.708-.708 20-20 .708.708z"})]})})),vY=Ut(b.jsx("svg",{className:"selected-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("polyline",{points:"20 6 9 17 4 12"})})),yY=Ut(b.jsx("svg",{viewBox:"0 0 24 24",className:"stroke-icon",children:b.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",stroke:"none",fillRule:"evenodd",fill:"#000",children:[b.jsx("path",{d:"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm0-4c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1z",fillRule:"nonzero",fillOpacity:".04"}),b.jsx("path",{d:"M12 5V1c1.491 0 2.914.297 4.21.835L14.68 5.53A6.979 6.979 0 0 0 12 5zm4.95 2.048l2.828-2.828a11.016 11.016 0 0 1 2.388 3.568l-3.697 1.53a7.01 7.01 0 0 0-1.519-2.27zM19 12h4c0 1.491-.297 2.914-.835 4.21l-3.696-1.53c.342-.826.531-1.73.531-2.68zm-2.05 4.95l2.828 2.828a11.016 11.016 0 0 1-3.567 2.387l-1.532-3.696a7.01 7.01 0 0 0 2.27-1.52zM12 19v4c-1.491 0-2.914-.297-4.21-.835l1.53-3.696c.826.342 1.73.531 2.68.531zm-4.95-2.05l-2.828 2.828a11.016 11.016 0 0 1-2.387-3.567l3.696-1.532a7.01 7.01 0 0 0 1.52 2.27zM5 12H1c0-1.491.297-2.914.835-4.21L5.53 9.32A6.979 6.979 0 0 0 5 12zm2.05-4.95L4.222 4.222a11.016 11.016 0 0 1 3.567-2.387L9.321 5.53a7.01 7.01 0 0 0-2.27 1.52z",fillOpacity:".12"})]})})),wY=Ut(b.jsx("svg",{viewBox:"0 0 24 24",children:b.jsx("g",{xmlns:"http://www.w3.org/2000/svg",id:"icon-border-white",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.1",children:b.jsxs("g",{id:"Group",children:[b.jsx("path",{d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z",fill:"#000000",fillRule:"nonzero"}),b.jsx("path",{d:"M12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 Z M12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 Z",fill:"#000000",fillRule:"nonzero"})]})})})),CY=Ut(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:[b.jsx("path",{d:"M-18-19h60v40h-60z"}),b.jsx("path",{d:"M0 0h24v2H0z",fill:"currentColor"})]})})),xY=Ut(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:b.jsx("g",{fill:"currentColor",children:b.jsx("path",{d:"M0 0h6v2H0zM9 0h6v2H9zM18 0h6v2h-6z"})})})})),EY=Ut(b.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:b.jsxs("g",{fill:"currentColor",children:[b.jsx("rect",{rx:"1",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"4",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"8",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"12",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"16",height:"2",width:"2"}),b.jsx("rect",{rx:"1",x:"20",height:"2",width:"2"})]})})})),PY=({currentColor:e})=>b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"font-color-icon",children:b.jsxs("g",{id:"font-color",strokeWidth:"1",fillRule:"evenodd",stroke:"none",fill:"currentColor",children:[b.jsx("path",{id:"secondary-color",d:"M1.999 15.011h11.998V13.81H1.999z",fill:e||"#333333"}),b.jsx("path",{d:"M6.034 7.59h4.104L8.086 2.297 6.034 7.59zm-.465 1.2l-1.437 3.707H2.845L7.301 1h1.287l-.001.004h.286l4.454 11.492h-1.288L10.603 8.79H5.569z",id:"A"})]})}),SY=Ut(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("g",{id:"undo-cion",transform:"translate(1 1)",children:b.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"undo-icon-path"})})})})),DY=Ut(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("g",{id:"redo-cion",transform:"matrix(-1 0 0 1 15.015 1)",children:b.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"redo-icon-path"})})})})),pm=Ut(b.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:b.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"})})),TY=Ut(b.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{strokeWidth:"1.25",children:[b.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),b.jsx("path",{d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]})})),GT=Ut(b.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M170.794667 896c3.456 0 6.912-0.426667 10.325333-1.28l170.666667-42.666667c7.509333-1.877333 14.378667-5.76 19.84-11.221333L896.128 316.330667c16.128-16.128 25.002667-37.546667 25.002667-60.330667s-8.874667-44.202667-25.002667-60.330667L828.458667 128c-32.256-32.256-88.405333-32.256-120.661334 0L183.296 652.501333a42.794667 42.794667 0 0 0-11.221333 19.797334l-42.666667 170.666666A42.666667 42.666667 0 0 0 170.794667 896z m597.333333-707.669333L835.797333 256l-67.669333 67.669333L700.458667 256l67.669333-67.669333zM251.989333 704.469333l388.138667-388.138666L707.797333 384l-388.181333 388.138667-90.197333 22.528 22.570666-90.197334z"})})),AY=Ut(b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("g",{id:"image",stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M10.496 7c-.824 0-1.572-.675-1.498-1.5 0-.825.674-1.5 1.498-1.5.823 0 1.497.675 1.497 1.5S11.319 7 10.496 7zM13.8 9.476V2.2H2.2v5.432l.1-.078C3.132 6.904 4.029 6.5 5 6.5c.823 0 1.552.27 2.342.778.226.145.449.304.735.518.06.045.546.413.69.52 1.634 1.21 2.833 1.6 4.798 1.207l.235-.047zm0 1.523V10.7c-5 1-6.3-3-8.8-3-1.5 0-2.8 1.6-2.8 1.6v4.6h11.6V11zM14 1c.6 0 1 .536 1 1.071v11.784c0 .642-.4 1.071-1 1.071H2c-.6 0-1-.429-1-1.07V2.07c0-.535.4-1.07 1-1.07h12z"})})})),$T=Ut(b.jsx("svg",{stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{strokeWidth:1.8,fill:"none",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M12 3l-4 7h8z"}),b.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),b.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]})})),BY=Ut(b.jsx("svg",{stroke:"currentColor",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{stroke:"none",fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})})),RY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M14.85,2.5 C15.4851275,2.5 16,3.01487254 16,3.65 L16,12.35 C16,12.9851275 15.4851275,13.5 14.85,13.5 L1.15,13.5 C0.514872538,13.5 0,12.9851275 0,12.35 L0,3.65 C0,3.01487254 0.514872538,2.5 1.15,2.5 L14.85,2.5 Z M14.85,3.7 L1.15,3.7 C1.17735931,3.7 1.2,3.72264069 1.2,3.75 L1.2,12.25 C1.2,12.2773593 1.17735931,12.3 1.15,12.3 L14.85,12.3 C14.8226407,12.3 14.8,12.2773593 14.8,12.25 L14.8,3.75 C14.8,3.72264069 14.8226407,3.7 14.85,3.7 Z M3.5,10.5 L3.5,5.5 L5.25,5.5 L7,7.8 L8.75,5.5 L10.5,5.5 L10.5,10.5 L8.75,10.5 L8.75,7.5 L7,9.8 L5.25,7.5 L5.25,10.5 L3.5,10.5 Z M12.5,10.5 L11,8.5 L12.5,8.5 L12.5,5.5 L11,5.5 L12.5,5.5 L12.5,8.5 L14,8.5 L12.5,10.5 Z"})})})),MY=Ut(b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:b.jsx("g",{stroke:"none",fill:"currentColor",children:b.jsx("path",{d:"M12.253 4.13h-1.2v-1a2.8 2.8 0 0 0-5.6 0v4a2.8 2.8 0 0 0 2.8 2.8v1.2a4 4 0 0 1-4-4v-4a4 4 0 0 1 8 0v1zm-8 8h1.2v1a2.8 2.8 0 0 0 5.6 0v-4a2.8 2.8 0 0 0-2.8-2.8v-1.2a4 4 0 0 1 4 4v4a4 4 0 0 1-8 0v-1z",transform:"rotate(46 8.253 8.13)"})})})),bY=[{icon:QK,title:"Rectangle",pointer:vt.rectangle},{icon:eY,title:"Ellipse",pointer:vt.ellipse},{icon:tY,title:"Triangle",pointer:vt.triangle},{icon:JK,title:"Terminal",pointer:ht.terminal},{icon:nY,title:"Diamond",pointer:vt.diamond},{icon:rY,title:"Parallelogram",pointer:vt.parallelogram},{icon:iY,title:"RoundRectangle",pointer:vt.roundRectangle}],OY=HT(bY,5),IY=({onPointerUp:e})=>{const t=Zr();return b.jsx(Ts,{padding:1,children:b.jsx($o.Col,{gap:1,children:OY.map((n,r)=>b.jsx($o.Row,{gap:1,children:n.map((i,o)=>b.jsx(Kn,{className:Dn({fillable:!1}),type:"icon",size:"small",visible:!0,icon:i.icon,title:i.title,"aria-label":i.title,onPointerDown:()=>{d0(t,Vu.dnd),Ln.updatePointerType(t,i.pointer)},onPointerUp:()=>{d0(t,Vu.drawing),e(i.pointer)}},o))},r))})})},kY=[{icon:oY,title:"Straight Arrow Line",pointer:Vn.straight},{icon:sY,title:"Elbow Arrow Line",pointer:Vn.elbow},{icon:uY,title:"Curve Arrow Line",pointer:Vn.curve}],FY=({onPointerUp:e})=>{const t=Zr();return b.jsx(Ts,{padding:1,children:b.jsx($o.Row,{gap:1,children:kY.map((n,r)=>b.jsx(Kn,{className:Dn({fillable:!1}),type:"icon",size:"small",visible:!0,icon:n.icon,title:n.title,"aria-label":n.title,onPointerDown:()=>{d0(t,Vu.drawing),Ln.updatePointerType(t,n.pointer)},onPointerUp:()=>{e(n.pointer)}},r))})})};function g7(){return typeof window<"u"}function vc(e){return WT(e)?(e.nodeName||"").toLowerCase():"#document"}function Wo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function qu(e){var t;return(t=(WT(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function WT(e){return g7()?e instanceof Node||e instanceof Wo(e).Node:!1}function fr(e){return g7()?e instanceof Element||e instanceof Wo(e).Element:!1}function Kr(e){return g7()?e instanceof HTMLElement||e instanceof Wo(e).HTMLElement:!1}function Y6(e){return!g7()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Wo(e).ShadowRoot}function xp(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ss(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function LY(e){return["table","td","th"].includes(vc(e))}function p7(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function W8(e){const t=m7(),n=fr(e)?Ss(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function _Y(e){let t=Va(e);for(;Kr(t)&&!sc(t);){if(W8(t))return t;if(p7(t))return null;t=Va(t)}return null}function m7(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sc(e){return["html","body","#document"].includes(vc(e))}function Ss(e){return Wo(e).getComputedStyle(e)}function v7(e){return fr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Va(e){if(vc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Y6(e)&&e.host||qu(e);return Y6(t)?t.host:t}function jT(e){const t=Va(e);return sc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Kr(t)&&xp(t)?t:jT(t)}function Zl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=jT(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=Wo(i);if(o){const a=q6(s);return t.concat(s,s.visualViewport||[],xp(i)?i:[],a&&n?Zl(a):[])}return t.concat(i,Zl(i,[],n))}function q6(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Cf(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function _o(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Y6(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function zT(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function VT(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function NY(e){return e.mozInputSource===0&&e.isTrusted?!0:Z6()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function HY(e){return $Y()?!1:!Z6()&&e.width===0&&e.height===0||Z6()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function GY(){return/apple/i.test(navigator.vendor)}function Z6(){const e=/android/i;return e.test(zT())||e.test(VT())}function $Y(){return VT().includes("jsdom/")}function yx(e,t){return["mouse","pen"].includes(e)}function WY(e){return"nativeEvent"in e}function jY(e){return e.matches("html,body")}function qs(e){return(e==null?void 0:e.ownerDocument)||document}function Ev(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Ef(e){return"composedPath"in e?e.composedPath()[0]:e.target}const zY="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function UT(e){return Kr(e)&&e.matches(zY)}function Pv(e){e.preventDefault(),e.stopPropagation()}function VY(e){return e?e.getAttribute("role")==="combobox"&&UT(e):!1}const mm=Math.min,If=Math.max,vm=Math.round,l3=Math.floor,$u=e=>({x:e,y:e}),UY={left:"right",right:"left",bottom:"top",top:"bottom"},XY={start:"end",end:"start"};function wx(e,t,n){return If(e,mm(t,n))}function y7(e,t){return typeof e=="function"?e(t):e}function Vf(e){return e.split("-")[0]}function w7(e){return e.split("-")[1]}function XT(e){return e==="x"?"y":"x"}function KT(e){return e==="y"?"height":"width"}function v0(e){return["top","bottom"].includes(Vf(e))?"y":"x"}function YT(e){return XT(v0(e))}function KY(e,t,n){n===void 0&&(n=!1);const r=w7(e),i=YT(e),o=KT(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=ym(s)),[s,ym(s)]}function YY(e){const t=ym(e);return[Q6(e),t,Q6(t)]}function Q6(e){return e.replace(/start|end/g,t=>XY[t])}function qY(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function ZY(e,t,n,r){const i=w7(e);let o=qY(Vf(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(Q6)))),o}function ym(e){return e.replace(/left|right|bottom|top/g,t=>UY[t])}function QY(e){return{top:0,right:0,bottom:0,left:0,...e}}function JY(e){return typeof e!="number"?QY(e):{top:e,right:e,bottom:e,left:e}}function wm(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var eq=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Cm=eq.join(","),qT=typeof Element>"u",y0=qT?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,xm=!qT&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Em=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=i===""||i==="true",s=o||n&&t&&e(t.parentNode);return s},tq=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},nq=function(t,n,r){if(Em(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(Cm));return n&&y0.call(t,Cm)&&i.unshift(t),i=i.filter(r),i},rq=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var s=o.shift();if(!Em(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),f=a.length?a:s.children,h=e(f,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:s,candidates:h})}else{var d=y0.call(s,Cm);d&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var p=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),v=!Em(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(p&&v){var w=e(p===!0?s.children:p.children,!0,r);r.flatten?i.push.apply(i,w):i.push({scopeParent:s,candidates:w})}else o.unshift.apply(o,s.children)}}return i},ZT=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},QT=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||tq(t))&&!ZT(t)?0:t.tabIndex},iq=function(t,n){var r=QT(t);return r<0&&n&&!ZT(t)?0:r},oq=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},JT=function(t){return t.tagName==="INPUT"},sq=function(t){return JT(t)&&t.type==="hidden"},uq=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},aq=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},lq=function(t){if(!t.name)return!0;var n=t.form||xm(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=aq(i,t.form);return!o||o===t},cq=function(t){return JT(t)&&t.type==="radio"},fq=function(t){return cq(t)&&!lq(t)},hq=function(t){var n,r=t&&xm(t),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var s,a,f;for(o=!!((s=i)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(i)||t!=null&&(f=t.ownerDocument)!==null&&f!==void 0&&f.contains(t));!o&&i;){var h,d,p;r=xm(i),i=(h=r)===null||h===void 0?void 0:h.host,o=!!((d=i)!==null&&d!==void 0&&(p=d.ownerDocument)!==null&&p!==void 0&&p.contains(i))}}return o},Cx=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},dq=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=y0.call(t,"details>summary:first-of-type"),s=o?t.parentElement:t;if(y0.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=t;t;){var f=t.parentElement,h=xm(t);if(f&&!f.shadowRoot&&i(f)===!0)return Cx(t);t.assignedSlot?t=t.assignedSlot:!f&&h!==t.ownerDocument?t=h.host:t=f}t=a}if(hq(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Cx(t);return!1},gq=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return y0.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},pq=function(t,n){return!(n.disabled||Em(n)||sq(n)||dq(n,t)||uq(n)||gq(n))},J6=function(t,n){return!(fq(n)||QT(n)<0||!pq(t,n))},mq=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},vq=function e(t){var n=[],r=[];return t.forEach(function(i,o){var s=!!i.scopeParent,a=s?i.scopeParent:i,f=iq(a,s),h=s?e(i.candidates):a;f===0?s?n.push.apply(n,h):n.push(a):r.push({documentOrder:o,tabIndex:f,item:i,isScope:s,content:h})}),r.sort(oq).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},C7=function(t,n){n=n||{};var r;return n.getShadowRoot?r=rq([t],n.includeContainer,{filter:J6.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:mq}):r=nq(t,n.includeContainer,J6.bind(null,n)),vq(r)},yq=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return y0.call(t,Cm)===!1?!1:J6(n,t)};function xx(e,t,n){let{reference:r,floating:i}=e;const o=v0(t),s=YT(t),a=KT(s),f=Vf(t),h=o==="y",d=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,v=r[a]/2-i[a]/2;let w;switch(f){case"top":w={x:d,y:r.y-i.height};break;case"bottom":w={x:d,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:p};break;case"left":w={x:r.x-i.width,y:p};break;default:w={x:r.x,y:r.y}}switch(w7(t)){case"start":w[s]-=v*(n&&h?-1:1);break;case"end":w[s]+=v*(n&&h?-1:1);break}return w}const wq=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),f=await(s.isRTL==null?void 0:s.isRTL(t));let h=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:p}=xx(h,r,f),v=r,w={},E=0;for(let y=0;y<a.length;y++){const{name:S,fn:A}=a[y],{x:B,y:R,data:_,reset:F}=await A({x:d,y:p,initialPlacement:r,placement:v,strategy:i,middlewareData:w,rects:h,platform:s,elements:{reference:e,floating:t}});d=B??d,p=R??p,w={...w,[S]:{...w[S],..._}},F&&E<=50&&(E++,typeof F=="object"&&(F.placement&&(v=F.placement),F.rects&&(h=F.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):F.rects),{x:d,y:p}=xx(h,v,f)),y=-1)}return{x:d,y:p,placement:v,strategy:i,middlewareData:w}};async function eA(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:f}=e,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:v=!1,padding:w=0}=y7(t,e),E=JY(w),S=a[v?p==="floating"?"reference":"floating":p],A=wm(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(S)))==null||n?S:S.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:h,rootBoundary:d,strategy:f})),B=p==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),_=await(o.isElement==null?void 0:o.isElement(R))?await(o.getScale==null?void 0:o.getScale(R))||{x:1,y:1}:{x:1,y:1},F=wm(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:B,offsetParent:R,strategy:f}):B);return{top:(A.top-F.top+E.top)/_.y,bottom:(F.bottom-A.bottom+E.bottom)/_.y,left:(A.left-F.left+E.left)/_.x,right:(F.right-A.right+E.right)/_.x}}const Cq=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:f,elements:h}=t,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:y=!0,...S}=y7(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const A=Vf(i),B=v0(a),R=Vf(a)===a,_=await(f.isRTL==null?void 0:f.isRTL(h.floating)),F=v||(R||!y?[ym(a)]:YY(a)),j=E!=="none";!v&&j&&F.push(...ZY(a,y,E,_));const z=[a,...F],Q=await eA(t,S),se=[];let te=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&se.push(Q[A]),p){const me=KY(i,s,_);se.push(Q[me[0]],Q[me[1]])}if(te=[...te,{placement:i,overflows:se}],!se.every(me=>me<=0)){var Ee,ie;const me=(((Ee=o.flip)==null?void 0:Ee.index)||0)+1,Ce=z[me];if(Ce)return{data:{index:me,overflows:te},reset:{placement:Ce}};let Fe=(ie=te.filter(Ae=>Ae.overflows[0]<=0).sort((Ae,pe)=>Ae.overflows[1]-pe.overflows[1])[0])==null?void 0:ie.placement;if(!Fe)switch(w){case"bestFit":{var ce;const Ae=(ce=te.filter(pe=>{if(j){const ue=v0(pe.placement);return ue===B||ue==="y"}return!0}).map(pe=>[pe.placement,pe.overflows.filter(ue=>ue>0).reduce((ue,ye)=>ue+ye,0)]).sort((pe,ue)=>pe[1]-ue[1])[0])==null?void 0:ce[0];Ae&&(Fe=Ae);break}case"initialPlacement":Fe=a;break}if(i!==Fe)return{reset:{placement:Fe}}}return{}}}};async function xq(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Vf(n),a=w7(n),f=v0(n)==="y",h=["left","top"].includes(s)?-1:1,d=o&&f?-1:1,p=y7(t,e);let{mainAxis:v,crossAxis:w,alignmentAxis:E}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof E=="number"&&(w=a==="end"?E*-1:E),f?{x:w*d,y:v*h}:{x:v*h,y:w*d}}const Eq=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,f=await xq(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+f.x,y:o+f.y,data:{...f,placement:s}}}}},Pq=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:S=>{let{x:A,y:B}=S;return{x:A,y:B}}},...f}=y7(e,t),h={x:n,y:r},d=await eA(t,f),p=v0(Vf(i)),v=XT(p);let w=h[v],E=h[p];if(o){const S=v==="y"?"top":"left",A=v==="y"?"bottom":"right",B=w+d[S],R=w-d[A];w=wx(B,w,R)}if(s){const S=p==="y"?"top":"left",A=p==="y"?"bottom":"right",B=E+d[S],R=E-d[A];E=wx(B,E,R)}const y=a.fn({...t,[v]:w,[p]:E});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[v]:o,[p]:s}}}}}};function tA(e){const t=Ss(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Kr(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=vm(n)!==o||vm(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function j8(e){return fr(e)?e:e.contextElement}function e0(e){const t=j8(e);if(!Kr(t))return $u(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=tA(t);let s=(o?vm(n.width):n.width)/r,a=(o?vm(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Sq=$u(0);function nA(e){const t=Wo(e);return!m7()||!t.visualViewport?Sq:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Dq(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Wo(e)?!1:t}function Uf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=j8(e);let s=$u(1);t&&(r?fr(r)&&(s=e0(r)):s=e0(e));const a=Dq(o,n,r)?nA(o):$u(0);let f=(i.left+a.x)/s.x,h=(i.top+a.y)/s.y,d=i.width/s.x,p=i.height/s.y;if(o){const v=Wo(o),w=r&&fr(r)?Wo(r):r;let E=v,y=q6(E);for(;y&&r&&w!==E;){const S=e0(y),A=y.getBoundingClientRect(),B=Ss(y),R=A.left+(y.clientLeft+parseFloat(B.paddingLeft))*S.x,_=A.top+(y.clientTop+parseFloat(B.paddingTop))*S.y;f*=S.x,h*=S.y,d*=S.x,p*=S.y,f+=R,h+=_,E=Wo(y),y=q6(E)}}return wm({width:d,height:p,x:f,y:h})}function z8(e,t){const n=v7(e).scrollLeft;return t?t.left+n:Uf(qu(e)).left+n}function rA(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:z8(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function Tq(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=qu(r),a=t?p7(t.floating):!1;if(r===s||a&&o)return n;let f={scrollLeft:0,scrollTop:0},h=$u(1);const d=$u(0),p=Kr(r);if((p||!p&&!o)&&((vc(r)!=="body"||xp(s))&&(f=v7(r)),Kr(r))){const w=Uf(r);h=e0(r),d.x=w.x+r.clientLeft,d.y=w.y+r.clientTop}const v=s&&!p&&!o?rA(s,f,!0):$u(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-f.scrollLeft*h.x+d.x+v.x,y:n.y*h.y-f.scrollTop*h.y+d.y+v.y}}function Aq(e){return Array.from(e.getClientRects())}function Bq(e){const t=qu(e),n=v7(e),r=e.ownerDocument.body,i=If(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=If(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+z8(e);const a=-n.scrollTop;return Ss(r).direction==="rtl"&&(s+=If(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function Rq(e,t){const n=Wo(e),r=qu(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,f=0;if(i){o=i.width,s=i.height;const h=m7();(!h||h&&t==="fixed")&&(a=i.offsetLeft,f=i.offsetTop)}return{width:o,height:s,x:a,y:f}}function Mq(e,t){const n=Uf(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Kr(e)?e0(e):$u(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,f=i*o.x,h=r*o.y;return{width:s,height:a,x:f,y:h}}function Ex(e,t,n){let r;if(t==="viewport")r=Rq(e,n);else if(t==="document")r=Bq(qu(e));else if(fr(t))r=Mq(t,n);else{const i=nA(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return wm(r)}function iA(e,t){const n=Va(e);return n===t||!fr(n)||sc(n)?!1:Ss(n).position==="fixed"||iA(n,t)}function bq(e,t){const n=t.get(e);if(n)return n;let r=Zl(e,[],!1).filter(a=>fr(a)&&vc(a)!=="body"),i=null;const o=Ss(e).position==="fixed";let s=o?Va(e):e;for(;fr(s)&&!sc(s);){const a=Ss(s),f=W8(s);!f&&a.position==="fixed"&&(i=null),(o?!f&&!i:!f&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||xp(s)&&!f&&iA(e,s))?r=r.filter(d=>d!==s):i=a,s=Va(s)}return t.set(e,r),r}function Oq(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?p7(t)?[]:bq(t,this._c):[].concat(n),r],a=s[0],f=s.reduce((h,d)=>{const p=Ex(t,d,i);return h.top=If(p.top,h.top),h.right=mm(p.right,h.right),h.bottom=mm(p.bottom,h.bottom),h.left=If(p.left,h.left),h},Ex(t,a,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function Iq(e){const{width:t,height:n}=tA(e);return{width:t,height:n}}function kq(e,t,n){const r=Kr(t),i=qu(t),o=n==="fixed",s=Uf(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const f=$u(0);if(r||!r&&!o)if((vc(t)!=="body"||xp(i))&&(a=v7(t)),r){const v=Uf(t,!0,o,t);f.x=v.x+t.clientLeft,f.y=v.y+t.clientTop}else i&&(f.x=z8(i));const h=i&&!r&&!o?rA(i,a):$u(0),d=s.left+a.scrollLeft-f.x-h.x,p=s.top+a.scrollTop-f.y-h.y;return{x:d,y:p,width:s.width,height:s.height}}function Sv(e){return Ss(e).position==="static"}function Px(e,t){if(!Kr(e)||Ss(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return qu(e)===n&&(n=n.ownerDocument.body),n}function oA(e,t){const n=Wo(e);if(p7(e))return n;if(!Kr(e)){let i=Va(e);for(;i&&!sc(i);){if(fr(i)&&!Sv(i))return i;i=Va(i)}return n}let r=Px(e,t);for(;r&&LY(r)&&Sv(r);)r=Px(r,t);return r&&sc(r)&&Sv(r)&&!W8(r)?n:r||_Y(e)||n}const Fq=async function(e){const t=this.getOffsetParent||oA,n=this.getDimensions,r=await n(e.floating);return{reference:kq(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Lq(e){return Ss(e).direction==="rtl"}const _q={convertOffsetParentRelativeRectToViewportRelativeRect:Tq,getDocumentElement:qu,getClippingRect:Oq,getOffsetParent:oA,getElementRects:Fq,getClientRects:Aq,getDimensions:Iq,getScale:e0,isElement:fr,isRTL:Lq};function sA(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Nq(e,t){let n=null,r;const i=qu(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,f){a===void 0&&(a=!1),f===void 0&&(f=1),o();const h=e.getBoundingClientRect(),{left:d,top:p,width:v,height:w}=h;if(a||t(),!v||!w)return;const E=l3(p),y=l3(i.clientWidth-(d+v)),S=l3(i.clientHeight-(p+w)),A=l3(d),R={rootMargin:-E+"px "+-y+"px "+-S+"px "+-A+"px",threshold:If(0,mm(1,f))||1};let _=!0;function F(j){const z=j[0].intersectionRatio;if(z!==f){if(!_)return s();z?s(!1,z):r=setTimeout(()=>{s(!1,1e-7)},1e3)}z===1&&!sA(h,e.getBoundingClientRect())&&s(),_=!1}try{n=new IntersectionObserver(F,{...R,root:i.ownerDocument})}catch{n=new IntersectionObserver(F,R)}n.observe(e)}return s(!0),o}function Hq(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,h=j8(e),d=i||o?[...h?Zl(h):[],...Zl(t)]:[];d.forEach(A=>{i&&A.addEventListener("scroll",n,{passive:!0}),o&&A.addEventListener("resize",n)});const p=h&&a?Nq(h,n):null;let v=-1,w=null;s&&(w=new ResizeObserver(A=>{let[B]=A;B&&B.target===h&&w&&(w.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var R;(R=w)==null||R.observe(t)})),n()}),h&&!f&&w.observe(h),w.observe(t));let E,y=f?Uf(e):null;f&&S();function S(){const A=Uf(e);y&&!sA(y,A)&&n(),y=A,E=requestAnimationFrame(S)}return n(),()=>{var A;d.forEach(B=>{i&&B.removeEventListener("scroll",n),o&&B.removeEventListener("resize",n)}),p==null||p(),(A=w)==null||A.disconnect(),w=null,f&&cancelAnimationFrame(E)}}const Gq=Eq,$q=Pq,Wq=Cq,jq=(e,t,n)=>{const r=new Map,i={platform:_q,...n},o={...i.platform,_c:r};return wq(e,t,{...i,platform:o})};var M3=typeof document<"u"?$.useLayoutEffect:$.useEffect;function Pm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Pm(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!Pm(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function uA(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Sx(e,t){const n=uA(e);return Math.round(t*n)/n}function Dv(e){const t=$.useRef(e);return M3(()=>{t.current=e}),t}function zq(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:f,open:h}=e,[d,p]=$.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,w]=$.useState(r);Pm(v,r)||w(r);const[E,y]=$.useState(null),[S,A]=$.useState(null),B=$.useCallback(pe=>{pe!==j.current&&(j.current=pe,y(pe))},[]),R=$.useCallback(pe=>{pe!==z.current&&(z.current=pe,A(pe))},[]),_=o||E,F=s||S,j=$.useRef(null),z=$.useRef(null),Q=$.useRef(d),se=f!=null,te=Dv(f),Ee=Dv(i),ie=Dv(h),ce=$.useCallback(()=>{if(!j.current||!z.current)return;const pe={placement:t,strategy:n,middleware:v};Ee.current&&(pe.platform=Ee.current),jq(j.current,z.current,pe).then(ue=>{const ye={...ue,isPositioned:ie.current!==!1};me.current&&!Pm(Q.current,ye)&&(Q.current=ye,z4.flushSync(()=>{p(ye)}))})},[v,t,n,Ee,ie]);M3(()=>{h===!1&&Q.current.isPositioned&&(Q.current.isPositioned=!1,p(pe=>({...pe,isPositioned:!1})))},[h]);const me=$.useRef(!1);M3(()=>(me.current=!0,()=>{me.current=!1}),[]),M3(()=>{if(_&&(j.current=_),F&&(z.current=F),_&&F){if(te.current)return te.current(_,F,ce);ce()}},[_,F,ce,te,se]);const Ce=$.useMemo(()=>({reference:j,floating:z,setReference:B,setFloating:R}),[B,R]),Fe=$.useMemo(()=>({reference:_,floating:F}),[_,F]),Ae=$.useMemo(()=>{const pe={position:n,left:0,top:0};if(!Fe.floating)return pe;const ue=Sx(Fe.floating,d.x),ye=Sx(Fe.floating,d.y);return a?{...pe,transform:"translate("+ue+"px, "+ye+"px)",...uA(Fe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:ye}},[n,a,Fe.floating,d.x,d.y]);return $.useMemo(()=>({...d,update:ce,refs:Ce,elements:Fe,floatingStyles:Ae}),[d,ce,Ce,Fe,Ae])}const V8=(e,t)=>({...Gq(e),options:[e,t]}),Vq=(e,t)=>({...$q(e),options:[e,t]}),U8=(e,t)=>({...Wq(e),options:[e,t]});function x7(e){return $.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const aA={...TM},Uq=aA.useInsertionEffect,Xq=Uq||(e=>e());function Ul(e){const t=$.useRef(()=>{});return Xq(()=>{t.current=e}),$.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Go=typeof document<"u"?$.useLayoutEffect:$.useEffect;function ep(){return ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ep.apply(this,arguments)}let Dx=!1,Kq=0;const Tx=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Kq++;function Yq(){const[e,t]=$.useState(()=>Dx?Tx():void 0);return Go(()=>{e==null&&t(Tx())},[]),$.useEffect(()=>{Dx=!0},[]),e}const qq=aA.useId,Ep=qq||Yq;function Zq(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Qq=$.createContext(null),Jq=$.createContext(null),lA=()=>{var e;return((e=$.useContext(Qq))==null?void 0:e.id)||null},X8=()=>$.useContext(Jq);function tp(e){return"data-floating-ui-"+e}function Tv(e){const t=$.useRef(e);return Go(()=>{t.current=e}),t}let Ax=0;function Fd(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(Ax);const o=()=>e==null?void 0:e.focus({preventScroll:n});i?o():Ax=requestAnimationFrame(o)}function eZ(e,t){var n;let r=[],i=(n=e.find(o=>o.id===t))==null?void 0:n.parentId;for(;i;){const o=e.find(s=>s.id===i);i=o==null?void 0:o.parentId,o&&(r=r.concat(o))}return r}function Tg(e,t){let n=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(i=>{var o;return(o=r)==null?void 0:o.some(s=>{var a;return i.parentId===s.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Ld=new WeakMap,c3=new WeakSet,f3={},Av=0;const tZ=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,cA=e=>e&&(e.host||cA(e.parentNode)),nZ=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=cA(n);return e.contains(r)?r:null}).filter(n=>n!=null);function rZ(e,t,n,r){const i="data-floating-ui-inert",o=r?"inert":n?"aria-hidden":null,s=nZ(t,e),a=new Set,f=new Set(s),h=[];f3[i]||(f3[i]=new WeakMap);const d=f3[i];s.forEach(p),v(t),a.clear();function p(w){!w||a.has(w)||(a.add(w),w.parentNode&&p(w.parentNode))}function v(w){!w||f.has(w)||[].forEach.call(w.children,E=>{if(vc(E)!=="script")if(a.has(E))v(E);else{const y=o?E.getAttribute(o):null,S=y!==null&&y!=="false",A=(Ld.get(E)||0)+1,B=(d.get(E)||0)+1;Ld.set(E,A),d.set(E,B),h.push(E),A===1&&S&&c3.add(E),B===1&&E.setAttribute(i,""),!S&&o&&E.setAttribute(o,"true")}})}return Av++,()=>{h.forEach(w=>{const E=(Ld.get(w)||0)-1,y=(d.get(w)||0)-1;Ld.set(w,E),d.set(w,y),E||(!c3.has(w)&&o&&w.removeAttribute(o),c3.delete(w)),y||w.removeAttribute(i)}),Av--,Av||(Ld=new WeakMap,Ld=new WeakMap,c3=new WeakSet,f3={})}}function Bx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=qs(e[0]).body;return rZ(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const np=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function fA(e,t){const n=C7(e,np());t==="prev"&&n.reverse();const r=n.indexOf(Cf(qs(e)));return n.slice(r+1)[0]}function hA(){return fA(document.body,"next")}function dA(){return fA(document.body,"prev")}function Ag(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!_o(n,r)}function iZ(e){C7(e,np()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Rx(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const E7={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let oZ;function Mx(e){e.key==="Tab"&&(e.target,clearTimeout(oZ))}const Sm=$.forwardRef(function(t,n){const[r,i]=$.useState();Go(()=>(GY()&&i("button"),document.addEventListener("keydown",Mx),()=>{document.removeEventListener("keydown",Mx)}),[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[tp("focus-guard")]:"",style:E7};return $.createElement("span",ep({},t,o))}),gA=$.createContext(null),bx=tp("portal");function sZ(e){e===void 0&&(e={});const{id:t,root:n}=e,r=Ep(),i=mA(),[o,s]=$.useState(null),a=$.useRef(null);return Go(()=>()=>{o==null||o.remove(),queueMicrotask(()=>{a.current=null})},[o]),Go(()=>{if(!r||a.current)return;const f=t?document.getElementById(t):null;if(!f)return;const h=document.createElement("div");h.id=r,h.setAttribute(bx,""),f.appendChild(h),a.current=h,s(h)},[t,r]),Go(()=>{if(n===null||!r||a.current)return;let f=n||(i==null?void 0:i.portalNode);f&&!fr(f)&&(f=f.current),f=f||document.body;let h=null;t&&(h=document.createElement("div"),h.id=t,f.appendChild(h));const d=document.createElement("div");d.id=r,d.setAttribute(bx,""),f=h||f,f.appendChild(d),a.current=d,s(d)},[t,n,r,i]),o}function pA(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,o=sZ({id:n,root:r}),[s,a]=$.useState(null),f=$.useRef(null),h=$.useRef(null),d=$.useRef(null),p=$.useRef(null),v=s==null?void 0:s.modal,w=s==null?void 0:s.open,E=!!s&&!s.modal&&s.open&&i&&!!(r||o);return $.useEffect(()=>{if(!o||!i||v)return;function y(S){o&&Ag(S)&&(S.type==="focusin"?Rx:iZ)(o)}return o.addEventListener("focusin",y,!0),o.addEventListener("focusout",y,!0),()=>{o.removeEventListener("focusin",y,!0),o.removeEventListener("focusout",y,!0)}},[o,i,v]),$.useEffect(()=>{o&&(w||Rx(o))},[w,o]),$.createElement(gA.Provider,{value:$.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:f,afterOutsideRef:h,beforeInsideRef:d,afterInsideRef:p,portalNode:o,setFocusManagerState:a}),[i,o])},E&&o&&$.createElement(Sm,{"data-type":"outside",ref:f,onFocus:y=>{if(Ag(y,o)){var S;(S=d.current)==null||S.focus()}else{const A=dA()||(s==null?void 0:s.refs.domReference.current);A==null||A.focus()}}}),E&&o&&$.createElement("span",{"aria-owns":o.id,style:E7}),o&&z4.createPortal(t,o),E&&o&&$.createElement(Sm,{"data-type":"outside",ref:h,onFocus:y=>{if(Ag(y,o)){var S;(S=p.current)==null||S.focus()}else{const A=hA()||(s==null?void 0:s.refs.domReference.current);A==null||A.focus(),s!=null&&s.closeOnFocusOut&&(s==null||s.onOpenChange(!1,y.nativeEvent,"focus-out"))}}}))}const mA=()=>$.useContext(gA),e4="data-floating-ui-focusable";function uZ(e){return e?e.hasAttribute(e4)?e:e.querySelector("["+e4+"]")||e:null}const aZ=20;let xf=[];function Bv(e){xf=xf.filter(n=>n.isConnected);let t=e;if(!(!t||vc(t)==="body")){if(!yq(t,np())){const n=C7(t,np())[0];n&&(t=n)}xf.push(t),xf.length>aZ&&(xf=xf.slice(-20))}}function Ox(){return xf.slice().reverse().find(e=>e.isConnected)}const lZ=$.forwardRef(function(t,n){return $.createElement("button",ep({},t,{type:"button",ref:n,tabIndex:-1,style:E7}))});function vA(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:o=!0,initialFocus:s=0,returnFocus:a=!0,restoreFocus:f=!1,modal:h=!0,visuallyHiddenDismiss:d=!1,closeOnFocusOut:p=!0}=e,{open:v,refs:w,nodeId:E,onOpenChange:y,events:S,dataRef:A,floatingId:B,elements:{domReference:R,floating:_}}=t,F=typeof s=="number"&&s<0,j=VY(R)&&F,z=tZ()?o:!0,Q=Tv(i),se=Tv(s),te=Tv(a),Ee=X8(),ie=mA(),ce=$.useRef(null),me=$.useRef(null),Ce=$.useRef(!1),Fe=$.useRef(!1),Ae=$.useRef(-1),pe=ie!=null,ue=uZ(_),ye=Ul(function(Me){return Me===void 0&&(Me=ue),Me?C7(Me,np()):[]}),X=Ul(Me=>{const K=ye(Me);return Q.current.map(fe=>R&&fe==="reference"?R:ue&&fe==="floating"?ue:K).filter(Boolean).flat()});$.useEffect(()=>{if(r||!h)return;function Me(fe){if(fe.key==="Tab"){_o(ue,Cf(qs(ue)))&&ye().length===0&&!j&&Pv(fe);const we=X(),De=Ef(fe);Q.current[0]==="reference"&&De===R&&(Pv(fe),fe.shiftKey?Fd(we[we.length-1]):Fd(we[1])),Q.current[1]==="floating"&&De===ue&&fe.shiftKey&&(Pv(fe),Fd(we[0]))}}const K=qs(ue);return K.addEventListener("keydown",Me),()=>{K.removeEventListener("keydown",Me)}},[r,R,ue,h,Q,j,ye,X]),$.useEffect(()=>{if(r||!_)return;function Me(K){const fe=Ef(K),De=ye().indexOf(fe);De!==-1&&(Ae.current=De)}return _.addEventListener("focusin",Me),()=>{_.removeEventListener("focusin",Me)}},[r,_,ye]),$.useEffect(()=>{if(r||!p)return;function Me(){Fe.current=!0,setTimeout(()=>{Fe.current=!1})}function K(fe){const we=fe.relatedTarget;queueMicrotask(()=>{const De=!(_o(R,we)||_o(_,we)||_o(we,_)||_o(ie==null?void 0:ie.portalNode,we)||we!=null&&we.hasAttribute(tp("focus-guard"))||Ee&&(Tg(Ee.nodesRef.current,E).find(Ke=>{var Ue,Rt;return _o((Ue=Ke.context)==null?void 0:Ue.elements.floating,we)||_o((Rt=Ke.context)==null?void 0:Rt.elements.domReference,we)})||eZ(Ee.nodesRef.current,E).find(Ke=>{var Ue,Rt;return((Ue=Ke.context)==null?void 0:Ue.elements.floating)===we||((Rt=Ke.context)==null?void 0:Rt.elements.domReference)===we})));if(f&&De&&Cf(qs(ue))===qs(ue).body){Kr(ue)&&ue.focus();const Ke=Ae.current,Ue=ye(),Rt=Ue[Ke]||Ue[Ue.length-1]||ue;Kr(Rt)&&Rt.focus()}(j||!h)&&we&&De&&!Fe.current&&we!==Ox()&&(Ce.current=!0,y(!1,fe,"focus-out"))})}if(_&&Kr(R))return R.addEventListener("focusout",K),R.addEventListener("pointerdown",Me),_.addEventListener("focusout",K),()=>{R.removeEventListener("focusout",K),R.removeEventListener("pointerdown",Me),_.removeEventListener("focusout",K)}},[r,R,_,ue,h,E,Ee,ie,y,p,f,ye,j]),$.useEffect(()=>{var Me;if(r)return;const K=Array.from((ie==null||(Me=ie.portalNode)==null?void 0:Me.querySelectorAll("["+tp("portal")+"]"))||[]);if(_){const fe=[_,...K,ce.current,me.current,Q.current.includes("reference")||j?R:null].filter(De=>De!=null),we=h||j?Bx(fe,z,!z):Bx(fe);return()=>{we()}}},[r,R,_,h,Q,ie,j,z]),Go(()=>{if(r||!Kr(ue))return;const Me=qs(ue),K=Cf(Me);queueMicrotask(()=>{const fe=X(ue),we=se.current,De=(typeof we=="number"?fe[we]:we.current)||ue,Ke=_o(ue,K);!F&&!Ke&&v&&Fd(De,{preventScroll:De===ue})})},[r,v,ue,F,X,se]),Go(()=>{if(r||!ue)return;let Me=!1;const K=qs(ue),fe=Cf(K);let De=A.current.openEvent;Bv(fe);function Ke(It){let{open:St,reason:lt,event:yt,nested:wn}=It;St&&(De=yt),lt==="escape-key"&&w.domReference.current&&Bv(w.domReference.current),lt==="hover"&&yt.type==="mouseleave"&&(Ce.current=!0),lt==="outside-press"&&(wn?(Ce.current=!1,Me=!0):Ce.current=!(NY(yt)||HY(yt)))}S.on("openchange",Ke);const Ue=K.createElement("span");Ue.setAttribute("tabindex","-1"),Ue.setAttribute("aria-hidden","true"),Object.assign(Ue.style,E7),pe&&R&&R.insertAdjacentElement("afterend",Ue);function Rt(){return typeof te.current=="boolean"?Ox()||Ue:te.current.current||Ue}return()=>{S.off("openchange",Ke);const It=Cf(K),St=_o(_,It)||Ee&&Tg(Ee.nodesRef.current,E).some(wn=>{var Mt;return _o((Mt=wn.context)==null?void 0:Mt.elements.floating,It)});(St||De&&["click","mousedown"].includes(De.type))&&w.domReference.current&&Bv(w.domReference.current);const yt=Rt();queueMicrotask(()=>{te.current&&!Ce.current&&Kr(yt)&&(!(yt!==It&&It!==K.body)||St)&&yt.focus({preventScroll:Me}),Ue.remove()})}},[r,_,ue,te,A,w,S,Ee,E,pe,R]),$.useEffect(()=>{queueMicrotask(()=>{Ce.current=!1})},[r]),Go(()=>{if(!r&&ie)return ie.setFocusManagerState({modal:h,closeOnFocusOut:p,open:v,onOpenChange:y,refs:w}),()=>{ie.setFocusManagerState(null)}},[r,ie,h,v,y,w,p]),Go(()=>{if(r||!ue||typeof MutationObserver!="function"||F)return;const Me=()=>{const fe=ue.getAttribute("tabindex"),we=ye(),De=Cf(qs(_)),Ke=we.indexOf(De);Ke!==-1&&(Ae.current=Ke),Q.current.includes("floating")||De!==w.domReference.current&&we.length===0?fe!=="0"&&ue.setAttribute("tabindex","0"):fe!=="-1"&&ue.setAttribute("tabindex","-1")};Me();const K=new MutationObserver(Me);return K.observe(ue,{childList:!0,subtree:!0,attributes:!0}),()=>{K.disconnect()}},[r,_,ue,w,Q,ye,F]);function Pe(Me){return r||!d||!h?null:$.createElement(lZ,{ref:Me==="start"?ce:me,onClick:K=>y(!1,K.nativeEvent)},typeof d=="string"?d:"Dismiss")}const ut=!r&&z&&(h?!j:!0)&&(pe||h);return $.createElement($.Fragment,null,ut&&$.createElement(Sm,{"data-type":"inside",ref:ie==null?void 0:ie.beforeInsideRef,onFocus:Me=>{if(h){const fe=X();Fd(i[0]==="reference"?fe[0]:fe[fe.length-1])}else if(ie!=null&&ie.preserveTabOrder&&ie.portalNode)if(Ce.current=!1,Ag(Me,ie.portalNode)){const fe=hA()||R;fe==null||fe.focus()}else{var K;(K=ie.beforeOutsideRef.current)==null||K.focus()}}}),!j&&Pe("start"),n,Pe("end"),ut&&$.createElement(Sm,{"data-type":"inside",ref:ie==null?void 0:ie.afterInsideRef,onFocus:Me=>{if(h)Fd(X()[0]);else if(ie!=null&&ie.preserveTabOrder&&ie.portalNode)if(p&&(Ce.current=!0),Ag(Me,ie.portalNode)){const fe=dA()||R;fe==null||fe.focus()}else{var K;(K=ie.afterOutsideRef.current)==null||K.focus()}}}))}let h3=0;function cZ(){const e=/iP(hone|ad|od)|iOS/.test(zT()),t=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,o=t.left?parseFloat(t.left):window.scrollX,s=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",i&&(t[r]=i+"px"),e){var a,f;const h=((a=window.visualViewport)==null?void 0:a.offsetLeft)||0,d=((f=window.visualViewport)==null?void 0:f.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(s-Math.floor(d))+"px",left:-(o-Math.floor(h))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[r]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(o,s))}}let Ix=()=>{};const fZ=$.forwardRef(function(t,n){const{lockScroll:r=!1,...i}=t;return Go(()=>{if(r)return h3++,h3===1&&(Ix=cZ()),()=>{h3--,h3===0&&Ix()}},[r]),$.createElement("div",ep({ref:n},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function kx(e){return Kr(e.target)&&e.target.tagName==="BUTTON"}function Fx(e){return UT(e)}function yA(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=e,{enabled:s=!0,event:a="click",toggle:f=!0,ignoreMouse:h=!1,keyboardHandlers:d=!0,stickIfOpen:p=!0}=t,v=$.useRef(),w=$.useRef(!1),E=$.useMemo(()=>({onPointerDown(y){v.current=y.pointerType},onMouseDown(y){const S=v.current;y.button===0&&a!=="click"&&(yx(S)&&h||(n&&f&&(!(i.current.openEvent&&p)||i.current.openEvent.type==="mousedown")?r(!1,y.nativeEvent,"click"):(y.preventDefault(),r(!0,y.nativeEvent,"click"))))},onClick(y){const S=v.current;if(a==="mousedown"&&v.current){v.current=void 0;return}yx(S)&&h||(n&&f&&(!(i.current.openEvent&&p)||i.current.openEvent.type==="click")?r(!1,y.nativeEvent,"click"):r(!0,y.nativeEvent,"click"))},onKeyDown(y){v.current=void 0,!(y.defaultPrevented||!d||kx(y))&&(y.key===" "&&!Fx(o)&&(y.preventDefault(),w.current=!0),y.key==="Enter"&&r(!(n&&f),y.nativeEvent,"click"))},onKeyUp(y){y.defaultPrevented||!d||kx(y)||Fx(o)||y.key===" "&&w.current&&(w.current=!1,r(!(n&&f),y.nativeEvent,"click"))}}),[i,o,a,h,d,r,n,p,f]);return $.useMemo(()=>s?{reference:E}:{},[s,E])}const hZ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},dZ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Lx=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function wA(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:f=!0,outsidePressEvent:h="pointerdown",referencePress:d=!1,referencePressEvent:p="pointerdown",ancestorScroll:v=!1,bubbles:w,capture:E}=t,y=X8(),S=Ul(typeof f=="function"?f:()=>!1),A=typeof f=="function"?S:f,B=$.useRef(!1),R=$.useRef(!1),{escapeKey:_,outsidePress:F}=Lx(w),{escapeKey:j,outsidePress:z}=Lx(E),Q=$.useRef(!1),se=Ul(Ce=>{var Fe;if(!n||!s||!a||Ce.key!=="Escape"||Q.current)return;const Ae=(Fe=o.current.floatingContext)==null?void 0:Fe.nodeId,pe=y?Tg(y.nodesRef.current,Ae):[];if(!_&&(Ce.stopPropagation(),pe.length>0)){let ue=!0;if(pe.forEach(ye=>{var X;if((X=ye.context)!=null&&X.open&&!ye.context.dataRef.current.__escapeKeyBubbles){ue=!1;return}}),!ue)return}r(!1,WY(Ce)?Ce.nativeEvent:Ce,"escape-key")}),te=Ul(Ce=>{var Fe;const Ae=()=>{var pe;se(Ce),(pe=Ef(Ce))==null||pe.removeEventListener("keydown",Ae)};(Fe=Ef(Ce))==null||Fe.addEventListener("keydown",Ae)}),Ee=Ul(Ce=>{var Fe;const Ae=B.current;B.current=!1;const pe=R.current;if(R.current=!1,h==="click"&&pe||Ae||typeof A=="function"&&!A(Ce))return;const ue=Ef(Ce),ye="["+tp("inert")+"]",X=qs(i.floating).querySelectorAll(ye);let Pe=fr(ue)?ue:null;for(;Pe&&!sc(Pe);){const fe=Va(Pe);if(sc(fe)||!fr(fe))break;Pe=fe}if(X.length&&fr(ue)&&!jY(ue)&&!_o(ue,i.floating)&&Array.from(X).every(fe=>!_o(Pe,fe)))return;if(Kr(ue)&&me){const fe=ue.clientWidth>0&&ue.scrollWidth>ue.clientWidth,we=ue.clientHeight>0&&ue.scrollHeight>ue.clientHeight;let De=we&&Ce.offsetX>ue.clientWidth;if(we&&Ss(ue).direction==="rtl"&&(De=Ce.offsetX<=ue.offsetWidth-ue.clientWidth),De||fe&&Ce.offsetY>ue.clientHeight)return}const ut=(Fe=o.current.floatingContext)==null?void 0:Fe.nodeId,Me=y&&Tg(y.nodesRef.current,ut).some(fe=>{var we;return Ev(Ce,(we=fe.context)==null?void 0:we.elements.floating)});if(Ev(Ce,i.floating)||Ev(Ce,i.domReference)||Me)return;const K=y?Tg(y.nodesRef.current,ut):[];if(K.length>0){let fe=!0;if(K.forEach(we=>{var De;if((De=we.context)!=null&&De.open&&!we.context.dataRef.current.__outsidePressBubbles){fe=!1;return}}),!fe)return}r(!1,Ce,"outside-press")}),ie=Ul(Ce=>{var Fe;const Ae=()=>{var pe;Ee(Ce),(pe=Ef(Ce))==null||pe.removeEventListener(h,Ae)};(Fe=Ef(Ce))==null||Fe.addEventListener(h,Ae)});$.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=_,o.current.__outsidePressBubbles=F;let Ce=-1;function Fe(X){r(!1,X,"ancestor-scroll")}function Ae(){window.clearTimeout(Ce),Q.current=!0}function pe(){Ce=window.setTimeout(()=>{Q.current=!1},m7()?5:0)}const ue=qs(i.floating);a&&(ue.addEventListener("keydown",j?te:se,j),ue.addEventListener("compositionstart",Ae),ue.addEventListener("compositionend",pe)),A&&ue.addEventListener(h,z?ie:Ee,z);let ye=[];return v&&(fr(i.domReference)&&(ye=Zl(i.domReference)),fr(i.floating)&&(ye=ye.concat(Zl(i.floating))),!fr(i.reference)&&i.reference&&i.reference.contextElement&&(ye=ye.concat(Zl(i.reference.contextElement)))),ye=ye.filter(X=>{var Pe;return X!==((Pe=ue.defaultView)==null?void 0:Pe.visualViewport)}),ye.forEach(X=>{X.addEventListener("scroll",Fe,{passive:!0})}),()=>{a&&(ue.removeEventListener("keydown",j?te:se,j),ue.removeEventListener("compositionstart",Ae),ue.removeEventListener("compositionend",pe)),A&&ue.removeEventListener(h,z?ie:Ee,z),ye.forEach(X=>{X.removeEventListener("scroll",Fe)}),window.clearTimeout(Ce)}},[o,i,a,A,h,n,r,v,s,_,F,se,j,te,Ee,z,ie]),$.useEffect(()=>{B.current=!1},[A,h]);const ce=$.useMemo(()=>({onKeyDown:se,[hZ[p]]:Ce=>{d&&r(!1,Ce.nativeEvent,"reference-press")}}),[se,r,d,p]),me=$.useMemo(()=>({onKeyDown:se,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[dZ[h]]:()=>{B.current=!0}}),[se,h]);return $.useMemo(()=>s?{reference:ce,floating:me}:{},[s,ce,me])}function gZ(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Ep(),o=$.useRef({}),[s]=$.useState(()=>Zq()),a=lA()!=null,[f,h]=$.useState(r.reference),d=Ul((w,E,y)=>{o.current.openEvent=w?E:void 0,s.emit("openchange",{open:w,event:E,reason:y,nested:a}),n==null||n(w,E,y)}),p=$.useMemo(()=>({setPositionReference:h}),[]),v=$.useMemo(()=>({reference:f||r.reference||null,floating:r.floating||null,domReference:r.reference}),[f,r.reference,r.floating]);return $.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:v,events:s,floatingId:i,refs:p}),[t,d,v,s,i,p])}function P7(e){e===void 0&&(e={});const{nodeId:t}=e,n=gZ({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=$.useState(null),[a,f]=$.useState(null),d=(i==null?void 0:i.domReference)||o,p=$.useRef(null),v=X8();Go(()=>{d&&(p.current=d)},[d]);const w=zq({...e,elements:{...i,...a&&{reference:a}}}),E=$.useCallback(R=>{const _=fr(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),contextElement:R}:R;f(_),w.refs.setReference(_)},[w.refs]),y=$.useCallback(R=>{(fr(R)||R===null)&&(p.current=R,s(R)),(fr(w.refs.reference.current)||w.refs.reference.current===null||R!==null&&!fr(R))&&w.refs.setReference(R)},[w.refs]),S=$.useMemo(()=>({...w.refs,setReference:y,setPositionReference:E,domReference:p}),[w.refs,y,E]),A=$.useMemo(()=>({...w.elements,domReference:d}),[w.elements,d]),B=$.useMemo(()=>({...w,...r,refs:S,elements:A,nodeId:t}),[w,S,A,t,r]);return Go(()=>{r.dataRef.current.floatingContext=B;const R=v==null?void 0:v.nodesRef.current.find(_=>_.id===t);R&&(R.context=B)}),$.useMemo(()=>({...w,context:B,refs:S,elements:A}),[w,S,A,B])}const _x="active",Nx="selected";function Rv(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[_x]:s,[Nx]:a,...f}=e;o=f}return{...n==="floating"&&{tabIndex:-1,[e4]:""},...o,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(f=>{let[h,d]=f;if(!(i&&[_x,Nx].includes(h)))if(h.indexOf("on")===0){if(r.has(h)||r.set(h,[]),typeof d=="function"){var p;(p=r.get(h))==null||p.push(d),s[h]=function(){for(var v,w=arguments.length,E=new Array(w),y=0;y<w;y++)E[y]=arguments[y];return(v=r.get(h))==null?void 0:v.map(S=>S(...E)).find(S=>S!==void 0)}}}else s[h]=d}),s),{})}}function CA(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=$.useCallback(a=>Rv(a,e,"reference"),t),o=$.useCallback(a=>Rv(a,e,"floating"),n),s=$.useCallback(a=>Rv(a,e,"item"),r);return $.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const pZ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function xA(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:o=!0,role:s="dialog"}=t,a=(n=pZ.get(s))!=null?n:s,f=Ep(),d=lA()!=null,p=$.useMemo(()=>a==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:f},...a==="menu"&&d&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[a,i,d,r,f,s]),v=$.useMemo(()=>{const E={id:i,...a&&{role:a}};return a==="tooltip"||s==="label"?E:{...E,...a==="menu"&&{"aria-labelledby":f}}},[a,i,f,s]),w=$.useCallback(E=>{let{active:y,selected:S}=E;const A={role:"option",...y&&{id:i+"-option"}};switch(s){case"select":return{...A,"aria-selected":y&&S};case"combobox":return{...A,...y&&{"aria-selected":!0}}}return{}},[i,s]);return $.useMemo(()=>o?{reference:p,floating:v,item:w}:{},[o,p,v,w])}function mZ({initialOpen:e=!1,placement:t="bottom",modal:n,sideOffset:r,open:i,onOpenChange:o}={}){const[s,a]=$.useState(e),[f,h]=$.useState(),[d,p]=$.useState(),v=i??s,w=o??a,E=P7({placement:t,open:v,onOpenChange:w,whileElementsMounted:Hq,middleware:[V8(r||4),U8({crossAxis:t.includes("-"),fallbackAxisSideDirection:"end",padding:5}),Vq({padding:5})]}),y=E.context,S=yA(y,{enabled:i==null}),A=wA(y),B=xA(y),R=CA([S,A,B]);return $.useMemo(()=>({open:v,setOpen:w,...R,...E,modal:n,labelId:f,descriptionId:d,setLabelId:h,setDescriptionId:p}),[v,w,R,E,n,f,d])}const EA=$.createContext(null),PA=()=>{const e=$.useContext(EA);if(e==null)throw new Error("Popover components must be wrapped in <Popover />");return e};function Ua({children:e,modal:t=!1,...n}){const r=mZ({modal:t,...n});return b.jsx(EA.Provider,{value:r,children:e})}const Xa=$.forwardRef(function({children:t,asChild:n=!1,...r},i){const o=PA(),s=t.ref,a=x7([o.refs.setReference,i,s]);return n&&$.isValidElement(t)?$.cloneElement(t,o.getReferenceProps({ref:a,...r,...t.props,"data-state":o.open?"open":"closed"})):b.jsx("button",{ref:a,type:"button","data-state":o.open?"open":"closed",...o.getReferenceProps(r),children:t})}),Ka=$.forwardRef(function({container:t,style:n,...r},i){const{context:o,...s}=PA(),a=x7([s.refs.setFloating,i]);return o.open?b.jsx(pA,{root:t,children:b.jsx(vA,{context:o,modal:s.modal,children:b.jsx("div",{ref:a,style:{...s.floatingStyles,...n},"aria-labelledby":s.labelId,"aria-describedby":s.descriptionId,...s.getFloatingProps(r),children:r.children})})}):null}),SA={[cr.default]:{strokeColor:qr,fill:"#FFFFFF"},[cr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[cr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[cr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[cr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[cr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}};var K8=(e=>(e.nibPen="nibPen",e.feltTipPen="feltTipPen",e.artisticBrush="artisticBrush",e.markerHighlight="markerHighlight",e))(K8||{});const DA="freehand",Zs={isFreehand:e=>e.type===DA};var Af=(e=>(e.mermaidToDrawnix="mermaidToDrawnix",e.markdownToDrawnix="markdownToDrawnix",e))(Af||{});const TA=$.createContext(null),As=()=>{const e=$.useContext(TA);if(!e)throw new Error("The `useDrawnix` hook must be used inside the <Drawnix> component's context.");return e},vZ=()=>{const{appState:e,setAppState:t}=As();return n=>{t({...e,pointer:n})}},Y8=Pt.createContext({}),t4=(e="",t=!1)=>`menu-item menu-item-base ${e} ${t?"menu-item--active":""}`.trim(),AA=(e,t)=>{const n=$.useContext(Y8);return WK(e,r=>{var o;const i=new CustomEvent(Jg.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(i),i.defaultPrevented||(o=n.onSelect)==null||o.call(n,i)})},Pp=({children:e,className:t="",onSelect:n,style:r})=>{const i=Dn(`menu ${t}`).trim();return b.jsx(Y8.Provider,{value:{onSelect:n},children:b.jsx("div",{className:i,style:r,"data-testid":"menu",children:b.jsx(Ts,{className:"menu-container",padding:2,children:e})})})};Pp.displayName="Menu";const BA=({icon:e,shortcut:t,children:n})=>b.jsxs(b.Fragment,{children:[e&&b.jsx("div",{className:"menu-item__icon",children:e}),b.jsx("div",{className:"menu-item__text",children:n}),t&&b.jsx("div",{className:"menu-item__shortcut",children:t})]}),Ps=({icon:e,onSelect:t,children:n,shortcut:r,className:i,selected:o,submenu:s,...a})=>{const[f,h]=$.useState(!1),d=$.useRef(),p=AA(a.onClick,t),v=b.jsx(BA,{icon:e,shortcut:r,children:n}),w=()=>{d.current&&window.clearTimeout(d.current),h(!0)},E=()=>{d.current=window.setTimeout(()=>{h(!1)},100)};return s?b.jsxs(Ua,{open:f,onOpenChange:h,placement:"right-start",children:[b.jsx(Xa,{asChild:!0,children:b.jsx("button",{...a,type:"button",className:t4(i,o||f),title:a.title??a["aria-label"],onClick:p,onMouseEnter:w,onMouseLeave:E,children:v})}),b.jsx(Ka,{onMouseEnter:w,onMouseLeave:E,children:s})]}):b.jsx("button",{...a,onClick:p,type:"button",className:t4(i,o),title:a.title??a["aria-label"],children:v})};Ps.displayName="MenuItem";const RA=({children:e})=>b.jsx("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"var(--color-promo)",color:"var(--color-surface-lowest)",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace"},children:e});RA.displayName="MenuItemBadge";Ps.Badge=RA;const q8=()=>{const{appState:e,setAppState:t}=As();return b.jsx(Ps,{"data-testid":"marmaid-to-drawnix-button",onSelect:()=>{t({...e,openDialogType:Af.mermaidToDrawnix})},icon:BY,"aria-label":"Mermaid  Drawnix",children:"Mermaid  Drawnix"})};q8.displayName="MermaidToDrawnix";const yZ=()=>{const{appState:e,setAppState:t}=As();return b.jsx(Ps,{"data-testid":"markdown-to-drawnix-button",onSelect:()=>{t({...e,openDialogType:Af.markdownToDrawnix})},icon:RY,"aria-label":"Markdown  Drawnix",children:"Markdown  Drawnix"})};q8.displayName="MarkdownToDrawnix";const wZ=()=>{const e=Zr(),t=I.getBoardContainer(e),[n,r]=$.useState(!1);return b.jsxs(Ua,{sideOffset:12,open:n,onOpenChange:i=>{r(i)},placement:"bottom-start",children:[b.jsx(Xa,{asChild:!0,children:b.jsx(Kn,{type:"icon",visible:!0,selected:n,icon:$T,title:"Extra Tools","aria-label":"Extra Tools",onPointerDown:()=>{r(!n)}})}),b.jsx(Ka,{container:t,children:b.jsxs(Pp,{onSelect:()=>{r(!1)},children:[b.jsx(q8,{}),b.jsx(yZ,{})]})})]},0)},Mv=e=>e===en.hand||e===en.selection,CZ=[{icon:UK,pointer:en.hand,title:"Hand"},{icon:XK,pointer:en.selection,title:"Selection"},{icon:KK,pointer:Tf.mind,title:"Mind"},{icon:qK,pointer:vt.text,title:"Text"},{icon:GT,pointer:K8.feltTipPen,title:"Freehand"},{icon:ZK,title:"Arrow Line",key:"arrow",pointer:Vn.straight},{icon:YK,title:"Shape",key:"shape",pointer:vt.rectangle},{icon:AY,title:"Image",key:"image"},{icon:$T,title:"",key:"extra-tools"}],xZ=e=>Object.keys(Vn).includes(e.pointer),EZ=e=>Object.keys(vt).includes(e.pointer)||Object.keys(ht).includes(e.pointer),PZ=()=>{const e=Zr(),{appState:t}=As(),n=vZ(),r=I.getBoardContainer(e),[i,o]=$.useState(!1),[s,a]=$.useState(!1),f=E=>{d0(e,Vu.dnd),Ln.updatePointerType(e,E),n(E)},h=()=>{d0(e,Vu.drawing)},d=E=>I.isPointer(e,E.pointer)&&!i&&!s,p=async()=>{const E=await LT({description:"Image",extensions:Object.keys(N8)});K6(e,E)},[v,w]=$.useState(!1);return b.jsx(Ts,{padding:1,className:Dn("draw-toolbar",Ya),children:b.jsx($o.Row,{gap:1,children:CZ.map((E,y)=>t.isMobile&&E.pointer===en.hand?b.jsx(b.Fragment,{}):E.key==="shape"?b.jsxs(Ua,{open:s,sideOffset:12,onOpenChange:S=>{a(S)},children:[b.jsx(Xa,{asChild:!0,children:b.jsx(Kn,{type:"icon",visible:!0,selected:s||EZ(e)&&!I.isPointer(e,vt.text),icon:E.icon,title:"Shape","aria-label":"Shape",onPointerDown:()=>{a(!s)}})}),b.jsx(Ka,{container:r,children:b.jsx(IY,{onPointerUp:S=>{a(!1),n(S)}})})]},y):E.key==="arrow"?b.jsxs(Ua,{open:i,sideOffset:12,onOpenChange:S=>{o(S)},children:[b.jsx(Xa,{asChild:!0,children:b.jsx(Kn,{type:"icon",visible:!0,selected:i||xZ(e),icon:E.icon,title:"Arrow","aria-label":"Arrow",onPointerDown:()=>{o(!s)}})}),b.jsx(Ka,{container:r,children:b.jsx(FY,{onPointerUp:S=>{o(!1),n(S)}})})]},y):E.key==="extra-tools"?b.jsx(wZ,{},y):b.jsx(Kn,{type:"radio",icon:E.icon,checked:d(E),title:`${E.title}`,"aria-label":`${E.title}`,onPointerDown:()=>{E.pointer&&!Mv(E.pointer)&&f(E.pointer)},onPointerUp:()=>{E.pointer&&!Mv(E.pointer)?h():E.pointer&&Mv(E.pointer)&&(Ln.updatePointerType(e,E.pointer),n(E.pointer)),E.key==="image"&&p()}},y))})})},SZ=()=>{var i;const e=Zr(),t=I.getBoardContainer(e),[n,r]=$.useState(!1);return b.jsx(Ts,{padding:1,className:Dn("zoom-toolbar",Ya),children:b.jsxs($o.Row,{gap:1,children:[b.jsx(Kn,{type:"button",icon:fY,visible:!0,title:"  Cmd+-","aria-label":"  Cmd+-",onPointerUp:()=>{Ln.updateZoom(e,e.viewport.zoom-.1)},className:"zoom-out-button"},0),b.jsxs(Ua,{sideOffset:12,open:n,onOpenChange:o=>{r(o)},placement:"bottom-end",children:[b.jsx(Xa,{asChild:!0,children:b.jsxs("div",{title:"","aria-label":"",className:Dn("zoom-menu-trigger",{active:n}),onPointerUp:()=>{r(!n)},children:[Number(((((i=e==null?void 0:e.viewport)==null?void 0:i.zoom)||1)*100).toFixed(0)),"%"]},1)}),b.jsx(Ka,{container:t,children:b.jsxs(Pp,{onSelect:()=>{r(!1)},children:[b.jsx(Ps,{"data-testid":"open-button",onSelect:()=>{Ln.fitViewport(e)},"aria-label":"",shortcut:"Cmd+Shift+=",children:""}),b.jsx(Ps,{"data-testid":"open-button",onSelect:()=>{Ln.updateZoom(e,1)},"aria-label":" 100%",shortcut:"Cmd+0",children:" 100%"})]})})]}),b.jsx(Kn,{type:"button",icon:hY,visible:!0,title:"  Cmd++","aria-label":"  Cmd++",onPointerUp:()=>{Ln.updateZoom(e,e.viewport.zoom+.1)},className:"zoom-in-button"},2)]})})},DZ="TRANSPARENT",Z8="NO_COLOR",Q8="#FFFFFF",MA=[{name:"Topic Color",value:Z8},{name:"Basic Black",value:qr},{name:"White",value:Q8},{name:"Gray",value:"#808080"},{name:"Deep Blue",value:"#1E90FF"},{name:"Red",value:"#FF4500"},{name:"Green",value:"#2ECC71"},{name:"Yellow",value:"#FFD700"},{name:"Purple",value:"#8A2BE2"},{name:"Orange",value:"#FFA500"},{name:"Pastel Pink",value:"#FFB3BA"},{name:"Cyan",value:"#00CED1"},{name:"Brown",value:"#8B4513"},{name:"Forest Green",value:"#228B22"},{name:"Light Gray",value:"#D3D3D3"}];function TZ(e){return Math.round((100-e)/100*255)}function AZ(e){return Math.round((1-e/255)*100)}function I0(e,t){const r=TZ(100-t).toString(16).padStart(2,"0");return`${e}${r}`}function k0(e){e=e.replace(/^#/,"");let t;if(e.length===8)t=parseInt(e.slice(6,8),16);else if(e.length===4)t=parseInt(e.slice(3,4).repeat(2),16);else return 100;return 100-AZ(t)}function BZ(e){return e!=="none"}function eh(e){const t=e.replace(/^#/,"").toUpperCase();return t.length===8?"#"+t.slice(0,6):t.length===4?"#"+t.slice(0,3):t.length===6||t.length===3?"#"+t:e}function bA(e){return e===Q8}function OA(e){return e===0}function Sp(e){return e===100}function t0(e){return e===Z8}function RZ(e){return!e||e===qr}var gg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var MZ=gg.exports,Hx;function bZ(){return Hx||(Hx=1,function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",p=1,v=2,w=4,E=1,y=2,S=1,A=2,B=4,R=8,_=16,F=32,j=64,z=128,Q=256,se=512,te=30,Ee="...",ie=800,ce=16,me=1,Ce=2,Fe=3,Ae=1/0,pe=9007199254740991,ue=17976931348623157e292,ye=NaN,X=4294967295,Pe=X-1,ut=X>>>1,Me=[["ary",z],["bind",S],["bindKey",A],["curry",R],["curryRight",_],["flip",se],["partial",F],["partialRight",j],["rearg",Q]],K="[object Arguments]",fe="[object Array]",we="[object AsyncFunction]",De="[object Boolean]",Ke="[object Date]",Ue="[object DOMException]",Rt="[object Error]",It="[object Function]",St="[object GeneratorFunction]",lt="[object Map]",yt="[object Number]",wn="[object Null]",Mt="[object Object]",_n="[object Promise]",ir="[object Proxy]",Tn="[object RegExp]",tn="[object Set]",nn="[object String]",Yn="[object Symbol]",Nn="[object Undefined]",$t="[object WeakMap]",Dr="[object WeakSet]",vr="[object ArrayBuffer]",An="[object DataView]",yr="[object Float32Array]",wr="[object Float64Array]",or="[object Int8Array]",zi="[object Int16Array]",Vi="[object Int32Array]",Ui="[object Uint8Array]",Zu="[object Uint8ClampedArray]",Bs="[object Uint16Array]",Eo="[object Uint32Array]",uu=/\b__p \+= '';/g,Qu=/\b(__p \+=) '' \+/g,pi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rs=/&(?:amp|lt|gt|quot|#39);/g,Ms=/[&<>"']/g,yc=RegExp(Rs.source),th=RegExp(Ms.source),nh=/<%-([\s\S]+?)%>/g,rh=/<%([\s\S]+?)%>/g,wc=/<%=([\s\S]+?)%>/g,Cc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ih=/^\w*$/,Ju=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ea=/[\\^$.*+?()[\]{}|]/g,ta=RegExp(ea.source),xc=/^\s+/,au=/\s/,Ja=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,el=/\{\n\/\* \[wrapped with (.+)\] \*/,Ec=/,? & /,F0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,L0=/[()=,{}\[\]\/\s]/,_0=/\\(\\)?/g,bs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pc=/\w*$/,oh=/^[-+]0x[0-9a-f]+$/i,N0=/^0b[01]+$/i,sh=/^\[object .+?Constructor\]$/,uh=/^0o[0-7]+$/i,ah=/^(?:0|[1-9]\d*)$/,lh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tl=/($^)/,ch=/['\n\r\u2028\u2029\\]/g,mn="\\ud800-\\udfff",fh="\\u0300-\\u036f",Ko="\\ufe20-\\ufe2f",hh="\\u20d0-\\u20ff",Yo=fh+Ko+hh,nl="\\u2700-\\u27bf",Sc="a-z\\xdf-\\xf6\\xf8-\\xff",rl="\\xac\\xb1\\xd7\\xf7",mi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",H0="\\u2000-\\u206f",Bi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",H="A-Z\\xc0-\\xd6\\xd8-\\xde",Y="\\ufe0e\\ufe0f",W=rl+mi+H0+Bi,re="[']",ae="["+mn+"]",ee="["+W+"]",Be="["+Yo+"]",Ne="\\d+",je="["+nl+"]",$e="["+Sc+"]",Xe="[^"+mn+W+Ne+nl+Sc+H+"]",tt="\\ud83c[\\udffb-\\udfff]",Ft="(?:"+Be+"|"+tt+")",un="[^"+mn+"]",Qt="(?:\\ud83c[\\udde6-\\uddff]){2}",wt="[\\ud800-\\udbff][\\udc00-\\udfff]",Cn="["+H+"]",Fr="\\u200d",qo="(?:"+$e+"|"+Xe+")",il="(?:"+Cn+"|"+Xe+")",Dc="(?:"+re+"(?:d|ll|m|re|s|t|ve))?",na="(?:"+re+"(?:D|LL|M|RE|S|T|VE))?",Tc=Ft+"?",ra="["+Y+"]?",Zo="(?:"+Fr+"(?:"+[un,Qt,wt].join("|")+")"+ra+Tc+")*",Po="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ol=ra+Tc+Zo,Ac="(?:"+[je,Qt,wt].join("|")+")"+ol,cu="(?:"+[un+Be+"?",Be,Qt,wt,ae].join("|")+")",S7=RegExp(re,"g"),Tp=RegExp(Be,"g"),ia=RegExp(tt+"(?="+tt+")|"+cu+ol,"g"),D7=RegExp([Cn+"?"+$e+"+"+Dc+"(?="+[ee,Cn,"$"].join("|")+")",il+"+"+na+"(?="+[ee,Cn+qo,"$"].join("|")+")",Cn+"?"+qo+"+"+Dc,Cn+"+"+na,lu,Po,Ne,Ac].join("|"),"g"),Ap=RegExp("["+Fr+mn+Yo+Y+"]"),dh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],T7=-1,xn={};xn[yr]=xn[wr]=xn[or]=xn[zi]=xn[Vi]=xn[Ui]=xn[Zu]=xn[Bs]=xn[Eo]=!0,xn[K]=xn[fe]=xn[vr]=xn[De]=xn[An]=xn[Ke]=xn[Rt]=xn[It]=xn[lt]=xn[yt]=xn[Mt]=xn[Tn]=xn[tn]=xn[nn]=xn[$t]=!1;var vn={};vn[K]=vn[fe]=vn[vr]=vn[An]=vn[De]=vn[Ke]=vn[yr]=vn[wr]=vn[or]=vn[zi]=vn[Vi]=vn[lt]=vn[yt]=vn[Mt]=vn[Tn]=vn[tn]=vn[nn]=vn[Yn]=vn[Ui]=vn[Zu]=vn[Bs]=vn[Eo]=!0,vn[Rt]=vn[It]=vn[$t]=!1;var sl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},gh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},A7={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},B7={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},G0=parseFloat,ph=parseInt,mh=typeof vs=="object"&&vs&&vs.Object===Object&&vs,Rp=typeof self=="object"&&self&&self.Object===Object&&self,Hn=mh||Rp||Function("return this")(),Bc=t&&!t.nodeType&&t,Qo=Bc&&!0&&e&&!e.nodeType&&e,$0=Qo&&Qo.exports===Bc,ul=$0&&mh.process,Jr=function(){try{var oe=Qo&&Qo.require&&Qo.require("util").types;return oe||ul&&ul.binding&&ul.binding("util")}catch{}}(),W0=Jr&&Jr.isArrayBuffer,vi=Jr&&Jr.isDate,oa=Jr&&Jr.isMap,vh=Jr&&Jr.isRegExp,al=Jr&&Jr.isSet,Mp=Jr&&Jr.isTypedArray;function ei(oe,Re,ve){switch(ve.length){case 0:return oe.call(Re);case 1:return oe.call(Re,ve[0]);case 2:return oe.call(Re,ve[0],ve[1]);case 3:return oe.call(Re,ve[0],ve[1],ve[2])}return oe.apply(Re,ve)}function j0(oe,Re,ve,Qe){for(var kt=-1,fn=oe==null?0:oe.length;++kt<fn;){var sr=oe[kt];Re(Qe,sr,ve(sr),oe)}return Qe}function Lr(oe,Re){for(var ve=-1,Qe=oe==null?0:oe.length;++ve<Qe&&Re(oe[ve],ve,oe)!==!1;);return oe}function yh(oe,Re){for(var ve=oe==null?0:oe.length;ve--&&Re(oe[ve],ve,oe)!==!1;);return oe}function z0(oe,Re){for(var ve=-1,Qe=oe==null?0:oe.length;++ve<Qe;)if(!Re(oe[ve],ve,oe))return!1;return!0}function fu(oe,Re){for(var ve=-1,Qe=oe==null?0:oe.length,kt=0,fn=[];++ve<Qe;){var sr=oe[ve];Re(sr,ve,oe)&&(fn[kt++]=sr)}return fn}function wh(oe,Re){var ve=oe==null?0:oe.length;return!!ve&&ll(oe,Re,0)>-1}function V0(oe,Re,ve){for(var Qe=-1,kt=oe==null?0:oe.length;++Qe<kt;)if(ve(Re,oe[Qe]))return!0;return!1}function Rn(oe,Re){for(var ve=-1,Qe=oe==null?0:oe.length,kt=Array(Qe);++ve<Qe;)kt[ve]=Re(oe[ve],ve,oe);return kt}function hu(oe,Re){for(var ve=-1,Qe=Re.length,kt=oe.length;++ve<Qe;)oe[kt+ve]=Re[ve];return oe}function U0(oe,Re,ve,Qe){var kt=-1,fn=oe==null?0:oe.length;for(Qe&&fn&&(ve=oe[++kt]);++kt<fn;)ve=Re(ve,oe[kt],kt,oe);return ve}function R7(oe,Re,ve,Qe){var kt=oe==null?0:oe.length;for(Qe&&kt&&(ve=oe[--kt]);kt--;)ve=Re(ve,oe[kt],kt,oe);return ve}function X0(oe,Re){for(var ve=-1,Qe=oe==null?0:oe.length;++ve<Qe;)if(Re(oe[ve],ve,oe))return!0;return!1}var M7=Y0("length");function bp(oe){return oe.split("")}function b7(oe){return oe.match(F0)||[]}function Op(oe,Re,ve){var Qe;return ve(oe,function(kt,fn,sr){if(Re(kt,fn,sr))return Qe=fn,!1}),Qe}function Ch(oe,Re,ve,Qe){for(var kt=oe.length,fn=ve+(Qe?1:-1);Qe?fn--:++fn<kt;)if(Re(oe[fn],fn,oe))return fn;return-1}function ll(oe,Re,ve){return Re===Re?Ph(oe,Re,ve):Ch(oe,Ip,ve)}function K0(oe,Re,ve,Qe){for(var kt=ve-1,fn=oe.length;++kt<fn;)if(Qe(oe[kt],Re))return kt;return-1}function Ip(oe){return oe!==oe}function kp(oe,Re){var ve=oe==null?0:oe.length;return ve?q0(oe,Re)/ve:ye}function Y0(oe){return function(Re){return Re==null?n:Re[oe]}}function xh(oe){return function(Re){return oe==null?n:oe[Re]}}function Fp(oe,Re,ve,Qe,kt){return kt(oe,function(fn,sr,En){ve=Qe?(Qe=!1,fn):Re(ve,fn,sr,En)}),ve}function O7(oe,Re){var ve=oe.length;for(oe.sort(Re);ve--;)oe[ve]=oe[ve].value;return oe}function q0(oe,Re){for(var ve,Qe=-1,kt=oe.length;++Qe<kt;){var fn=Re(oe[Qe]);fn!==n&&(ve=ve===n?fn:ve+fn)}return ve}function Z0(oe,Re){for(var ve=-1,Qe=Array(oe);++ve<oe;)Qe[ve]=Re(ve);return Qe}function I7(oe,Re){return Rn(Re,function(ve){return[ve,oe[ve]]})}function Lp(oe){return oe&&oe.slice(0,Sh(oe)+1).replace(xc,"")}function Ri(oe){return function(Re){return oe(Re)}}function Rc(oe,Re){return Rn(Re,function(ve){return oe[ve]})}function Os(oe,Re){return oe.has(Re)}function _p(oe,Re){for(var ve=-1,Qe=oe.length;++ve<Qe&&ll(Re,oe[ve],0)>-1;);return ve}function Q0(oe,Re){for(var ve=oe.length;ve--&&ll(Re,oe[ve],0)>-1;);return ve}function Np(oe,Re){for(var ve=oe.length,Qe=0;ve--;)oe[ve]===Re&&++Qe;return Qe}var Hp=xh(sl),Gp=xh(gh);function $p(oe){return"\\"+B7[oe]}function cl(oe,Re){return oe==null?n:oe[Re]}function fl(oe){return Ap.test(oe)}function k7(oe){return dh.test(oe)}function F7(oe){for(var Re,ve=[];!(Re=oe.next()).done;)ve.push(Re.value);return ve}function Eh(oe){var Re=-1,ve=Array(oe.size);return oe.forEach(function(Qe,kt){ve[++Re]=[kt,Qe]}),ve}function J0(oe,Re){return function(ve){return oe(Re(ve))}}function Xi(oe,Re){for(var ve=-1,Qe=oe.length,kt=0,fn=[];++ve<Qe;){var sr=oe[ve];(sr===Re||sr===d)&&(oe[ve]=d,fn[kt++]=ve)}return fn}function du(oe){var Re=-1,ve=Array(oe.size);return oe.forEach(function(Qe){ve[++Re]=Qe}),ve}function L7(oe){var Re=-1,ve=Array(oe.size);return oe.forEach(function(Qe){ve[++Re]=[Qe,Qe]}),ve}function Ph(oe,Re,ve){for(var Qe=ve-1,kt=oe.length;++Qe<kt;)if(oe[Qe]===Re)return Qe;return-1}function _7(oe,Re,ve){for(var Qe=ve+1;Qe--;)if(oe[Qe]===Re)return Qe;return Qe}function sa(oe){return fl(oe)?jp(oe):M7(oe)}function Mi(oe){return fl(oe)?zp(oe):bp(oe)}function Sh(oe){for(var Re=oe.length;Re--&&au.test(oe.charAt(Re)););return Re}var Wp=xh(A7);function jp(oe){for(var Re=ia.lastIndex=0;ia.test(oe);)++Re;return Re}function zp(oe){return oe.match(ia)||[]}function N7(oe){return oe.match(D7)||[]}var H7=function oe(Re){Re=Re==null?Hn:hl.defaults(Hn.Object(),Re,hl.pick(Hn,Bp));var ve=Re.Array,Qe=Re.Date,kt=Re.Error,fn=Re.Function,sr=Re.Math,En=Re.Object,Mc=Re.RegExp,G7=Re.String,Ki=Re.TypeError,Is=ve.prototype,e1=fn.prototype,Jo=En.prototype,dl=Re["__core-js_shared__"],bc=e1.toString,hn=Jo.hasOwnProperty,gl=0,Dh=function(){var c=/[^.]+$/.exec(dl&&dl.keys&&dl.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Oc=Jo.toString,Th=bc.call(En),Vp=Hn._,Up=Mc("^"+bc.call(hn).replace(ea,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ic=$0?Re.Buffer:n,ks=Re.Symbol,kc=Re.Uint8Array,t1=Ic?Ic.allocUnsafe:n,So=J0(En.getPrototypeOf,En),Ah=En.create,Bh=Jo.propertyIsEnumerable,Rh=Is.splice,Xp=ks?ks.isConcatSpreadable:n,Fs=ks?ks.iterator:n,ua=ks?ks.toStringTag:n,Fc=function(){try{var c=Su(En,"defineProperty");return c({},"",{}),c}catch{}}(),Kp=Re.clearTimeout!==Hn.clearTimeout&&Re.clearTimeout,In=Qe&&Qe.now!==Hn.Date.now&&Qe.now,n1=Re.setTimeout!==Hn.setTimeout&&Re.setTimeout,aa=sr.ceil,gu=sr.floor,Mh=En.getOwnPropertySymbols,r1=Ic?Ic.isBuffer:n,pl=Re.isFinite,bh=Is.join,ml=J0(En.keys,En),ur=sr.max,_r=sr.min,$7=Qe.now,Yp=Re.parseInt,Lc=sr.random,Oh=Is.reverse,_c=Su(Re,"DataView"),la=Su(Re,"Map"),Nc=Su(Re,"Promise"),pu=Su(Re,"Set"),Hc=Su(Re,"WeakMap"),vl=Su(En,"create"),Ih=Hc&&new Hc,yl={},i1=Du(_c),mu=Du(la),qp=Du(Nc),wl=Du(pu),es=Du(Hc),vu=ks?ks.prototype:n,bi=vu?vu.valueOf:n,kh=vu?vu.toString:n;function N(c){if(lr(c)&&!Ht(c)&&!(c instanceof Nt)){if(c instanceof Nr)return c;if(hn.call(c,"__wrapped__"))return S2(c)}return new Nr(c)}var Cl=function(){function c(){}return function(g){if(!nr(g))return{};if(Ah)return Ah(g);c.prototype=g;var x=new c;return c.prototype=n,x}}();function ts(){}function Nr(c,g){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=n}N.templateSettings={escape:nh,evaluate:rh,interpolate:wc,variable:"",imports:{_:N}},N.prototype=ts.prototype,N.prototype.constructor=N,Nr.prototype=Cl(ts.prototype),Nr.prototype.constructor=Nr;function Nt(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=X,this.__views__=[]}function Fh(){var c=new Nt(this.__wrapped__);return c.__actions__=ni(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ni(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ni(this.__views__),c}function o1(){if(this.__filtered__){var c=new Nt(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function xl(){var c=this.__wrapped__.value(),g=this.__dir__,x=Ht(c),T=g<0,O=x?c.length:0,G=I1(0,O,this.__views__),U=G.start,J=G.end,le=J-U,be=T?J:U-1,Ie=this.__iteratees__,He=Ie.length,Ze=0,ft=_r(le,this.__takeCount__);if(!x||!T&&O==le&&ft==le)return Rl(c,this.__actions__);var Tt=[];e:for(;le--&&Ze<ft;){be+=g;for(var Xt=-1,At=c[be];++Xt<He;){var Jt=Ie[Xt],ln=Jt.iteratee,ko=Jt.type,Li=ln(At);if(ko==Ce)At=Li;else if(!Li){if(ko==me)continue e;break e}}Tt[Ze++]=At}return Tt}Nt.prototype=Cl(ts.prototype),Nt.prototype.constructor=Nt;function yi(c){var g=-1,x=c==null?0:c.length;for(this.clear();++g<x;){var T=c[g];this.set(T[0],T[1])}}function kn(){this.__data__=vl?vl(null):{},this.size=0}function Mn(c){var g=this.has(c)&&delete this.__data__[c];return this.size-=g?1:0,g}function yu(c){var g=this.__data__;if(vl){var x=g[c];return x===f?n:x}return hn.call(g,c)?g[c]:n}function Hr(c){var g=this.__data__;return vl?g[c]!==n:hn.call(g,c)}function wi(c,g){var x=this.__data__;return this.size+=this.has(c)?0:1,x[c]=vl&&g===n?f:g,this}yi.prototype.clear=kn,yi.prototype.delete=Mn,yi.prototype.get=yu,yi.prototype.has=Hr,yi.prototype.set=wi;function ti(c){var g=-1,x=c==null?0:c.length;for(this.clear();++g<x;){var T=c[g];this.set(T[0],T[1])}}function El(){this.__data__=[],this.size=0}function Ci(c){var g=this.__data__,x=$r(g,c);if(x<0)return!1;var T=g.length-1;return x==T?g.pop():Rh.call(g,x,1),--this.size,!0}function Lh(c){var g=this.__data__,x=$r(g,c);return x<0?n:g[x][1]}function Zp(c){return $r(this.__data__,c)>-1}function Qp(c,g){var x=this.__data__,T=$r(x,c);return T<0?(++this.size,x.push([c,g])):x[T][1]=g,this}ti.prototype.clear=El,ti.prototype.delete=Ci,ti.prototype.get=Lh,ti.prototype.has=Zp,ti.prototype.set=Qp;function Yi(c){var g=-1,x=c==null?0:c.length;for(this.clear();++g<x;){var T=c[g];this.set(T[0],T[1])}}function Jp(){this.size=0,this.__data__={hash:new yi,map:new(la||ti),string:new yi}}function Ls(c){var g=tf(this,c).delete(c);return this.size-=g?1:0,g}function _h(c){return tf(this,c).get(c)}function s1(c){return tf(this,c).has(c)}function e2(c,g){var x=tf(this,c),T=x.size;return x.set(c,g),this.size+=x.size==T?0:1,this}Yi.prototype.clear=Jp,Yi.prototype.delete=Ls,Yi.prototype.get=_h,Yi.prototype.has=s1,Yi.prototype.set=e2;function ca(c){var g=-1,x=c==null?0:c.length;for(this.__data__=new Yi;++g<x;)this.add(c[g])}function wu(c){return this.__data__.set(c,f),this}function Pl(c){return this.__data__.has(c)}ca.prototype.add=ca.prototype.push=wu,ca.prototype.has=Pl;function Gr(c){var g=this.__data__=new ti(c);this.size=g.size}function Nh(){this.__data__=new ti,this.size=0}function Hh(c){var g=this.__data__,x=g.delete(c);return this.size=g.size,x}function qi(c){return this.__data__.get(c)}function Zi(c){return this.__data__.has(c)}function fa(c,g){var x=this.__data__;if(x instanceof ti){var T=x.__data__;if(!la||T.length<i-1)return T.push([c,g]),this.size=++x.size,this;x=this.__data__=new Yi(T)}return x.set(c,g),this.size=x.size,this}Gr.prototype.clear=Nh,Gr.prototype.delete=Hh,Gr.prototype.get=qi,Gr.prototype.has=Zi,Gr.prototype.set=fa;function ns(c,g){var x=Ht(c),T=!x&&gf(c),O=!x&&!T&&Hl(c),G=!x&&!T&&!O&&Bd(c),U=x||T||O||G,J=U?Z0(c.length,G7):[],le=J.length;for(var be in c)(g||hn.call(c,be))&&!(U&&(be=="length"||O&&(be=="offset"||be=="parent")||G&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||$n(be,le)))&&J.push(be);return J}function rs(c){var g=c.length;return g?c[Al(0,g-1)]:n}function ha(c,g){return fd(ni(c),_s(g,0,c.length))}function t2(c){return fd(ni(c))}function Gc(c,g,x){(x!==n&&!Xs(c[g],x)||x===n&&!(g in c))&&is(c,g,x)}function da(c,g,x){var T=c[g];(!(hn.call(c,g)&&Xs(T,x))||x===n&&!(g in c))&&is(c,g,x)}function $r(c,g){for(var x=c.length;x--;)if(Xs(c[x][0],g))return x;return-1}function Oi(c,g,x,T){return ss(c,function(O,G,U){g(T,O,x(O),U)}),T}function Fn(c,g){return c&&To(g,zr(g),c)}function Do(c,g){return c&&To(g,so(g),c)}function is(c,g,x){g=="__proto__"&&Fc?Fc(c,g,{configurable:!0,enumerable:!0,value:x,writable:!0}):c[g]=x}function Gh(c,g){for(var x=-1,T=g.length,O=ve(T),G=c==null;++x<T;)O[x]=G?n:f5(c,g[x]);return O}function _s(c,g,x){return c===c&&(x!==n&&(c=c<=x?c:x),g!==n&&(c=c>=g?c:g)),c}function xi(c,g,x,T,O,G){var U,J=g&p,le=g&v,be=g&w;if(x&&(U=O?x(c,T,O,G):x(c)),U!==n)return U;if(!nr(c))return c;var Ie=Ht(c);if(Ie){if(U=rf(c),!J)return ni(c,U)}else{var He=Br(c),Ze=He==It||He==St;if(Hl(c))return x1(c,J);if(He==Mt||He==K||Ze&&!O){if(U=le||Ze?{}:Rr(c),!J)return le?j7(c,Do(U,c)):Jh(c,Fn(U,c))}else{if(!vn[He])return O?c:{};U=z7(c,He,J)}}G||(G=new Gr);var ft=G.get(c);if(ft)return ft;G.set(c,U),ay(c)?c.forEach(function(At){U.add(xi(At,g,x,At,c,G))}):sy(c)&&c.forEach(function(At,Jt){U.set(Jt,xi(At,g,x,Jt,c,G))});var Tt=be?le?ef:Jc:le?so:zr,Xt=Ie?n:Tt(c);return Lr(Xt||c,function(At,Jt){Xt&&(Jt=At,At=c[Jt]),da(U,Jt,xi(At,g,x,Jt,c,G))}),U}function n2(c){var g=zr(c);return function(x){return $c(x,c,g)}}function $c(c,g,x){var T=x.length;if(c==null)return!T;for(c=En(c);T--;){var O=x[T],G=g[O],U=c[O];if(U===n&&!(O in c)||!G(U))return!1}return!0}function u1(c,g,x){if(typeof c!="function")throw new Ki(s);return Ll(function(){c.apply(n,x)},g)}function os(c,g,x,T){var O=-1,G=wh,U=!0,J=c.length,le=[],be=g.length;if(!J)return le;x&&(g=Rn(g,Ri(x))),T?(G=V0,U=!1):g.length>=i&&(G=Os,U=!1,g=new ca(g));e:for(;++O<J;){var Ie=c[O],He=x==null?Ie:x(Ie);if(Ie=T||Ie!==0?Ie:0,U&&He===He){for(var Ze=be;Ze--;)if(g[Ze]===He)continue e;le.push(Ie)}else G(g,He,T)||le.push(Ie)}return le}var ss=no(Ii),r2=no(Cu,!0);function Wc(c,g){var x=!0;return ss(c,function(T,O,G){return x=!!g(T,O,G),x}),x}function ga(c,g,x){for(var T=-1,O=c.length;++T<O;){var G=c[T],U=g(G);if(U!=null&&(J===n?U===U&&!Io(U):x(U,J)))var J=U,le=G}return le}function i2(c,g,x,T){var O=c.length;for(x=zt(x),x<0&&(x=-x>O?0:O+x),T=T===n||T>O?O:zt(T),T<0&&(T+=O),T=x>T?0:cy(T);x<T;)c[x++]=g;return c}function a1(c,g){var x=[];return ss(c,function(T,O,G){g(T,O,G)&&x.push(T)}),x}function qn(c,g,x,T,O){var G=-1,U=c.length;for(x||(x=ad),O||(O=[]);++G<U;){var J=c[G];g>0&&x(J)?g>1?qn(J,g-1,x,T,O):hu(O,J):T||(O[O.length]=J)}return O}var $h=td(),jc=td(!0);function Ii(c,g){return c&&$h(c,g,zr)}function Cu(c,g){return c&&jc(c,g,zr)}function Sl(c,g){return fu(g,function(x){return Aa(c[x])})}function Ns(c,g){g=ls(g,c);for(var x=0,T=g.length;c!=null&&x<T;)c=c[Mo(g[x++])];return x&&x==T?c:n}function Wh(c,g,x){var T=g(c);return Ht(c)?T:hu(T,x(c))}function Tr(c){return c==null?c===n?Nn:wn:ua&&ua in En(c)?ud(c):F1(c)}function xu(c,g){return c>g}function Qi(c,g){return c!=null&&hn.call(c,g)}function pa(c,g){return c!=null&&g in En(c)}function l1(c,g,x){return c>=_r(g,x)&&c<ur(g,x)}function jh(c,g,x){for(var T=x?V0:wh,O=c[0].length,G=c.length,U=G,J=ve(G),le=1/0,be=[];U--;){var Ie=c[U];U&&g&&(Ie=Rn(Ie,Ri(g))),le=_r(Ie.length,le),J[U]=!x&&(g||O>=120&&Ie.length>=120)?new ca(U&&Ie):n}Ie=c[0];var He=-1,Ze=J[0];e:for(;++He<O&&be.length<le;){var ft=Ie[He],Tt=g?g(ft):ft;if(ft=x||ft!==0?ft:0,!(Ze?Os(Ze,Tt):T(be,Tt,x))){for(U=G;--U;){var Xt=J[U];if(!(Xt?Os(Xt,Tt):T(c[U],Tt,x)))continue e}Ze&&Ze.push(Tt),be.push(ft)}}return be}function Hs(c,g,x,T){return Ii(c,function(O,G,U){g(T,x(O),G,U)}),T}function Ji(c,g,x){g=ls(g,c),c=Cr(c,g);var T=c==null?c:c[Mo(oi(g))];return T==null?n:ei(T,c,x)}function zh(c){return lr(c)&&Tr(c)==K}function o2(c){return lr(c)&&Tr(c)==vr}function Gs(c){return lr(c)&&Tr(c)==Ke}function eo(c,g,x,T,O){return c===g?!0:c==null||g==null||!lr(c)&&!lr(g)?c!==c&&g!==g:Vh(c,g,x,T,eo,O)}function Vh(c,g,x,T,O,G){var U=Ht(c),J=Ht(g),le=U?fe:Br(c),be=J?fe:Br(g);le=le==K?Mt:le,be=be==K?Mt:be;var Ie=le==Mt,He=be==Mt,Ze=le==be;if(Ze&&Hl(c)){if(!Hl(g))return!1;U=!0,Ie=!1}if(Ze&&!Ie)return G||(G=new Gr),U||Bd(c)?b1(c,g,x,T,O,G):O1(c,g,le,x,T,O,G);if(!(x&E)){var ft=Ie&&hn.call(c,"__wrapped__"),Tt=He&&hn.call(g,"__wrapped__");if(ft||Tt){var Xt=ft?c.value():c,At=Tt?g.value():g;return G||(G=new Gr),O(Xt,At,x,T,G)}}return Ze?(G||(G=new Gr),m2(c,g,x,T,O,G)):!1}function s2(c){return lr(c)&&Br(c)==lt}function Dl(c,g,x,T){var O=x.length,G=O,U=!T;if(c==null)return!G;for(c=En(c);O--;){var J=x[O];if(U&&J[2]?J[1]!==c[J[0]]:!(J[0]in c))return!1}for(;++O<G;){J=x[O];var le=J[0],be=c[le],Ie=J[1];if(U&&J[2]){if(be===n&&!(le in c))return!1}else{var He=new Gr;if(T)var Ze=T(be,Ie,le,c,g,He);if(!(Ze===n?eo(Ie,be,E|y,T,He):Ze))return!1}}return!0}function c1(c){if(!nr(c)||w2(c))return!1;var g=Aa(c)?Up:sh;return g.test(Du(c))}function zc(c){return lr(c)&&Tr(c)==Tn}function us(c){return lr(c)&&Br(c)==tn}function Vc(c){return lr(c)&&N2(c.length)&&!!xn[Tr(c)]}function Tl(c){return typeof c=="function"?c:c==null?uo:typeof c=="object"?Ht(c)?Gn(c[0],c[1]):Uh(c):xy(c)}function $s(c){if(!Vs(c))return ml(c);var g=[];for(var x in En(c))hn.call(c,x)&&x!="constructor"&&g.push(x);return g}function f1(c){if(!nr(c))return E2(c);var g=Vs(c),x=[];for(var T in c)T=="constructor"&&(g||!hn.call(c,T))||x.push(T);return x}function Eu(c,g){return c<g}function h1(c,g){var x=-1,T=oo(c)?ve(c.length):[];return ss(c,function(O,G,U){T[++x]=g(O,G,U)}),T}function Uh(c){var g=nf(c);return g.length==1&&g[0][2]?ld(g[0][0],g[0][1]):function(x){return x===c||Dl(x,c,g)}}function Gn(c,g){return et(c)&&sf(g)?ld(Mo(c),g):function(x){var T=f5(x,c);return T===n&&T===g?h5(x,c):eo(g,T,E|y)}}function ma(c,g,x,T,O){c!==g&&$h(g,function(G,U){if(O||(O=new Gr),nr(G))d1(c,g,U,x,ma,T,O);else{var J=T?T(hs(c,U),G,U+"",c,g,O):n;J===n&&(J=G),Gc(c,U,J)}},so)}function d1(c,g,x,T,O,G,U){var J=hs(c,x),le=hs(g,x),be=U.get(le);if(be){Gc(c,x,be);return}var Ie=G?G(J,le,x+"",c,g,U):n,He=Ie===n;if(He){var Ze=Ht(le),ft=!Ze&&Hl(le),Tt=!Ze&&!ft&&Bd(le);Ie=le,Ze||ft||Tt?Ht(J)?Ie=J:pr(J)?Ie=ni(J):ft?(He=!1,Ie=x1(le,!0)):Tt?(He=!1,Ie=f2(le,!0)):Ie=[]:J1(le)||gf(le)?(Ie=J,gf(J)?Ie=fy(J):(!nr(J)||Aa(J))&&(Ie=Rr(le))):He=!1}He&&(U.set(le,Ie),O(Ie,le,T,G,U),U.delete(le)),Gc(c,x,Ie)}function Xh(c,g){var x=c.length;if(x)return g+=g<0?x:0,$n(g,x)?c[g]:n}function Uc(c,g,x){g.length?g=Rn(g,function(G){return Ht(G)?function(U){return Ns(U,G.length===1?G[0]:G)}:G}):g=[uo];var T=-1;g=Rn(g,Ri(xt()));var O=h1(c,function(G,U,J){var le=Rn(g,function(be){return be(G)});return{criteria:le,index:++T,value:G}});return O7(O,function(G,U){return W7(G,U,x)})}function g1(c,g){return Pu(c,g,function(x,T){return h5(c,T)})}function Pu(c,g,x){for(var T=-1,O=g.length,G={};++T<O;){var U=g[T],J=Ns(c,U);x(J,U)&&ya(G,ls(U,c),J)}return G}function Wn(c){return function(g){return Ns(g,c)}}function er(c,g,x,T){var O=T?K0:ll,G=-1,U=g.length,J=c;for(c===g&&(g=ni(g)),x&&(J=Rn(c,Ri(x)));++G<U;)for(var le=0,be=g[G],Ie=x?x(be):be;(le=O(J,Ie,le,T))>-1;)J!==c&&Rh.call(J,le,1),Rh.call(c,le,1);return c}function dr(c,g){for(var x=c?g.length:0,T=x-1;x--;){var O=g[x];if(x==T||O!==G){var G=O;$n(O)?Rh.call(c,O,1):qh(c,O)}}return c}function Al(c,g){return c+gu(Lc()*(g-c+1))}function Xc(c,g,x,T){for(var O=-1,G=ur(aa((g-c)/(x||1)),0),U=ve(G);G--;)U[T?G:++O]=c,c+=x;return U}function va(c,g){var x="";if(!c||g<1||g>pe)return x;do g%2&&(x+=c),g=gu(g/2),g&&(c+=c);while(g);return x}function jt(c,g){return ki(cd(c,g,uo),c+"")}function Wr(c){return rs(Rd(c))}function p1(c,g){var x=Rd(c);return fd(x,_s(g,0,x.length))}function ya(c,g,x,T){if(!nr(c))return c;g=ls(g,c);for(var O=-1,G=g.length,U=G-1,J=c;J!=null&&++O<G;){var le=Mo(g[O]),be=x;if(le==="__proto__"||le==="constructor"||le==="prototype")return c;if(O!=U){var Ie=J[le];be=T?T(Ie,le,J):n,be===n&&(be=nr(Ie)?Ie:$n(g[O+1])?[]:{})}da(J,le,be),J=J[le]}return c}var Kh=Ih?function(c,g){return Ih.set(c,g),c}:uo,as=Fc?function(c,g){return Fc(c,"toString",{configurable:!0,enumerable:!1,value:g5(g),writable:!0})}:uo;function to(c){return fd(Rd(c))}function jr(c,g,x){var T=-1,O=c.length;g<0&&(g=-g>O?0:O+g),x=x>O?O:x,x<0&&(x+=O),O=g>x?0:x-g>>>0,g>>>=0;for(var G=ve(O);++T<O;)G[T]=c[T+g];return G}function m1(c,g){var x;return ss(c,function(T,O,G){return x=g(T,O,G),!x}),!!x}function Bl(c,g,x){var T=0,O=c==null?T:c.length;if(typeof g=="number"&&g===g&&O<=ut){for(;T<O;){var G=T+O>>>1,U=c[G];U!==null&&!Io(U)&&(x?U<=g:U<g)?T=G+1:O=G}return O}return Yh(c,g,uo,x)}function Yh(c,g,x,T){var O=0,G=c==null?0:c.length;if(G===0)return 0;g=x(g);for(var U=g!==g,J=g===null,le=Io(g),be=g===n;O<G;){var Ie=gu((O+G)/2),He=x(c[Ie]),Ze=He!==n,ft=He===null,Tt=He===He,Xt=Io(He);if(U)var At=T||Tt;else be?At=Tt&&(T||Ze):J?At=Tt&&Ze&&(T||!ft):le?At=Tt&&Ze&&!ft&&(T||!Xt):ft||Xt?At=!1:At=T?He<=g:He<g;At?O=Ie+1:G=Ie}return _r(G,Pe)}function v1(c,g){for(var x=-1,T=c.length,O=0,G=[];++x<T;){var U=c[x],J=g?g(U):U;if(!x||!Xs(J,le)){var le=J;G[O++]=U===0?0:U}}return G}function y1(c){return typeof c=="number"?c:Io(c)?ye:+c}function Ei(c){if(typeof c=="string")return c;if(Ht(c))return Rn(c,Ei)+"";if(Io(c))return kh?kh.call(c):"";var g=c+"";return g=="0"&&1/c==-1/0?"-0":g}function Ws(c,g,x){var T=-1,O=wh,G=c.length,U=!0,J=[],le=J;if(x)U=!1,O=V0;else if(G>=i){var be=g?null:p2(c);if(be)return du(be);U=!1,O=Os,le=new ca}else le=g?[]:J;e:for(;++T<G;){var Ie=c[T],He=g?g(Ie):Ie;if(Ie=x||Ie!==0?Ie:0,U&&He===He){for(var Ze=le.length;Ze--;)if(le[Ze]===He)continue e;g&&le.push(He),J.push(Ie)}else O(le,He,x)||(le!==J&&le.push(He),J.push(Ie))}return J}function qh(c,g){return g=ls(g,c),c=Cr(c,g),c==null||delete c[Mo(oi(g))]}function w1(c,g,x,T){return ya(c,g,x(Ns(c,g)),T)}function Kc(c,g,x,T){for(var O=c.length,G=T?O:-1;(T?G--:++G<O)&&g(c[G],G,c););return x?jr(c,T?0:G,T?G+1:O):jr(c,T?G+1:0,T?O:G)}function Rl(c,g){var x=c;return x instanceof Nt&&(x=x.value()),U0(g,function(T,O){return O.func.apply(O.thisArg,hu([T],O.args))},x)}function Zh(c,g,x){var T=c.length;if(T<2)return T?Ws(c[0]):[];for(var O=-1,G=ve(T);++O<T;)for(var U=c[O],J=-1;++J<T;)J!=O&&(G[O]=os(G[O]||U,c[J],g,x));return Ws(qn(G,1),g,x)}function Yc(c,g,x){for(var T=-1,O=c.length,G=g.length,U={};++T<O;){var J=T<G?g[T]:n;x(U,c[T],J)}return U}function Ml(c){return pr(c)?c:[]}function Qh(c){return typeof c=="function"?c:uo}function ls(c,g){return Ht(c)?c:et(c,g)?[c]:N1(Pn(c))}var u2=jt;function js(c,g,x){var T=c.length;return x=x===n?T:x,!g&&x>=T?c:jr(c,g,x)}var C1=Kp||function(c){return Hn.clearTimeout(c)};function x1(c,g){if(g)return c.slice();var x=c.length,T=t1?t1(x):new c.constructor(x);return c.copy(T),T}function qc(c){var g=new c.constructor(c.byteLength);return new kc(g).set(new kc(c)),g}function a2(c,g){var x=g?qc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.byteLength)}function l2(c){var g=new c.constructor(c.source,Pc.exec(c));return g.lastIndex=c.lastIndex,g}function c2(c){return bi?En(bi.call(c)):{}}function f2(c,g){var x=g?qc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.length)}function E1(c,g){if(c!==g){var x=c!==n,T=c===null,O=c===c,G=Io(c),U=g!==n,J=g===null,le=g===g,be=Io(g);if(!J&&!be&&!G&&c>g||G&&U&&le&&!J&&!be||T&&U&&le||!x&&le||!O)return 1;if(!T&&!G&&!be&&c<g||be&&x&&O&&!T&&!G||J&&x&&O||!U&&O||!le)return-1}return 0}function W7(c,g,x){for(var T=-1,O=c.criteria,G=g.criteria,U=O.length,J=x.length;++T<U;){var le=E1(O[T],G[T]);if(le){if(T>=J)return le;var be=x[T];return le*(be=="desc"?-1:1)}}return c.index-g.index}function h2(c,g,x,T){for(var O=-1,G=c.length,U=x.length,J=-1,le=g.length,be=ur(G-U,0),Ie=ve(le+be),He=!T;++J<le;)Ie[J]=g[J];for(;++O<U;)(He||O<G)&&(Ie[x[O]]=c[O]);for(;be--;)Ie[J++]=c[O++];return Ie}function P1(c,g,x,T){for(var O=-1,G=c.length,U=-1,J=x.length,le=-1,be=g.length,Ie=ur(G-J,0),He=ve(Ie+be),Ze=!T;++O<Ie;)He[O]=c[O];for(var ft=O;++le<be;)He[ft+le]=g[le];for(;++U<J;)(Ze||O<G)&&(He[ft+x[U]]=c[O++]);return He}function ni(c,g){var x=-1,T=c.length;for(g||(g=ve(T));++x<T;)g[x]=c[x];return g}function To(c,g,x,T){var O=!x;x||(x={});for(var G=-1,U=g.length;++G<U;){var J=g[G],le=T?T(x[J],c[J],J,x,c):n;le===n&&(le=c[J]),O?is(x,J,le):da(x,J,le)}return x}function Jh(c,g){return To(c,Ao(c),g)}function j7(c,g){return To(c,v2(c),g)}function ed(c,g){return function(x,T){var O=Ht(x)?j0:Oi,G=g?g():{};return O(x,c,xt(T,2),G)}}function bl(c){return jt(function(g,x){var T=-1,O=x.length,G=O>1?x[O-1]:n,U=O>2?x[2]:n;for(G=c.length>3&&typeof G=="function"?(O--,G):n,U&&ii(x[0],x[1],U)&&(G=O<3?n:G,O=1),g=En(g);++T<O;){var J=x[T];J&&c(g,J,T,G)}return g})}function no(c,g){return function(x,T){if(x==null)return x;if(!oo(x))return c(x,T);for(var O=x.length,G=g?O:-1,U=En(x);(g?G--:++G<O)&&T(U[G],G,U)!==!1;);return x}}function td(c){return function(g,x,T){for(var O=-1,G=En(g),U=T(g),J=U.length;J--;){var le=U[c?J:++O];if(x(G[le],le,G)===!1)break}return g}}function nd(c,g,x){var T=g&S,O=Ol(c);function G(){var U=this&&this!==Hn&&this instanceof G?O:c;return U.apply(T?x:this,arguments)}return G}function S1(c){return function(g){g=Pn(g);var x=fl(g)?Mi(g):n,T=x?x[0]:g.charAt(0),O=x?js(x,1).join(""):g.slice(1);return T[c]()+O}}function wa(c){return function(g){return U0(wy(yy(g).replace(S7,"")),c,"")}}function Ol(c){return function(){var g=arguments;switch(g.length){case 0:return new c;case 1:return new c(g[0]);case 2:return new c(g[0],g[1]);case 3:return new c(g[0],g[1],g[2]);case 4:return new c(g[0],g[1],g[2],g[3]);case 5:return new c(g[0],g[1],g[2],g[3],g[4]);case 6:return new c(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new c(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var x=Cl(c.prototype),T=c.apply(x,g);return nr(T)?T:x}}function D1(c,g,x){var T=Ol(c);function O(){for(var G=arguments.length,U=ve(G),J=G,le=zs(O);J--;)U[J]=arguments[J];var be=G<3&&U[0]!==le&&U[G-1]!==le?[]:Xi(U,le);if(G-=be.length,G<x)return ri(c,g,Il,O.placeholder,n,U,be,n,n,x-G);var Ie=this&&this!==Hn&&this instanceof O?T:c;return ei(Ie,this,U)}return O}function Ca(c){return function(g,x,T){var O=En(g);if(!oo(g)){var G=xt(x,3);g=zr(g),x=function(J){return G(O[J],J,O)}}var U=c(g,x,T);return U>-1?O[G?g[U]:U]:n}}function rd(c){return fs(function(g){var x=g.length,T=x,O=Nr.prototype.thru;for(c&&g.reverse();T--;){var G=g[T];if(typeof G!="function")throw new Ki(s);if(O&&!U&&kl(G)=="wrapper")var U=new Nr([],!0)}for(T=U?T:x;++T<x;){G=g[T];var J=kl(G),le=J=="wrapper"?sd(G):n;le&&of(le[0])&&le[1]==(z|R|F|Q)&&!le[4].length&&le[9]==1?U=U[kl(le[0])].apply(U,le[3]):U=G.length==1&&of(G)?U[J]():U.thru(G)}return function(){var be=arguments,Ie=be[0];if(U&&be.length==1&&Ht(Ie))return U.plant(Ie).value();for(var He=0,Ze=x?g[He].apply(this,be):Ie;++He<x;)Ze=g[He].call(this,Ze);return Ze}})}function Il(c,g,x,T,O,G,U,J,le,be){var Ie=g&z,He=g&S,Ze=g&A,ft=g&(R|_),Tt=g&se,Xt=Ze?n:Ol(c);function At(){for(var Jt=arguments.length,ln=ve(Jt),ko=Jt;ko--;)ln[ko]=arguments[ko];if(ft)var Li=zs(At),Fo=Np(ln,Li);if(T&&(ln=h2(ln,T,O,ft)),G&&(ln=P1(ln,G,U,ft)),Jt-=Fo,ft&&Jt<be){var mr=Xi(ln,Li);return ri(c,g,Il,At.placeholder,x,ln,mr,J,le,be-Jt)}var Ks=He?x:this,Ra=Ze?Ks[c]:c;return Jt=ln.length,J?ln=Bo(ln,J):Tt&&Jt>1&&ln.reverse(),Ie&&le<Jt&&(ln.length=le),this&&this!==Hn&&this instanceof At&&(Ra=Xt||Ol(Ra)),Ra.apply(Ks,ln)}return At}function d2(c,g){return function(x,T){return Hs(x,c,g(T),{})}}function Zc(c,g){return function(x,T){var O;if(x===n&&T===n)return g;if(x!==n&&(O=x),T!==n){if(O===n)return T;typeof x=="string"||typeof T=="string"?(x=Ei(x),T=Ei(T)):(x=y1(x),T=y1(T)),O=c(x,T)}return O}}function id(c){return fs(function(g){return g=Rn(g,Ri(xt())),jt(function(x){var T=this;return c(g,function(O){return ei(O,T,x)})})})}function Qc(c,g){g=g===n?" ":Ei(g);var x=g.length;if(x<2)return x?va(g,c):g;var T=va(g,aa(c/sa(g)));return fl(g)?js(Mi(T),0,c).join(""):T.slice(0,c)}function g2(c,g,x,T){var O=g&S,G=Ol(c);function U(){for(var J=-1,le=arguments.length,be=-1,Ie=T.length,He=ve(Ie+le),Ze=this&&this!==Hn&&this instanceof U?G:c;++be<Ie;)He[be]=T[be];for(;le--;)He[be++]=arguments[++J];return ei(Ze,O?x:this,He)}return U}function T1(c){return function(g,x,T){return T&&typeof T!="number"&&ii(g,x,T)&&(x=T=n),g=Ba(g),x===n?(x=g,g=0):x=Ba(x),T=T===n?g<x?1:-1:Ba(T),Xc(g,x,T,c)}}function od(c){return function(g,x){return typeof g=="string"&&typeof x=="string"||(g=ds(g),x=ds(x)),c(g,x)}}function ri(c,g,x,T,O,G,U,J,le,be){var Ie=g&R,He=Ie?U:n,Ze=Ie?n:U,ft=Ie?G:n,Tt=Ie?n:G;g|=Ie?F:j,g&=~(Ie?j:F),g&B||(g&=-4);var Xt=[c,g,O,ft,He,Tt,Ze,J,le,be],At=x.apply(n,Xt);return of(c)&&L1(At,Xt),At.placeholder=T,_1(At,c,g)}function Ar(c){var g=sr[c];return function(x,T){if(x=ds(x),T=T==null?0:_r(zt(T),292),T&&pl(x)){var O=(Pn(x)+"e").split("e"),G=g(O[0]+"e"+(+O[1]+T));return O=(Pn(G)+"e").split("e"),+(O[0]+"e"+(+O[1]-T))}return g(x)}}var p2=pu&&1/du(new pu([,-0]))[1]==Ae?function(c){return new pu(c)}:v5;function A1(c){return function(g){var x=Br(g);return x==lt?Eh(g):x==tn?L7(g):I7(g,c(g))}}function cs(c,g,x,T,O,G,U,J){var le=g&A;if(!le&&typeof c!="function")throw new Ki(s);var be=T?T.length:0;if(be||(g&=-97,T=O=n),U=U===n?U:ur(zt(U),0),J=J===n?J:zt(J),be-=O?O.length:0,g&j){var Ie=T,He=O;T=O=n}var Ze=le?n:sd(c),ft=[c,g,x,T,O,Ie,He,G,U,J];if(Ze&&x2(ft,Ze),c=ft[0],g=ft[1],x=ft[2],T=ft[3],O=ft[4],J=ft[9]=ft[9]===n?le?0:c.length:ur(ft[9]-be,0),!J&&g&(R|_)&&(g&=-25),!g||g==S)var Tt=nd(c,g,x);else g==R||g==_?Tt=D1(c,g,J):(g==F||g==(S|F))&&!O.length?Tt=g2(c,g,x,T):Tt=Il.apply(n,ft);var Xt=Ze?Kh:L1;return _1(Xt(Tt,ft),c,g)}function B1(c,g,x,T){return c===n||Xs(c,Jo[x])&&!hn.call(T,x)?g:c}function R1(c,g,x,T,O,G){return nr(c)&&nr(g)&&(G.set(g,c),ma(c,g,n,R1,G),G.delete(g)),c}function M1(c){return J1(c)?n:c}function b1(c,g,x,T,O,G){var U=x&E,J=c.length,le=g.length;if(J!=le&&!(U&&le>J))return!1;var be=G.get(c),Ie=G.get(g);if(be&&Ie)return be==g&&Ie==c;var He=-1,Ze=!0,ft=x&y?new ca:n;for(G.set(c,g),G.set(g,c);++He<J;){var Tt=c[He],Xt=g[He];if(T)var At=U?T(Xt,Tt,He,g,c,G):T(Tt,Xt,He,c,g,G);if(At!==n){if(At)continue;Ze=!1;break}if(ft){if(!X0(g,function(Jt,ln){if(!Os(ft,ln)&&(Tt===Jt||O(Tt,Jt,x,T,G)))return ft.push(ln)})){Ze=!1;break}}else if(!(Tt===Xt||O(Tt,Xt,x,T,G))){Ze=!1;break}}return G.delete(c),G.delete(g),Ze}function O1(c,g,x,T,O,G,U){switch(x){case An:if(c.byteLength!=g.byteLength||c.byteOffset!=g.byteOffset)return!1;c=c.buffer,g=g.buffer;case vr:return!(c.byteLength!=g.byteLength||!G(new kc(c),new kc(g)));case De:case Ke:case yt:return Xs(+c,+g);case Rt:return c.name==g.name&&c.message==g.message;case Tn:case nn:return c==g+"";case lt:var J=Eh;case tn:var le=T&E;if(J||(J=du),c.size!=g.size&&!le)return!1;var be=U.get(c);if(be)return be==g;T|=y,U.set(c,g);var Ie=b1(J(c),J(g),T,O,G,U);return U.delete(c),Ie;case Yn:if(bi)return bi.call(c)==bi.call(g)}return!1}function m2(c,g,x,T,O,G){var U=x&E,J=Jc(c),le=J.length,be=Jc(g),Ie=be.length;if(le!=Ie&&!U)return!1;for(var He=le;He--;){var Ze=J[He];if(!(U?Ze in g:hn.call(g,Ze)))return!1}var ft=G.get(c),Tt=G.get(g);if(ft&&Tt)return ft==g&&Tt==c;var Xt=!0;G.set(c,g),G.set(g,c);for(var At=U;++He<le;){Ze=J[He];var Jt=c[Ze],ln=g[Ze];if(T)var ko=U?T(ln,Jt,Ze,g,c,G):T(Jt,ln,Ze,c,g,G);if(!(ko===n?Jt===ln||O(Jt,ln,x,T,G):ko)){Xt=!1;break}At||(At=Ze=="constructor")}if(Xt&&!At){var Li=c.constructor,Fo=g.constructor;Li!=Fo&&"constructor"in c&&"constructor"in g&&!(typeof Li=="function"&&Li instanceof Li&&typeof Fo=="function"&&Fo instanceof Fo)&&(Xt=!1)}return G.delete(c),G.delete(g),Xt}function fs(c){return ki(cd(c,n,dd),c+"")}function Jc(c){return Wh(c,zr,Ao)}function ef(c){return Wh(c,so,v2)}var sd=Ih?function(c){return Ih.get(c)}:v5;function kl(c){for(var g=c.name+"",x=yl[g],T=hn.call(yl,g)?x.length:0;T--;){var O=x[T],G=O.func;if(G==null||G==c)return O.name}return g}function zs(c){var g=hn.call(N,"placeholder")?N:c;return g.placeholder}function xt(){var c=N.iteratee||p5;return c=c===p5?Tl:c,arguments.length?c(arguments[0],arguments[1]):c}function tf(c,g){var x=c.__data__;return Fl(g)?x[typeof g=="string"?"string":"hash"]:x.map}function nf(c){for(var g=zr(c),x=g.length;x--;){var T=g[x],O=c[T];g[x]=[T,O,sf(O)]}return g}function Su(c,g){var x=cl(c,g);return c1(x)?x:n}function ud(c){var g=hn.call(c,ua),x=c[ua];try{c[ua]=n;var T=!0}catch{}var O=Oc.call(c);return T&&(g?c[ua]=x:delete c[ua]),O}var Ao=Mh?function(c){return c==null?[]:(c=En(c),fu(Mh(c),function(g){return Bh.call(c,g)}))}:y5,v2=Mh?function(c){for(var g=[];c;)hu(g,Ao(c)),c=So(c);return g}:y5,Br=Tr;(_c&&Br(new _c(new ArrayBuffer(1)))!=An||la&&Br(new la)!=lt||Nc&&Br(Nc.resolve())!=_n||pu&&Br(new pu)!=tn||Hc&&Br(new Hc)!=$t)&&(Br=function(c){var g=Tr(c),x=g==Mt?c.constructor:n,T=x?Du(x):"";if(T)switch(T){case i1:return An;case mu:return lt;case qp:return _n;case wl:return tn;case es:return $t}return g});function I1(c,g,x){for(var T=-1,O=x.length;++T<O;){var G=x[T],U=G.size;switch(G.type){case"drop":c+=U;break;case"dropRight":g-=U;break;case"take":g=_r(g,c+U);break;case"takeRight":c=ur(c,g-U);break}}return{start:c,end:g}}function y2(c){var g=c.match(el);return g?g[1].split(Ec):[]}function k1(c,g,x){g=ls(g,c);for(var T=-1,O=g.length,G=!1;++T<O;){var U=Mo(g[T]);if(!(G=c!=null&&x(c,U)))break;c=c[U]}return G||++T!=O?G:(O=c==null?0:c.length,!!O&&N2(O)&&$n(U,O)&&(Ht(c)||gf(c)))}function rf(c){var g=c.length,x=new c.constructor(g);return g&&typeof c[0]=="string"&&hn.call(c,"index")&&(x.index=c.index,x.input=c.input),x}function Rr(c){return typeof c.constructor=="function"&&!Vs(c)?Cl(So(c)):{}}function z7(c,g,x){var T=c.constructor;switch(g){case vr:return qc(c);case De:case Ke:return new T(+c);case An:return a2(c,x);case yr:case wr:case or:case zi:case Vi:case Ui:case Zu:case Bs:case Eo:return f2(c,x);case lt:return new T;case yt:case nn:return new T(c);case Tn:return l2(c);case tn:return new T;case Yn:return c2(c)}}function V7(c,g){var x=g.length;if(!x)return c;var T=x-1;return g[T]=(x>1?"& ":"")+g[T],g=g.join(x>2?", ":" "),c.replace(Ja,`{
/* [wrapped with `+g+`] */
`)}function ad(c){return Ht(c)||gf(c)||!!(Xp&&c&&c[Xp])}function $n(c,g){var x=typeof c;return g=g??pe,!!g&&(x=="number"||x!="symbol"&&ah.test(c))&&c>-1&&c%1==0&&c<g}function ii(c,g,x){if(!nr(x))return!1;var T=typeof g;return(T=="number"?oo(x)&&$n(g,x.length):T=="string"&&g in x)?Xs(x[g],c):!1}function et(c,g){if(Ht(c))return!1;var x=typeof c;return x=="number"||x=="symbol"||x=="boolean"||c==null||Io(c)?!0:ih.test(c)||!Cc.test(c)||g!=null&&c in En(g)}function Fl(c){var g=typeof c;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?c!=="__proto__":c===null}function of(c){var g=kl(c),x=N[g];if(typeof x!="function"||!(g in Nt.prototype))return!1;if(c===x)return!0;var T=sd(x);return!!T&&c===T[0]}function w2(c){return!!Dh&&Dh in c}var U7=dl?Aa:w5;function Vs(c){var g=c&&c.constructor,x=typeof g=="function"&&g.prototype||Jo;return c===x}function sf(c){return c===c&&!nr(c)}function ld(c,g){return function(x){return x==null?!1:x[c]===g&&(g!==n||c in En(x))}}function C2(c){var g=ge(c,function(T){return x.size===h&&x.clear(),T}),x=g.cache;return g}function x2(c,g){var x=c[1],T=g[1],O=x|T,G=O<(S|A|z),U=T==z&&x==R||T==z&&x==Q&&c[7].length<=g[8]||T==(z|Q)&&g[7].length<=g[8]&&x==R;if(!(G||U))return c;T&S&&(c[2]=g[2],O|=x&S?0:B);var J=g[3];if(J){var le=c[3];c[3]=le?h2(le,J,g[4]):J,c[4]=le?Xi(c[3],d):g[4]}return J=g[5],J&&(le=c[5],c[5]=le?P1(le,J,g[6]):J,c[6]=le?Xi(c[5],d):g[6]),J=g[7],J&&(c[7]=J),T&z&&(c[8]=c[8]==null?g[8]:_r(c[8],g[8])),c[9]==null&&(c[9]=g[9]),c[0]=g[0],c[1]=O,c}function E2(c){var g=[];if(c!=null)for(var x in En(c))g.push(x);return g}function F1(c){return Oc.call(c)}function cd(c,g,x){return g=ur(g===n?c.length-1:g,0),function(){for(var T=arguments,O=-1,G=ur(T.length-g,0),U=ve(G);++O<G;)U[O]=T[g+O];O=-1;for(var J=ve(g+1);++O<g;)J[O]=T[O];return J[g]=x(U),ei(c,this,J)}}function Cr(c,g){return g.length<2?c:Ns(c,jr(g,0,-1))}function Bo(c,g){for(var x=c.length,T=_r(g.length,x),O=ni(c);T--;){var G=g[T];c[T]=$n(G,x)?O[G]:n}return c}function hs(c,g){if(!(g==="constructor"&&typeof c[g]=="function")&&g!="__proto__")return c[g]}var L1=Ro(Kh),Ll=n1||function(c,g){return Hn.setTimeout(c,g)},ki=Ro(as);function _1(c,g,x){var T=g+"";return ki(c,V7(T,P2(y2(T),x)))}function Ro(c){var g=0,x=0;return function(){var T=$7(),O=ce-(T-x);if(x=T,O>0){if(++g>=ie)return arguments[0]}else g=0;return c.apply(n,arguments)}}function fd(c,g){var x=-1,T=c.length,O=T-1;for(g=g===n?T:g;++x<g;){var G=Al(x,O),U=c[G];c[G]=c[x],c[x]=U}return c.length=g,c}var N1=C2(function(c){var g=[];return c.charCodeAt(0)===46&&g.push(""),c.replace(Ju,function(x,T,O,G){g.push(O?G.replace(_0,"$1"):T||x)}),g});function Mo(c){if(typeof c=="string"||Io(c))return c;var g=c+"";return g=="0"&&1/c==-1/0?"-0":g}function Du(c){if(c!=null){try{return bc.call(c)}catch{}try{return c+""}catch{}}return""}function P2(c,g){return Lr(Me,function(x){var T="_."+x[0];g&x[1]&&!wh(c,T)&&c.push(T)}),c.sort()}function S2(c){if(c instanceof Nt)return c.clone();var g=new Nr(c.__wrapped__,c.__chain__);return g.__actions__=ni(c.__actions__),g.__index__=c.__index__,g.__values__=c.__values__,g}function hd(c,g,x){(x?ii(c,g,x):g===n)?g=1:g=ur(zt(g),0);var T=c==null?0:c.length;if(!T||g<1)return[];for(var O=0,G=0,U=ve(aa(T/g));O<T;)U[G++]=jr(c,O,O+=g);return U}function H1(c){for(var g=-1,x=c==null?0:c.length,T=0,O=[];++g<x;){var G=c[g];G&&(O[T++]=G)}return O}function ro(){var c=arguments.length;if(!c)return[];for(var g=ve(c-1),x=arguments[0],T=c;T--;)g[T-1]=arguments[T];return hu(Ht(x)?ni(x):[x],qn(g,1))}var an=jt(function(c,g){return pr(c)?os(c,qn(g,1,pr,!0)):[]}),xr=jt(function(c,g){var x=oi(g);return pr(x)&&(x=n),pr(c)?os(c,qn(g,1,pr,!0),xt(x,2)):[]}),ar=jt(function(c,g){var x=oi(g);return pr(x)&&(x=n),pr(c)?os(c,qn(g,1,pr,!0),n,x):[]});function Mr(c,g,x){var T=c==null?0:c.length;return T?(g=x||g===n?1:zt(g),jr(c,g<0?0:g,T)):[]}function Fi(c,g,x){var T=c==null?0:c.length;return T?(g=x||g===n?1:zt(g),g=T-g,jr(c,0,g<0?0:g)):[]}function _l(c,g){return c&&c.length?Kc(c,xt(g,3),!0,!0):[]}function gr(c,g){return c&&c.length?Kc(c,xt(g,3),!0):[]}function uf(c,g,x,T){var O=c==null?0:c.length;return O?(x&&typeof x!="number"&&ii(c,g,x)&&(x=0,T=O),i2(c,g,x,T)):[]}function Tu(c,g,x){var T=c==null?0:c.length;if(!T)return-1;var O=x==null?0:zt(x);return O<0&&(O=ur(T+O,0)),Ch(c,xt(g,3),O)}function af(c,g,x){var T=c==null?0:c.length;if(!T)return-1;var O=T-1;return x!==n&&(O=zt(x),O=x<0?ur(T+O,0):_r(O,T-1)),Ch(c,xt(g,3),O,!0)}function dd(c){var g=c==null?0:c.length;return g?qn(c,1):[]}function lf(c){var g=c==null?0:c.length;return g?qn(c,Ae):[]}function Pi(c,g){var x=c==null?0:c.length;return x?(g=g===n?1:zt(g),qn(c,g)):[]}function G1(c){for(var g=-1,x=c==null?0:c.length,T={};++g<x;){var O=c[g];T[O[0]]=O[1]}return T}function xa(c){return c&&c.length?c[0]:n}function Us(c,g,x){var T=c==null?0:c.length;if(!T)return-1;var O=x==null?0:zt(x);return O<0&&(O=ur(T+O,0)),ll(c,g,O)}function gd(c){var g=c==null?0:c.length;return g?jr(c,0,-1):[]}var $1=jt(function(c){var g=Rn(c,Ml);return g.length&&g[0]===c[0]?jh(g):[]}),Au=jt(function(c){var g=oi(c),x=Rn(c,Ml);return g===oi(x)?g=n:x.pop(),x.length&&x[0]===c[0]?jh(x,xt(g,2)):[]}),pd=jt(function(c){var g=oi(c),x=Rn(c,Ml);return g=typeof g=="function"?g:n,g&&x.pop(),x.length&&x[0]===c[0]?jh(x,n,g):[]});function Bu(c,g){return c==null?"":bh.call(c,g)}function oi(c){var g=c==null?0:c.length;return g?c[g-1]:n}function cf(c,g,x){var T=c==null?0:c.length;if(!T)return-1;var O=T;return x!==n&&(O=zt(x),O=O<0?ur(T+O,0):_r(O,T-1)),g===g?_7(c,g,O):Ch(c,Ip,O,!0)}function W1(c,g){return c&&c.length?Xh(c,zt(g)):n}var md=jt(ff);function ff(c,g){return c&&c.length&&g&&g.length?er(c,g):c}function si(c,g,x){return c&&c.length&&g&&g.length?er(c,g,xt(x,2)):c}function Ru(c,g,x){return c&&c.length&&g&&g.length?er(c,g,n,x):c}var bo=fs(function(c,g){var x=c==null?0:c.length,T=Gh(c,g);return dr(c,Rn(g,function(O){return $n(O,x)?+O:O}).sort(E1)),T});function Si(c,g){var x=[];if(!(c&&c.length))return x;var T=-1,O=[],G=c.length;for(g=xt(g,3);++T<G;){var U=c[T];g(U,T,c)&&(x.push(U),O.push(T))}return dr(c,O),x}function vd(c){return c==null?c:Oh.call(c)}function j1(c,g,x){var T=c==null?0:c.length;return T?(x&&typeof x!="number"&&ii(c,g,x)?(g=0,x=T):(g=g==null?0:zt(g),x=x===n?T:zt(x)),jr(c,g,x)):[]}function z1(c,g){return Bl(c,g)}function X7(c,g,x){return Yh(c,g,xt(x,2))}function Mu(c,g){var x=c==null?0:c.length;if(x){var T=Bl(c,g);if(T<x&&Xs(c[T],g))return T}return-1}function D2(c,g){return Bl(c,g,!0)}function V1(c,g,x){return Yh(c,g,xt(x,2),!0)}function Ea(c,g){var x=c==null?0:c.length;if(x){var T=Bl(c,g,!0)-1;if(Xs(c[T],g))return T}return-1}function U1(c){return c&&c.length?v1(c):[]}function Pa(c,g){return c&&c.length?v1(c,xt(g,2)):[]}function T2(c){var g=c==null?0:c.length;return g?jr(c,1,g):[]}function A2(c,g,x){return c&&c.length?(g=x||g===n?1:zt(g),jr(c,0,g<0?0:g)):[]}function X1(c,g,x){var T=c==null?0:c.length;return T?(g=x||g===n?1:zt(g),g=T-g,jr(c,g<0?0:g,T)):[]}function yd(c,g){return c&&c.length?Kc(c,xt(g,3),!1,!0):[]}function K7(c,g){return c&&c.length?Kc(c,xt(g,3)):[]}var Y7=jt(function(c){return Ws(qn(c,1,pr,!0))}),B2=jt(function(c){var g=oi(c);return pr(g)&&(g=n),Ws(qn(c,1,pr,!0),xt(g,2))}),R2=jt(function(c){var g=oi(c);return g=typeof g=="function"?g:n,Ws(qn(c,1,pr,!0),n,g)});function Sa(c){return c&&c.length?Ws(c):[]}function q7(c,g){return c&&c.length?Ws(c,xt(g,2)):[]}function Nl(c,g){return g=typeof g=="function"?g:n,c&&c.length?Ws(c,n,g):[]}function wd(c){if(!(c&&c.length))return[];var g=0;return c=fu(c,function(x){if(pr(x))return g=ur(x.length,g),!0}),Z0(g,function(x){return Rn(c,Y0(x))})}function jn(c,g){if(!(c&&c.length))return[];var x=wd(c);return g==null?x:Rn(x,function(T){return ei(g,n,T)})}var Z7=jt(function(c,g){return pr(c)?os(c,g):[]}),M2=jt(function(c){return Zh(fu(c,pr))}),Q7=jt(function(c){var g=oi(c);return pr(g)&&(g=n),Zh(fu(c,pr),xt(g,2))}),J7=jt(function(c){var g=oi(c);return g=typeof g=="function"?g:n,Zh(fu(c,pr),n,g)}),b2=jt(wd);function O2(c,g){return Yc(c||[],g||[],da)}function e5(c,g){return Yc(c||[],g||[],ya)}var io=jt(function(c){var g=c.length,x=g>1?c[g-1]:n;return x=typeof x=="function"?(c.pop(),x):n,jn(c,x)});function Cd(c){var g=N(c);return g.__chain__=!0,g}function t5(c,g){return g(c),c}function Oo(c,g){return g(c)}var xd=fs(function(c){var g=c.length,x=g?c[0]:0,T=this.__wrapped__,O=function(G){return Gh(G,c)};return g>1||this.__actions__.length||!(T instanceof Nt)||!$n(x)?this.thru(O):(T=T.slice(x,+x+(g?1:0)),T.__actions__.push({func:Oo,args:[O],thisArg:n}),new Nr(T,this.__chain__).thru(function(G){return g&&!G.length&&G.push(n),G}))});function Da(){return Cd(this)}function Ed(){return new Nr(this.value(),this.__chain__)}function K1(){this.__values__===n&&(this.__values__=ly(this.value()));var c=this.__index__>=this.__values__.length,g=c?n:this.__values__[this.__index__++];return{done:c,value:g}}function Y1(){return this}function n5(c){for(var g,x=this;x instanceof ts;){var T=S2(x);T.__index__=0,T.__values__=n,g?O.__wrapped__=T:g=T;var O=T;x=x.__wrapped__}return O.__wrapped__=c,g}function q1(){var c=this.__wrapped__;if(c instanceof Nt){var g=c;return this.__actions__.length&&(g=new Nt(this)),g=g.reverse(),g.__actions__.push({func:Oo,args:[vd],thisArg:n}),new Nr(g,this.__chain__)}return this.thru(vd)}function r5(){return Rl(this.__wrapped__,this.__actions__)}var I2=ed(function(c,g,x){hn.call(c,x)?++c[x]:is(c,x,1)});function k2(c,g,x){var T=Ht(c)?z0:Wc;return x&&ii(c,g,x)&&(g=n),T(c,xt(g,3))}function Pd(c,g){var x=Ht(c)?fu:a1;return x(c,xt(g,3))}var Sd=Ca(Tu),F2=Ca(af);function Z1(c,g){return qn(Ta(c,g),1)}function i5(c,g){return qn(Ta(c,g),Ae)}function L2(c,g,x){return x=x===n?1:zt(x),qn(Ta(c,g),x)}function Dd(c,g){var x=Ht(c)?Lr:ss;return x(c,xt(g,3))}function hf(c,g){var x=Ht(c)?yh:r2;return x(c,xt(g,3))}var Q1=ed(function(c,g,x){hn.call(c,x)?c[x].push(g):is(c,x,[g])});function Td(c,g,x,T){c=oo(c)?c:Rd(c),x=x&&!T?zt(x):0;var O=c.length;return x<0&&(x=ur(O+x,0)),H2(c)?x<=O&&c.indexOf(g,x)>-1:!!O&&ll(c,g,x)>-1}var _2=jt(function(c,g,x){var T=-1,O=typeof g=="function",G=oo(c)?ve(c.length):[];return ss(c,function(U){G[++T]=O?ei(g,U,x):Ji(U,g,x)}),G}),o5=ed(function(c,g,x){is(c,x,g)});function Ta(c,g){var x=Ht(c)?Rn:h1;return x(c,xt(g,3))}function s5(c,g,x,T){return c==null?[]:(Ht(g)||(g=g==null?[]:[g]),x=T?n:x,Ht(x)||(x=x==null?[]:[x]),Uc(c,g,x))}var df=ed(function(c,g,x){c[x?0:1].push(g)},function(){return[[],[]]});function u5(c,g,x){var T=Ht(c)?U0:Fp,O=arguments.length<3;return T(c,xt(g,4),x,O,ss)}function Ad(c,g,x){var T=Ht(c)?R7:Fp,O=arguments.length<3;return T(c,xt(g,4),x,O,r2)}function u(c,g){var x=Ht(c)?fu:a1;return x(c,ze(xt(g,3)))}function l(c){var g=Ht(c)?rs:Wr;return g(c)}function m(c,g,x){(x?ii(c,g,x):g===n)?g=1:g=zt(g);var T=Ht(c)?ha:p1;return T(c,g)}function C(c){var g=Ht(c)?t2:to;return g(c)}function P(c){if(c==null)return 0;if(oo(c))return H2(c)?sa(c):c.length;var g=Br(c);return g==lt||g==tn?c.size:$s(c).length}function D(c,g,x){var T=Ht(c)?X0:m1;return x&&ii(c,g,x)&&(g=n),T(c,xt(g,3))}var L=jt(function(c,g){if(c==null)return[];var x=g.length;return x>1&&ii(c,g[0],g[1])?g=[]:x>2&&ii(g[0],g[1],g[2])&&(g=[g[0]]),Uc(c,qn(g,1),[])}),V=In||function(){return Hn.Date.now()};function Z(c,g){if(typeof g!="function")throw new Ki(s);return c=zt(c),function(){if(--c<1)return g.apply(this,arguments)}}function xe(c,g,x){return g=x?n:g,g=c&&g==null?c.length:g,cs(c,z,n,n,n,n,g)}function _e(c,g){var x;if(typeof g!="function")throw new Ki(s);return c=zt(c),function(){return--c>0&&(x=g.apply(this,arguments)),c<=1&&(g=n),x}}var Ge=jt(function(c,g,x){var T=S;if(x.length){var O=Xi(x,zs(Ge));T|=F}return cs(c,T,g,x,O)}),Le=jt(function(c,g,x){var T=S|A;if(x.length){var O=Xi(x,zs(Le));T|=F}return cs(g,T,c,x,O)});function Je(c,g,x){g=x?n:g;var T=cs(c,R,n,n,n,n,n,g);return T.placeholder=Je.placeholder,T}function nt(c,g,x){g=x?n:g;var T=cs(c,_,n,n,n,n,n,g);return T.placeholder=nt.placeholder,T}function ot(c,g,x){var T,O,G,U,J,le,be=0,Ie=!1,He=!1,Ze=!0;if(typeof c!="function")throw new Ki(s);g=ds(g)||0,nr(x)&&(Ie=!!x.leading,He="maxWait"in x,G=He?ur(ds(x.maxWait)||0,g):G,Ze="trailing"in x?!!x.trailing:Ze);function ft(mr){var Ks=T,Ra=O;return T=O=n,be=mr,U=c.apply(Ra,Ks),U}function Tt(mr){return be=mr,J=Ll(Jt,g),Ie?ft(mr):U}function Xt(mr){var Ks=mr-le,Ra=mr-be,Ey=g-Ks;return He?_r(Ey,G-Ra):Ey}function At(mr){var Ks=mr-le,Ra=mr-be;return le===n||Ks>=g||Ks<0||He&&Ra>=G}function Jt(){var mr=V();if(At(mr))return ln(mr);J=Ll(Jt,Xt(mr))}function ln(mr){return J=n,Ze&&T?ft(mr):(T=O=n,U)}function ko(){J!==n&&C1(J),be=0,T=le=O=J=n}function Li(){return J===n?U:ln(V())}function Fo(){var mr=V(),Ks=At(mr);if(T=arguments,O=this,le=mr,Ks){if(J===n)return Tt(le);if(He)return C1(J),J=Ll(Jt,g),ft(le)}return J===n&&(J=Ll(Jt,g)),U}return Fo.cancel=ko,Fo.flush=Li,Fo}var tr=jt(function(c,g){return u1(c,1,g)}),de=jt(function(c,g,x){return u1(c,ds(g)||0,x)});function ne(c){return cs(c,se)}function ge(c,g){if(typeof c!="function"||g!=null&&typeof g!="function")throw new Ki(s);var x=function(){var T=arguments,O=g?g.apply(this,T):T[0],G=x.cache;if(G.has(O))return G.get(O);var U=c.apply(this,T);return x.cache=G.set(O,U)||G,U};return x.cache=new(ge.Cache||Yi),x}ge.Cache=Yi;function ze(c){if(typeof c!="function")throw new Ki(s);return function(){var g=arguments;switch(g.length){case 0:return!c.call(this);case 1:return!c.call(this,g[0]);case 2:return!c.call(this,g[0],g[1]);case 3:return!c.call(this,g[0],g[1],g[2])}return!c.apply(this,g)}}function ct(c){return _e(2,c)}var Ct=u2(function(c,g){g=g.length==1&&Ht(g[0])?Rn(g[0],Ri(xt())):Rn(qn(g,1),Ri(xt()));var x=g.length;return jt(function(T){for(var O=-1,G=_r(T.length,x);++O<G;)T[O]=g[O].call(this,T[O]);return ei(c,this,T)})}),mt=jt(function(c,g){var x=Xi(g,zs(mt));return cs(c,F,n,g,x)}),Dt=jt(function(c,g){var x=Xi(g,zs(Dt));return cs(c,j,n,g,x)}),Er=fs(function(c,g){return cs(c,Q,n,n,n,g)});function dn(c,g){if(typeof c!="function")throw new Ki(s);return g=g===n?g:zt(g),jt(c,g)}function bu(c,g){if(typeof c!="function")throw new Ki(s);return g=g==null?0:ur(zt(g),0),jt(function(x){var T=x[g],O=js(x,0,g);return T&&hu(O,T),ei(c,this,O)})}function a5(c,g,x){var T=!0,O=!0;if(typeof c!="function")throw new Ki(s);return nr(x)&&(T="leading"in x?!!x.leading:T,O="trailing"in x?!!x.trailing:O),ot(c,g,{leading:T,maxWait:g,trailing:O})}function JA(c){return xe(c,1)}function eB(c,g){return mt(Qh(g),c)}function tB(){if(!arguments.length)return[];var c=arguments[0];return Ht(c)?c:[c]}function nB(c){return xi(c,w)}function rB(c,g){return g=typeof g=="function"?g:n,xi(c,w,g)}function iB(c){return xi(c,p|w)}function oB(c,g){return g=typeof g=="function"?g:n,xi(c,p|w,g)}function sB(c,g){return g==null||$c(c,g,zr(g))}function Xs(c,g){return c===g||c!==c&&g!==g}var uB=od(xu),aB=od(function(c,g){return c>=g}),gf=zh(function(){return arguments}())?zh:function(c){return lr(c)&&hn.call(c,"callee")&&!Bh.call(c,"callee")},Ht=ve.isArray,lB=W0?Ri(W0):o2;function oo(c){return c!=null&&N2(c.length)&&!Aa(c)}function pr(c){return lr(c)&&oo(c)}function cB(c){return c===!0||c===!1||lr(c)&&Tr(c)==De}var Hl=r1||w5,fB=vi?Ri(vi):Gs;function hB(c){return lr(c)&&c.nodeType===1&&!J1(c)}function dB(c){if(c==null)return!0;if(oo(c)&&(Ht(c)||typeof c=="string"||typeof c.splice=="function"||Hl(c)||Bd(c)||gf(c)))return!c.length;var g=Br(c);if(g==lt||g==tn)return!c.size;if(Vs(c))return!$s(c).length;for(var x in c)if(hn.call(c,x))return!1;return!0}function gB(c,g){return eo(c,g)}function pB(c,g,x){x=typeof x=="function"?x:n;var T=x?x(c,g):n;return T===n?eo(c,g,n,x):!!T}function l5(c){if(!lr(c))return!1;var g=Tr(c);return g==Rt||g==Ue||typeof c.message=="string"&&typeof c.name=="string"&&!J1(c)}function mB(c){return typeof c=="number"&&pl(c)}function Aa(c){if(!nr(c))return!1;var g=Tr(c);return g==It||g==St||g==we||g==ir}function oy(c){return typeof c=="number"&&c==zt(c)}function N2(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=pe}function nr(c){var g=typeof c;return c!=null&&(g=="object"||g=="function")}function lr(c){return c!=null&&typeof c=="object"}var sy=oa?Ri(oa):s2;function vB(c,g){return c===g||Dl(c,g,nf(g))}function yB(c,g,x){return x=typeof x=="function"?x:n,Dl(c,g,nf(g),x)}function wB(c){return uy(c)&&c!=+c}function CB(c){if(U7(c))throw new kt(o);return c1(c)}function xB(c){return c===null}function EB(c){return c==null}function uy(c){return typeof c=="number"||lr(c)&&Tr(c)==yt}function J1(c){if(!lr(c)||Tr(c)!=Mt)return!1;var g=So(c);if(g===null)return!0;var x=hn.call(g,"constructor")&&g.constructor;return typeof x=="function"&&x instanceof x&&bc.call(x)==Th}var c5=vh?Ri(vh):zc;function PB(c){return oy(c)&&c>=-9007199254740991&&c<=pe}var ay=al?Ri(al):us;function H2(c){return typeof c=="string"||!Ht(c)&&lr(c)&&Tr(c)==nn}function Io(c){return typeof c=="symbol"||lr(c)&&Tr(c)==Yn}var Bd=Mp?Ri(Mp):Vc;function SB(c){return c===n}function DB(c){return lr(c)&&Br(c)==$t}function TB(c){return lr(c)&&Tr(c)==Dr}var AB=od(Eu),BB=od(function(c,g){return c<=g});function ly(c){if(!c)return[];if(oo(c))return H2(c)?Mi(c):ni(c);if(Fs&&c[Fs])return F7(c[Fs]());var g=Br(c),x=g==lt?Eh:g==tn?du:Rd;return x(c)}function Ba(c){if(!c)return c===0?c:0;if(c=ds(c),c===Ae||c===-1/0){var g=c<0?-1:1;return g*ue}return c===c?c:0}function zt(c){var g=Ba(c),x=g%1;return g===g?x?g-x:g:0}function cy(c){return c?_s(zt(c),0,X):0}function ds(c){if(typeof c=="number")return c;if(Io(c))return ye;if(nr(c)){var g=typeof c.valueOf=="function"?c.valueOf():c;c=nr(g)?g+"":g}if(typeof c!="string")return c===0?c:+c;c=Lp(c);var x=N0.test(c);return x||uh.test(c)?ph(c.slice(2),x?2:8):oh.test(c)?ye:+c}function fy(c){return To(c,so(c))}function RB(c){return c?_s(zt(c),-9007199254740991,pe):c===0?c:0}function Pn(c){return c==null?"":Ei(c)}var MB=bl(function(c,g){if(Vs(g)||oo(g)){To(g,zr(g),c);return}for(var x in g)hn.call(g,x)&&da(c,x,g[x])}),hy=bl(function(c,g){To(g,so(g),c)}),G2=bl(function(c,g,x,T){To(g,so(g),c,T)}),bB=bl(function(c,g,x,T){To(g,zr(g),c,T)}),OB=fs(Gh);function IB(c,g){var x=Cl(c);return g==null?x:Fn(x,g)}var kB=jt(function(c,g){c=En(c);var x=-1,T=g.length,O=T>2?g[2]:n;for(O&&ii(g[0],g[1],O)&&(T=1);++x<T;)for(var G=g[x],U=so(G),J=-1,le=U.length;++J<le;){var be=U[J],Ie=c[be];(Ie===n||Xs(Ie,Jo[be])&&!hn.call(c,be))&&(c[be]=G[be])}return c}),FB=jt(function(c){return c.push(n,R1),ei(dy,n,c)});function LB(c,g){return Op(c,xt(g,3),Ii)}function _B(c,g){return Op(c,xt(g,3),Cu)}function NB(c,g){return c==null?c:$h(c,xt(g,3),so)}function HB(c,g){return c==null?c:jc(c,xt(g,3),so)}function GB(c,g){return c&&Ii(c,xt(g,3))}function $B(c,g){return c&&Cu(c,xt(g,3))}function WB(c){return c==null?[]:Sl(c,zr(c))}function jB(c){return c==null?[]:Sl(c,so(c))}function f5(c,g,x){var T=c==null?n:Ns(c,g);return T===n?x:T}function zB(c,g){return c!=null&&k1(c,g,Qi)}function h5(c,g){return c!=null&&k1(c,g,pa)}var VB=d2(function(c,g,x){g!=null&&typeof g.toString!="function"&&(g=Oc.call(g)),c[g]=x},g5(uo)),UB=d2(function(c,g,x){g!=null&&typeof g.toString!="function"&&(g=Oc.call(g)),hn.call(c,g)?c[g].push(x):c[g]=[x]},xt),XB=jt(Ji);function zr(c){return oo(c)?ns(c):$s(c)}function so(c){return oo(c)?ns(c,!0):f1(c)}function KB(c,g){var x={};return g=xt(g,3),Ii(c,function(T,O,G){is(x,g(T,O,G),T)}),x}function YB(c,g){var x={};return g=xt(g,3),Ii(c,function(T,O,G){is(x,O,g(T,O,G))}),x}var qB=bl(function(c,g,x){ma(c,g,x)}),dy=bl(function(c,g,x,T){ma(c,g,x,T)}),ZB=fs(function(c,g){var x={};if(c==null)return x;var T=!1;g=Rn(g,function(G){return G=ls(G,c),T||(T=G.length>1),G}),To(c,ef(c),x),T&&(x=xi(x,p|v|w,M1));for(var O=g.length;O--;)qh(x,g[O]);return x});function QB(c,g){return gy(c,ze(xt(g)))}var JB=fs(function(c,g){return c==null?{}:g1(c,g)});function gy(c,g){if(c==null)return{};var x=Rn(ef(c),function(T){return[T]});return g=xt(g),Pu(c,x,function(T,O){return g(T,O[0])})}function eR(c,g,x){g=ls(g,c);var T=-1,O=g.length;for(O||(O=1,c=n);++T<O;){var G=c==null?n:c[Mo(g[T])];G===n&&(T=O,G=x),c=Aa(G)?G.call(c):G}return c}function tR(c,g,x){return c==null?c:ya(c,g,x)}function nR(c,g,x,T){return T=typeof T=="function"?T:n,c==null?c:ya(c,g,x,T)}var py=A1(zr),my=A1(so);function rR(c,g,x){var T=Ht(c),O=T||Hl(c)||Bd(c);if(g=xt(g,4),x==null){var G=c&&c.constructor;O?x=T?new G:[]:nr(c)?x=Aa(G)?Cl(So(c)):{}:x={}}return(O?Lr:Ii)(c,function(U,J,le){return g(x,U,J,le)}),x}function iR(c,g){return c==null?!0:qh(c,g)}function oR(c,g,x){return c==null?c:w1(c,g,Qh(x))}function sR(c,g,x,T){return T=typeof T=="function"?T:n,c==null?c:w1(c,g,Qh(x),T)}function Rd(c){return c==null?[]:Rc(c,zr(c))}function uR(c){return c==null?[]:Rc(c,so(c))}function aR(c,g,x){return x===n&&(x=g,g=n),x!==n&&(x=ds(x),x=x===x?x:0),g!==n&&(g=ds(g),g=g===g?g:0),_s(ds(c),g,x)}function lR(c,g,x){return g=Ba(g),x===n?(x=g,g=0):x=Ba(x),c=ds(c),l1(c,g,x)}function cR(c,g,x){if(x&&typeof x!="boolean"&&ii(c,g,x)&&(g=x=n),x===n&&(typeof g=="boolean"?(x=g,g=n):typeof c=="boolean"&&(x=c,c=n)),c===n&&g===n?(c=0,g=1):(c=Ba(c),g===n?(g=c,c=0):g=Ba(g)),c>g){var T=c;c=g,g=T}if(x||c%1||g%1){var O=Lc();return _r(c+O*(g-c+G0("1e-"+((O+"").length-1))),g)}return Al(c,g)}var fR=wa(function(c,g,x){return g=g.toLowerCase(),c+(x?vy(g):g)});function vy(c){return d5(Pn(c).toLowerCase())}function yy(c){return c=Pn(c),c&&c.replace(lh,Hp).replace(Tp,"")}function hR(c,g,x){c=Pn(c),g=Ei(g);var T=c.length;x=x===n?T:_s(zt(x),0,T);var O=x;return x-=g.length,x>=0&&c.slice(x,O)==g}function dR(c){return c=Pn(c),c&&th.test(c)?c.replace(Ms,Gp):c}function gR(c){return c=Pn(c),c&&ta.test(c)?c.replace(ea,"\\$&"):c}var pR=wa(function(c,g,x){return c+(x?"-":"")+g.toLowerCase()}),mR=wa(function(c,g,x){return c+(x?" ":"")+g.toLowerCase()}),vR=S1("toLowerCase");function yR(c,g,x){c=Pn(c),g=zt(g);var T=g?sa(c):0;if(!g||T>=g)return c;var O=(g-T)/2;return Qc(gu(O),x)+c+Qc(aa(O),x)}function wR(c,g,x){c=Pn(c),g=zt(g);var T=g?sa(c):0;return g&&T<g?c+Qc(g-T,x):c}function CR(c,g,x){c=Pn(c),g=zt(g);var T=g?sa(c):0;return g&&T<g?Qc(g-T,x)+c:c}function xR(c,g,x){return x||g==null?g=0:g&&(g=+g),Yp(Pn(c).replace(xc,""),g||0)}function ER(c,g,x){return(x?ii(c,g,x):g===n)?g=1:g=zt(g),va(Pn(c),g)}function PR(){var c=arguments,g=Pn(c[0]);return c.length<3?g:g.replace(c[1],c[2])}var SR=wa(function(c,g,x){return c+(x?"_":"")+g.toLowerCase()});function DR(c,g,x){return x&&typeof x!="number"&&ii(c,g,x)&&(g=x=n),x=x===n?X:x>>>0,x?(c=Pn(c),c&&(typeof g=="string"||g!=null&&!c5(g))&&(g=Ei(g),!g&&fl(c))?js(Mi(c),0,x):c.split(g,x)):[]}var TR=wa(function(c,g,x){return c+(x?" ":"")+d5(g)});function AR(c,g,x){return c=Pn(c),x=x==null?0:_s(zt(x),0,c.length),g=Ei(g),c.slice(x,x+g.length)==g}function BR(c,g,x){var T=N.templateSettings;x&&ii(c,g,x)&&(g=n),c=Pn(c),g=G2({},g,T,B1);var O=G2({},g.imports,T.imports,B1),G=zr(O),U=Rc(O,G),J,le,be=0,Ie=g.interpolate||tl,He="__p += '",Ze=Mc((g.escape||tl).source+"|"+Ie.source+"|"+(Ie===wc?bs:tl).source+"|"+(g.evaluate||tl).source+"|$","g"),ft="//# sourceURL="+(hn.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++T7+"]")+`
`;c.replace(Ze,function(At,Jt,ln,ko,Li,Fo){return ln||(ln=ko),He+=c.slice(be,Fo).replace(ch,$p),Jt&&(J=!0,He+=`' +
__e(`+Jt+`) +
'`),Li&&(le=!0,He+=`';
`+Li+`;
__p += '`),ln&&(He+=`' +
((__t = (`+ln+`)) == null ? '' : __t) +
'`),be=Fo+At.length,At}),He+=`';
`;var Tt=hn.call(g,"variable")&&g.variable;if(!Tt)He=`with (obj) {
`+He+`
}
`;else if(L0.test(Tt))throw new kt(a);He=(le?He.replace(uu,""):He).replace(Qu,"$1").replace(pi,"$1;"),He="function("+(Tt||"obj")+`) {
`+(Tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(le?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+He+`return __p
}`;var Xt=Cy(function(){return fn(G,ft+"return "+He).apply(n,U)});if(Xt.source=He,l5(Xt))throw Xt;return Xt}function RR(c){return Pn(c).toLowerCase()}function MR(c){return Pn(c).toUpperCase()}function bR(c,g,x){if(c=Pn(c),c&&(x||g===n))return Lp(c);if(!c||!(g=Ei(g)))return c;var T=Mi(c),O=Mi(g),G=_p(T,O),U=Q0(T,O)+1;return js(T,G,U).join("")}function OR(c,g,x){if(c=Pn(c),c&&(x||g===n))return c.slice(0,Sh(c)+1);if(!c||!(g=Ei(g)))return c;var T=Mi(c),O=Q0(T,Mi(g))+1;return js(T,0,O).join("")}function IR(c,g,x){if(c=Pn(c),c&&(x||g===n))return c.replace(xc,"");if(!c||!(g=Ei(g)))return c;var T=Mi(c),O=_p(T,Mi(g));return js(T,O).join("")}function kR(c,g){var x=te,T=Ee;if(nr(g)){var O="separator"in g?g.separator:O;x="length"in g?zt(g.length):x,T="omission"in g?Ei(g.omission):T}c=Pn(c);var G=c.length;if(fl(c)){var U=Mi(c);G=U.length}if(x>=G)return c;var J=x-sa(T);if(J<1)return T;var le=U?js(U,0,J).join(""):c.slice(0,J);if(O===n)return le+T;if(U&&(J+=le.length-J),c5(O)){if(c.slice(J).search(O)){var be,Ie=le;for(O.global||(O=Mc(O.source,Pn(Pc.exec(O))+"g")),O.lastIndex=0;be=O.exec(Ie);)var He=be.index;le=le.slice(0,He===n?J:He)}}else if(c.indexOf(Ei(O),J)!=J){var Ze=le.lastIndexOf(O);Ze>-1&&(le=le.slice(0,Ze))}return le+T}function FR(c){return c=Pn(c),c&&yc.test(c)?c.replace(Rs,Wp):c}var LR=wa(function(c,g,x){return c+(x?" ":"")+g.toUpperCase()}),d5=S1("toUpperCase");function wy(c,g,x){return c=Pn(c),g=x?n:g,g===n?k7(c)?N7(c):b7(c):c.match(g)||[]}var Cy=jt(function(c,g){try{return ei(c,n,g)}catch(x){return l5(x)?x:new kt(x)}}),_R=fs(function(c,g){return Lr(g,function(x){x=Mo(x),is(c,x,Ge(c[x],c))}),c});function NR(c){var g=c==null?0:c.length,x=xt();return c=g?Rn(c,function(T){if(typeof T[1]!="function")throw new Ki(s);return[x(T[0]),T[1]]}):[],jt(function(T){for(var O=-1;++O<g;){var G=c[O];if(ei(G[0],this,T))return ei(G[1],this,T)}})}function HR(c){return n2(xi(c,p))}function g5(c){return function(){return c}}function GR(c,g){return c==null||c!==c?g:c}var $R=rd(),WR=rd(!0);function uo(c){return c}function p5(c){return Tl(typeof c=="function"?c:xi(c,p))}function jR(c){return Uh(xi(c,p))}function zR(c,g){return Gn(c,xi(g,p))}var VR=jt(function(c,g){return function(x){return Ji(x,c,g)}}),UR=jt(function(c,g){return function(x){return Ji(c,x,g)}});function m5(c,g,x){var T=zr(g),O=Sl(g,T);x==null&&!(nr(g)&&(O.length||!T.length))&&(x=g,g=c,c=this,O=Sl(g,zr(g)));var G=!(nr(x)&&"chain"in x)||!!x.chain,U=Aa(c);return Lr(O,function(J){var le=g[J];c[J]=le,U&&(c.prototype[J]=function(){var be=this.__chain__;if(G||be){var Ie=c(this.__wrapped__),He=Ie.__actions__=ni(this.__actions__);return He.push({func:le,args:arguments,thisArg:c}),Ie.__chain__=be,Ie}return le.apply(c,hu([this.value()],arguments))})}),c}function XR(){return Hn._===this&&(Hn._=Vp),this}function v5(){}function KR(c){return c=zt(c),jt(function(g){return Xh(g,c)})}var YR=id(Rn),qR=id(z0),ZR=id(X0);function xy(c){return et(c)?Y0(Mo(c)):Wn(c)}function QR(c){return function(g){return c==null?n:Ns(c,g)}}var JR=T1(),eM=T1(!0);function y5(){return[]}function w5(){return!1}function tM(){return{}}function nM(){return""}function rM(){return!0}function iM(c,g){if(c=zt(c),c<1||c>pe)return[];var x=X,T=_r(c,X);g=xt(g),c-=X;for(var O=Z0(T,g);++x<c;)g(x);return O}function oM(c){return Ht(c)?Rn(c,Mo):Io(c)?[c]:ni(N1(Pn(c)))}function sM(c){var g=++gl;return Pn(c)+g}var uM=Zc(function(c,g){return c+g},0),aM=Ar("ceil"),lM=Zc(function(c,g){return c/g},1),cM=Ar("floor");function fM(c){return c&&c.length?ga(c,uo,xu):n}function hM(c,g){return c&&c.length?ga(c,xt(g,2),xu):n}function dM(c){return kp(c,uo)}function gM(c,g){return kp(c,xt(g,2))}function pM(c){return c&&c.length?ga(c,uo,Eu):n}function mM(c,g){return c&&c.length?ga(c,xt(g,2),Eu):n}var vM=Zc(function(c,g){return c*g},1),yM=Ar("round"),wM=Zc(function(c,g){return c-g},0);function CM(c){return c&&c.length?q0(c,uo):0}function xM(c,g){return c&&c.length?q0(c,xt(g,2)):0}return N.after=Z,N.ary=xe,N.assign=MB,N.assignIn=hy,N.assignInWith=G2,N.assignWith=bB,N.at=OB,N.before=_e,N.bind=Ge,N.bindAll=_R,N.bindKey=Le,N.castArray=tB,N.chain=Cd,N.chunk=hd,N.compact=H1,N.concat=ro,N.cond=NR,N.conforms=HR,N.constant=g5,N.countBy=I2,N.create=IB,N.curry=Je,N.curryRight=nt,N.debounce=ot,N.defaults=kB,N.defaultsDeep=FB,N.defer=tr,N.delay=de,N.difference=an,N.differenceBy=xr,N.differenceWith=ar,N.drop=Mr,N.dropRight=Fi,N.dropRightWhile=_l,N.dropWhile=gr,N.fill=uf,N.filter=Pd,N.flatMap=Z1,N.flatMapDeep=i5,N.flatMapDepth=L2,N.flatten=dd,N.flattenDeep=lf,N.flattenDepth=Pi,N.flip=ne,N.flow=$R,N.flowRight=WR,N.fromPairs=G1,N.functions=WB,N.functionsIn=jB,N.groupBy=Q1,N.initial=gd,N.intersection=$1,N.intersectionBy=Au,N.intersectionWith=pd,N.invert=VB,N.invertBy=UB,N.invokeMap=_2,N.iteratee=p5,N.keyBy=o5,N.keys=zr,N.keysIn=so,N.map=Ta,N.mapKeys=KB,N.mapValues=YB,N.matches=jR,N.matchesProperty=zR,N.memoize=ge,N.merge=qB,N.mergeWith=dy,N.method=VR,N.methodOf=UR,N.mixin=m5,N.negate=ze,N.nthArg=KR,N.omit=ZB,N.omitBy=QB,N.once=ct,N.orderBy=s5,N.over=YR,N.overArgs=Ct,N.overEvery=qR,N.overSome=ZR,N.partial=mt,N.partialRight=Dt,N.partition=df,N.pick=JB,N.pickBy=gy,N.property=xy,N.propertyOf=QR,N.pull=md,N.pullAll=ff,N.pullAllBy=si,N.pullAllWith=Ru,N.pullAt=bo,N.range=JR,N.rangeRight=eM,N.rearg=Er,N.reject=u,N.remove=Si,N.rest=dn,N.reverse=vd,N.sampleSize=m,N.set=tR,N.setWith=nR,N.shuffle=C,N.slice=j1,N.sortBy=L,N.sortedUniq=U1,N.sortedUniqBy=Pa,N.split=DR,N.spread=bu,N.tail=T2,N.take=A2,N.takeRight=X1,N.takeRightWhile=yd,N.takeWhile=K7,N.tap=t5,N.throttle=a5,N.thru=Oo,N.toArray=ly,N.toPairs=py,N.toPairsIn=my,N.toPath=oM,N.toPlainObject=fy,N.transform=rR,N.unary=JA,N.union=Y7,N.unionBy=B2,N.unionWith=R2,N.uniq=Sa,N.uniqBy=q7,N.uniqWith=Nl,N.unset=iR,N.unzip=wd,N.unzipWith=jn,N.update=oR,N.updateWith=sR,N.values=Rd,N.valuesIn=uR,N.without=Z7,N.words=wy,N.wrap=eB,N.xor=M2,N.xorBy=Q7,N.xorWith=J7,N.zip=b2,N.zipObject=O2,N.zipObjectDeep=e5,N.zipWith=io,N.entries=py,N.entriesIn=my,N.extend=hy,N.extendWith=G2,m5(N,N),N.add=uM,N.attempt=Cy,N.camelCase=fR,N.capitalize=vy,N.ceil=aM,N.clamp=aR,N.clone=nB,N.cloneDeep=iB,N.cloneDeepWith=oB,N.cloneWith=rB,N.conformsTo=sB,N.deburr=yy,N.defaultTo=GR,N.divide=lM,N.endsWith=hR,N.eq=Xs,N.escape=dR,N.escapeRegExp=gR,N.every=k2,N.find=Sd,N.findIndex=Tu,N.findKey=LB,N.findLast=F2,N.findLastIndex=af,N.findLastKey=_B,N.floor=cM,N.forEach=Dd,N.forEachRight=hf,N.forIn=NB,N.forInRight=HB,N.forOwn=GB,N.forOwnRight=$B,N.get=f5,N.gt=uB,N.gte=aB,N.has=zB,N.hasIn=h5,N.head=xa,N.identity=uo,N.includes=Td,N.indexOf=Us,N.inRange=lR,N.invoke=XB,N.isArguments=gf,N.isArray=Ht,N.isArrayBuffer=lB,N.isArrayLike=oo,N.isArrayLikeObject=pr,N.isBoolean=cB,N.isBuffer=Hl,N.isDate=fB,N.isElement=hB,N.isEmpty=dB,N.isEqual=gB,N.isEqualWith=pB,N.isError=l5,N.isFinite=mB,N.isFunction=Aa,N.isInteger=oy,N.isLength=N2,N.isMap=sy,N.isMatch=vB,N.isMatchWith=yB,N.isNaN=wB,N.isNative=CB,N.isNil=EB,N.isNull=xB,N.isNumber=uy,N.isObject=nr,N.isObjectLike=lr,N.isPlainObject=J1,N.isRegExp=c5,N.isSafeInteger=PB,N.isSet=ay,N.isString=H2,N.isSymbol=Io,N.isTypedArray=Bd,N.isUndefined=SB,N.isWeakMap=DB,N.isWeakSet=TB,N.join=Bu,N.kebabCase=pR,N.last=oi,N.lastIndexOf=cf,N.lowerCase=mR,N.lowerFirst=vR,N.lt=AB,N.lte=BB,N.max=fM,N.maxBy=hM,N.mean=dM,N.meanBy=gM,N.min=pM,N.minBy=mM,N.stubArray=y5,N.stubFalse=w5,N.stubObject=tM,N.stubString=nM,N.stubTrue=rM,N.multiply=vM,N.nth=W1,N.noConflict=XR,N.noop=v5,N.now=V,N.pad=yR,N.padEnd=wR,N.padStart=CR,N.parseInt=xR,N.random=cR,N.reduce=u5,N.reduceRight=Ad,N.repeat=ER,N.replace=PR,N.result=eR,N.round=yM,N.runInContext=oe,N.sample=l,N.size=P,N.snakeCase=SR,N.some=D,N.sortedIndex=z1,N.sortedIndexBy=X7,N.sortedIndexOf=Mu,N.sortedLastIndex=D2,N.sortedLastIndexBy=V1,N.sortedLastIndexOf=Ea,N.startCase=TR,N.startsWith=AR,N.subtract=wM,N.sum=CM,N.sumBy=xM,N.template=BR,N.times=iM,N.toFinite=Ba,N.toInteger=zt,N.toLength=cy,N.toLower=RR,N.toNumber=ds,N.toSafeInteger=RB,N.toString=Pn,N.toUpper=MR,N.trim=bR,N.trimEnd=OR,N.trimStart=IR,N.truncate=kR,N.unescape=FR,N.uniqueId=sM,N.upperCase=LR,N.upperFirst=d5,N.each=Dd,N.eachRight=hf,N.first=xa,m5(N,function(){var c={};return Ii(N,function(g,x){hn.call(N.prototype,x)||(c[x]=g)}),c}(),{chain:!1}),N.VERSION=r,Lr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){N[c].placeholder=N}),Lr(["drop","take"],function(c,g){Nt.prototype[c]=function(x){x=x===n?1:ur(zt(x),0);var T=this.__filtered__&&!g?new Nt(this):this.clone();return T.__filtered__?T.__takeCount__=_r(x,T.__takeCount__):T.__views__.push({size:_r(x,X),type:c+(T.__dir__<0?"Right":"")}),T},Nt.prototype[c+"Right"]=function(x){return this.reverse()[c](x).reverse()}}),Lr(["filter","map","takeWhile"],function(c,g){var x=g+1,T=x==me||x==Fe;Nt.prototype[c]=function(O){var G=this.clone();return G.__iteratees__.push({iteratee:xt(O,3),type:x}),G.__filtered__=G.__filtered__||T,G}}),Lr(["head","last"],function(c,g){var x="take"+(g?"Right":"");Nt.prototype[c]=function(){return this[x](1).value()[0]}}),Lr(["initial","tail"],function(c,g){var x="drop"+(g?"":"Right");Nt.prototype[c]=function(){return this.__filtered__?new Nt(this):this[x](1)}}),Nt.prototype.compact=function(){return this.filter(uo)},Nt.prototype.find=function(c){return this.filter(c).head()},Nt.prototype.findLast=function(c){return this.reverse().find(c)},Nt.prototype.invokeMap=jt(function(c,g){return typeof c=="function"?new Nt(this):this.map(function(x){return Ji(x,c,g)})}),Nt.prototype.reject=function(c){return this.filter(ze(xt(c)))},Nt.prototype.slice=function(c,g){c=zt(c);var x=this;return x.__filtered__&&(c>0||g<0)?new Nt(x):(c<0?x=x.takeRight(-c):c&&(x=x.drop(c)),g!==n&&(g=zt(g),x=g<0?x.dropRight(-g):x.take(g-c)),x)},Nt.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Nt.prototype.toArray=function(){return this.take(X)},Ii(Nt.prototype,function(c,g){var x=/^(?:filter|find|map|reject)|While$/.test(g),T=/^(?:head|last)$/.test(g),O=N[T?"take"+(g=="last"?"Right":""):g],G=T||/^find/.test(g);O&&(N.prototype[g]=function(){var U=this.__wrapped__,J=T?[1]:arguments,le=U instanceof Nt,be=J[0],Ie=le||Ht(U),He=function(Jt){var ln=O.apply(N,hu([Jt],J));return T&&Ze?ln[0]:ln};Ie&&x&&typeof be=="function"&&be.length!=1&&(le=Ie=!1);var Ze=this.__chain__,ft=!!this.__actions__.length,Tt=G&&!Ze,Xt=le&&!ft;if(!G&&Ie){U=Xt?U:new Nt(this);var At=c.apply(U,J);return At.__actions__.push({func:Oo,args:[He],thisArg:n}),new Nr(At,Ze)}return Tt&&Xt?c.apply(this,J):(At=this.thru(He),Tt?T?At.value()[0]:At.value():At)})}),Lr(["pop","push","shift","sort","splice","unshift"],function(c){var g=Is[c],x=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",T=/^(?:pop|shift)$/.test(c);N.prototype[c]=function(){var O=arguments;if(T&&!this.__chain__){var G=this.value();return g.apply(Ht(G)?G:[],O)}return this[x](function(U){return g.apply(Ht(U)?U:[],O)})}}),Ii(Nt.prototype,function(c,g){var x=N[g];if(x){var T=x.name+"";hn.call(yl,T)||(yl[T]=[]),yl[T].push({name:g,func:x})}}),yl[Il(n,A).name]=[{name:"wrapper",func:n}],Nt.prototype.clone=Fh,Nt.prototype.reverse=o1,Nt.prototype.value=xl,N.prototype.at=xd,N.prototype.chain=Da,N.prototype.commit=Ed,N.prototype.next=K1,N.prototype.plant=n5,N.prototype.reverse=q1,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=r5,N.prototype.first=N.prototype.head,Fs&&(N.prototype[Fs]=Y1),N},hl=H7();Qo?((Qo.exports=hl)._=hl,Bc._=hl):Hn._=hl}).call(MZ)}(gg,gg.exports)),gg.exports}var OZ=bZ();const IZ=({min:e=0,max:t=100,step:n=1,defaultValue:r=100,disabled:i=!1,onChange:o,beforeStart:s,afterEnd:a})=>{const[f,h]=$.useState(!1),[d,p]=$.useState(r),v=$.useRef(0),w=$.useRef(null),E=$.useRef(null);$.useEffect(()=>{if(w.current&&E.current){const B=w.current.getBoundingClientRect(),R=E.current.getBoundingClientRect();v.current=_O(R.width/2/B.width*100)}},[E,w]),$.useEffect(()=>{p(r)},[r]);const y=$.useCallback(OZ.throttle(B=>{if(w.current&&E.current){const R=w.current.getBoundingClientRect(),_=B.clientX-R.left;let F=Math.min(Math.max(_/R.width,0),1);F>=(100-v.current)/100?F=1:F<=v.current/100&&(F=0);const j=Math.round(F*(t-e)/n)*n+e;p(j),o&&o(j)}},50,{leading:!0,trailing:!0}),[e,t,n,o]),S=$.useCallback(()=>{const B=_=>{h(!0),y(_)},R=()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",R),a&&a(),setTimeout(()=>{h(!1)},0)};document.addEventListener("pointermove",B),document.addEventListener("pointerup",R)},[y]);let A=(d-e)/(t-e)*100;return A>=100-v.current&&(A=100-v.current),A<=v.current&&(A=v.current),b.jsx("div",{className:Dn("slider-container",{disabled:i}),children:b.jsxs("div",{ref:w,className:"slider-track",onClick:B=>{i||f||y(B)},onPointerDown:B=>{B.preventDefault(),!i&&(s&&s(),S())},children:[b.jsx("div",{className:"slider-range",style:{width:`${A}%`}}),b.jsx("div",{ref:E,className:"slider-thumb",style:{left:`${A}%`}})]})})},Gx=HT(MA,4),J8=Pt.forwardRef((e,t)=>{const n=Zr(),{currentColor:r,onColorChange:i,onOpacityChange:o}=e,[s,a]=$.useState(r&&eh(r)||Gx[0][0].value),[f,h]=$.useState(()=>{const d=r&&k0(r);return Vo(d)?100:d});return b.jsxs($o.Col,{gap:3,children:[b.jsx(IZ,{step:5,defaultValue:f,onChange:d=>{h(d),o(d)},beforeStart:()=>{Or.set(n,!0),gs.setSplittingOnce(n,!0)},afterEnd:()=>{Or.set(n,!1)},disabled:s===MA[0].value}),b.jsx($o.Col,{gap:2,children:Gx.map((d,p)=>b.jsx($o.Row,{gap:2,children:d.map(v=>b.jsxs("button",{className:`color-select-item ${s===v.value?"active":""} ${t0(v.value)?"no-color":""}`,style:{backgroundColor:t0(v.value)?DZ:v.value,color:RZ(v.value)?Q8:qr},onClick:()=>{a(v.value),v.value===Z8&&h(100),i(v.value)},title:v.name,children:[t0(v.value)&&mY,s===v.value&&vY]},v.value))},p))})]})}),IA=(e,t)=>ke.isMindElement(e,t)||he.isDrawElement(t)&&gp(t)||t7(e,t),kA=(e,t)=>{let n=t.fill;return n||(ke.isMindElement(e,t)&&(n=lT(e,t)),(he.isDrawElement(t)||he.isCustomGeometryElement(e,t))&&(n=Jm(e,t))),n},FA=(e,t)=>{let n=t.strokeColor;return n||(ke.isMindElement(e,t)&&(n=A8(e,t)),(he.isDrawElement(t)||he.isCustomGeometryElement(e,t))&&(n=b0(e,t))),n},kZ=(e,t)=>{Yu.setFillColor(e,null,{getMemorizeKey:M0,callback:(n,r)=>{if(!IA(e,n))return;const i=kA(e,n);if(!BZ(i))return;const o=eh(i),s=Sp(t)?o:I0(o,t);Ve.setNode(e,{fill:s},r)}})},FZ=(e,t)=>{Yu.setFillColor(e,null,{getMemorizeKey:M0,callback:(n,r)=>{if(!IA(e,n))return;const i=kA(e,n),o=k0(i);t0(t)?Ve.setNode(e,{fill:null},r):Vo(o)||Sp(o)?Ve.setNode(e,{fill:t},r):Ve.setNode(e,{fill:I0(t,o)},r)}})},LZ=(e,t)=>{Yu.setStrokeColor(e,null,{getMemorizeKey:M0,callback:(n,r)=>{const i=FA(e,n),o=eh(i),s=Sp(t)?o:I0(o,t);Ve.setNode(e,{strokeColor:s},r)}})},_Z=(e,t)=>{Yu.setStrokeColor(e,null,{getMemorizeKey:M0,callback:(n,r)=>{const i=FA(e,n),o=k0(i);t0(t)?Ve.setNode(e,{strokeColor:null},r):Vo(o)||Sp(o)?Ve.setNode(e,{strokeColor:t},r):Ve.setNode(e,{strokeColor:I0(t,o)},r)}})},NZ=(e,t,n)=>{const r=k0(t);t0(n)?R6.setTextColor(e,null):R6.setTextColor(e,I0(n,r))},HZ=(e,t,n)=>{const r=eh(t),i=Sp(n)?r:I0(r,n);R6.setTextColor(e,i)},GZ=({board:e,currentColor:t,fontColorIcon:n,title:r})=>{const[i,o]=$.useState(!1),s=I.getBoardContainer(e);return b.jsxs(Ua,{sideOffset:12,open:i,onOpenChange:a=>{o(a)},placement:"top",children:[b.jsx(Xa,{asChild:!0,children:b.jsx(Kn,{className:Dn("property-button"),selected:i,visible:!0,icon:n,type:"button",title:r,"aria-label":r,onPointerUp:()=>{o(!i)}})}),b.jsx(Ka,{container:s,children:b.jsx(Ts,{padding:4,className:Dn(`${Ya}`),children:b.jsx(J8,{onColorChange:a=>{NZ(e,t||a,a)},onOpacityChange:a=>{t&&HZ(e,t,a)},currentColor:t})})})]})},$Z=({board:e,currentColor:t,title:n,hasStrokeStyle:r,children:i})=>{const[o,s]=$.useState(!1),a=t&&eh(t),f=t?k0(t):100,h=I.getBoardContainer(e),d=OA(f)?yY:bA(a)?wY:void 0,p=v=>{Yu.setStrokeStyle(e,v,{getMemorizeKey:M0})};return b.jsxs(Ua,{sideOffset:12,open:o,onOpenChange:v=>{s(v)},placement:"top",children:[b.jsx(Xa,{asChild:!0,children:b.jsx(Kn,{className:Dn("property-button"),visible:!0,icon:d,type:"button",title:n,"aria-label":n,onPointerUp:()=>{s(!o)},children:!d&&i})}),b.jsx(Ka,{container:h,children:b.jsx(Ts,{padding:4,className:Dn(`${Ya}`,"stroke-setting",{"has-stroke-style":r}),children:b.jsxs($o.Col,{children:[r&&b.jsxs($o.Row,{className:Dn("stroke-style-picker"),children:[b.jsx(Kn,{visible:!0,icon:CY,type:"button",title:n,"aria-label":n,onPointerUp:()=>{p(Es.solid)}}),b.jsx(Kn,{visible:!0,icon:xY,type:"button",title:n,"aria-label":n,onPointerUp:()=>{p(Es.dashed)}}),b.jsx(Kn,{visible:!0,icon:EY,type:"button",title:n,"aria-label":n,onPointerUp:()=>{p(Es.dotted)}})]}),b.jsx(J8,{onColorChange:v=>{_Z(e,v)},onOpacityChange:v=>{LZ(e,v)},currentColor:t})]})})})]})},WZ=({board:e,currentColor:t,title:n,children:r})=>{const[i,o]=$.useState(!1),s=t&&eh(t),a=t?k0(t):100,f=I.getBoardContainer(e),h=!s||OA(a)?pY:void 0;return b.jsxs(Ua,{sideOffset:12,open:i,onOpenChange:d=>{o(d)},placement:"top",children:[b.jsx(Xa,{asChild:!0,children:b.jsx(Kn,{className:Dn("property-button"),visible:!0,icon:h,type:"button",title:n,"aria-label":n,onPointerUp:()=>{o(!i)},children:!h&&r})}),b.jsx(Ka,{container:f,children:b.jsx(Ts,{padding:4,className:Dn(`${Ya}`),children:b.jsx(J8,{onColorChange:d=>{FZ(e,d)},onOpacityChange:d=>{kZ(e,d)},currentColor:t})})})]})},jZ=({board:e,title:t})=>{const{appState:n,setAppState:r}=As();return b.jsx(Kn,{className:Dn("property-button"),visible:!0,icon:MY,type:"button",title:t,"aria-label":t,onPointerUp:()=>{const i=Ye(e)[0],o=Xm(i);Gu.getLinkElement(o)||Gu.wrapLink(o,"",""),setTimeout(()=>{const f=Gu.getLinkElement(o)[0],h=Te.toDOMNode(o,f);r({...n,linkState:{editor:o,targetDom:h,targetElement:f,isEditing:!0,isHovering:!1,isHoveringOrigin:!1}})},0)}})},zZ=()=>{var v,w;const e=Zr(),t=Ye(e),[n,r]=$.useState(!1),i=$.useRef(n),o=t.length>0&&!Wi(e)&&!t.some(he.isImage),{viewport:s,selection:a,children:f}=e,{refs:h,floatingStyles:d}=P7({placement:"right-start",middleware:[V8(32),U8()]});let p={fill:"red"};if(o&&!n){const E=t.some(B=>KZ(e,B))&&!I.hasBeenTextEditing(e),y=t.some(B=>qZ(e,B)),S=t.some(B=>LA(e,B))&&!I.hasBeenTextEditing(e),A=t.some(B=>YZ(e,B))&&!I.hasBeenTextEditing(e);p={...XZ(e),hasFill:E,hasFontColor:y,hasStroke:S,hasStrokeStyle:A,hasText:y}}return $.useEffect(()=>{if(o){const E=t.length>0;if(!n&&E){const y=Ye(e),S=sn(e,y,!1),[A,B]=M.getPoints(S),R=u6(e,z3(e,A)),_=u6(e,z3(e,B)),F=_[0]-R[0],j=_[1]-R[1];h.setPositionReference({getBoundingClientRect(){return{width:F,height:j,x:R[0],y:R[1],top:R[1],left:R[0],right:R[0]+F,bottom:R[1]+j}}})}}},[s,a,f,n]),$.useEffect(()=>{i.current=n},[n]),$.useEffect(()=>{const{pointerUp:E,pointerMove:y}=e;return e.pointerMove=S=>{(Nf(e)||a0(e))&&!i.current&&r(!0),y(S)},e.pointerUp=S=>{i.current&&(Nf(e)||a0(e))&&r(!1),E(S)},()=>{e.pointerUp=E,e.pointerMove=y}},[e]),b.jsx(b.Fragment,{children:o&&!n&&b.jsx(Ts,{padding:1,className:Dn("popup-toolbar",Ya),ref:h.setFloating,style:d,children:b.jsxs($o.Row,{gap:1,children:[p.hasFontColor&&b.jsx(GZ,{board:e,currentColor:(v=p.marks)==null?void 0:v.color,title:"Font Color",fontColorIcon:b.jsx(PY,{currentColor:(w=p.marks)==null?void 0:w.color})},0),p.hasStroke&&b.jsx($Z,{board:e,currentColor:p.strokeColor,title:"Stroke",hasStrokeStyle:p.hasStrokeStyle||!1,children:b.jsx("label",{className:Dn("stroke-label","color-label"),style:{borderColor:p.strokeColor}})},1),p.hasFill&&b.jsx(WZ,{board:e,currentColor:p.fill,title:"Fill Color",children:b.jsx("label",{className:Dn("fill-label","color-label",{"color-white":p.fill&&bA(eh(p.fill))}),style:{backgroundColor:p.fill}})},2),p.hasText&&b.jsx(jZ,{board:e,title:"Link"},3)]})})})},VZ=(e,t)=>{const n=RS(t);return{fill:t.fill,strokeColor:A8(e,t),marks:n}},UZ=(e,t)=>{const n=RS(t);return{fill:t.fill,strokeColor:b0(e,t),marks:n}},XZ=e=>{const t=Ye(e)[0];return ke.isMindElement(e,t)?VZ(e,t):UZ(e,t)},KZ=(e,t)=>ke.isMindElement(e,t)||t7(e,t)?!0:he.isDrawElement(t)?he.isShapeElement(t)&&!he.isImage(t)&&!he.isText(t)&&gp(t):!1,LA=(e,t)=>ke.isMindElement(e,t)||Zs.isFreehand(t)?!0:he.isDrawElement(t)?he.isShapeElement(t)&&!he.isImage(t)&&!he.isText(t)||he.isArrowLine(t)||he.isVectorLine(t)||he.isTable(t):!1,YZ=(e,t)=>LA(e,t),qZ=(e,t)=>ke.isMindElement(e,t)?!0:he.isDrawElement(t)?uj([t]):!1,_A=({icon:e,shortcut:t,href:n,children:r,onSelect:i,className:o="",selected:s,...a})=>{const f=AA(a.onClick,i);return b.jsx("a",{...a,href:n,target:"_blank",rel:"noreferrer",className:t4(o,s),title:a.title??a["aria-label"],onClick:f,children:b.jsx(BA,{icon:e,shortcut:t,children:r})})};_A.displayName="MenuItemLink";const b3=(e,t)=>{const n=Ye(e);zK(e,{elements:n.length>0?n:void 0,fillStyle:t?"transparent":"white"}).then(r=>{if(r){const i=t?"png":"jpg",o=jK(r),s=`drawnix-${new Date().getTime()}.${i}`;VK(o,s)}})},NA=()=>{const e=Zr();return b.jsx(Ps,{"data-testid":"save-button",onSelect:()=>{_T(e)},icon:dY,"aria-label":"",shortcut:"Cmd+S",children:""})};NA.displayName="SaveToFile";const HA=()=>{const e=Zr(),t=BP(),n=(r,i,o)=>{e.children=r,e.viewport=i||{zoom:1},e.theme={themeColorMode:cr.default},t.update(e.children,{board:e,parent:e,parentG:I.getElementHost(e)}),Ln.fitViewport(e)};return b.jsx(Ps,{"data-testid":"open-button",onSelect:()=>{TK(e).then(r=>{n(r.elements,r.viewport)})},icon:gY,"aria-label":"",children:""})};HA.displayName="OpenFile";const GA=()=>{const e=Zr(),t=$.useContext(Y8);return b.jsx(Ps,{icon:cY,"data-testid":"image-export-button",onSelect:()=>{b3(e,!0)},submenu:b.jsxs(Pp,{onSelect:()=>{var r;const n=new CustomEvent(Jg.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(r=t.onSelect)==null||r.call(t,n)},children:[b.jsx(Ps,{onSelect:()=>{b3(e,!0)},"aria-label":"",children:"PNG"}),b.jsx(Ps,{onSelect:()=>{b3(e,!1)},"aria-label":"",children:"JPG"})]}),shortcut:"Cmd+Shift+E","aria-label":"",children:""})};GA.displayName="SaveAsImage";const $A=()=>{const{appState:e,setAppState:t}=As();return b.jsx(Ps,{icon:pm,"data-testid":"reset-button",onSelect:()=>{t({...e,openCleanConfirm:!0})},shortcut:"Cmd+Backspace","aria-label":"",children:""})};$A.displayName="CleanBoard";const WA=()=>b.jsx(_A,{icon:lY,href:"https://github.com/plait-board/drawnix","aria-label":"GitHub",children:"GitHub"});WA.displayName="Socials";const jA=()=>b.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-gray-10)",margin:".5rem 0"}});jA.displayName="MenuSeparator";const ZZ=()=>{const e=Zr(),t=I.getBoardContainer(e),n=Ye(e),[r,i]=$.useState(!1),o=e.history.undos.length<=0,s=e.history.redos.length<=0;return b.jsx(Ts,{padding:1,className:Dn("app-toolbar",Ya),children:b.jsxs($o.Row,{gap:1,children:[b.jsxs(Ua,{sideOffset:12,open:r,onOpenChange:a=>{i(a)},placement:"bottom-start",children:[b.jsx(Xa,{asChild:!0,children:b.jsx(Kn,{type:"icon",visible:!0,selected:r,icon:aY,title:"App Menu","aria-label":"App Menu",onPointerDown:()=>{i(!r)}})}),b.jsx(Ka,{container:t,children:b.jsxs(Pp,{onSelect:()=>{i(!1)},children:[b.jsx(HA,{}),b.jsx(NA,{}),b.jsx(GA,{}),b.jsx($A,{}),b.jsx(jA,{}),b.jsx(WA,{})]})})]},0),b.jsx(Kn,{type:"icon",icon:SY,visible:!0,title:"Undo","aria-label":"Undo",onPointerUp:()=>{e.undo()},disabled:o},1),b.jsx(Kn,{type:"icon",icon:DY,visible:!0,title:"Redo","aria-label":"Redo",onPointerUp:()=>{e.redo()},disabled:s},2),n.length>0&&b.jsx(Kn,{className:"duplicate",type:"icon",icon:TY,visible:!0,title:"Duplicate","aria-label":"Duplicate",onPointerUp:()=>{L4(e)}},3),n.length>0&&b.jsx(Kn,{className:"trash",type:"icon",icon:pm,visible:!0,title:"Trash","aria-label":"Trash",onPointerUp:()=>{F4(e)}},4)]})})},QZ=e=>n=>{const{globalKeyDown:r}=n;return n.globalKeyDown=i=>{if(I.getMovingPointInBoard(n)||I.isMovingPointInBoard(n)){if(cn.isHotkey(["mod+shift+e"],{byKey:!0})(i)){b3(n,!0),i.preventDefault();return}if(cn.isHotkey(["mod+s"],{byKey:!0})(i)){_T(n),i.preventDefault();return}if(cn.isHotkey(["mod+backspace"])(i)||cn.isHotkey(["mod+delete"])(i)){e({openCleanConfirm:!0}),i.preventDefault();return}}r(i)},n};function JZ(){return[K8.feltTipPen]}const $x=(e,t)=>({id:yn(),type:"freehand",shape:e,points:t}),eQ=(e,t,n)=>{const r=tc(e,n,t)||n,i=t.points;return pp(t.points)&&Jl(r,i)||Vg(i,r)},tQ=(e,t,n)=>{const r=M.getRectangleByPoints([n.anchor,n.focus]);return om(r,t.points,t.angle)},Wx=e=>Ye(e).filter(t=>Zs.isFreehand(t)),nQ=e=>SA[e].strokeColor,rQ=e=>SA[e].fill,iQ=(e,t)=>{const n=nQ(e.theme.themeColorMode);return t.strokeColor||n},oQ=(e,t)=>{const n=Zs.isFreehand(t)&&t7(e,t)?rQ(e.theme.themeColorMode):Zm.fill;return t.fill||n};function sQ(e,t){return Math.exp(-(e*e)/(2*t*t))}function uQ(e,t,n){if(e.length<2)return e;const r=Math.floor(n/2),i=[];function o(a){if(a<0){const f=-a-1;if(f<e.length)return[2*e[0][0]-e[f][0],2*e[0][1]-e[f][1]]}else if(a>=e.length){const f=2*e.length-a-1;if(f>=0)return[2*e[e.length-1][0]-e[f][0],2*e[e.length-1][1]-e[f][1]]}return e[a]}function s(a){const f=Math.min(a,e.length-1-a);return Math.min(r,f+Math.floor(r/2))}for(let a=0;a<e.length;a++){let f=0,h=0,d=0;const p=s(a);for(let v=-p;v<=p;v++){const w=a+v,E=o(w);let y=sQ(v,t);if(a<r||a>=e.length-r){const S=1+.5*(1-Math.abs(v)/p);y*=v===0?S:1}f+=E[0]*y,h+=E[1]*y,d+=y}a===0||a===e.length-1?i.push([e[a][0],e[a][1]]):i.push([f/d,h/d])}return i}class zA extends xo{draw(t){const n=Wt(t),r=iQ(this.board,t),i=oQ(this.board,t),o={strokeWidth:n,stroke:r,fill:i,fillStyle:"solid"},s=I.getRoughSVG(this.board).curve(uQ(t.points,1,3),o);return Kt(s,"round"),s}canDraw(t){return!0}}class aQ extends dc{constructor(){super()}initializeGenerator(){this.activeGenerator=cp(this.board,{getRectangle:t=>M.getRectangleByPoints(t.points),getStrokeWidth:()=>hr,getStrokeOpacity:()=>1,hasResizeHandle:()=>Vm(this.board,this.element)}),this.generator=new zA(this.board)}initialize(){super.initialize(),this.initializeGenerator(),this.generator.processDrawing(this.element,this.getElementG())}onContextChanged(t,n){t.element!==n.element||t.hasThemeChanged?(this.generator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})):(t.selected!==n.selected||t.selected)&&this.activeGenerator.processDrawing(this.element,I.getActiveHost(this.board),{selected:this.selected})}destroy(){var t;super.destroy(),(t=this.activeGenerator)==null||t.destroy()}}class lQ{constructor(t={}){this.defaultOptions={smoothing:.65,velocityWeight:.2,curvatureWeight:.3,minDistance:.2,maxPoints:8,pressureSensitivity:.5,tiltSensitivity:.3,velocityThreshold:800,samplingRate:5},this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[],this.velocityWindowSize=3,this.options={...this.defaultOptions,...t}}process(t,n={}){const r=n.timestamp??Date.now();if(this.points.length===0){const f={point:t,timestamp:r,...n};return this.points.push(f),this.lastProcessedTime=r,t}if(r-this.lastProcessedTime<this.options.samplingRate&&r-this.lastProcessedTime<2)return null;const i={point:t,timestamp:r,...n};if(!this.checkDistance(t)&&this.points.length>1&&r-this.lastProcessedTime<32)return null;this.updatePoints(i);const s=this.calculateDynamicParameters(i),a=this.smooth(t,s);return this.lastProcessedTime=r,a}reset(){this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[]}updatePoints(t){this.points.push(t),this.points.length>this.options.maxPoints&&this.points.shift()}checkDistance(t){if(this.points.length===0)return!0;const n=this.points[this.points.length-1].point,r=this.getDistance(n,t);let i=this.options.minDistance;if(this.movingAverageVelocity.length>0){const o=this.getAverageVelocity();i*=Math.max(.5,Math.min(1.5,o/200))}return r>=i}calculateDynamicParameters(t){const n=this.calculateVelocity(t);this.updateMovingAverage(n);const r=this.getAverageVelocity(),i={...this.options};if(t.pressure!==void 0){const s=Math.pow(t.pressure,1.2);i.smoothing*=1-s*i.pressureSensitivity*.8}const o=Math.min(r/i.velocityThreshold,1);if(i.velocityWeight=.2+o*.3,i.smoothing*=1+o*.2,t.tiltX!==void 0&&t.tiltY!==void 0){const s=Math.sqrt(t.tiltX**2+t.tiltY**2)/90;i.smoothing*=1+s*i.tiltSensitivity*.7}return i}smooth(t,n){if(this.points.length<2)return t;const r=this.calculateWeights(n),i=r.reduce((s,a)=>s+a,0);if(i===0)return t;const o=[0,0];for(let s=0;s<this.points.length;s++){const a=r[s]/i;o[0]+=this.points[s].point[0]*a,o[1]+=this.points[s].point[1]*a}return o}calculateWeights(t){const n=[],r=this.points.length-1;for(let i=0;i<this.points.length;i++){let o=Math.pow(t.smoothing,(r-i)*.8);if(i<r){const s=this.getPointVelocity(i);o*=1+s*t.velocityWeight*.8}if(i>0&&i<r){const s=this.getPointCurvature(i);o*=1+s*t.curvatureWeight*.7}n.push(o)}return n}getDistance(t,n){return Et(t[0],t[1],n[0],n[1])}calculateVelocity(t){if(this.points.length<2)return 0;const n=this.points[this.points.length-1],r=this.getDistance(n.point,t.point),i=t.timestamp-n.timestamp;return i>0?r/i:0}updateMovingAverage(t){this.movingAverageVelocity.push(t),this.movingAverageVelocity.length>this.velocityWindowSize&&this.movingAverageVelocity.shift()}getAverageVelocity(){return this.movingAverageVelocity.length===0?0:this.movingAverageVelocity.reduce((t,n)=>t+n)/this.movingAverageVelocity.length}getPointVelocity(t){if(t>=this.points.length-1)return 0;const n=this.points[t],r=this.points[t+1],i=this.getDistance(n.point,r.point),o=r.timestamp-n.timestamp;return o>0?i/o:0}getPointCurvature(t){if(t<=0||t>=this.points.length-1)return 0;const n=this.points[t-1].point,r=this.points[t].point,i=this.points[t+1].point,o=this.getDistance(n,r),s=this.getDistance(r,i),a=this.getDistance(n,i),f=(o+s+a)/2;return 4*Math.sqrt(Math.max(0,f*(f-o)*(f-s)*(f-a)))/(o*s*a+1e-4)}}const cQ=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:i}=e;let o=!1,s=!1,a=[],f=null;const h=new zA(e),d=new lQ({smoothing:.7,pressureSensitivity:.6});let p=null;const v=w=>{if(o){const E=I.getPointer(e);s&&a.push(a[0]),p=$x(E,a)}p&&!w&&Ve.insertNode(e,p,[e.children.length]),h==null||h.destroy(),p=null,o=!1,a=[],d.reset()};return e.pointerDown=w=>{const E=JZ();if(I.isInPointer(e,E)&&B0(e)){o=!0,f=[w.x,w.y];const S=d.process(f),A=Bt(e,Ot(e,S[0],S[1]));a.push(A)}t(w)},e.pointerMove=w=>{if(o){const E=[w.x,w.y];f&&Et(f[0],f[1],E[0],E[1])<8?s=!0:s=!1;const y=d.process(E);if(y){h==null||h.destroy();const S=Bt(e,Ot(e,y[0],y[1]));a.push(S);const A=I.getPointer(e);p=$x(A,a),h.processDrawing(p,I.getElementTopHost(e))}return}n(w)},e.pointerUp=w=>{v(),r(w)},e.globalPointerUp=w=>{v(!0),i(w)},e},fQ=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:i}=t;return t.getDeletedFragment=o=>{const s=Wx(t);return s.length&&o.push(...s),n(o)},t.buildFragment=(o,s,a,f)=>{const h=Wx(t);if(h.length){const d=SS(t,h,s?[s.x,s.y]:[0,0]);o=$m(o,{text:"",type:$a.elements,elements:d})}return r(o,s,a,f)},t.insertFragment=(o,s,a)=>{var h;const f=(h=o==null?void 0:o.elements)==null?void 0:h.filter(d=>Zs.isFreehand(d));f&&f.length>0&&DS(t,f,s),i(o,s,a)},t},hQ=e=>{const{getRectangle:t,drawElement:n,isHit:r,isRectangleHit:i,getOneHitElement:o,isMovable:s,isAlign:a}=e;return e.drawElement=f=>Zs.isFreehand(f.element)?aQ:n(f),e.getRectangle=f=>Zs.isFreehand(f)?M.getRectangleByPoints(f.points):t(f),e.isRectangleHit=(f,h)=>Zs.isFreehand(f)?tQ(e,f,h):i(f,h),e.isHit=(f,h,d)=>Zs.isFreehand(f)?eQ(e,f,h):r(f,h,d),e.getOneHitElement=f=>f.every(d=>Zs.isFreehand(d))?aD(e,f):o(f),e.isMovable=f=>Zs.isFreehand(f)?!0:s(f),e.isAlign=f=>Zs.isFreehand(f)?!0:a(f),e.setPluginOptions(bS,{customGeometryTypes:[DA]}),fQ(cQ(e))},dQ=()=>{const e=Zr(),t=e.theme;return b.jsx(Ts,{padding:1,className:Dn("theme-toolbar",Ya),children:b.jsxs("select",{onChange:n=>{const r=n.target.value;Ln.updateThemeColor(e,r)},value:t.themeColorMode,children:[b.jsx("option",{value:"default",children:""}),b.jsx("option",{value:"colorful",children:""}),b.jsx("option",{value:"soft",children:""}),b.jsx("option",{value:"retro",children:""}),b.jsx("option",{value:"dark",children:""}),b.jsx("option",{value:"starry",children:""})]})})},VA=new WeakMap,jx=e=>!!VA.get(e),UA=(e,t)=>{VA.set(e,t)},gQ=e=>n=>{const{pointerDown:r}=n;return n.pointerDown=i=>{d6(i)&&!jx(n)&&(UA(n,!0),e({isPencilMode:!0})),!(jx(n)&&!d6(i))&&r(i)},n},pQ=()=>{const e=Zr(),{appState:t,setAppState:n}=As();return b.jsx(b.Fragment,{children:t.isPencilMode&&b.jsx("div",{className:"pencil-mode-toolbar",children:b.jsx(Kn,{type:"button",visible:!0,title:"X Pencil","aria-label":"Arrow",label:"Pencil X",onPointerDown:()=>{n({...t,isPencilMode:!1}),UA(e,!1)}})})})};function mQ({initialOpen:e=!1,open:t,onOpenChange:n}={}){const[r,i]=$.useState(e),[o,s]=$.useState(),[a,f]=$.useState(),h=t??r,d=n??i,p=P7({open:h,onOpenChange:d}),v=p.context,w=yA(v,{enabled:t==null}),E=wA(v,{outsidePressEvent:"mousedown"}),y=xA(v),S=CA([w,E,y]);return $.useMemo(()=>({open:h,setOpen:d,...S,...p,labelId:o,descriptionId:a,setLabelId:s,setDescriptionId:f}),[h,d,S,p,o,a])}const XA=$.createContext(null),Dp=()=>{const e=$.useContext(XA);if(e==null)throw new Error("Dialog components must be wrapped in <Dialog />");return e};function n4({children:e,...t}){const n=mQ(t);return b.jsx(XA.Provider,{value:n,children:e})}$.forwardRef(function({children:t,asChild:n=!1,...r},i){const o=Dp(),s=t.ref,a=x7([o.refs.setReference,i,s]);return n&&$.isValidElement(t)?$.cloneElement(t,o.getReferenceProps({ref:a,...r,...t.props,"data-state":o.open?"open":"closed"})):b.jsx("button",{ref:a,"data-state":o.open?"open":"closed",...o.getReferenceProps(r),children:t})});const r4=$.forwardRef(function(t,n){const{context:r,...i}=Dp(),o=x7([i.refs.setFloating,n]);return r.open?b.jsx(pA,{root:t.container,children:b.jsx(fZ,{className:"Dialog-overlay",lockScroll:!0,children:b.jsx(vA,{context:r,children:b.jsx("div",{ref:o,"aria-labelledby":i.labelId,"aria-describedby":i.descriptionId,...i.getFloatingProps(t),children:t.children})})})}):null});$.forwardRef(function({children:t,...n},r){const{setLabelId:i}=Dp(),o=Ep();return $.useLayoutEffect(()=>(i(o),()=>i(void 0)),[o,i]),b.jsx("h2",{...n,ref:r,id:o,children:t})});$.forwardRef(function({children:t,...n},r){const{setDescriptionId:i}=Dp(),o=Ep();return $.useLayoutEffect(()=>(i(o),()=>i(void 0)),[o,i]),b.jsx("p",{...n,ref:r,id:o,children:t})});$.forwardRef(function(t,n){const{setOpen:r}=Dp();return b.jsx("button",{type:"button",...t,ref:n,onClick:()=>r(!1)})});const vQ="modulepreload",yQ=function(e,t){return new URL(e,t).href},zx={},KA=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),f=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(h=>{if(h=yQ(h,r),h in zx)return;zx[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(!!r)for(let E=s.length-1;E>=0;E--){const y=s[E];if(y.href===h&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${p}`))return;const w=document.createElement("link");if(w.rel=d?"stylesheet":vQ,d||(w.as="script"),w.crossOrigin="",w.href=h,f&&w.setAttribute("nonce",f),document.head.appendChild(w),d)return new Promise((E,y)=>{w.addEventListener("load",E),w.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},YA=({children:e})=>b.jsx("div",{className:"ttd-dialog-panels",children:e}),Dm=({label:e,children:t,panelAction:n,panelActionDisabled:r=!1,onTextSubmitInProgress:i,renderTopRight:o,renderSubmitShortcut:s,renderBottomRight:a})=>b.jsxs("div",{className:"ttd-dialog-panel",children:[b.jsxs("div",{className:"ttd-dialog-panel__header",children:[b.jsx("label",{children:e}),o==null?void 0:o()]}),t,b.jsxs("div",{className:Dn("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[b.jsx("button",{className:"ttd-dialog-panel-button drawnix-button ",onClick:n&&n.action,disabled:r||i,children:b.jsxs("div",{className:Dn({invisible:i}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&b.jsx("span",{children:n.icon})]})}),!r&&!i&&(s==null?void 0:s()),a==null?void 0:a()]})]}),Vx={CTRL_OR_CMD:YO||j3?"metaKey":"ctrlKey",ENTER:"Enter"},qA=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:r})=>{const i=$.useRef(null),o=$.useRef(r);return o.current=r,$.useEffect(()=>{if(!o.current)return;const s=i.current;if(s){const a=f=>{var h;f[Vx.CTRL_OR_CMD]&&f.key===Vx.ENTER&&(f.preventDefault(),(h=o.current)==null||h.call(o))};return s.addEventListener(Jg.KEYDOWN,a),()=>{s.removeEventListener(Jg.KEYDOWN,a)}}},[]),b.jsx("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:i})},wQ=({error:e})=>b.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",b.jsx("p",{children:e})]}),ZA=({error:e,value:t,loaded:n})=>{const r=[$D,kT,TS,NT],i={readonly:!0,hideScrollbar:!1,disabledScrollOnNonFocus:!0,themeColors:ZD};return b.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&b.jsx(wQ,{error:e.message}),b.jsx("div",{style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container",children:b.jsx(MS,{value:t,options:i,plugins:r,children:b.jsx(RP,{})})})]})},QA=()=>b.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[b.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:vx("CtrlOrCmd")}),b.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:vx("Enter")})]}),CQ=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,xQ=()=>{const{appState:e,setAppState:t}=As(),[n,r]=$.useState({loaded:!1,api:Promise.resolve({parseMermaidToDrawnix:async()=>({elements:[]})})});$.useEffect(()=>{(async()=>{try{const _=await KA(()=>import("./index-b7xzaBnd.js").then(F=>F.b6),[],import.meta.url);r({loaded:!0,api:Promise.resolve(_)})}catch(_){console.error("Failed to load mermaid library:",_),d(new Error(" Mermaid "))}})()},[]);const[i,o]=$.useState(()=>CQ),[s,a]=$.useState(()=>[]),f=$.useDeferredValue(i.trim()),[h,d]=$.useState(null),p=Zr(),[v,w]=$.useState(""),[E,y]=$.useState(!1);$.useEffect(()=>{(async()=>{try{const _=await n.api;let F;try{F=await _.parseMermaidToDrawnix(f)}catch{F=await _.parseMermaidToDrawnix(f.replace(/"/g,"'"))}const{elements:j}=F;a(j),d(null)}catch(_){d(_)}})()},[f,n]);const S=async()=>{if(!(!v||E)){y(!0),d(null);try{const R=await fetch("llm/invoke",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"mermaid",prompt:v})});if(!R.ok)throw new Error(`HTTP error! status: ${R.status}`);const _=await R.json();if(_&&_.result)o(_.result),w("");else throw new Error("Invalid response format from API")}catch(R){console.error("API call failed",R),R instanceof Error?d(new Error(`AIMermaid: ${R.message}`)):d(new Error("AIMermaid: "))}finally{y(!1)}}},A=R=>{R.key==="Enter"&&(R.preventDefault(),S())},B=()=>{if(!s.length)return;const R=I.getBoardContainer(p).getBoundingClientRect(),_=[R.width/2,R.height/2],F=p.viewport.zoom,j=S0(p),z=j[0]+_[0]/F,Q=j[1]+_[1]/F,se=s,te=M.getBoundingRectangle(se.filter(ie=>!vo.isGroup(ie)).map(ie=>M.getRectangleByPoints(ie.points))),Ee=[z-te.width/2,Q-te.height/2];p.insertFragment({elements:JSON.parse(JSON.stringify(se))},Ee,ru.paste),t({...e,openDialogType:null})};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"ttd-dialog-desc",children:["",b.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:""}),"",b.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:""}),"",b.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:""})," Drawnix "]}),b.jsxs(YA,{children:[b.jsxs(Dm,{label:"Mermaid ",children:[b.jsx(qA,{input:i,placeholder:" Mermaid ...",onChange:R=>o(R.target.value),onKeyboardSubmit:()=>{B()}}),b.jsxs("div",{className:"prompt-container",style:{marginTop:"10px",display:"flex",gap:"8px"},children:[b.jsx("input",{type:"text",value:v,onChange:R=>w(R.target.value),placeholder:" Mermaid...",disabled:E,onKeyDown:A,style:{flexGrow:1,padding:"8px",border:"1px solid #ccc",borderRadius:"4px"}}),b.jsx("button",{onClick:S,disabled:E,style:{padding:"0 16px",border:"none",borderRadius:"4px",backgroundColor:E?"#ccc":"#4a90e2",color:"white",cursor:"pointer"},children:E?"...":""})]})]}),b.jsx(Dm,{label:"",panelAction:{action:()=>{B()},label:""},renderSubmitShortcut:()=>b.jsx(QA,{}),children:b.jsx(ZA,{value:s,loaded:n.loaded,error:h})})]})]})},EQ=`# 

-  bug   
  -  
    -    

-    
  -  
    -    

-   
  -   
    -    
    
##      

### Hello world    

####       `,PQ=()=>{const{appState:e,setAppState:t}=As(),[n,r]=$.useState({loaded:!1,api:Promise.resolve({parseMarkdownToDrawnix:(R,_)=>null})});$.useEffect(()=>{(async()=>{try{const _=await KA(()=>import("./index-C1aaqocj.js"),__vite__mapDeps([0,1]),import.meta.url);r({loaded:!0,api:Promise.resolve(_)})}catch(_){console.error("Failed to load mermaid library:",_),d(new Error(" Mermaid "))}})()},[]);const[i,o]=$.useState(()=>EQ),[s,a]=$.useState(()=>[]),f=$.useDeferredValue(i.trim()),[h,d]=$.useState(null),p=Zr(),[v,w]=$.useState(""),[E,y]=$.useState(!1);$.useEffect(()=>{(async()=>{try{const _=await n.api;let F;try{F=await _.parseMarkdownToDrawnix(f)}catch{F=await _.parseMarkdownToDrawnix(f.replace(/"/g,"'"))}const j=F;j.points=[[0,0]],j&&(a([j]),d(null))}catch(_){d(_)}})()},[f,n]);const S=async()=>{if(!(!v||E)){y(!0),d(null);try{const R=await fetch("llm/invoke",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"markdown",prompt:v})});if(!R.ok)throw new Error(`HTTP error! status: ${R.status}`);const _=await R.json();if(_&&_.result)o(_.result),w("");else throw new Error("Invalid response format from API")}catch(R){console.error("API call failed",R),R instanceof Error?d(new Error(`AIMarkdown: ${R.message}`)):d(new Error("AIMarkdown: "))}finally{y(!1)}}},A=R=>{R.key==="Enter"&&(R.preventDefault(),S())},B=()=>{if(!s.length)return;const R=I.getBoardContainer(p).getBoundingClientRect(),_=[R.width/4,R.height/2-20],F=p.viewport.zoom,j=S0(p),z=j[0]+_[0]/F,Q=j[1]+_[1]/F,se=s;p.insertFragment({elements:JSON.parse(JSON.stringify(se))},[z,Q],ru.paste),t({...e,openDialogType:null})};return b.jsxs(YA,{children:[b.jsxs(Dm,{label:"Markdown ",children:[b.jsx(qA,{input:i,placeholder:" Markdown ...",onChange:R=>o(R.target.value),onKeyboardSubmit:()=>{}}),b.jsxs("div",{className:"prompt-container",style:{marginTop:"10px",display:"flex",gap:"8px"},children:[b.jsx("input",{type:"text",value:v,onChange:R=>w(R.target.value),placeholder:" Markdown...",disabled:E,onKeyDown:A,style:{flexGrow:1,padding:"8px",border:"1px solid #ccc",borderRadius:"4px"}}),b.jsx("button",{onClick:S,disabled:E,style:{padding:"0 16px",border:"none",borderRadius:"4px",backgroundColor:E?"#ccc":"#4a90e2",color:"white",cursor:"pointer"},children:E?"...":""})]})]}),b.jsx(Dm,{label:"",panelAction:{action:()=>{B()},label:""},renderSubmitShortcut:()=>b.jsx(QA,{}),children:b.jsx(ZA,{value:s,loaded:n.loaded,error:h})})]})},SQ=({container:e})=>{const{appState:t,setAppState:n}=As();return b.jsxs(b.Fragment,{children:[b.jsx(n4,{open:t.openDialogType===Af.mermaidToDrawnix,onOpenChange:r=>{n({...t,openDialogType:r?Af.mermaidToDrawnix:null})},children:b.jsx(r4,{className:"Dialog ttd-dialog",container:e,children:b.jsx(xQ,{})})}),b.jsx(n4,{open:t.openDialogType===Af.markdownToDrawnix,onOpenChange:r=>{n({...t,openDialogType:r?Af.markdownToDrawnix:null})},children:b.jsx(r4,{className:"Dialog ttd-dialog",container:e,children:b.jsx(PQ,{})})})]})},DQ=({container:e})=>{const{appState:t,setAppState:n}=As(),r=Zr();return b.jsx(n4,{open:t.openCleanConfirm,onOpenChange:i=>{n({...t,openCleanConfirm:i})},children:b.jsxs(r4,{className:"clean-confirm",container:e,children:[b.jsx("h2",{className:"clean-confirm__title",children:""}),b.jsx("p",{className:"clean-confirm__description",children:"?"}),b.jsxs("div",{className:"clean-confirm__actions",children:[b.jsx("button",{className:"clean-confirm__button clean-confirm__button--cancel",onClick:()=>{n({...t,openCleanConfirm:!1})},children:""}),b.jsx("button",{className:"clean-confirm__button clean-confirm__button--ok",autoFocus:!0,onClick:()=>{r.deleteFragment(r.children),n({...t,openCleanConfirm:!1})},children:""})]})]})})},Ux=e=>{const{appState:t}=e;return t&&t.linkState&&t.linkState.isHovering},Xx=e=>{const{appState:t}=e;return t&&t.linkState&&t.linkState.isEditing},TQ=e=>n=>{const{pointerMove:r}=n;let i=null,o=null;return n.pointerMove=s=>{(I.isPointer(n,en.selection)||I.isPointer(n,en.hand))&&!Nf(n)&&!Sf(n)&&!Ux(n)&&!Xx(n)&&ju(n,"with-text-link",()=>{const a=s.target.closest(".plait-board-link");if(a&&a!==i){const f=a.closest(".plait-text-container"),h=Te.toSlateNode(void 0,f),d=Te.toSlateNode(void 0,a);i=a,e({linkState:{targetDom:a,targetElement:d,editor:h,isEditing:!1,isHovering:!1,isHoveringOrigin:!0}}),clearTimeout(o)}else!a&&i&&(o=setTimeout(()=>{!Ux(n)&&!Xx(n)&&e({linkState:null})},300),i=null)}),r(s)},n},AQ=()=>{var y,S,A,B;const[e,t]=$.useState(""),{appState:n,setAppState:r}=As(),i=Zr(),{refs:o,floatingStyles:s}=P7({placement:"top",middleware:[V8(20),U8()]}),a=n.linkState,f=((y=n.linkState)==null?void 0:y.targetDom)||null,h=((S=n.linkState)==null?void 0:S.isEditing)||!1,d=((A=n.linkState)==null?void 0:A.isHoveringOrigin)||!1,p=((B=n.linkState)==null?void 0:B.isHovering)||!1,v=h||d||p,w=$.useRef(n.linkState);$.useEffect(()=>{w.current=n.linkState,n.linkState?t(n.linkState.targetElement.url):t("")},[n.linkState]),$.useEffect(()=>{if(f){const R=f.getBoundingClientRect();o.setPositionReference({getBoundingClientRect(){return{x:R.x,y:R.y,width:R.width,height:R.height,top:R.y,left:R.x,right:R.x+R.width,bottom:R.y+R.height}}})}},[i.viewport,f]),$.useEffect(()=>{const R=_=>{if(o.floating.current&&!o.floating.current.contains(_.target)){if(w.current){const F=Gu.getLinkElement(w.current.editor);F&&!F[0].url.trim()&&Gu.unwrapLink(w.current.editor)}r({...n,linkState:null})}};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[]);const E=()=>{if(e!==a.targetElement.url){const _=a.editor,F=a.targetElement,j=Te.findPath(_,F);Oe.setNodes(_,{url:e},{at:j})}const R=Gu.getLinkElement(a.editor);r({...n,linkState:{...n.linkState,targetElement:R[0],isEditing:!1,isHoveringOrigin:!0}})};return v&&b.jsx(Ts,{ref:o.setFloating,style:s,padding:1,className:Dn("link-popup"),onPointerEnter:()=>{p||r({...n,linkState:{...n.linkState,isHovering:!0}})},onPointerLeave:()=>{h||r({...n,linkState:{...n.linkState,isHovering:!1}})},children:b.jsx($o.Row,{gap:1,align:"center",children:h?b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"text",value:e,onChange:R=>{t(R.target.value)},onKeyDown:R=>{R.key==="Enter"&&E()},className:"link-popup__input",autoFocus:!0}),b.jsx(Kn,{type:"icon",visible:!0,icon:pm,title:"Delete link","aria-label":"Delete link",onPointerDown:()=>{const R=a.editor,_=a.targetElement,F=Te.findPath(R,_);Oe.unwrapNodes(R,{at:F}),r({...n,linkState:null})}})]}):b.jsxs(b.Fragment,{children:[b.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"link-popup__link",children:e}),b.jsx(Kn,{className:"link-popup__edit",type:"icon",visible:!0,icon:GT,title:"Edit link","aria-label":"Edit link",onPointerDown:({event:R})=>{R.preventDefault(),r({...n,linkState:{...n.linkState,isEditing:!0}})}}),b.jsx(Kn,{type:"icon",visible:!0,icon:pm,title:"Delete link","aria-label":"Delete link",onPointerDown:()=>{const R=a.editor,_=a.targetElement,F=Te.findPath(R,_);Oe.unwrapNodes(R,{at:F}),r({...n,linkState:null})}})]})})})},BQ=({value:e,viewport:t,theme:n,onChange:r,onSelectionChange:i,onViewportChange:o,onThemeChange:s,onValueChange:a,afterInit:f})=>{const h={readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1,themeColors:ZD},[d,p]=$.useState(()=>{const A=new iK(window.navigator.userAgent);return{pointer:en.hand,isMobile:A.mobile()!==null,isPencilMode:!1,openDialogType:null,openCleanConfirm:!1}}),[v,w]=$.useState(null);v&&(v.appState=d);const E=A=>{p({...d,...A})},y=[$D,TS,kT,oK,NT,QZ(E),hQ,gQ(E),TQ(E)],S=$.useRef(null);return b.jsx(TA.Provider,{value:{appState:d,setAppState:p},children:b.jsx("div",{className:Dn("drawnix",{"drawnix--mobile":d.isMobile}),ref:S,children:b.jsxs(MS,{value:e,viewport:t,theme:n,options:h,plugins:y,onChange:A=>{r&&r(A)},onSelectionChange:i,onViewportChange:o,onThemeChange:s,onValueChange:a,children:[b.jsx(RP,{afterInit:A=>{w(A),f&&f(A)}}),b.jsx(ZZ,{}),b.jsx(PZ,{}),b.jsx(SZ,{}),b.jsx(dQ,{}),b.jsx(zZ,{}),b.jsx(AQ,{}),b.jsx(pQ,{}),b.jsx(SQ,{container:S.current}),b.jsx(DQ,{container:S.current})]})})})};function d3(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bv={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Kx;function RQ(){return Kx||(Kx=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(h,d){if(!i[h]){if(!r[h]){var p=typeof d3=="function"&&d3;if(!d&&p)return p(h,!0);if(a)return a(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var w=i[h]={exports:{}};r[h][0].call(w.exports,function(E){var y=r[h][1][E];return s(y||E)},w,w.exports,n,r,i,o)}return i[h].exports}for(var a=typeof d3=="function"&&d3,f=0;f<o.length;f++)s(o[f]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,a;if(s){var f=0,h=new s(E),d=o.document.createTextNode("");h.observe(d,{characterData:!0}),a=function(){d.data=f=++f%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var p=new o.MessageChannel;p.port1.onmessage=E,a=function(){p.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?a=function(){var S=o.document.createElement("script");S.onreadystatechange=function(){E(),S.onreadystatechange=null,S.parentNode.removeChild(S),S=null},o.document.documentElement.appendChild(S)}:a=function(){setTimeout(E,0)};var v,w=[];function E(){v=!0;for(var S,A,B=w.length;B;){for(A=w,w=[],S=-1;++S<B;)A[S]();B=w.length}v=!1}r.exports=y;function y(S){w.push(S)===1&&!v&&a()}}).call(this,typeof vs<"u"?vs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var a={},f=["REJECTED"],h=["FULFILLED"],d=["PENDING"];r.exports=p;function p(F){if(typeof F!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,F!==s&&y(this,F)}p.prototype.catch=function(F){return this.then(null,F)},p.prototype.then=function(F,j){if(typeof F!="function"&&this.state===h||typeof j!="function"&&this.state===f)return this;var z=new this.constructor(s);if(this.state!==d){var Q=this.state===h?F:j;w(z,Q,this.outcome)}else this.queue.push(new v(z,F,j));return z};function v(F,j,z){this.promise=F,typeof j=="function"&&(this.onFulfilled=j,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(F){a.resolve(this.promise,F)},v.prototype.otherCallFulfilled=function(F){w(this.promise,this.onFulfilled,F)},v.prototype.callRejected=function(F){a.reject(this.promise,F)},v.prototype.otherCallRejected=function(F){w(this.promise,this.onRejected,F)};function w(F,j,z){o(function(){var Q;try{Q=j(z)}catch(se){return a.reject(F,se)}Q===F?a.reject(F,new TypeError("Cannot resolve promise with itself")):a.resolve(F,Q)})}a.resolve=function(F,j){var z=S(E,j);if(z.status==="error")return a.reject(F,z.value);var Q=z.value;if(Q)y(F,Q);else{F.state=h,F.outcome=j;for(var se=-1,te=F.queue.length;++se<te;)F.queue[se].callFulfilled(j)}return F},a.reject=function(F,j){F.state=f,F.outcome=j;for(var z=-1,Q=F.queue.length;++z<Q;)F.queue[z].callRejected(j);return F};function E(F){var j=F&&F.then;if(F&&(typeof F=="object"||typeof F=="function")&&typeof j=="function")return function(){j.apply(F,arguments)}}function y(F,j){var z=!1;function Q(ie){z||(z=!0,a.reject(F,ie))}function se(ie){z||(z=!0,a.resolve(F,ie))}function te(){j(se,Q)}var Ee=S(te);Ee.status==="error"&&Q(Ee.value)}function S(F,j){var z={};try{z.value=F(j),z.status="success"}catch(Q){z.status="error",z.value=Q}return z}p.resolve=A;function A(F){return F instanceof this?F:a.resolve(new this(s),F)}p.reject=B;function B(F){var j=new this(s);return a.reject(j,F)}p.all=R;function R(F){var j=this;if(Object.prototype.toString.call(F)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=F.length,Q=!1;if(!z)return this.resolve([]);for(var se=new Array(z),te=0,Ee=-1,ie=new this(s);++Ee<z;)ce(F[Ee],Ee);return ie;function ce(me,Ce){j.resolve(me).then(Fe,function(Ae){Q||(Q=!0,a.reject(ie,Ae))});function Fe(Ae){se[Ce]=Ae,++te===z&&!Q&&(Q=!0,a.resolve(ie,se))}}}p.race=_;function _(F){var j=this;if(Object.prototype.toString.call(F)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=F.length,Q=!1;if(!z)return this.resolve([]);for(var se=-1,te=new this(s);++se<z;)Ee(F[se]);return te;function Ee(ie){j.resolve(ie).then(function(ce){Q||(Q=!0,a.resolve(te,ce))},function(ce){Q||(Q=!0,a.reject(te,ce))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof vs<"u"?vs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H};function s(H,Y){if(!(H instanceof Y))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var f=a();function h(){try{if(!f||!f.open)return!1;var H=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Y=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!H||Y)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(H,Y){H=H||[],Y=Y||{};try{return new Blob(H,Y)}catch(ee){if(ee.name!=="TypeError")throw ee;for(var W=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,re=new W,ae=0;ae<H.length;ae+=1)re.append(H[ae]);return re.getBlob(Y.type)}}typeof Promise>"u"&&n(3);var p=Promise;function v(H,Y){Y&&H.then(function(W){Y(null,W)},function(W){Y(W)})}function w(H,Y,W){typeof Y=="function"&&H.then(Y),typeof W=="function"&&H.catch(W)}function E(H){return typeof H!="string"&&(console.warn(H+" used as a key, but it is not a string."),H=String(H)),H}function y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var S="local-forage-detect-blob-support",A=void 0,B={},R=Object.prototype.toString,_="readonly",F="readwrite";function j(H){for(var Y=H.length,W=new ArrayBuffer(Y),re=new Uint8Array(W),ae=0;ae<Y;ae++)re[ae]=H.charCodeAt(ae);return W}function z(H){return new p(function(Y){var W=H.transaction(S,F),re=d([""]);W.objectStore(S).put(re,"key"),W.onabort=function(ae){ae.preventDefault(),ae.stopPropagation(),Y(!1)},W.oncomplete=function(){var ae=navigator.userAgent.match(/Chrome\/(\d+)/),ee=navigator.userAgent.match(/Edge\//);Y(ee||!ae||parseInt(ae[1],10)>=43)}}).catch(function(){return!1})}function Q(H){return typeof A=="boolean"?p.resolve(A):z(H).then(function(Y){return A=Y,A})}function se(H){var Y=B[H.name],W={};W.promise=new p(function(re,ae){W.resolve=re,W.reject=ae}),Y.deferredOperations.push(W),Y.dbReady?Y.dbReady=Y.dbReady.then(function(){return W.promise}):Y.dbReady=W.promise}function te(H){var Y=B[H.name],W=Y.deferredOperations.pop();if(W)return W.resolve(),W.promise}function Ee(H,Y){var W=B[H.name],re=W.deferredOperations.pop();if(re)return re.reject(Y),re.promise}function ie(H,Y){return new p(function(W,re){if(B[H.name]=B[H.name]||Pe(),H.db)if(Y)se(H),H.db.close();else return W(H.db);var ae=[H.name];Y&&ae.push(H.version);var ee=f.open.apply(f,ae);Y&&(ee.onupgradeneeded=function(Be){var Ne=ee.result;try{Ne.createObjectStore(H.storeName),Be.oldVersion<=1&&Ne.createObjectStore(S)}catch(je){if(je.name==="ConstraintError")console.warn('The database "'+H.name+'" has been upgraded from version '+Be.oldVersion+" to version "+Be.newVersion+', but the storage "'+H.storeName+'" already exists.');else throw je}}),ee.onerror=function(Be){Be.preventDefault(),re(ee.error)},ee.onsuccess=function(){var Be=ee.result;Be.onversionchange=function(Ne){Ne.target.close()},W(Be),te(H)}})}function ce(H){return ie(H,!1)}function me(H){return ie(H,!0)}function Ce(H,Y){if(!H.db)return!0;var W=!H.db.objectStoreNames.contains(H.storeName),re=H.version<H.db.version,ae=H.version>H.db.version;if(re&&(H.version!==Y&&console.warn('The database "'+H.name+`" can't be downgraded from version `+H.db.version+" to version "+H.version+"."),H.version=H.db.version),ae||W){if(W){var ee=H.db.version+1;ee>H.version&&(H.version=ee)}return!0}return!1}function Fe(H){return new p(function(Y,W){var re=new FileReader;re.onerror=W,re.onloadend=function(ae){var ee=btoa(ae.target.result||"");Y({__local_forage_encoded_blob:!0,data:ee,type:H.type})},re.readAsBinaryString(H)})}function Ae(H){var Y=j(atob(H.data));return d([Y],{type:H.type})}function pe(H){return H&&H.__local_forage_encoded_blob}function ue(H){var Y=this,W=Y._initReady().then(function(){var re=B[Y._dbInfo.name];if(re&&re.dbReady)return re.dbReady});return w(W,H,H),W}function ye(H){se(H);for(var Y=B[H.name],W=Y.forages,re=0;re<W.length;re++){var ae=W[re];ae._dbInfo.db&&(ae._dbInfo.db.close(),ae._dbInfo.db=null)}return H.db=null,ce(H).then(function(ee){return H.db=ee,Ce(H)?me(H):ee}).then(function(ee){H.db=Y.db=ee;for(var Be=0;Be<W.length;Be++)W[Be]._dbInfo.db=ee}).catch(function(ee){throw Ee(H,ee),ee})}function X(H,Y,W,re){re===void 0&&(re=1);try{var ae=H.db.transaction(H.storeName,Y);W(null,ae)}catch(ee){if(re>0&&(!H.db||ee.name==="InvalidStateError"||ee.name==="NotFoundError"))return p.resolve().then(function(){if(!H.db||ee.name==="NotFoundError"&&!H.db.objectStoreNames.contains(H.storeName)&&H.version<=H.db.version)return H.db&&(H.version=H.db.version+1),me(H)}).then(function(){return ye(H).then(function(){X(H,Y,W,re-1)})}).catch(W);W(ee)}}function Pe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ut(H){var Y=this,W={db:null};if(H)for(var re in H)W[re]=H[re];var ae=B[W.name];ae||(ae=Pe(),B[W.name]=ae),ae.forages.push(Y),Y._initReady||(Y._initReady=Y.ready,Y.ready=ue);var ee=[];function Be(){return p.resolve()}for(var Ne=0;Ne<ae.forages.length;Ne++){var je=ae.forages[Ne];je!==Y&&ee.push(je._initReady().catch(Be))}var $e=ae.forages.slice(0);return p.all(ee).then(function(){return W.db=ae.db,ce(W)}).then(function(Xe){return W.db=Xe,Ce(W,Y._defaultConfig.version)?me(W):Xe}).then(function(Xe){W.db=ae.db=Xe,Y._dbInfo=W;for(var tt=0;tt<$e.length;tt++){var Ft=$e[tt];Ft!==Y&&(Ft._dbInfo.db=W.db,Ft._dbInfo.version=W.version)}})}function Me(H,Y){var W=this;H=E(H);var re=new p(function(ae,ee){W.ready().then(function(){X(W._dbInfo,_,function(Be,Ne){if(Be)return ee(Be);try{var je=Ne.objectStore(W._dbInfo.storeName),$e=je.get(H);$e.onsuccess=function(){var Xe=$e.result;Xe===void 0&&(Xe=null),pe(Xe)&&(Xe=Ae(Xe)),ae(Xe)},$e.onerror=function(){ee($e.error)}}catch(Xe){ee(Xe)}})}).catch(ee)});return v(re,Y),re}function K(H,Y){var W=this,re=new p(function(ae,ee){W.ready().then(function(){X(W._dbInfo,_,function(Be,Ne){if(Be)return ee(Be);try{var je=Ne.objectStore(W._dbInfo.storeName),$e=je.openCursor(),Xe=1;$e.onsuccess=function(){var tt=$e.result;if(tt){var Ft=tt.value;pe(Ft)&&(Ft=Ae(Ft));var un=H(Ft,tt.key,Xe++);un!==void 0?ae(un):tt.continue()}else ae()},$e.onerror=function(){ee($e.error)}}catch(tt){ee(tt)}})}).catch(ee)});return v(re,Y),re}function fe(H,Y,W){var re=this;H=E(H);var ae=new p(function(ee,Be){var Ne;re.ready().then(function(){return Ne=re._dbInfo,R.call(Y)==="[object Blob]"?Q(Ne.db).then(function(je){return je?Y:Fe(Y)}):Y}).then(function(je){X(re._dbInfo,F,function($e,Xe){if($e)return Be($e);try{var tt=Xe.objectStore(re._dbInfo.storeName);je===null&&(je=void 0);var Ft=tt.put(je,H);Xe.oncomplete=function(){je===void 0&&(je=null),ee(je)},Xe.onabort=Xe.onerror=function(){var un=Ft.error?Ft.error:Ft.transaction.error;Be(un)}}catch(un){Be(un)}})}).catch(Be)});return v(ae,W),ae}function we(H,Y){var W=this;H=E(H);var re=new p(function(ae,ee){W.ready().then(function(){X(W._dbInfo,F,function(Be,Ne){if(Be)return ee(Be);try{var je=Ne.objectStore(W._dbInfo.storeName),$e=je.delete(H);Ne.oncomplete=function(){ae()},Ne.onerror=function(){ee($e.error)},Ne.onabort=function(){var Xe=$e.error?$e.error:$e.transaction.error;ee(Xe)}}catch(Xe){ee(Xe)}})}).catch(ee)});return v(re,Y),re}function De(H){var Y=this,W=new p(function(re,ae){Y.ready().then(function(){X(Y._dbInfo,F,function(ee,Be){if(ee)return ae(ee);try{var Ne=Be.objectStore(Y._dbInfo.storeName),je=Ne.clear();Be.oncomplete=function(){re()},Be.onabort=Be.onerror=function(){var $e=je.error?je.error:je.transaction.error;ae($e)}}catch($e){ae($e)}})}).catch(ae)});return v(W,H),W}function Ke(H){var Y=this,W=new p(function(re,ae){Y.ready().then(function(){X(Y._dbInfo,_,function(ee,Be){if(ee)return ae(ee);try{var Ne=Be.objectStore(Y._dbInfo.storeName),je=Ne.count();je.onsuccess=function(){re(je.result)},je.onerror=function(){ae(je.error)}}catch($e){ae($e)}})}).catch(ae)});return v(W,H),W}function Ue(H,Y){var W=this,re=new p(function(ae,ee){if(H<0){ae(null);return}W.ready().then(function(){X(W._dbInfo,_,function(Be,Ne){if(Be)return ee(Be);try{var je=Ne.objectStore(W._dbInfo.storeName),$e=!1,Xe=je.openKeyCursor();Xe.onsuccess=function(){var tt=Xe.result;if(!tt){ae(null);return}H===0||$e?ae(tt.key):($e=!0,tt.advance(H))},Xe.onerror=function(){ee(Xe.error)}}catch(tt){ee(tt)}})}).catch(ee)});return v(re,Y),re}function Rt(H){var Y=this,W=new p(function(re,ae){Y.ready().then(function(){X(Y._dbInfo,_,function(ee,Be){if(ee)return ae(ee);try{var Ne=Be.objectStore(Y._dbInfo.storeName),je=Ne.openKeyCursor(),$e=[];je.onsuccess=function(){var Xe=je.result;if(!Xe){re($e);return}$e.push(Xe.key),Xe.continue()},je.onerror=function(){ae(je.error)}}catch(Xe){ae(Xe)}})}).catch(ae)});return v(W,H),W}function It(H,Y){Y=y.apply(this,arguments);var W=this.config();H=typeof H!="function"&&H||{},H.name||(H.name=H.name||W.name,H.storeName=H.storeName||W.storeName);var re=this,ae;if(!H.name)ae=p.reject("Invalid arguments");else{var ee=H.name===W.name&&re._dbInfo.db,Be=ee?p.resolve(re._dbInfo.db):ce(H).then(function(Ne){var je=B[H.name],$e=je.forages;je.db=Ne;for(var Xe=0;Xe<$e.length;Xe++)$e[Xe]._dbInfo.db=Ne;return Ne});H.storeName?ae=Be.then(function(Ne){if(Ne.objectStoreNames.contains(H.storeName)){var je=Ne.version+1;se(H);var $e=B[H.name],Xe=$e.forages;Ne.close();for(var tt=0;tt<Xe.length;tt++){var Ft=Xe[tt];Ft._dbInfo.db=null,Ft._dbInfo.version=je}var un=new p(function(Qt,wt){var Cn=f.open(H.name,je);Cn.onerror=function(Fr){var qo=Cn.result;qo.close(),wt(Fr)},Cn.onupgradeneeded=function(){var Fr=Cn.result;Fr.deleteObjectStore(H.storeName)},Cn.onsuccess=function(){var Fr=Cn.result;Fr.close(),Qt(Fr)}});return un.then(function(Qt){$e.db=Qt;for(var wt=0;wt<Xe.length;wt++){var Cn=Xe[wt];Cn._dbInfo.db=Qt,te(Cn._dbInfo)}}).catch(function(Qt){throw(Ee(H,Qt)||p.resolve()).catch(function(){}),Qt})}}):ae=Be.then(function(Ne){se(H);var je=B[H.name],$e=je.forages;Ne.close();for(var Xe=0;Xe<$e.length;Xe++){var tt=$e[Xe];tt._dbInfo.db=null}var Ft=new p(function(un,Qt){var wt=f.deleteDatabase(H.name);wt.onerror=function(){var Cn=wt.result;Cn&&Cn.close(),Qt(wt.error)},wt.onblocked=function(){console.warn('dropInstance blocked for database "'+H.name+'" until all open connections are closed')},wt.onsuccess=function(){var Cn=wt.result;Cn&&Cn.close(),un(Cn)}});return Ft.then(function(un){je.db=un;for(var Qt=0;Qt<$e.length;Qt++){var wt=$e[Qt];te(wt._dbInfo)}}).catch(function(un){throw(Ee(H,un)||p.resolve()).catch(function(){}),un})})}return v(ae,Y),ae}var St={_driver:"asyncStorage",_initStorage:ut,_support:h(),iterate:K,getItem:Me,setItem:fe,removeItem:we,clear:De,length:Ke,key:Ue,keys:Rt,dropInstance:It};function lt(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wn="~~local_forage_type~",Mt=/^~~local_forage_type~([^~]+)~/,_n="__lfsc__:",ir=_n.length,Tn="arbf",tn="blob",nn="si08",Yn="ui08",Nn="uic8",$t="si16",Dr="si32",vr="ur16",An="ui32",yr="fl32",wr="fl64",or=ir+Tn.length,zi=Object.prototype.toString;function Vi(H){var Y=H.length*.75,W=H.length,re,ae=0,ee,Be,Ne,je;H[H.length-1]==="="&&(Y--,H[H.length-2]==="="&&Y--);var $e=new ArrayBuffer(Y),Xe=new Uint8Array($e);for(re=0;re<W;re+=4)ee=yt.indexOf(H[re]),Be=yt.indexOf(H[re+1]),Ne=yt.indexOf(H[re+2]),je=yt.indexOf(H[re+3]),Xe[ae++]=ee<<2|Be>>4,Xe[ae++]=(Be&15)<<4|Ne>>2,Xe[ae++]=(Ne&3)<<6|je&63;return $e}function Ui(H){var Y=new Uint8Array(H),W="",re;for(re=0;re<Y.length;re+=3)W+=yt[Y[re]>>2],W+=yt[(Y[re]&3)<<4|Y[re+1]>>4],W+=yt[(Y[re+1]&15)<<2|Y[re+2]>>6],W+=yt[Y[re+2]&63];return Y.length%3===2?W=W.substring(0,W.length-1)+"=":Y.length%3===1&&(W=W.substring(0,W.length-2)+"=="),W}function Zu(H,Y){var W="";if(H&&(W=zi.call(H)),H&&(W==="[object ArrayBuffer]"||H.buffer&&zi.call(H.buffer)==="[object ArrayBuffer]")){var re,ae=_n;H instanceof ArrayBuffer?(re=H,ae+=Tn):(re=H.buffer,W==="[object Int8Array]"?ae+=nn:W==="[object Uint8Array]"?ae+=Yn:W==="[object Uint8ClampedArray]"?ae+=Nn:W==="[object Int16Array]"?ae+=$t:W==="[object Uint16Array]"?ae+=vr:W==="[object Int32Array]"?ae+=Dr:W==="[object Uint32Array]"?ae+=An:W==="[object Float32Array]"?ae+=yr:W==="[object Float64Array]"?ae+=wr:Y(new Error("Failed to get type for BinaryArray"))),Y(ae+Ui(re))}else if(W==="[object Blob]"){var ee=new FileReader;ee.onload=function(){var Be=wn+H.type+"~"+Ui(this.result);Y(_n+tn+Be)},ee.readAsArrayBuffer(H)}else try{Y(JSON.stringify(H))}catch(Be){console.error("Couldn't convert value into a JSON string: ",H),Y(null,Be)}}function Bs(H){if(H.substring(0,ir)!==_n)return JSON.parse(H);var Y=H.substring(or),W=H.substring(ir,or),re;if(W===tn&&Mt.test(Y)){var ae=Y.match(Mt);re=ae[1],Y=Y.substring(ae[0].length)}var ee=Vi(Y);switch(W){case Tn:return ee;case tn:return d([ee],{type:re});case nn:return new Int8Array(ee);case Yn:return new Uint8Array(ee);case Nn:return new Uint8ClampedArray(ee);case $t:return new Int16Array(ee);case vr:return new Uint16Array(ee);case Dr:return new Int32Array(ee);case An:return new Uint32Array(ee);case yr:return new Float32Array(ee);case wr:return new Float64Array(ee);default:throw new Error("Unkown type: "+W)}}var Eo={serialize:Zu,deserialize:Bs,stringToBuffer:Vi,bufferToString:Ui};function uu(H,Y,W,re){H.executeSql("CREATE TABLE IF NOT EXISTS "+Y.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],W,re)}function Qu(H){var Y=this,W={db:null};if(H)for(var re in H)W[re]=typeof H[re]!="string"?H[re].toString():H[re];var ae=new p(function(ee,Be){try{W.db=openDatabase(W.name,String(W.version),W.description,W.size)}catch(Ne){return Be(Ne)}W.db.transaction(function(Ne){uu(Ne,W,function(){Y._dbInfo=W,ee()},function(je,$e){Be($e)})},Be)});return W.serializer=Eo,ae}function pi(H,Y,W,re,ae,ee){H.executeSql(W,re,ae,function(Be,Ne){Ne.code===Ne.SYNTAX_ERR?Be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Y.storeName],function(je,$e){$e.rows.length?ee(je,Ne):uu(je,Y,function(){je.executeSql(W,re,ae,ee)},ee)},ee):ee(Be,Ne)},ee)}function Rs(H,Y){var W=this;H=E(H);var re=new p(function(ae,ee){W.ready().then(function(){var Be=W._dbInfo;Be.db.transaction(function(Ne){pi(Ne,Be,"SELECT * FROM "+Be.storeName+" WHERE key = ? LIMIT 1",[H],function(je,$e){var Xe=$e.rows.length?$e.rows.item(0).value:null;Xe&&(Xe=Be.serializer.deserialize(Xe)),ae(Xe)},function(je,$e){ee($e)})})}).catch(ee)});return v(re,Y),re}function Ms(H,Y){var W=this,re=new p(function(ae,ee){W.ready().then(function(){var Be=W._dbInfo;Be.db.transaction(function(Ne){pi(Ne,Be,"SELECT * FROM "+Be.storeName,[],function(je,$e){for(var Xe=$e.rows,tt=Xe.length,Ft=0;Ft<tt;Ft++){var un=Xe.item(Ft),Qt=un.value;if(Qt&&(Qt=Be.serializer.deserialize(Qt)),Qt=H(Qt,un.key,Ft+1),Qt!==void 0){ae(Qt);return}}ae()},function(je,$e){ee($e)})})}).catch(ee)});return v(re,Y),re}function yc(H,Y,W,re){var ae=this;H=E(H);var ee=new p(function(Be,Ne){ae.ready().then(function(){Y===void 0&&(Y=null);var je=Y,$e=ae._dbInfo;$e.serializer.serialize(Y,function(Xe,tt){tt?Ne(tt):$e.db.transaction(function(Ft){pi(Ft,$e,"INSERT OR REPLACE INTO "+$e.storeName+" (key, value) VALUES (?, ?)",[H,Xe],function(){Be(je)},function(un,Qt){Ne(Qt)})},function(Ft){if(Ft.code===Ft.QUOTA_ERR){if(re>0){Be(yc.apply(ae,[H,je,W,re-1]));return}Ne(Ft)}})})}).catch(Ne)});return v(ee,W),ee}function th(H,Y,W){return yc.apply(this,[H,Y,W,1])}function nh(H,Y){var W=this;H=E(H);var re=new p(function(ae,ee){W.ready().then(function(){var Be=W._dbInfo;Be.db.transaction(function(Ne){pi(Ne,Be,"DELETE FROM "+Be.storeName+" WHERE key = ?",[H],function(){ae()},function(je,$e){ee($e)})})}).catch(ee)});return v(re,Y),re}function rh(H){var Y=this,W=new p(function(re,ae){Y.ready().then(function(){var ee=Y._dbInfo;ee.db.transaction(function(Be){pi(Be,ee,"DELETE FROM "+ee.storeName,[],function(){re()},function(Ne,je){ae(je)})})}).catch(ae)});return v(W,H),W}function wc(H){var Y=this,W=new p(function(re,ae){Y.ready().then(function(){var ee=Y._dbInfo;ee.db.transaction(function(Be){pi(Be,ee,"SELECT COUNT(key) as c FROM "+ee.storeName,[],function(Ne,je){var $e=je.rows.item(0).c;re($e)},function(Ne,je){ae(je)})})}).catch(ae)});return v(W,H),W}function Cc(H,Y){var W=this,re=new p(function(ae,ee){W.ready().then(function(){var Be=W._dbInfo;Be.db.transaction(function(Ne){pi(Ne,Be,"SELECT key FROM "+Be.storeName+" WHERE id = ? LIMIT 1",[H+1],function(je,$e){var Xe=$e.rows.length?$e.rows.item(0).key:null;ae(Xe)},function(je,$e){ee($e)})})}).catch(ee)});return v(re,Y),re}function ih(H){var Y=this,W=new p(function(re,ae){Y.ready().then(function(){var ee=Y._dbInfo;ee.db.transaction(function(Be){pi(Be,ee,"SELECT key FROM "+ee.storeName,[],function(Ne,je){for(var $e=[],Xe=0;Xe<je.rows.length;Xe++)$e.push(je.rows.item(Xe).key);re($e)},function(Ne,je){ae(je)})})}).catch(ae)});return v(W,H),W}function Ju(H){return new p(function(Y,W){H.transaction(function(re){re.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ae,ee){for(var Be=[],Ne=0;Ne<ee.rows.length;Ne++)Be.push(ee.rows.item(Ne).name);Y({db:H,storeNames:Be})},function(ae,ee){W(ee)})},function(re){W(re)})})}function ea(H,Y){Y=y.apply(this,arguments);var W=this.config();H=typeof H!="function"&&H||{},H.name||(H.name=H.name||W.name,H.storeName=H.storeName||W.storeName);var re=this,ae;return H.name?ae=new p(function(ee){var Be;H.name===W.name?Be=re._dbInfo.db:Be=openDatabase(H.name,"","",0),H.storeName?ee({db:Be,storeNames:[H.storeName]}):ee(Ju(Be))}).then(function(ee){return new p(function(Be,Ne){ee.db.transaction(function(je){function $e(un){return new p(function(Qt,wt){je.executeSql("DROP TABLE IF EXISTS "+un,[],function(){Qt()},function(Cn,Fr){wt(Fr)})})}for(var Xe=[],tt=0,Ft=ee.storeNames.length;tt<Ft;tt++)Xe.push($e(ee.storeNames[tt]));p.all(Xe).then(function(){Be()}).catch(function(un){Ne(un)})},function(je){Ne(je)})})}):ae=p.reject("Invalid arguments"),v(ae,Y),ae}var ta={_driver:"webSQLStorage",_initStorage:Qu,_support:lt(),iterate:Ms,getItem:Rs,setItem:th,removeItem:nh,clear:rh,length:wc,key:Cc,keys:ih,dropInstance:ea};function xc(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function au(H,Y){var W=H.name+"/";return H.storeName!==Y.storeName&&(W+=H.storeName+"/"),W}function Ja(){var H="_localforage_support_test";try{return localStorage.setItem(H,!0),localStorage.removeItem(H),!1}catch{return!0}}function el(){return!Ja()||localStorage.length>0}function Ec(H){var Y=this,W={};if(H)for(var re in H)W[re]=H[re];return W.keyPrefix=au(H,Y._defaultConfig),el()?(Y._dbInfo=W,W.serializer=Eo,p.resolve()):p.reject()}function F0(H){var Y=this,W=Y.ready().then(function(){for(var re=Y._dbInfo.keyPrefix,ae=localStorage.length-1;ae>=0;ae--){var ee=localStorage.key(ae);ee.indexOf(re)===0&&localStorage.removeItem(ee)}});return v(W,H),W}function L0(H,Y){var W=this;H=E(H);var re=W.ready().then(function(){var ae=W._dbInfo,ee=localStorage.getItem(ae.keyPrefix+H);return ee&&(ee=ae.serializer.deserialize(ee)),ee});return v(re,Y),re}function _0(H,Y){var W=this,re=W.ready().then(function(){for(var ae=W._dbInfo,ee=ae.keyPrefix,Be=ee.length,Ne=localStorage.length,je=1,$e=0;$e<Ne;$e++){var Xe=localStorage.key($e);if(Xe.indexOf(ee)===0){var tt=localStorage.getItem(Xe);if(tt&&(tt=ae.serializer.deserialize(tt)),tt=H(tt,Xe.substring(Be),je++),tt!==void 0)return tt}}});return v(re,Y),re}function bs(H,Y){var W=this,re=W.ready().then(function(){var ae=W._dbInfo,ee;try{ee=localStorage.key(H)}catch{ee=null}return ee&&(ee=ee.substring(ae.keyPrefix.length)),ee});return v(re,Y),re}function Pc(H){var Y=this,W=Y.ready().then(function(){for(var re=Y._dbInfo,ae=localStorage.length,ee=[],Be=0;Be<ae;Be++){var Ne=localStorage.key(Be);Ne.indexOf(re.keyPrefix)===0&&ee.push(Ne.substring(re.keyPrefix.length))}return ee});return v(W,H),W}function oh(H){var Y=this,W=Y.keys().then(function(re){return re.length});return v(W,H),W}function N0(H,Y){var W=this;H=E(H);var re=W.ready().then(function(){var ae=W._dbInfo;localStorage.removeItem(ae.keyPrefix+H)});return v(re,Y),re}function sh(H,Y,W){var re=this;H=E(H);var ae=re.ready().then(function(){Y===void 0&&(Y=null);var ee=Y;return new p(function(Be,Ne){var je=re._dbInfo;je.serializer.serialize(Y,function($e,Xe){if(Xe)Ne(Xe);else try{localStorage.setItem(je.keyPrefix+H,$e),Be(ee)}catch(tt){(tt.name==="QuotaExceededError"||tt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ne(tt),Ne(tt)}})})});return v(ae,W),ae}function uh(H,Y){if(Y=y.apply(this,arguments),H=typeof H!="function"&&H||{},!H.name){var W=this.config();H.name=H.name||W.name,H.storeName=H.storeName||W.storeName}var re=this,ae;return H.name?ae=new p(function(ee){H.storeName?ee(au(H,re._defaultConfig)):ee(H.name+"/")}).then(function(ee){for(var Be=localStorage.length-1;Be>=0;Be--){var Ne=localStorage.key(Be);Ne.indexOf(ee)===0&&localStorage.removeItem(Ne)}}):ae=p.reject("Invalid arguments"),v(ae,Y),ae}var ah={_driver:"localStorageWrapper",_initStorage:Ec,_support:xc(),iterate:_0,getItem:L0,setItem:sh,removeItem:N0,clear:F0,length:oh,key:bs,keys:Pc,dropInstance:uh},lh=function(Y,W){return Y===W||typeof Y=="number"&&typeof W=="number"&&isNaN(Y)&&isNaN(W)},tl=function(Y,W){for(var re=Y.length,ae=0;ae<re;){if(lh(Y[ae],W))return!0;ae++}return!1},ch=Array.isArray||function(H){return Object.prototype.toString.call(H)==="[object Array]"},mn={},fh={},Ko={INDEXEDDB:St,WEBSQL:ta,LOCALSTORAGE:ah},hh=[Ko.INDEXEDDB._driver,Ko.WEBSQL._driver,Ko.LOCALSTORAGE._driver],Yo=["dropInstance"],nl=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Yo),Sc={description:"",driver:hh.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function rl(H,Y){H[Y]=function(){var W=arguments;return H.ready().then(function(){return H[Y].apply(H,W)})}}function mi(){for(var H=1;H<arguments.length;H++){var Y=arguments[H];if(Y)for(var W in Y)Y.hasOwnProperty(W)&&(ch(Y[W])?arguments[0][W]=Y[W].slice():arguments[0][W]=Y[W])}return arguments[0]}var H0=function(){function H(Y){s(this,H);for(var W in Ko)if(Ko.hasOwnProperty(W)){var re=Ko[W],ae=re._driver;this[W]=ae,mn[ae]||this.defineDriver(re)}this._defaultConfig=mi({},Sc),this._config=mi({},this._defaultConfig,Y),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return H.prototype.config=function(W){if((typeof W>"u"?"undefined":o(W))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var re in W){if(re==="storeName"&&(W[re]=W[re].replace(/\W/g,"_")),re==="version"&&typeof W[re]!="number")return new Error("Database version must be a number.");this._config[re]=W[re]}return"driver"in W&&W.driver?this.setDriver(this._config.driver):!0}else return typeof W=="string"?this._config[W]:this._config},H.prototype.defineDriver=function(W,re,ae){var ee=new p(function(Be,Ne){try{var je=W._driver,$e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!W._driver){Ne($e);return}for(var Xe=nl.concat("_initStorage"),tt=0,Ft=Xe.length;tt<Ft;tt++){var un=Xe[tt],Qt=!tl(Yo,un);if((Qt||W[un])&&typeof W[un]!="function"){Ne($e);return}}var wt=function(){for(var qo=function(ra){return function(){var Zo=new Error("Method "+ra+" is not implemented by the current driver"),Po=p.reject(Zo);return v(Po,arguments[arguments.length-1]),Po}},il=0,Dc=Yo.length;il<Dc;il++){var na=Yo[il];W[na]||(W[na]=qo(na))}};wt();var Cn=function(qo){mn[je]&&console.info("Redefining LocalForage driver: "+je),mn[je]=W,fh[je]=qo,Be()};"_support"in W?W._support&&typeof W._support=="function"?W._support().then(Cn,Ne):Cn(!!W._support):Cn(!0)}catch(Fr){Ne(Fr)}});return w(ee,re,ae),ee},H.prototype.driver=function(){return this._driver||null},H.prototype.getDriver=function(W,re,ae){var ee=mn[W]?p.resolve(mn[W]):p.reject(new Error("Driver not found."));return w(ee,re,ae),ee},H.prototype.getSerializer=function(W){var re=p.resolve(Eo);return w(re,W),re},H.prototype.ready=function(W){var re=this,ae=re._driverSet.then(function(){return re._ready===null&&(re._ready=re._initDriver()),re._ready});return w(ae,W,W),ae},H.prototype.setDriver=function(W,re,ae){var ee=this;ch(W)||(W=[W]);var Be=this._getSupportedDrivers(W);function Ne(){ee._config.driver=ee.driver()}function je(tt){return ee._extend(tt),Ne(),ee._ready=ee._initStorage(ee._config),ee._ready}function $e(tt){return function(){var Ft=0;function un(){for(;Ft<tt.length;){var Qt=tt[Ft];return Ft++,ee._dbInfo=null,ee._ready=null,ee.getDriver(Qt).then(je).catch(un)}Ne();var wt=new Error("No available storage method found.");return ee._driverSet=p.reject(wt),ee._driverSet}return un()}}var Xe=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=Xe.then(function(){var tt=Be[0];return ee._dbInfo=null,ee._ready=null,ee.getDriver(tt).then(function(Ft){ee._driver=Ft._driver,Ne(),ee._wrapLibraryMethodsWithReady(),ee._initDriver=$e(Be)})}).catch(function(){Ne();var tt=new Error("No available storage method found.");return ee._driverSet=p.reject(tt),ee._driverSet}),w(this._driverSet,re,ae),this._driverSet},H.prototype.supports=function(W){return!!fh[W]},H.prototype._extend=function(W){mi(this,W)},H.prototype._getSupportedDrivers=function(W){for(var re=[],ae=0,ee=W.length;ae<ee;ae++){var Be=W[ae];this.supports(Be)&&re.push(Be)}return re},H.prototype._wrapLibraryMethodsWithReady=function(){for(var W=0,re=nl.length;W<re;W++)rl(this,nl[W])},H.prototype.createInstance=function(W){return new H(W)},H}(),Bi=new H0;r.exports=Bi},{3:3}]},{},[4])(4)})}(bv)),bv.exports}var MQ=RQ();const n0=uc(MQ),Yx="drawnix-local-data",Ov="main_board_content";n0.config({name:"Drawnix",storeName:"drawnix_store",driver:[n0.INDEXEDDB,n0.LOCALSTORAGE]});function bQ(){const[e,t]=$.useState({children:[]});return $.useEffect(()=>{(async()=>{const r=await n0.getItem(Ov);if(r){t(r);return}const i=localStorage.getItem(Yx);if(i){const o=JSON.parse(i);t(o),await n0.setItem(Ov,o),localStorage.removeItem(Yx);return}t({children:bM})})()},[]),b.jsx(BQ,{value:e.children,viewport:e.viewport,theme:e.theme,onChange:n=>{n0.setItem(Ov,n)},afterInit:n=>{console.log("board initialized"),console.log("add __drawnix__web__debug_log to window, so you can call add log anywhere, like: window.__drawnix__web__console('some thing')"),window.__drawnix__web__console=r=>{OQ(n,r)}}})}const OQ=(e,t)=>{const n=I.getBoardContainer(e).closest(".drawnix");let r=n.querySelector(".drawnix-console");r||(r=document.createElement("div"),r.classList.add("drawnix-console"),n.append(r));const i=document.createElement("div");i.innerHTML=t,r.append(i)},IQ=Tm.createRoot(document.getElementById("root"));IQ.render(b.jsx($.StrictMode,{children:b.jsx(bQ,{})}));export{Vr as A,vt as B,qm as D,ht as F,qe as M,We as N,vo as P,M as R,Es as S,KA as _,mp as a,Qa as b,gk as c,p8 as d,xg as e,NW as f,uc as g,$S as h,Vn as i,it as j,yn as k,f7 as l,Ym as m,h7 as n,vs as o,d3 as p};
